"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/chat",{

/***/ "./src/components/chat/MessageList.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/MessageList.tsx ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MessageList; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"../../node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns/format */ \"../../node_modules/date-fns/esm/format/index.js\");\n/* harmony import */ var _UploadingFileItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./UploadingFileItem */ \"./src/components/chat/UploadingFileItem.tsx\");\n\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return \"\".concat(parts[0].charAt(0)).concat(parts[1].charAt(0)).toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\n/**\n * Renders a file attachment based on its type\n */ const AttachmentPreview = (param)=>{\n    let { attachment } = param;\n    _s();\n    const [loadState, setLoadState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"initial\");\n    const [previewAvailable, setPreviewAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const apiBaseUrl = \"http://localhost:3001\" || 0;\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [showFullscreen, setShowFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [videoError, setVideoError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isBuffering, setIsBuffering] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Si es un video grande, verificar si está disponible\n        if (attachment.isLargeFile && attachment.fileId && attachment.contentType.startsWith(\"video/\")) {\n            checkVideoAvailability();\n        } else {\n            setLoadState(\"loaded\");\n        }\n    }, [\n        attachment.fileId,\n        retryCount\n    ]);\n    // Verificar si el video está disponible\n    const checkVideoAvailability = async ()=>{\n        try {\n            setLoadState(\"loading\");\n            const response = await fetch(\"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId, \"?preview=true\"));\n            if (!response.ok) {\n                if (retryCount < 10) {\n                    // Reintentamos después de un tiempo\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000); // Reintento cada 2 segundos\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"No se pudo acceder al video\");\n                }\n                return;\n            }\n            const metadata = await response.json();\n            if (metadata.complete) {\n                setLoadState(\"loaded\");\n                setPreviewAvailable(true);\n            } else {\n                // Archivo todavía no está completo, reintentamos\n                if (retryCount < 10) {\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000);\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"El video no se complet\\xf3 correctamente\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error verificando disponibilidad del video:\", error);\n            setLoadState(\"error\");\n            setVideoError(\"Error al cargar el video\");\n        }\n    };\n    // Manejo de eventos de video\n    const handleVideoPlay = ()=>{\n        console.log(\"Video iniciado correctamente\");\n    };\n    const handleVideoError = (event)=>{\n        console.error(\"Error en la reproducci\\xf3n del video:\", event);\n        setVideoError(\"Error al reproducir el video\");\n        setLoadState(\"error\");\n    };\n    const handleVideoBuffering = ()=>{\n        setIsBuffering(true);\n    };\n    const handleVideoCanPlay = ()=>{\n        setIsBuffering(false);\n    };\n    // Obtener la fuente del archivo\n    const getAttachmentSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return \"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId);\n        }\n        return \"data:\".concat(attachment.contentType, \";base64,\").concat(attachment.data);\n    };\n    // Obtener la miniatura para videos\n    const getThumbnailSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return \"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId, \"/thumbnail\");\n        }\n        return \"/video-placeholder.png\";\n    };\n    // Descargar el archivo\n    const handleDownload = ()=>{\n        if (loadState !== \"loaded\") return;\n        const a = document.createElement(\"a\");\n        a.href = getAttachmentSource();\n        a.download = attachment.filename || \"download\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    };\n    // Determinar el tipo de archivo\n    const getFileType = ()=>{\n        if (attachment.contentType.startsWith(\"image/\")) return \"image\";\n        if (attachment.contentType.startsWith(\"video/\")) return \"video\";\n        if (attachment.contentType.startsWith(\"audio/\")) return \"audio\";\n        return \"document\";\n    };\n    // Manejar fullscreen para videos\n    const toggleFullscreen = ()=>{\n        if (loadState !== \"loaded\") return;\n        setShowFullscreen(!showFullscreen);\n    };\n    const handleLoadedData = ()=>{\n        setLoadState(\"loaded\");\n    };\n    const handleRetry = ()=>{\n        setRetryCount(0);\n        setLoadState(\"initial\");\n    };\n    const fileType = getFileType();\n    const source = getAttachmentSource();\n    // Render según el tipo de archivo\n    switch(fileType){\n        case \"image\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview image-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: source,\n                        alt: attachment.filename || \"Image\",\n                        className: \"attachment-image\",\n                        onLoad: ()=>setLoadState(\"loaded\"),\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 180,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar la imagen\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 189,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 190,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 188,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 199,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 194,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 206,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 201,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 193,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: source,\n                                    alt: attachment.filename || \"Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 212,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 213,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 211,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 210,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 179,\n                columnNumber: 9\n            }, undefined);\n        case \"video\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview video-preview\",\n                children: [\n                    loadState === \"initial\" || loadState === \"loading\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-placeholder\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 225,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-indicator\",\n                                children: [\n                                    loadState === \"initial\" ? \"Preparando video...\" : \"Cargando video...\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-spinner\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 228,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-progress\",\n                                        children: [\n                                            Math.min(retryCount * 10, 90),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 229,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 226,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 224,\n                        columnNumber: 13\n                    }, undefined) : loadState === \"error\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 234,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"error-message\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: videoError\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 236,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleRetry,\n                                        className: \"retry-button\",\n                                        children: \"Reintentar\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 237,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 235,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 233,\n                        columnNumber: 13\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                        ref: videoRef,\n                        src: source,\n                        controls: true,\n                        className: \"attachment-video loaded\",\n                        onPlay: handleVideoPlay,\n                        onError: handleVideoError,\n                        onWaiting: handleVideoBuffering,\n                        onCanPlay: handleVideoCanPlay,\n                        poster: getThumbnailSource(),\n                        preload: \"metadata\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 241,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 260,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 255,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 267,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 262,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 254,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && loadState === \"loaded\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: source,\n                                    controls: true,\n                                    autoPlay: true,\n                                    className: \"fullscreen-video\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 273,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 279,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 272,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 271,\n                        columnNumber: 13\n                    }, undefined),\n                    isBuffering && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"buffering-indicator\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-spinner\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 285,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Cargando...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 286,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 284,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 222,\n                columnNumber: 9\n            }, undefined);\n        case \"audio\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview audio-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                        src: source,\n                        controls: true,\n                        className: \"attachment-audio\",\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 295,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar el audio\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 303,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 304,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 302,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                            disabled: loadState !== \"loaded\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 313,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 308,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 307,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 294,\n                columnNumber: 9\n            }, undefined);\n        case \"document\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview document-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDCC4\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 323,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 324,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 322,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 328,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 327,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 326,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 321,\n                columnNumber: 9\n            }, undefined);\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDD17\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 338,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 339,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 337,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 343,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 341,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 336,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n_s(AttachmentPreview, \"MozS3G0Wz3FakugRkWPgER438+c=\");\n_c = AttachmentPreview;\n/**\n * Utilidad para reconstruir archivos fragmentados\n */ const reconstructFileFromChunks = (chunks)=>{\n    // Ordenar los chunks por índice (por si acaso)\n    const sortedChunks = [\n        ...chunks\n    ].sort((a, b)=>(a.chunkIndex || 0) - (b.chunkIndex || 0));\n    // Concatenar todos los datos base64\n    const fullBase64 = sortedChunks.map((chunk)=>chunk.data).join(\"\");\n    return fullBase64;\n};\n/**\n * Componente para mostrar archivos reconstruidos de fragmentos\n */ const ReconstructedAttachment = (param)=>{\n    let { originalFile, chunks } = param;\n    var _chunks_, _chunks_1;\n    _s1();\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fullscreenView, setFullscreenView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const toggleExpand = ()=>{\n        setExpanded(!expanded);\n    };\n    const toggleFullscreen = (e)=>{\n        e.stopPropagation();\n        setFullscreenView(!fullscreenView);\n    };\n    const closeFullscreen = ()=>{\n        setFullscreenView(false);\n    };\n    const fileType = (_chunks_ = chunks[0]) === null || _chunks_ === void 0 ? void 0 : _chunks_.fileType;\n    const contentType = (_chunks_1 = chunks[0]) === null || _chunks_1 === void 0 ? void 0 : _chunks_1.contentType;\n    const fullData = reconstructFileFromChunks(chunks);\n    const base64Src = \"data:\".concat(contentType, \";base64,\").concat(fullData);\n    const totalSize = chunks.reduce((total, chunk)=>total + (chunk.size || 0), 0);\n    const formatFileSize = (bytes)=>{\n        if (!bytes) return \"Unknown size\";\n        if (bytes < 1024) return \"\".concat(bytes, \" B\");\n        if (bytes < 1024 * 1024) return \"\".concat((bytes / 1024).toFixed(1), \" KB\");\n        return \"\".concat((bytes / (1024 * 1024)).toFixed(1), \" MB\");\n    };\n    switch(fileType){\n        case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 relative\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-gray-100 rounded-lg overflow-hidden \".concat(expanded ? \"w-full max-w-2xl\" : \"w-72\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                            src: base64Src,\n                                            controls: true,\n                                            className: \"w-full h-full max-h-96 object-contain\",\n                                            controlsList: \"nodownload\",\n                                            onError: (e)=>console.error(\"Video error:\", e),\n                                            children: \"Your browser does not support the video tag.\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute top-2 right-2 flex space-x-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: toggleExpand,\n                                                    title: \"Expand/Collapse\",\n                                                    children: expanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 426,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 425,\n                                                        columnNumber: 23\n                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 430,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 429,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 419,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                    href: base64Src,\n                                                    download: originalFile,\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: (e)=>e.stopPropagation(),\n                                                    title: \"Download video\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 442,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 441,\n                                                        columnNumber: 21\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 434,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 418,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 408,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"px-3 py-2 text-sm text-gray-700\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"font-medium truncate max-w-xs\",\n                                            children: originalFile\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 448,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: formatFileSize(totalSize)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 449,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 447,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 407,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 406,\n                        columnNumber: 11\n                    }, undefined),\n                    fullscreenView && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center\",\n                        onClick: closeFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative w-full max-w-6xl max-h-screen p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: base64Src,\n                                    controls: true,\n                                    className: \"w-full h-full max-h-[90vh] object-contain\",\n                                    children: \"Your browser does not support the video tag.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 457,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"absolute top-4 right-4 bg-white text-black p-2 rounded-full\",\n                                    onClick: closeFullscreen,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-6 w-6\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 469,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 468,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 464,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 456,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 455,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true);\n        // Para otros tipos de archivos, implementar manejo similar...\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 bg-gray-100 rounded-lg p-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-shrink-0 mr-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-8 w-8 text-gray-400\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 485,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 484,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 483,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-grow\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm font-medium\",\n                                    children: originalFile\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 489,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        formatFileSize(totalSize),\n                                        \" • Reconstruido de \",\n                                        chunks.length,\n                                        \" fragmentos\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 490,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 488,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                            href: base64Src,\n                            download: originalFile,\n                            className: \"ml-3 bg-blue-100 text-blue-800 p-1.5 rounded-full hover:bg-blue-200 transition-all\",\n                            title: \"Download file\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 501,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 500,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 494,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 482,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 481,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n_s1(ReconstructedAttachment, \"Ke+JiRZ5hgqdupqhUgW5MgdF028=\");\n_c1 = ReconstructedAttachment;\nfunction MessageList() {\n    _s2();\n    const { messages, typingUsers, uploadingFiles, retryFileUpload, cancelFileUpload } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [fileChunks, setFileChunks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    // Scroll to bottom when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages\n    ]);\n    // Handle failed image loads\n    const handleImageError = (senderId)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [senderId]: true\n            }));\n    };\n    // Reconstruir archivos fragmentados\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Buscar todos los chunks en los mensajes\n        const chunks = {};\n        messages.forEach((message)=>{\n            if (!message.attachments) return;\n            message.attachments.forEach((attachment)=>{\n                if (attachment.isChunk && attachment.originalFilename) {\n                    if (!chunks[attachment.originalFilename]) {\n                        chunks[attachment.originalFilename] = [];\n                    }\n                    chunks[attachment.originalFilename].push(attachment);\n                }\n            });\n        });\n        setFileChunks(chunks);\n    }, [\n        messages\n    ]);\n    // Pending uploads section\n    const hasUploadingFiles = Object.keys(uploadingFiles).length > 0;\n    // Render uploading files\n    const renderUploadingFiles = ()=>{\n        if (!hasUploadingFiles) return null;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"uploading-files-container my-4 p-3 bg-gray-100 rounded-lg\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                    className: \"text-sm font-medium text-gray-700 mb-2\",\n                    children: \"Archivos subiendo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 569,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"uploading-files-list space-y-2\",\n                    children: Object.entries(uploadingFiles).map((param)=>{\n                        let [tempId, progress] = param;\n                        // Buscamos el archivo correspondiente en los mensajes\n                        let file;\n                        for (const message of messages){\n                            if (message.attachments) {\n                                file = message.attachments.find((att)=>att.tempId === tempId);\n                                if (file) break;\n                            }\n                        }\n                        if (!file) return null;\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UploadingFileItem__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            file: file,\n                            progress: progress,\n                            onRetry: ()=>retryFileUpload(file),\n                            onCancel: ()=>cancelFileUpload(file)\n                        }, tempId, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 584,\n                            columnNumber: 15\n                        }, this);\n                    })\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 570,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 568,\n            columnNumber: 7\n        }, this);\n    };\n    if (uploadingFiles.length > 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 601,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-2 text-gray-500\",\n                    children: \"Uploading files...\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 602,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                    children: Object.entries(uploadingFiles).map((param)=>{\n                        let [tempId, progress] = param;\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UploadingFileItem__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                file: uploadingFiles[tempId],\n                                retryFileUpload: retryFileUpload,\n                                cancelFileUpload: cancelFileUpload\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 606,\n                                columnNumber: 15\n                            }, this)\n                        }, tempId, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 605,\n                            columnNumber: 13\n                        }, this);\n                    })\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 603,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 600,\n            columnNumber: 7\n        }, this);\n    }\n    if (messages.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-gray-100 p-3 rounded-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-10 w-10 text-gray-400\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 1.5,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 623,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 622,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 621,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-gray-500 text-center\",\n                    children: \"No messages yet. Send a message to start the conversation!\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 626,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 620,\n            columnNumber: 7\n        }, this);\n    }\n    // Group messages by date\n    const messagesByDate = messages.reduce((groups, message)=>{\n        const date = new Date(message.createdAt).toLocaleDateString();\n        if (!groups[date]) {\n            groups[date] = [];\n        }\n        groups[date].push(message);\n        return groups;\n    }, {});\n    // Get array of typing users (excluding current user)\n    const typingUsersList = Object.entries(typingUsers).filter((param)=>{\n        let [userId, isTyping] = param;\n        return isTyping && userId !== (user === null || user === void 0 ? void 0 : user.id);\n    }).map((param)=>{\n        let [userId, value] = param;\n        return typeof value === \"string\" ? value : userId;\n    });\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full overflow-y-auto p-4 space-y-4\",\n        children: [\n            renderUploadingFiles(),\n            Object.entries(messagesByDate).map((param)=>{\n                let [date, dateMessages] = param;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gray-100 px-3 py-1 rounded-full\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: (0,date_fns_format__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(new Date(date), \"MMMM d, yyyy\")\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 655,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 654,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 653,\n                            columnNumber: 11\n                        }, this),\n                        dateMessages.map((message)=>{\n                            var _message_attachments;\n                            const isOwnMessage = message.sender._id === (user === null || user === void 0 ? void 0 : user.id);\n                            const senderId = message.sender._id || \"\";\n                            const hasAttachments = message.attachments && message.attachments.length > 0;\n                            const nonChunkAttachments = ((_message_attachments = message.attachments) === null || _message_attachments === void 0 ? void 0 : _message_attachments.filter((att)=>!att.isChunk)) || [];\n                            // Filtrar mensajes que son solo chunks para evitar duplicados en la UI\n                            if ((!message.attachments || message.attachments.length === 0 || message.attachments.length > 0 && message.attachments.every((att)=>att.isChunk)) && (!message.content || message.content.includes(\"Parte \") || message.content.includes(\"Enviando \") || message.content === \"Enviando archivos grandes...\")) {\n                                return null;\n                            }\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex \".concat(isOwnMessage ? \"justify-end\" : \"justify-start\"),\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex max-w-xs md:max-w-md lg:max-w-lg \".concat(isOwnMessage ? \"flex-row-reverse\" : \"\"),\n                                    children: [\n                                        !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-shrink-0 mr-3\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden\",\n                                                children: message.sender.avatar && isValidImageSrc(message.sender.avatar) && !failedImages[senderId] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                    src: message.sender.avatar,\n                                                    alt: message.sender.name,\n                                                    width: 32,\n                                                    height: 32,\n                                                    className: \"h-full w-full object-cover\",\n                                                    onError: ()=>handleImageError(senderId)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 689,\n                                                    columnNumber: 27\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-sm font-medium text-gray-700\",\n                                                    children: getInitials(message.sender.name)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 698,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                lineNumber: 687,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 686,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"\\n                    \".concat(isOwnMessage ? \"bg-primary-500 text-white rounded-tl-lg rounded-tr-none\" : \"bg-gray-200 text-gray-800 rounded-tr-lg rounded-tl-none\", \"\\n                    rounded-bl-lg rounded-br-lg p-3 shadow-sm\\n                  \"),\n                                            children: [\n                                                !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"font-medium text-xs mb-1\",\n                                                    children: message.sender.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 714,\n                                                    columnNumber: 23\n                                                }, this),\n                                                message.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 719,\n                                                    columnNumber: 23\n                                                }, this),\n                                                hasAttachments && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"\".concat(message.content ? \"mt-2\" : \"\"),\n                                                    children: nonChunkAttachments === null || nonChunkAttachments === void 0 ? void 0 : nonChunkAttachments.map((attachment, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AttachmentPreview, {\n                                                            attachment: attachment\n                                                        }, \"\".concat(message._id, \"-attachment-\").concat(index), false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 728,\n                                                            columnNumber: 27\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 726,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs mt-1 opacity-80\",\n                                                    children: (0,date_fns_format__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(new Date(message.createdAt), \"h:mm a\")\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 736,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 706,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 684,\n                                    columnNumber: 17\n                                }, this)\n                            }, message._id, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 680,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    ]\n                }, date, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 652,\n                    columnNumber: 9\n                }, this);\n            }),\n            Object.entries(fileChunks).filter((param)=>{\n                let [_, info] = param;\n                return info.complete;\n            }).map((param)=>{\n                let [filename, info] = param;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 border border-gray-200 p-3 rounded-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-medium mb-2 text-gray-700\",\n                            children: \"Archivo reconstruido:\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 752,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReconstructedAttachment, {\n                            originalFile: filename,\n                            chunks: info.chunks\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 755,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, \"reconstructed-\".concat(filename), true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 751,\n                    columnNumber: 11\n                }, this);\n            }),\n            typingUsersList.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center space-x-2 text-gray-500 text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex space-x-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 767,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"200ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 768,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"400ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 769,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 766,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: typingUsersList.length === 1 ? \"\".concat(typingUsersList[0], \" is typing...\") : \"\".concat(typingUsersList.length, \" people are typing...\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 771,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 765,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesEndRef\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 780,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n        lineNumber: 649,\n        columnNumber: 5\n    }, this);\n}\n_s2(MessageList, \"I+2yZIWuRCwaKvKylk/PVtnmoF4=\", false, function() {\n    return [\n        _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat,\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth\n    ];\n});\n_c2 = MessageList;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"AttachmentPreview\");\n$RefreshReg$(_c1, \"ReconstructedAttachment\");\n$RefreshReg$(_c2, \"MessageList\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7Ozs7O21CQU5iLGlCQUEwQixPQUFUbkM7Ozs7OztZQWE5QndILGdCQUFnQmpMLE1BQU0sR0FBRyxtQkFDeEIsOERBQUNvRTtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7Z0NBQUlDLFdBQVU7Z0NBQWtEaUksT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFNOzs7Ozs7MENBQ2hHLDhEQUFDbkk7Z0NBQUlDLFdBQVU7Z0NBQWtEaUksT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFROzs7Ozs7MENBQ2xHLDhEQUFDbkk7Z0NBQUlDLFdBQVU7Z0NBQWtEaUksT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFROzs7Ozs7Ozs7Ozs7a0NBRXBHLDhEQUFDekg7a0NBQ0VtRyxnQkFBZ0JqTCxNQUFNLEtBQUssSUFDeEIsR0FBc0IsT0FBbkJpTCxlQUFlLENBQUMsRUFBRSxFQUFDLG1CQUN0QixHQUEwQixPQUF2QkEsZ0JBQWdCakwsTUFBTSxFQUFDOzs7Ozs7Ozs7Ozs7MEJBTXBDLDhEQUFDb0U7Z0JBQUljLEtBQUswRDs7Ozs7Ozs7Ozs7O0FBR2hCO0lBeFF3QlA7O1FBQytEaEosMERBQU9BO1FBQzNFRSwwREFBT0E7OztNQUZGOEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9NZXNzYWdlTGlzdC50c3g/NTdmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VDaGF0LCBGaWxlVHlwZSwgRmlsZUF0dGFjaG1lbnQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCBVcGxvYWRpbmdGaWxlSXRlbSwgeyBVcGxvYWRlclByb2dyZXNzIH0gZnJvbSAnLi9VcGxvYWRpbmdGaWxlSXRlbSc7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBpbml0aWFscyBmcm9tIGEgbmFtZVxuICogUmV0dXJucyB1cCB0byAyIGluaXRpYWxzIChmaXJzdCBhbmQgbGFzdCBuYW1lIG9yIGZpcnN0IHR3byB3b3JkcylcbiAqL1xuY29uc3QgZ2V0SW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIFxuICBjb25zdCBwYXJ0cyA9IG5hbWUudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuICAgIC8vIEdldCBmaXJzdCBsZXR0ZXIgb2YgZmlyc3QgYW5kIGxhc3QgbmFtZVxuICAgIHJldHVybiBgJHtwYXJ0c1swXS5jaGFyQXQoMCl9JHtwYXJ0c1sxXS5jaGFyQXQoMCl9YC50b1VwcGVyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCBmaXJzdCB0d28gbGV0dGVycyBvZiBzaW5nbGUgbmFtZVxuICAgIHJldHVybiBuYW1lLnN1YnN0cmluZygwLCBNYXRoLm1pbigyLCBuYW1lLmxlbmd0aCkpLnRvVXBwZXJDYXNlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIGEgc3RyaW5nIGlzIGEgdmFsaWQgaW1hZ2UgVVJMIG9yIGJhc2U2NCBpbWFnZSBkYXRhXG4gKi9cbmNvbnN0IGlzVmFsaWRJbWFnZVNyYyA9IChzcmM6IHN0cmluZyB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoIXNyYykgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQ2hlY2sgaWYgaXQncyBhIHZhbGlkIFVSTCBvciBiYXNlNjQgZGF0YVxuICByZXR1cm4gKFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJylcbiAgKTtcbn07XG5cbi8qKlxuICogUmVuZGVycyBhIGZpbGUgYXR0YWNobWVudCBiYXNlZCBvbiBpdHMgdHlwZVxuICovXG5jb25zdCBBdHRhY2htZW50UHJldmlldyA9ICh7IGF0dGFjaG1lbnQgfTogeyBhdHRhY2htZW50OiBGaWxlQXR0YWNobWVudCB9KSA9PiB7XG4gIGNvbnN0IFtsb2FkU3RhdGUsIHNldExvYWRTdGF0ZV0gPSB1c2VTdGF0ZTwnaW5pdGlhbCcgfCAnbG9hZGluZycgfCAnbG9hZGVkJyB8ICdlcnJvcic+KCdpbml0aWFsJyk7XG4gIGNvbnN0IFtwcmV2aWV3QXZhaWxhYmxlLCBzZXRQcmV2aWV3QXZhaWxhYmxlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgYXBpQmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG4gIGNvbnN0IHZpZGVvUmVmID0gdXNlUmVmPEhUTUxWaWRlb0VsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBbc2hvd0Z1bGxzY3JlZW4sIHNldFNob3dGdWxsc2NyZWVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JldHJ5Q291bnQsIHNldFJldHJ5Q291bnRdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFt2aWRlb0Vycm9yLCBzZXRWaWRlb0Vycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNCdWZmZXJpbmcsIHNldElzQnVmZmVyaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNpIGVzIHVuIHZpZGVvIGdyYW5kZSwgdmVyaWZpY2FyIHNpIGVzdMOhIGRpc3BvbmlibGVcbiAgICBpZiAoYXR0YWNobWVudC5pc0xhcmdlRmlsZSAmJiBhdHRhY2htZW50LmZpbGVJZCAmJiBhdHRhY2htZW50LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ3ZpZGVvLycpKSB7XG4gICAgICBjaGVja1ZpZGVvQXZhaWxhYmlsaXR5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldExvYWRTdGF0ZSgnbG9hZGVkJyk7XG4gICAgfVxuICB9LCBbYXR0YWNobWVudC5maWxlSWQsIHJldHJ5Q291bnRdKTtcblxuICAvLyBWZXJpZmljYXIgc2kgZWwgdmlkZW8gZXN0w6EgZGlzcG9uaWJsZVxuICBjb25zdCBjaGVja1ZpZGVvQXZhaWxhYmlsaXR5ID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkU3RhdGUoJ2xvYWRpbmcnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZVVybH0vY2hhdHMvZmlsZS8ke2F0dGFjaG1lbnQuZmlsZUlkfT9wcmV2aWV3PXRydWVgKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBpZiAocmV0cnlDb3VudCA8IDEwKSB7XG4gICAgICAgICAgLy8gUmVpbnRlbnRhbW9zIGRlc3B1w6lzIGRlIHVuIHRpZW1wb1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc2V0UmV0cnlDb3VudChwcmV2ID0+IHByZXYgKyAxKTtcbiAgICAgICAgICB9LCAyMDAwKTsgLy8gUmVpbnRlbnRvIGNhZGEgMiBzZWd1bmRvc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvYWRTdGF0ZSgnZXJyb3InKTtcbiAgICAgICAgICBzZXRWaWRlb0Vycm9yKCdObyBzZSBwdWRvIGFjY2VkZXIgYWwgdmlkZW8nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKG1ldGFkYXRhLmNvbXBsZXRlKSB7XG4gICAgICAgIHNldExvYWRTdGF0ZSgnbG9hZGVkJyk7XG4gICAgICAgIHNldFByZXZpZXdBdmFpbGFibGUodHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBcmNoaXZvIHRvZGF2w61hIG5vIGVzdMOhIGNvbXBsZXRvLCByZWludGVudGFtb3NcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPCAxMCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc2V0UmV0cnlDb3VudChwcmV2ID0+IHByZXYgKyAxKTtcbiAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRMb2FkU3RhdGUoJ2Vycm9yJyk7XG4gICAgICAgICAgc2V0VmlkZW9FcnJvcignRWwgdmlkZW8gbm8gc2UgY29tcGxldMOzIGNvcnJlY3RhbWVudGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdmVyaWZpY2FuZG8gZGlzcG9uaWJpbGlkYWQgZGVsIHZpZGVvOlwiLCBlcnJvcik7XG4gICAgICBzZXRMb2FkU3RhdGUoJ2Vycm9yJyk7XG4gICAgICBzZXRWaWRlb0Vycm9yKCdFcnJvciBhbCBjYXJnYXIgZWwgdmlkZW8nKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTWFuZWpvIGRlIGV2ZW50b3MgZGUgdmlkZW9cbiAgY29uc3QgaGFuZGxlVmlkZW9QbGF5ID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdWaWRlbyBpbmljaWFkbyBjb3JyZWN0YW1lbnRlJyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlkZW9FcnJvciA9IChldmVudDogUmVhY3QuU3ludGhldGljRXZlbnQ8SFRNTFZpZGVvRWxlbWVudCwgRXZlbnQ+KSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gbGEgcmVwcm9kdWNjacOzbiBkZWwgdmlkZW86JywgZXZlbnQpO1xuICAgIHNldFZpZGVvRXJyb3IoJ0Vycm9yIGFsIHJlcHJvZHVjaXIgZWwgdmlkZW8nKTtcbiAgICBzZXRMb2FkU3RhdGUoJ2Vycm9yJyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlkZW9CdWZmZXJpbmcgPSAoKSA9PiB7XG4gICAgc2V0SXNCdWZmZXJpbmcodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlkZW9DYW5QbGF5ID0gKCkgPT4ge1xuICAgIHNldElzQnVmZmVyaW5nKGZhbHNlKTtcbiAgfTtcblxuICAvLyBPYnRlbmVyIGxhIGZ1ZW50ZSBkZWwgYXJjaGl2b1xuICBjb25zdCBnZXRBdHRhY2htZW50U291cmNlID0gKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50LmlzTGFyZ2VGaWxlICYmIGF0dGFjaG1lbnQuZmlsZUlkKSB7XG4gICAgICByZXR1cm4gYCR7YXBpQmFzZVVybH0vY2hhdHMvZmlsZS8ke2F0dGFjaG1lbnQuZmlsZUlkfWA7XG4gICAgfVxuICAgIHJldHVybiBgZGF0YToke2F0dGFjaG1lbnQuY29udGVudFR5cGV9O2Jhc2U2NCwke2F0dGFjaG1lbnQuZGF0YX1gO1xuICB9O1xuXG4gIC8vIE9idGVuZXIgbGEgbWluaWF0dXJhIHBhcmEgdmlkZW9zXG4gIGNvbnN0IGdldFRodW1ibmFpbFNvdXJjZSA9ICgpID0+IHtcbiAgICBpZiAoYXR0YWNobWVudC5pc0xhcmdlRmlsZSAmJiBhdHRhY2htZW50LmZpbGVJZCkge1xuICAgICAgcmV0dXJuIGAke2FwaUJhc2VVcmx9L2NoYXRzL2ZpbGUvJHthdHRhY2htZW50LmZpbGVJZH0vdGh1bWJuYWlsYDtcbiAgICB9XG4gICAgcmV0dXJuICcvdmlkZW8tcGxhY2Vob2xkZXIucG5nJztcbiAgfTtcblxuICAvLyBEZXNjYXJnYXIgZWwgYXJjaGl2b1xuICBjb25zdCBoYW5kbGVEb3dubG9hZCA9ICgpID0+IHtcbiAgICBpZiAobG9hZFN0YXRlICE9PSAnbG9hZGVkJykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gZ2V0QXR0YWNobWVudFNvdXJjZSgpO1xuICAgIGEuZG93bmxvYWQgPSBhdHRhY2htZW50LmZpbGVuYW1lIHx8ICdkb3dubG9hZCc7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICBhLmNsaWNrKCk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmFyIGVsIHRpcG8gZGUgYXJjaGl2b1xuICBjb25zdCBnZXRGaWxlVHlwZSA9ICgpID0+IHtcbiAgICBpZiAoYXR0YWNobWVudC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkgcmV0dXJuICdpbWFnZSc7XG4gICAgaWYgKGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHJldHVybiAndmlkZW8nO1xuICAgIGlmIChhdHRhY2htZW50LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ2F1ZGlvLycpKSByZXR1cm4gJ2F1ZGlvJztcbiAgICByZXR1cm4gJ2RvY3VtZW50JztcbiAgfTtcblxuICAvLyBNYW5lamFyIGZ1bGxzY3JlZW4gcGFyYSB2aWRlb3NcbiAgY29uc3QgdG9nZ2xlRnVsbHNjcmVlbiA9ICgpID0+IHtcbiAgICBpZiAobG9hZFN0YXRlICE9PSAnbG9hZGVkJykgcmV0dXJuO1xuICAgIHNldFNob3dGdWxsc2NyZWVuKCFzaG93RnVsbHNjcmVlbik7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTG9hZGVkRGF0YSA9ICgpID0+IHtcbiAgICBzZXRMb2FkU3RhdGUoJ2xvYWRlZCcpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVJldHJ5ID0gKCkgPT4ge1xuICAgIHNldFJldHJ5Q291bnQoMCk7XG4gICAgc2V0TG9hZFN0YXRlKCdpbml0aWFsJyk7XG4gIH07XG5cbiAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZSgpO1xuICBjb25zdCBzb3VyY2UgPSBnZXRBdHRhY2htZW50U291cmNlKCk7XG4gIFxuICAvLyBSZW5kZXIgc2Vnw7puIGVsIHRpcG8gZGUgYXJjaGl2b1xuICBzd2l0Y2ggKGZpbGVUeXBlKSB7XG4gICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgaW1hZ2UtcHJldmlld1wiPlxuICAgICAgICAgIDxpbWcgXG4gICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICBhbHQ9e2F0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ0ltYWdlJ30gXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhdHRhY2htZW50LWltYWdlXCJcbiAgICAgICAgICAgIG9uTG9hZD17KCkgPT4gc2V0TG9hZFN0YXRlKCdsb2FkZWQnKX1cbiAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHNldExvYWRTdGF0ZSgnZXJyb3InKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdlcnJvcicgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWVycm9yXCI+XG4gICAgICAgICAgICAgIDxwPkVycm9yIGFsIGNhcmdhciBsYSBpbWFnZW48L3A+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9PlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7wn5SNPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3Nob3dGdWxsc2NyZWVuICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1vdmVybGF5XCIgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1jb250ZW50XCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17c291cmNlfSBhbHQ9e2F0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ0ltYWdlJ30gLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59IGNsYXNzTmFtZT1cImNsb3NlLWJ1dHRvblwiPsOXPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IHZpZGVvLXByZXZpZXdcIj5cbiAgICAgICAgICB7bG9hZFN0YXRlID09PSAnaW5pdGlhbCcgfHwgbG9hZFN0YXRlID09PSAnbG9hZGluZycgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLXBsYWNlaG9sZGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtnZXRUaHVtYm5haWxTb3VyY2UoKX0gYWx0PVwiVmlkZW8gdGh1bWJuYWlsXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdpbml0aWFsJyA/ICdQcmVwYXJhbmRvIHZpZGVvLi4uJyA6ICdDYXJnYW5kbyB2aWRlby4uLid9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctcHJvZ3Jlc3NcIj57TWF0aC5taW4ocmV0cnlDb3VudCAqIDEwLCA5MCl9JTwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBsb2FkU3RhdGUgPT09ICdlcnJvcicgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLWVycm9yXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtnZXRUaHVtYm5haWxTb3VyY2UoKX0gYWx0PVwiVmlkZW8gdGh1bWJuYWlsXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgPHA+e3ZpZGVvRXJyb3J9PC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9IGNsYXNzTmFtZT1cInJldHJ5LWJ1dHRvblwiPlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPHZpZGVvIFxuICAgICAgICAgICAgICByZWY9e3ZpZGVvUmVmfVxuICAgICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhdHRhY2htZW50LXZpZGVvIGxvYWRlZFwiXG4gICAgICAgICAgICAgIG9uUGxheT17aGFuZGxlVmlkZW9QbGF5fVxuICAgICAgICAgICAgICBvbkVycm9yPXtoYW5kbGVWaWRlb0Vycm9yfVxuICAgICAgICAgICAgICBvbldhaXRpbmc9e2hhbmRsZVZpZGVvQnVmZmVyaW5nfVxuICAgICAgICAgICAgICBvbkNhblBsYXk9e2hhbmRsZVZpZGVvQ2FuUGxheX1cbiAgICAgICAgICAgICAgcG9zdGVyPXtnZXRUaHVtYm5haWxTb3VyY2UoKX1cbiAgICAgICAgICAgICAgcHJlbG9hZD1cIm1ldGFkYXRhXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+8J+UjTwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtzaG93RnVsbHNjcmVlbiAmJiBsb2FkU3RhdGUgPT09ICdsb2FkZWQnICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1vdmVybGF5XCIgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1jb250ZW50XCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGF1dG9QbGF5XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLXZpZGVvXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0gY2xhc3NOYW1lPVwiY2xvc2UtYnV0dG9uXCI+w5c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtpc0J1ZmZlcmluZyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1ZmZlcmluZy1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPHA+Q2FyZ2FuZG8uLi48L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgXG4gICAgY2FzZSAnYXVkaW8nOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgYXVkaW8tcHJldmlld1wiPlxuICAgICAgICAgIDxhdWRpbyBcbiAgICAgICAgICAgIHNyYz17c291cmNlfSBcbiAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1hdWRpb1wiXG4gICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBzZXRMb2FkU3RhdGUoJ2Vycm9yJyl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9hZFN0YXRlID09PSAnZXJyb3InICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1lcnJvclwiPlxuICAgICAgICAgICAgICA8cD5FcnJvciBhbCBjYXJnYXIgZWwgYXVkaW88L3A+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9PlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgJ2RvY3VtZW50JzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IGRvY3VtZW50LXByZXZpZXdcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvY3VtZW50LWljb25cIj5cbiAgICAgICAgICAgIDxzcGFuPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb2N1bWVudC1uYW1lXCI+e2F0dGFjaG1lbnQuZmlsZW5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gY2xhc3NOYW1lPVwiYXR0YWNobWVudC1idXR0b25cIj5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXdcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvY3VtZW50LWljb25cIj5cbiAgICAgICAgICAgIDxzcGFuPvCflJc8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb2N1bWVudC1uYW1lXCI+e2F0dGFjaG1lbnQuZmlsZW5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gY2xhc3NOYW1lPVwiYXR0YWNobWVudC1idXR0b25cIj5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVdGlsaWRhZCBwYXJhIHJlY29uc3RydWlyIGFyY2hpdm9zIGZyYWdtZW50YWRvc1xuICovXG5jb25zdCByZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzID0gKGNodW5rczogRmlsZUF0dGFjaG1lbnRbXSk6IHN0cmluZyA9PiB7XG4gIC8vIE9yZGVuYXIgbG9zIGNodW5rcyBwb3Igw61uZGljZSAocG9yIHNpIGFjYXNvKVxuICBjb25zdCBzb3J0ZWRDaHVua3MgPSBbLi4uY2h1bmtzXS5zb3J0KChhLCBiKSA9PiBcbiAgICAoYS5jaHVua0luZGV4IHx8IDApIC0gKGIuY2h1bmtJbmRleCB8fCAwKSk7XG4gIFxuICAvLyBDb25jYXRlbmFyIHRvZG9zIGxvcyBkYXRvcyBiYXNlNjRcbiAgY29uc3QgZnVsbEJhc2U2NCA9IHNvcnRlZENodW5rcy5tYXAoY2h1bmsgPT4gY2h1bmsuZGF0YSkuam9pbignJyk7XG4gIFxuICByZXR1cm4gZnVsbEJhc2U2NDtcbn07XG5cbi8qKlxuICogQ29tcG9uZW50ZSBwYXJhIG1vc3RyYXIgYXJjaGl2b3MgcmVjb25zdHJ1aWRvcyBkZSBmcmFnbWVudG9zXG4gKi9cbmNvbnN0IFJlY29uc3RydWN0ZWRBdHRhY2htZW50ID0gKHsgb3JpZ2luYWxGaWxlLCBjaHVua3MgfTogeyBcbiAgb3JpZ2luYWxGaWxlOiBzdHJpbmcsIFxuICBjaHVua3M6IEZpbGVBdHRhY2htZW50W10gXG59KSA9PiB7XG4gIGNvbnN0IFtleHBhbmRlZCwgc2V0RXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZnVsbHNjcmVlblZpZXcsIHNldEZ1bGxzY3JlZW5WaWV3XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZCA9ICgpID0+IHtcbiAgICBzZXRFeHBhbmRlZCghZXhwYW5kZWQpO1xuICB9O1xuICBcbiAgY29uc3QgdG9nZ2xlRnVsbHNjcmVlbiA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRGdWxsc2NyZWVuVmlldyghZnVsbHNjcmVlblZpZXcpO1xuICB9O1xuICBcbiAgY29uc3QgY2xvc2VGdWxsc2NyZWVuID0gKCkgPT4ge1xuICAgIHNldEZ1bGxzY3JlZW5WaWV3KGZhbHNlKTtcbiAgfTtcbiAgXG4gIGNvbnN0IGZpbGVUeXBlID0gY2h1bmtzWzBdPy5maWxlVHlwZTtcbiAgY29uc3QgY29udGVudFR5cGUgPSBjaHVua3NbMF0/LmNvbnRlbnRUeXBlO1xuICBjb25zdCBmdWxsRGF0YSA9IHJlY29uc3RydWN0RmlsZUZyb21DaHVua3MoY2h1bmtzKTtcbiAgY29uc3QgYmFzZTY0U3JjID0gYGRhdGE6JHtjb250ZW50VHlwZX07YmFzZTY0LCR7ZnVsbERhdGF9YDtcbiAgXG4gIGNvbnN0IHRvdGFsU2l6ZSA9IGNodW5rcy5yZWR1Y2UoKHRvdGFsLCBjaHVuaykgPT4gdG90YWwgKyAoY2h1bmsuc2l6ZSB8fCAwKSwgMCk7XG4gIFxuICBjb25zdCBmb3JtYXRGaWxlU2l6ZSA9IChieXRlcz86IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgaWYgKCFieXRlcykgcmV0dXJuICdVbmtub3duIHNpemUnO1xuICAgIGlmIChieXRlcyA8IDEwMjQpIHJldHVybiBgJHtieXRlc30gQmA7XG4gICAgaWYgKGJ5dGVzIDwgMTAyNCAqIDEwMjQpIHJldHVybiBgJHsoYnl0ZXMgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQmA7XG4gICAgcmV0dXJuIGAkeyhieXRlcyAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMSl9IE1CYDtcbiAgfTtcbiAgXG4gIHN3aXRjaCAoZmlsZVR5cGUpIHtcbiAgICBjYXNlIEZpbGVUeXBlLlZJREVPOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gJHtleHBhbmRlZCA/ICd3LWZ1bGwgbWF4LXctMnhsJyA6ICd3LTcyJ31gfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgIDx2aWRlbyBcbiAgICAgICAgICAgICAgICAgIHNyYz17YmFzZTY0U3JjfSBcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBtYXgtaC05NiBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgICAgICAgICBjb250cm9sc0xpc3Q9XCJub2Rvd25sb2FkXCJcbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiBjb25zb2xlLmVycm9yKFwiVmlkZW8gZXJyb3I6XCIsIGUpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSB2aWRlbyB0YWcuXG4gICAgICAgICAgICAgICAgPC92aWRlbz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSBwLTEuNSByb3VuZGVkLWZ1bGwgaG92ZXI6Ymctb3BhY2l0eS03MCB0cmFuc2l0aW9uLWFsbFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZH1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJFeHBhbmQvQ29sbGFwc2VcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTUgMTBhMSAxIDAgMDExLTFoOGExIDEgMCAxMTAgMkg2YTEgMSAwIDAxLTEtMXpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMCA1YTEgMSAwIDAxMSAxdjNoM2ExIDEgMCAxMTAgMmgtM3YzYTEgMSAwIDExLTIgMHYtM0g2YTEgMSAwIDExMC0yaDNWNmExIDEgMCAwMTEtMXpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8YSBcbiAgICAgICAgICAgICAgICAgICAgaHJlZj17YmFzZTY0U3JjfVxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZD17b3JpZ2luYWxGaWxlfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgcC0xLjUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLW9wYWNpdHktNzAgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJEb3dubG9hZCB2aWRlb1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMyAxN2ExIDEgMCAwMTEtMWgxMmExIDEgMCAxMTAgMkg0YTEgMSAwIDAxLTEtMXptMy4yOTMtNy43MDdhMSAxIDAgMDExLjQxNCAwTDkgMTAuNTg2VjNhMSAxIDAgMTEyIDB2Ny41ODZsMS4yOTMtMS4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNGwtMyAzYTEgMSAwIDAxLTEuNDE0IDBsLTMtM2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRydW5jYXRlIG1heC13LXhzXCI+e29yaWdpbmFsRmlsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPntmb3JtYXRGaWxlU2l6ZSh0b3RhbFNpemUpfTwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHtmdWxsc2NyZWVuVmlldyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS05MCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgb25DbGljaz17Y2xvc2VGdWxsc2NyZWVufT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctNnhsIG1heC1oLXNjcmVlbiBwLTRcIj5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e2Jhc2U2NFNyY30gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgbWF4LWgtWzkwdmhdIG9iamVjdC1jb250YWluXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLlxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IHJpZ2h0LTQgYmctd2hpdGUgdGV4dC1ibGFjayBwLTIgcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlRnVsbHNjcmVlbn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTYgdy02XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICAgIFxuICAgIC8vIFBhcmEgb3Ryb3MgdGlwb3MgZGUgYXJjaGl2b3MsIGltcGxlbWVudGFyIG1hbmVqbyBzaW1pbGFyLi4uXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBiZy1ncmF5LTEwMCByb3VuZGVkLWxnIHAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBtci0zXCI+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtOCB3LTggdGV4dC1ncmF5LTQwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk03IDIxaDEwYTIgMiAwIDAwMi0yVjkuNDE0YTEgMSAwIDAwLS4yOTMtLjcwN2wtNS40MTQtNS40MTRBMSAxIDAgMDAxMi41ODYgM0g3YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMnpcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e29yaWdpbmFsRmlsZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0RmlsZVNpemUodG90YWxTaXplKX0g4oCiIFJlY29uc3RydWlkbyBkZSB7Y2h1bmtzLmxlbmd0aH0gZnJhZ21lbnRvc1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGEgXG4gICAgICAgICAgICAgIGhyZWY9e2Jhc2U2NFNyY31cbiAgICAgICAgICAgICAgZG93bmxvYWQ9e29yaWdpbmFsRmlsZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtMyBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHAtMS41IHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ibHVlLTIwMCB0cmFuc2l0aW9uLWFsbFwiXG4gICAgICAgICAgICAgIHRpdGxlPVwiRG93bmxvYWQgZmlsZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMyAxN2ExIDEgMCAwMTEtMWgxMmExIDEgMCAxMTAgMkg0YTEgMSAwIDAxLTEtMXptMy4yOTMtNy43MDdhMSAxIDAgMDExLjQxNCAwTDkgMTAuNTg2VjNhMSAxIDAgMTEyIDB2Ny41ODZsMS4yOTMtMS4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNGwtMyAzYTEgMSAwIDAxLTEuNDE0IDBsLTMtM2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgfVxufTtcblxuaW50ZXJmYWNlIEZpbGVDaHVua01hcCB7XG4gIFtmaWxlbmFtZTogc3RyaW5nXToge1xuICAgIGNodW5rczogRmlsZUF0dGFjaG1lbnRbXTtcbiAgICBjb21wbGV0ZTogYm9vbGVhbjtcbiAgICBjb250ZW50VHlwZTogc3RyaW5nO1xuICAgIGZpbGVUeXBlOiBGaWxlVHlwZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVzc2FnZUxpc3QoKSB7XG4gIGNvbnN0IHsgbWVzc2FnZXMsIHR5cGluZ1VzZXJzLCB1cGxvYWRpbmdGaWxlcywgcmV0cnlGaWxlVXBsb2FkLCBjYW5jZWxGaWxlVXBsb2FkIH0gPSB1c2VDaGF0KCk7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IFtmYWlsZWRJbWFnZXMsIHNldEZhaWxlZEltYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuICBjb25zdCBbZmlsZUNodW5rcywgc2V0RmlsZUNodW5rc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBGaWxlQXR0YWNobWVudFtdPj4oe30pO1xuXG4gIC8vIFNjcm9sbCB0byBib3R0b20gd2hlbiBtZXNzYWdlcyBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgLy8gSGFuZGxlIGZhaWxlZCBpbWFnZSBsb2Fkc1xuICBjb25zdCBoYW5kbGVJbWFnZUVycm9yID0gKHNlbmRlcklkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRGYWlsZWRJbWFnZXMocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIFtzZW5kZXJJZF06IHRydWVcbiAgICB9KSk7XG4gIH07XG5cbiAgLy8gUmVjb25zdHJ1aXIgYXJjaGl2b3MgZnJhZ21lbnRhZG9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQnVzY2FyIHRvZG9zIGxvcyBjaHVua3MgZW4gbG9zIG1lbnNhamVzXG4gICAgY29uc3QgY2h1bmtzOiBSZWNvcmQ8c3RyaW5nLCBGaWxlQXR0YWNobWVudFtdPiA9IHt9O1xuICAgIFxuICAgIG1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UuYXR0YWNobWVudHMpIHJldHVybjtcbiAgICAgIFxuICAgICAgbWVzc2FnZS5hdHRhY2htZW50cy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICBpZiAoYXR0YWNobWVudC5pc0NodW5rICYmIGF0dGFjaG1lbnQub3JpZ2luYWxGaWxlbmFtZSkge1xuICAgICAgICAgIGlmICghY2h1bmtzW2F0dGFjaG1lbnQub3JpZ2luYWxGaWxlbmFtZV0pIHtcbiAgICAgICAgICAgIGNodW5rc1thdHRhY2htZW50Lm9yaWdpbmFsRmlsZW5hbWVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGNodW5rc1thdHRhY2htZW50Lm9yaWdpbmFsRmlsZW5hbWVdLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHNldEZpbGVDaHVua3MoY2h1bmtzKTtcbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgLy8gUGVuZGluZyB1cGxvYWRzIHNlY3Rpb25cbiAgY29uc3QgaGFzVXBsb2FkaW5nRmlsZXMgPSBPYmplY3Qua2V5cyh1cGxvYWRpbmdGaWxlcykubGVuZ3RoID4gMDtcblxuICAvLyBSZW5kZXIgdXBsb2FkaW5nIGZpbGVzXG4gIGNvbnN0IHJlbmRlclVwbG9hZGluZ0ZpbGVzID0gKCkgPT4ge1xuICAgIGlmICghaGFzVXBsb2FkaW5nRmlsZXMpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVwbG9hZGluZy1maWxlcy1jb250YWluZXIgbXktNCBwLTMgYmctZ3JheS0xMDAgcm91bmRlZC1sZ1wiPlxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5BcmNoaXZvcyBzdWJpZW5kby4uLjwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXBsb2FkaW5nLWZpbGVzLWxpc3Qgc3BhY2UteS0yXCI+XG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVwbG9hZGluZ0ZpbGVzKS5tYXAoKFt0ZW1wSWQsIHByb2dyZXNzXSkgPT4ge1xuICAgICAgICAgICAgLy8gQnVzY2Ftb3MgZWwgYXJjaGl2byBjb3JyZXNwb25kaWVudGUgZW4gbG9zIG1lbnNhamVzXG4gICAgICAgICAgICBsZXQgZmlsZTogRmlsZUF0dGFjaG1lbnQgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICBmaWxlID0gbWVzc2FnZS5hdHRhY2htZW50cy5maW5kKGF0dCA9PiBhdHQudGVtcElkID09PSB0ZW1wSWQpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlKSBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWZpbGUpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VXBsb2FkaW5nRmlsZUl0ZW0gXG4gICAgICAgICAgICAgICAga2V5PXt0ZW1wSWR9XG4gICAgICAgICAgICAgICAgZmlsZT17ZmlsZX1cbiAgICAgICAgICAgICAgICBwcm9ncmVzcz17cHJvZ3Jlc3N9XG4gICAgICAgICAgICAgICAgb25SZXRyeT17KCkgPT4gcmV0cnlGaWxlVXBsb2FkKGZpbGUhKX1cbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gY2FuY2VsRmlsZVVwbG9hZChmaWxlISl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgaWYgKHVwbG9hZGluZ0ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItcHJpbWFyeS01MDBcIj48L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LWdyYXktNTAwXCI+VXBsb2FkaW5nIGZpbGVzLi4uPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVwbG9hZGluZ0ZpbGVzKS5tYXAoKFt0ZW1wSWQsIHByb2dyZXNzXSkgPT4gKFxuICAgICAgICAgICAgPGxpIGtleT17dGVtcElkfT5cbiAgICAgICAgICAgICAgPFVwbG9hZGluZ0ZpbGVJdGVtIFxuICAgICAgICAgICAgICAgIGZpbGU9e3VwbG9hZGluZ0ZpbGVzW3RlbXBJZF19IFxuICAgICAgICAgICAgICAgIHJldHJ5RmlsZVVwbG9hZD17cmV0cnlGaWxlVXBsb2FkfSBcbiAgICAgICAgICAgICAgICBjYW5jZWxGaWxlVXBsb2FkPXtjYW5jZWxGaWxlVXBsb2FkfSBcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTEwMCBwLTMgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIHRleHQtZ3JheS00MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17MS41fSBkPVwiTTggMTJoLjAxTTEyIDEyaC4wMU0xNiAxMmguMDFNMjEgMTJjMCA0LjQxOC00LjAzIDgtOSA4YTkuODYzIDkuODYzIDAgMDEtNC4yNTUtLjk0OUwzIDIwbDEuMzk1LTMuNzJDMy41MTIgMTUuMDQyIDMgMTMuNTc0IDMgMTJjMC00LjQxOCA0LjAzLTggOS04czkgMy41ODIgOSA4elwiIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC00IHRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICBObyBtZXNzYWdlcyB5ZXQuIFNlbmQgYSBtZXNzYWdlIHRvIHN0YXJ0IHRoZSBjb252ZXJzYXRpb24hXG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBHcm91cCBtZXNzYWdlcyBieSBkYXRlXG4gIGNvbnN0IG1lc3NhZ2VzQnlEYXRlID0gbWVzc2FnZXMucmVkdWNlKChncm91cHMsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUobWVzc2FnZS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgIGlmICghZ3JvdXBzW2RhdGVdKSB7XG4gICAgICBncm91cHNbZGF0ZV0gPSBbXTtcbiAgICB9XG4gICAgZ3JvdXBzW2RhdGVdLnB1c2gobWVzc2FnZSk7XG4gICAgcmV0dXJuIGdyb3VwcztcbiAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgdHlwZW9mIG1lc3NhZ2VzPik7XG5cbiAgLy8gR2V0IGFycmF5IG9mIHR5cGluZyB1c2VycyAoZXhjbHVkaW5nIGN1cnJlbnQgdXNlcilcbiAgY29uc3QgdHlwaW5nVXNlcnNMaXN0ID0gT2JqZWN0LmVudHJpZXModHlwaW5nVXNlcnMpXG4gICAgLmZpbHRlcigoW3VzZXJJZCwgaXNUeXBpbmddKSA9PiBpc1R5cGluZyAmJiB1c2VySWQgIT09IHVzZXI/LmlkKVxuICAgIC5tYXAoKFt1c2VySWQsIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogdXNlcklkKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgb3ZlcmZsb3cteS1hdXRvIHAtNCBzcGFjZS15LTRcIj5cbiAgICAgIHtyZW5kZXJVcGxvYWRpbmdGaWxlcygpfVxuICAgICAge09iamVjdC5lbnRyaWVzKG1lc3NhZ2VzQnlEYXRlKS5tYXAoKFtkYXRlLCBkYXRlTWVzc2FnZXNdKSA9PiAoXG4gICAgICAgIDxkaXYga2V5PXtkYXRlfSBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcHgtMyBweS0xIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnTU1NTSBkLCB5eXl5Jyl9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAge2RhdGVNZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzT3duTWVzc2FnZSA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gdXNlcj8uaWQ7XG4gICAgICAgICAgICBjb25zdCBzZW5kZXJJZCA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IGhhc0F0dGFjaG1lbnRzID0gbWVzc2FnZS5hdHRhY2htZW50cyAmJiBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vbkNodW5rQXR0YWNobWVudHMgPSBtZXNzYWdlLmF0dGFjaG1lbnRzPy5maWx0ZXIoYXR0ID0+ICFhdHQuaXNDaHVuaykgfHwgW107XG5cbiAgICAgICAgICAgIC8vIEZpbHRyYXIgbWVuc2FqZXMgcXVlIHNvbiBzb2xvIGNodW5rcyBwYXJhIGV2aXRhciBkdXBsaWNhZG9zIGVuIGxhIFVJXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICghbWVzc2FnZS5hdHRhY2htZW50cyB8fCBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA9PT0gMCB8fCBcbiAgICAgICAgICAgICAgIChtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZS5hdHRhY2htZW50cy5ldmVyeShhdHQgPT4gYXR0LmlzQ2h1bmspKSkgJiYgXG4gICAgICAgICAgICAgICghbWVzc2FnZS5jb250ZW50IHx8IG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIlBhcnRlIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIkVudmlhbmRvIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9PT0gXCJFbnZpYW5kbyBhcmNoaXZvcyBncmFuZGVzLi4uXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuX2lkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHtpc093bk1lc3NhZ2UgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggbWF4LXcteHMgbWQ6bWF4LXctbWQgbGc6bWF4LXctbGcgJHtpc093bk1lc3NhZ2UgPyAnZmxleC1yb3ctcmV2ZXJzZScgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgIHshaXNPd25NZXNzYWdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMzAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyLmF2YXRhciAmJiBpc1ZhbGlkSW1hZ2VTcmMobWVzc2FnZS5zZW5kZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW3NlbmRlcklkXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLnNlbmRlci5hdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXttZXNzYWdlLnNlbmRlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBoYW5kbGVJbWFnZUVycm9yKHNlbmRlcklkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJbml0aWFscyhtZXNzYWdlLnNlbmRlci5uYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAke2lzT3duTWVzc2FnZSBcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1wcmltYXJ5LTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtdGwtbGcgcm91bmRlZC10ci1ub25lJyBcbiAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQtdHItbGcgcm91bmRlZC10bC1ub25lJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQtYmwtbGcgcm91bmRlZC1ici1sZyBwLTMgc2hhZG93LXNtXG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC14cyBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UuY29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogRGlzcGxheSBhdHRhY2htZW50cyAqL31cbiAgICAgICAgICAgICAgICAgICAge2hhc0F0dGFjaG1lbnRzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7bWVzc2FnZS5jb250ZW50ID8gJ210LTInIDogJyd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bm9uQ2h1bmtBdHRhY2htZW50cz8ubWFwKChhdHRhY2htZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QXR0YWNobWVudFByZXZpZXcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHttZXNzYWdlLl9pZH0tYXR0YWNobWVudC0ke2luZGV4fWB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgbXQtMSBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRBdCksICdoOm1tIGEnKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICkpfVxuXG4gICAgICB7LyogTW9zdHJhbW9zIGxvcyBhcmNoaXZvcyByZWNvbnN0cnVpZG9zIChzb2xvIHNpIGVzdMOhbiBjb21wbGV0b3MpICovfVxuICAgICAge09iamVjdC5lbnRyaWVzKGZpbGVDaHVua3MpXG4gICAgICAgIC5maWx0ZXIoKFtfLCBpbmZvXSkgPT4gaW5mby5jb21wbGV0ZSlcbiAgICAgICAgLm1hcCgoW2ZpbGVuYW1lLCBpbmZvXSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtgcmVjb25zdHJ1Y3RlZC0ke2ZpbGVuYW1lfWB9IGNsYXNzTmFtZT1cIm1iLTQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTMgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTIgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICBBcmNoaXZvIHJlY29uc3RydWlkbzpcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPFJlY29uc3RydWN0ZWRBdHRhY2htZW50IFxuICAgICAgICAgICAgICBvcmlnaW5hbEZpbGU9e2ZpbGVuYW1lfSBcbiAgICAgICAgICAgICAgY2h1bmtzPXtpbmZvLmNodW5rc30gXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKVxuICAgICAgfVxuICAgICAgXG4gICAgICB7LyogU2hvdyB0eXBpbmcgaW5kaWNhdG9yICovfVxuICAgICAge3R5cGluZ1VzZXJzTGlzdC5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC1ncmF5LTUwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctZ3JheS00MDAgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzIwMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctZ3JheS00MDAgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzQwMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgIHt0eXBpbmdVc2Vyc0xpc3QubGVuZ3RoID09PSAxIFxuICAgICAgICAgICAgICA/IGAke3R5cGluZ1VzZXJzTGlzdFswXX0gaXMgdHlwaW5nLi4uYCBcbiAgICAgICAgICAgICAgOiBgJHt0eXBpbmdVc2Vyc0xpc3QubGVuZ3RofSBwZW9wbGUgYXJlIHR5cGluZy4uLmB9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFbXB0eSBkaXYgdG8gYWxsb3cgc2Nyb2xsaW5nIHRvIGJvdHRvbSBvZiBtZXNzYWdlcyAqL31cbiAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNoYXQiLCJGaWxlVHlwZSIsInVzZUF1dGgiLCJJbWFnZSIsImZvcm1hdCIsIlVwbG9hZGluZ0ZpbGVJdGVtIiwiZ2V0SW5pdGlhbHMiLCJuYW1lIiwicGFydHMiLCJ0cmltIiwic3BsaXQiLCJsZW5ndGgiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0cmluZyIsIk1hdGgiLCJtaW4iLCJpc1ZhbGlkSW1hZ2VTcmMiLCJzcmMiLCJzdGFydHNXaXRoIiwiQXR0YWNobWVudFByZXZpZXciLCJhdHRhY2htZW50IiwibG9hZFN0YXRlIiwic2V0TG9hZFN0YXRlIiwicHJldmlld0F2YWlsYWJsZSIsInNldFByZXZpZXdBdmFpbGFibGUiLCJhcGlCYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJ2aWRlb1JlZiIsInNob3dGdWxsc2NyZWVuIiwic2V0U2hvd0Z1bGxzY3JlZW4iLCJyZXRyeUNvdW50Iiwic2V0UmV0cnlDb3VudCIsInZpZGVvRXJyb3IiLCJzZXRWaWRlb0Vycm9yIiwiaXNCdWZmZXJpbmciLCJzZXRJc0J1ZmZlcmluZyIsImlzTGFyZ2VGaWxlIiwiZmlsZUlkIiwiY29udGVudFR5cGUiLCJjaGVja1ZpZGVvQXZhaWxhYmlsaXR5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwic2V0VGltZW91dCIsInByZXYiLCJtZXRhZGF0YSIsImpzb24iLCJjb21wbGV0ZSIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZVZpZGVvUGxheSIsImxvZyIsImhhbmRsZVZpZGVvRXJyb3IiLCJldmVudCIsImhhbmRsZVZpZGVvQnVmZmVyaW5nIiwiaGFuZGxlVmlkZW9DYW5QbGF5IiwiZ2V0QXR0YWNobWVudFNvdXJjZSIsImRhdGEiLCJnZXRUaHVtYm5haWxTb3VyY2UiLCJoYW5kbGVEb3dubG9hZCIsImEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJmaWxlbmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJnZXRGaWxlVHlwZSIsInRvZ2dsZUZ1bGxzY3JlZW4iLCJoYW5kbGVMb2FkZWREYXRhIiwiaGFuZGxlUmV0cnkiLCJmaWxlVHlwZSIsInNvdXJjZSIsImRpdiIsImNsYXNzTmFtZSIsImltZyIsImFsdCIsIm9uTG9hZCIsIm9uRXJyb3IiLCJwIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwic3BhbiIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ2aWRlbyIsInJlZiIsImNvbnRyb2xzIiwib25QbGF5Iiwib25XYWl0aW5nIiwib25DYW5QbGF5IiwicG9zdGVyIiwicHJlbG9hZCIsImF1dG9QbGF5IiwiYXVkaW8iLCJyZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzIiwiY2h1bmtzIiwic29ydGVkQ2h1bmtzIiwic29ydCIsImIiLCJjaHVua0luZGV4IiwiZnVsbEJhc2U2NCIsIm1hcCIsImNodW5rIiwiam9pbiIsIlJlY29uc3RydWN0ZWRBdHRhY2htZW50Iiwib3JpZ2luYWxGaWxlIiwiZXhwYW5kZWQiLCJzZXRFeHBhbmRlZCIsImZ1bGxzY3JlZW5WaWV3Iiwic2V0RnVsbHNjcmVlblZpZXciLCJ0b2dnbGVFeHBhbmQiLCJjbG9zZUZ1bGxzY3JlZW4iLCJmdWxsRGF0YSIsImJhc2U2NFNyYyIsInRvdGFsU2l6ZSIsInJlZHVjZSIsInRvdGFsIiwic2l6ZSIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJ0b0ZpeGVkIiwiVklERU8iLCJjb250cm9sc0xpc3QiLCJ0aXRsZSIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZmlsbFJ1bGUiLCJkIiwiY2xpcFJ1bGUiLCJzdHJva2UiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsIk1lc3NhZ2VMaXN0IiwibWVzc2FnZXMiLCJ0eXBpbmdVc2VycyIsInVwbG9hZGluZ0ZpbGVzIiwicmV0cnlGaWxlVXBsb2FkIiwiY2FuY2VsRmlsZVVwbG9hZCIsInVzZXIiLCJtZXNzYWdlc0VuZFJlZiIsImZhaWxlZEltYWdlcyIsInNldEZhaWxlZEltYWdlcyIsImZpbGVDaHVua3MiLCJzZXRGaWxlQ2h1bmtzIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVJbWFnZUVycm9yIiwic2VuZGVySWQiLCJmb3JFYWNoIiwibWVzc2FnZSIsImF0dGFjaG1lbnRzIiwiaXNDaHVuayIsIm9yaWdpbmFsRmlsZW5hbWUiLCJwdXNoIiwiaGFzVXBsb2FkaW5nRmlsZXMiLCJPYmplY3QiLCJrZXlzIiwicmVuZGVyVXBsb2FkaW5nRmlsZXMiLCJoMyIsImVudHJpZXMiLCJ0ZW1wSWQiLCJwcm9ncmVzcyIsImZpbGUiLCJmaW5kIiwiYXR0Iiwib25SZXRyeSIsIm9uQ2FuY2VsIiwidWwiLCJsaSIsIm1lc3NhZ2VzQnlEYXRlIiwiZ3JvdXBzIiwiZGF0ZSIsIkRhdGUiLCJjcmVhdGVkQXQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ0eXBpbmdVc2Vyc0xpc3QiLCJmaWx0ZXIiLCJ1c2VySWQiLCJpc1R5cGluZyIsImlkIiwidmFsdWUiLCJkYXRlTWVzc2FnZXMiLCJpc093bk1lc3NhZ2UiLCJzZW5kZXIiLCJfaWQiLCJoYXNBdHRhY2htZW50cyIsIm5vbkNodW5rQXR0YWNobWVudHMiLCJldmVyeSIsImNvbnRlbnQiLCJpbmNsdWRlcyIsImF2YXRhciIsIndpZHRoIiwiaGVpZ2h0IiwiaW5kZXgiLCJfIiwiaW5mbyIsInN0eWxlIiwiYW5pbWF0aW9uRGVsYXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/MessageList.tsx\n"));

/***/ })

});