"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/chat",{

/***/ "./src/components/chat/MessageList.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/MessageList.tsx ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MessageList; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"../../node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns/format */ \"../../node_modules/date-fns/esm/format/index.js\");\n\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return \"\".concat(parts[0].charAt(0)).concat(parts[1].charAt(0)).toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\n/**\n * Renders a file attachment based on its type\n */ const AttachmentPreview = (param)=>{\n    let { attachment } = param;\n    _s();\n    const [loadState, setLoadState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"initial\");\n    const [previewAvailable, setPreviewAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const apiBaseUrl = \"http://localhost:3001\" || 0;\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [showFullscreen, setShowFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [videoError, setVideoError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isBuffering, setIsBuffering] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Si es un video grande, verificar si está disponible\n        if (attachment.isLargeFile && attachment.fileId && attachment.contentType.startsWith(\"video/\")) {\n            checkVideoAvailability();\n        } else {\n            setLoadState(\"loaded\");\n        }\n    }, [\n        attachment.fileId,\n        retryCount\n    ]);\n    // Verificar si el video está disponible\n    const checkVideoAvailability = async ()=>{\n        try {\n            setLoadState(\"loading\");\n            const response = await fetch(\"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId, \"?preview=true\"));\n            if (!response.ok) {\n                if (retryCount < 10) {\n                    // Reintentamos después de un tiempo\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000); // Reintento cada 2 segundos\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"No se pudo acceder al video\");\n                }\n                return;\n            }\n            const metadata = await response.json();\n            if (metadata.complete) {\n                setLoadState(\"loaded\");\n                setPreviewAvailable(true);\n            } else {\n                // Archivo todavía no está completo, reintentamos\n                if (retryCount < 10) {\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000);\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"El video no se complet\\xf3 correctamente\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error verificando disponibilidad del video:\", error);\n            setLoadState(\"error\");\n            setVideoError(\"Error al cargar el video\");\n        }\n    };\n    // Manejo de eventos de video\n    const handleVideoPlay = ()=>{\n        console.log(\"Video iniciado correctamente\");\n    };\n    const handleVideoError = (event)=>{\n        console.error(\"Error en la reproducci\\xf3n del video:\", event);\n        setVideoError(\"Error al reproducir el video\");\n        setLoadState(\"error\");\n    };\n    const handleVideoBuffering = ()=>{\n        setIsBuffering(true);\n    };\n    const handleVideoCanPlay = ()=>{\n        setIsBuffering(false);\n    };\n    // Obtener la fuente del archivo\n    const getAttachmentSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return \"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId);\n        }\n        return \"data:\".concat(attachment.contentType, \";base64,\").concat(attachment.data);\n    };\n    // Obtener la miniatura para videos\n    const getThumbnailSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return \"\".concat(apiBaseUrl, \"/chats/file/\").concat(attachment.fileId, \"/thumbnail\");\n        }\n        return \"/video-placeholder.png\";\n    };\n    // Descargar el archivo\n    const handleDownload = ()=>{\n        if (loadState !== \"loaded\") return;\n        const a = document.createElement(\"a\");\n        a.href = getAttachmentSource();\n        a.download = attachment.filename || \"download\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    };\n    // Determinar el tipo de archivo\n    const getFileType = ()=>{\n        if (attachment.contentType.startsWith(\"image/\")) return \"image\";\n        if (attachment.contentType.startsWith(\"video/\")) return \"video\";\n        if (attachment.contentType.startsWith(\"audio/\")) return \"audio\";\n        return \"document\";\n    };\n    // Manejar fullscreen para videos\n    const toggleFullscreen = ()=>{\n        if (loadState !== \"loaded\") return;\n        setShowFullscreen(!showFullscreen);\n    };\n    const handleLoadedData = ()=>{\n        setLoadState(\"loaded\");\n    };\n    const handleRetry = ()=>{\n        setRetryCount(0);\n        setLoadState(\"initial\");\n    };\n    const fileType = getFileType();\n    const source = getAttachmentSource();\n    // Render según el tipo de archivo\n    switch(fileType){\n        case \"image\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview image-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: source,\n                        alt: attachment.filename || \"Image\",\n                        className: \"attachment-image\",\n                        onLoad: ()=>setLoadState(\"loaded\"),\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 180,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar la imagen\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 189,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 190,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 188,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 199,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 194,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 206,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 201,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 193,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: source,\n                                    alt: attachment.filename || \"Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 212,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 213,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 211,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 210,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 179,\n                columnNumber: 9\n            }, undefined);\n        case \"video\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview video-preview\",\n                children: [\n                    loadState === \"initial\" || loadState === \"loading\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-placeholder\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 225,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-indicator\",\n                                children: [\n                                    loadState === \"initial\" ? \"Preparando video...\" : \"Cargando video...\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-spinner\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 228,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-progress\",\n                                        children: [\n                                            Math.min(retryCount * 10, 90),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 229,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 226,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 224,\n                        columnNumber: 13\n                    }, undefined) : loadState === \"error\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 234,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"error-message\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: videoError\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 236,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleRetry,\n                                        className: \"retry-button\",\n                                        children: \"Reintentar\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 237,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 235,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 233,\n                        columnNumber: 13\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                        ref: videoRef,\n                        src: source,\n                        controls: true,\n                        className: \"attachment-video loaded\",\n                        onPlay: handleVideoPlay,\n                        onError: handleVideoError,\n                        onWaiting: handleVideoBuffering,\n                        onCanPlay: handleVideoCanPlay,\n                        poster: getThumbnailSource(),\n                        preload: \"metadata\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 241,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 260,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 255,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 267,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 262,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 254,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && loadState === \"loaded\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: source,\n                                    controls: true,\n                                    autoPlay: true,\n                                    className: \"fullscreen-video\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 273,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 279,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 272,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 271,\n                        columnNumber: 13\n                    }, undefined),\n                    isBuffering && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"buffering-indicator\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-spinner\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 285,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Cargando...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 286,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 284,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 222,\n                columnNumber: 9\n            }, undefined);\n        case \"audio\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview audio-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                        src: source,\n                        controls: true,\n                        className: \"attachment-audio\",\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 295,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar el audio\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 303,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 304,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 302,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button \".concat(loadState !== \"loaded\" ? \"disabled\" : \"\"),\n                            disabled: loadState !== \"loaded\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 313,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 308,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 307,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 294,\n                columnNumber: 9\n            }, undefined);\n        case \"document\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview document-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDCC4\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 323,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 324,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 322,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 328,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 327,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 326,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 321,\n                columnNumber: 9\n            }, undefined);\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDD17\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 338,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 339,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 337,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 343,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 341,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 336,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n_s(AttachmentPreview, \"MozS3G0Wz3FakugRkWPgER438+c=\");\n_c = AttachmentPreview;\n/**\n * Utilidad para reconstruir archivos fragmentados\n */ const reconstructFileFromChunks = (chunks)=>{\n    // Ordenar los chunks por índice (por si acaso)\n    const sortedChunks = [\n        ...chunks\n    ].sort((a, b)=>(a.chunkIndex || 0) - (b.chunkIndex || 0));\n    // Concatenar todos los datos base64\n    const fullBase64 = sortedChunks.map((chunk)=>chunk.data).join(\"\");\n    return fullBase64;\n};\n/**\n * Componente para mostrar archivos reconstruidos de fragmentos\n */ const ReconstructedAttachment = (param)=>{\n    let { originalFile, chunks } = param;\n    var _chunks_, _chunks_1;\n    _s1();\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fullscreenView, setFullscreenView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const toggleExpand = ()=>{\n        setExpanded(!expanded);\n    };\n    const toggleFullscreen = (e)=>{\n        e.stopPropagation();\n        setFullscreenView(!fullscreenView);\n    };\n    const closeFullscreen = ()=>{\n        setFullscreenView(false);\n    };\n    const fileType = (_chunks_ = chunks[0]) === null || _chunks_ === void 0 ? void 0 : _chunks_.fileType;\n    const contentType = (_chunks_1 = chunks[0]) === null || _chunks_1 === void 0 ? void 0 : _chunks_1.contentType;\n    const fullData = reconstructFileFromChunks(chunks);\n    const base64Src = \"data:\".concat(contentType, \";base64,\").concat(fullData);\n    const totalSize = chunks.reduce((total, chunk)=>total + (chunk.size || 0), 0);\n    const formatFileSize = (bytes)=>{\n        if (!bytes) return \"Unknown size\";\n        if (bytes < 1024) return \"\".concat(bytes, \" B\");\n        if (bytes < 1024 * 1024) return \"\".concat((bytes / 1024).toFixed(1), \" KB\");\n        return \"\".concat((bytes / (1024 * 1024)).toFixed(1), \" MB\");\n    };\n    switch(fileType){\n        case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 relative\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-gray-100 rounded-lg overflow-hidden \".concat(expanded ? \"w-full max-w-2xl\" : \"w-72\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                            src: base64Src,\n                                            controls: true,\n                                            className: \"w-full h-full max-h-96 object-contain\",\n                                            controlsList: \"nodownload\",\n                                            onError: (e)=>console.error(\"Video error:\", e),\n                                            children: \"Your browser does not support the video tag.\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute top-2 right-2 flex space-x-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: toggleExpand,\n                                                    title: \"Expand/Collapse\",\n                                                    children: expanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 426,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 425,\n                                                        columnNumber: 23\n                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 430,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 429,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 419,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                    href: base64Src,\n                                                    download: originalFile,\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: (e)=>e.stopPropagation(),\n                                                    title: \"Download video\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 442,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 441,\n                                                        columnNumber: 21\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 434,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 418,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 408,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"px-3 py-2 text-sm text-gray-700\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"font-medium truncate max-w-xs\",\n                                            children: originalFile\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 448,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: formatFileSize(totalSize)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 449,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 447,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 407,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 406,\n                        columnNumber: 11\n                    }, undefined),\n                    fullscreenView && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center\",\n                        onClick: closeFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative w-full max-w-6xl max-h-screen p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: base64Src,\n                                    controls: true,\n                                    className: \"w-full h-full max-h-[90vh] object-contain\",\n                                    children: \"Your browser does not support the video tag.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 457,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"absolute top-4 right-4 bg-white text-black p-2 rounded-full\",\n                                    onClick: closeFullscreen,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-6 w-6\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 469,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 468,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 464,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 456,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 455,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true);\n        // Para otros tipos de archivos, implementar manejo similar...\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 bg-gray-100 rounded-lg p-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-shrink-0 mr-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-8 w-8 text-gray-400\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 485,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 484,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 483,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-grow\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm font-medium\",\n                                    children: originalFile\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 489,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        formatFileSize(totalSize),\n                                        \" • Reconstruido de \",\n                                        chunks.length,\n                                        \" fragmentos\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 490,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 488,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                            href: base64Src,\n                            download: originalFile,\n                            className: \"ml-3 bg-blue-100 text-blue-800 p-1.5 rounded-full hover:bg-blue-200 transition-all\",\n                            title: \"Download file\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 501,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 500,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 494,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 482,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 481,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n_s1(ReconstructedAttachment, \"Ke+JiRZ5hgqdupqhUgW5MgdF028=\");\n_c1 = ReconstructedAttachment;\nfunction MessageList() {\n    _s2();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { messages, isLoadingMessages, typingUsers, activeChat } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [fileChunks, setFileChunks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    // Función para procesar los mensajes y detectar fragmentos de archivos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Objeto para rastrear los chunks de archivos\n        const chunks = {};\n        // Procesar cada mensaje para detectar chunks\n        messages.forEach((message)=>{\n            if (!message.attachments) return;\n            message.attachments.forEach((attachment)=>{\n                // Si es un chunk, lo agregamos a nuestro mapa\n                if (attachment.isChunk && attachment.originalFilename && attachment.totalChunks && attachment.chunkIndex !== undefined) {\n                    const key = attachment.originalFilename;\n                    if (!chunks[key]) {\n                        chunks[key] = {\n                            chunks: Array(attachment.totalChunks).fill(null).map(()=>({})),\n                            complete: false,\n                            contentType: attachment.contentType,\n                            fileType: attachment.fileType\n                        };\n                    }\n                    // Almacenar el chunk en su posición correcta\n                    chunks[key].chunks[attachment.chunkIndex] = attachment;\n                    // Verificar si tenemos todos los chunks completamente definidos\n                    chunks[key].complete = chunks[key].chunks.every((chunk)=>chunk && chunk.data && chunk.filename);\n                }\n            });\n        });\n        setFileChunks(chunks);\n    }, [\n        messages\n    ]);\n    // Scroll to bottom when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messagesEndRef.current) {\n            messagesEndRef.current.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }, [\n        messages\n    ]);\n    if (isLoadingMessages) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 581,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-2 text-gray-500\",\n                    children: \"Loading messages...\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 582,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 580,\n            columnNumber: 7\n        }, this);\n    }\n    if (messages.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-gray-100 p-3 rounded-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-10 w-10 text-gray-400\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 1.5,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 592,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 591,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 590,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-gray-500 text-center\",\n                    children: \"No messages yet. Send a message to start the conversation!\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 595,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 589,\n            columnNumber: 7\n        }, this);\n    }\n    // Group messages by date\n    const messagesByDate = messages.reduce((groups, message)=>{\n        const date = new Date(message.createdAt).toLocaleDateString();\n        if (!groups[date]) {\n            groups[date] = [];\n        }\n        groups[date].push(message);\n        return groups;\n    }, {});\n    // Get array of typing users (excluding current user)\n    const typingUsersList = Object.entries(typingUsers).filter((param)=>{\n        let [userId, isTyping] = param;\n        return isTyping && userId !== (user === null || user === void 0 ? void 0 : user.id);\n    }).map((param)=>{\n        let [userId, value] = param;\n        return typeof value === \"string\" ? value : userId;\n    });\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full overflow-y-auto p-4 space-y-4\",\n        children: [\n            Object.entries(messagesByDate).map((param)=>{\n                let [date, dateMessages] = param;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gray-100 px-3 py-1 rounded-full\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: (0,date_fns_format__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(new Date(date), \"MMMM d, yyyy\")\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 623,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 622,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 621,\n                            columnNumber: 11\n                        }, this),\n                        dateMessages.map((message)=>{\n                            var _message_attachments;\n                            const isOwnMessage = message.sender._id === (user === null || user === void 0 ? void 0 : user.id);\n                            const senderId = message.sender._id || \"\";\n                            const hasAttachments = message.attachments && message.attachments.length > 0;\n                            const nonChunkAttachments = ((_message_attachments = message.attachments) === null || _message_attachments === void 0 ? void 0 : _message_attachments.filter((att)=>!att.isChunk)) || [];\n                            // Filtrar mensajes que son solo chunks para evitar duplicados en la UI\n                            if ((!message.attachments || message.attachments.length === 0 || message.attachments.length > 0 && message.attachments.every((att)=>att.isChunk)) && (!message.content || message.content.includes(\"Parte \") || message.content.includes(\"Enviando \") || message.content === \"Enviando archivos grandes...\")) {\n                                return null;\n                            }\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex \".concat(isOwnMessage ? \"justify-end\" : \"justify-start\"),\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex max-w-xs md:max-w-md lg:max-w-lg \".concat(isOwnMessage ? \"flex-row-reverse\" : \"\"),\n                                    children: [\n                                        !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-shrink-0 mr-3\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden\",\n                                                children: message.sender.avatar && isValidImageSrc(message.sender.avatar) && !failedImages[senderId] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                    src: message.sender.avatar,\n                                                    alt: message.sender.name,\n                                                    width: 32,\n                                                    height: 32,\n                                                    className: \"h-full w-full object-cover\",\n                                                    onError: ()=>handleImageError(senderId)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 657,\n                                                    columnNumber: 27\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-sm font-medium text-gray-700\",\n                                                    children: getInitials(message.sender.name)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 666,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                lineNumber: 655,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 654,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"\\n                    \".concat(isOwnMessage ? \"bg-primary-500 text-white rounded-tl-lg rounded-tr-none\" : \"bg-gray-200 text-gray-800 rounded-tr-lg rounded-tl-none\", \"\\n                    rounded-bl-lg rounded-br-lg p-3 shadow-sm\\n                  \"),\n                                            children: [\n                                                !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"font-medium text-xs mb-1\",\n                                                    children: message.sender.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 682,\n                                                    columnNumber: 23\n                                                }, this),\n                                                message.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 687,\n                                                    columnNumber: 23\n                                                }, this),\n                                                hasAttachments && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"\".concat(message.content ? \"mt-2\" : \"\"),\n                                                    children: nonChunkAttachments === null || nonChunkAttachments === void 0 ? void 0 : nonChunkAttachments.map((attachment, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AttachmentPreview, {\n                                                            attachment: attachment\n                                                        }, \"\".concat(message._id, \"-attachment-\").concat(index), false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 696,\n                                                            columnNumber: 27\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 694,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs mt-1 opacity-80\",\n                                                    children: (0,date_fns_format__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(new Date(message.createdAt), \"h:mm a\")\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 704,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 674,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 652,\n                                    columnNumber: 17\n                                }, this)\n                            }, message._id, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 648,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    ]\n                }, date, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 620,\n                    columnNumber: 9\n                }, this);\n            }),\n            Object.entries(fileChunks).filter((param)=>{\n                let [_, info] = param;\n                return info.complete;\n            }).map((param)=>{\n                let [filename, info] = param;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 border border-gray-200 p-3 rounded-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-medium mb-2 text-gray-700\",\n                            children: \"Archivo reconstruido:\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 720,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReconstructedAttachment, {\n                            originalFile: filename,\n                            chunks: info.chunks\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 723,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, \"reconstructed-\".concat(filename), true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 719,\n                    columnNumber: 11\n                }, this);\n            }),\n            typingUsersList.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center space-x-2 text-gray-500 text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex space-x-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 735,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"200ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 736,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"400ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 737,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 734,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: typingUsersList.length === 1 ? \"\".concat(typingUsersList[0], \" is typing...\") : \"\".concat(typingUsersList.length, \" people are typing...\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 739,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 733,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesEndRef\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 748,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n        lineNumber: 618,\n        columnNumber: 5\n    }, this);\n}\n_s2(MessageList, \"w/q8hTLZF5S766ZWKRt0uqR3McQ=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth,\n        _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat\n    ];\n});\n_c2 = MessageList;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"AttachmentPreview\");\n$RefreshReg$(_c1, \"ReconstructedAttachment\");\n$RefreshReg$(_c2, \"MessageList\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MERBQU9BO1FBQ3lDRiwwREFBT0E7OztNQUZsRCtJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL2NoYXQvTWVzc2FnZUxpc3QudHN4PzU3ZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCwgRmlsZVR5cGUsIEZpbGVBdHRhY2htZW50IH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5pbXBvcnQgSW1hZ2UgZnJvbSAnbmV4dC9pbWFnZSc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7XG5pbXBvcnQgVXBsb2FkaW5nRmlsZUl0ZW0sIHsgVXBsb2FkZXJQcm9ncmVzcyB9IGZyb20gJy4vVXBsb2FkaW5nRmlsZUl0ZW0nO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgaW5pdGlhbHMgZnJvbSBhIG5hbWVcbiAqIFJldHVybnMgdXAgdG8gMiBpbml0aWFscyAoZmlyc3QgYW5kIGxhc3QgbmFtZSBvciBmaXJzdCB0d28gd29yZHMpXG4gKi9cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICBcbiAgY29uc3QgcGFydHMgPSBuYW1lLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAvLyBHZXQgZmlyc3QgbGV0dGVyIG9mIGZpcnN0IGFuZCBsYXN0IG5hbWVcbiAgICByZXR1cm4gYCR7cGFydHNbMF0uY2hhckF0KDApfSR7cGFydHNbMV0uY2hhckF0KDApfWAudG9VcHBlckNhc2UoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgZmlyc3QgdHdvIGxldHRlcnMgb2Ygc2luZ2xlIG5hbWVcbiAgICByZXR1cm4gbmFtZS5zdWJzdHJpbmcoMCwgTWF0aC5taW4oMiwgbmFtZS5sZW5ndGgpKS50b1VwcGVyQ2FzZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiBhIHN0cmluZyBpcyBhIHZhbGlkIGltYWdlIFVSTCBvciBiYXNlNjQgaW1hZ2UgZGF0YVxuICovXG5jb25zdCBpc1ZhbGlkSW1hZ2VTcmMgPSAoc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKCFzcmMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGlmIGl0J3MgYSB2YWxpZCBVUkwgb3IgYmFzZTY0IGRhdGFcbiAgcmV0dXJuIChcbiAgICBzcmMuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwczovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpXG4gICk7XG59O1xuXG4vKipcbiAqIFJlbmRlcnMgYSBmaWxlIGF0dGFjaG1lbnQgYmFzZWQgb24gaXRzIHR5cGVcbiAqL1xuY29uc3QgQXR0YWNobWVudFByZXZpZXcgPSAoeyBhdHRhY2htZW50IH06IHsgYXR0YWNobWVudDogRmlsZUF0dGFjaG1lbnQgfSkgPT4ge1xuICBjb25zdCBbbG9hZFN0YXRlLCBzZXRMb2FkU3RhdGVdID0gdXNlU3RhdGU8J2luaXRpYWwnIHwgJ2xvYWRpbmcnIHwgJ2xvYWRlZCcgfCAnZXJyb3InPignaW5pdGlhbCcpO1xuICBjb25zdCBbcHJldmlld0F2YWlsYWJsZSwgc2V0UHJldmlld0F2YWlsYWJsZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IGFwaUJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuICBjb25zdCB2aWRlb1JlZiA9IHVzZVJlZjxIVE1MVmlkZW9FbGVtZW50PihudWxsKTtcbiAgY29uc3QgW3Nob3dGdWxsc2NyZWVuLCBzZXRTaG93RnVsbHNjcmVlbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZXRyeUNvdW50LCBzZXRSZXRyeUNvdW50XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdmlkZW9FcnJvciwgc2V0VmlkZW9FcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzQnVmZmVyaW5nLCBzZXRJc0J1ZmZlcmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBTaSBlcyB1biB2aWRlbyBncmFuZGUsIHZlcmlmaWNhciBzaSBlc3TDoSBkaXNwb25pYmxlXG4gICAgaWYgKGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgJiYgYXR0YWNobWVudC5maWxlSWQgJiYgYXR0YWNobWVudC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xuICAgICAgY2hlY2tWaWRlb0F2YWlsYWJpbGl0eSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRMb2FkU3RhdGUoJ2xvYWRlZCcpO1xuICAgIH1cbiAgfSwgW2F0dGFjaG1lbnQuZmlsZUlkLCByZXRyeUNvdW50XSk7XG5cbiAgLy8gVmVyaWZpY2FyIHNpIGVsIHZpZGVvIGVzdMOhIGRpc3BvbmlibGVcbiAgY29uc3QgY2hlY2tWaWRlb0F2YWlsYWJpbGl0eSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0TG9hZFN0YXRlKCdsb2FkaW5nJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2VVcmx9L2NoYXRzL2ZpbGUvJHthdHRhY2htZW50LmZpbGVJZH0/cHJldmlldz10cnVlYCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPCAxMCkge1xuICAgICAgICAgIC8vIFJlaW50ZW50YW1vcyBkZXNwdcOpcyBkZSB1biB0aWVtcG9cbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldFJldHJ5Q291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgfSwgMjAwMCk7IC8vIFJlaW50ZW50byBjYWRhIDIgc2VndW5kb3NcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRMb2FkU3RhdGUoJ2Vycm9yJyk7XG4gICAgICAgICAgc2V0VmlkZW9FcnJvcignTm8gc2UgcHVkbyBhY2NlZGVyIGFsIHZpZGVvJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmIChtZXRhZGF0YS5jb21wbGV0ZSkge1xuICAgICAgICBzZXRMb2FkU3RhdGUoJ2xvYWRlZCcpO1xuICAgICAgICBzZXRQcmV2aWV3QXZhaWxhYmxlKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXJjaGl2byB0b2RhdsOtYSBubyBlc3TDoSBjb21wbGV0bywgcmVpbnRlbnRhbW9zXG4gICAgICAgIGlmIChyZXRyeUNvdW50IDwgMTApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNldFJldHJ5Q291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICAgICAgICAgIHNldFZpZGVvRXJyb3IoJ0VsIHZpZGVvIG5vIHNlIGNvbXBsZXTDsyBjb3JyZWN0YW1lbnRlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmaWNhbmRvIGRpc3BvbmliaWxpZGFkIGRlbCB2aWRlbzpcIiwgZXJyb3IpO1xuICAgICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICAgICAgc2V0VmlkZW9FcnJvcignRXJyb3IgYWwgY2FyZ2FyIGVsIHZpZGVvJyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE1hbmVqbyBkZSBldmVudG9zIGRlIHZpZGVvXG4gIGNvbnN0IGhhbmRsZVZpZGVvUGxheSA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnVmlkZW8gaW5pY2lhZG8gY29ycmVjdGFtZW50ZScpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVZpZGVvRXJyb3IgPSAoZXZlbnQ6IFJlYWN0LlN5bnRoZXRpY0V2ZW50PEhUTUxWaWRlb0VsZW1lbnQsIEV2ZW50PikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGxhIHJlcHJvZHVjY2nDs24gZGVsIHZpZGVvOicsIGV2ZW50KTtcbiAgICBzZXRWaWRlb0Vycm9yKCdFcnJvciBhbCByZXByb2R1Y2lyIGVsIHZpZGVvJyk7XG4gICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVZpZGVvQnVmZmVyaW5nID0gKCkgPT4ge1xuICAgIHNldElzQnVmZmVyaW5nKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVZpZGVvQ2FuUGxheSA9ICgpID0+IHtcbiAgICBzZXRJc0J1ZmZlcmluZyhmYWxzZSk7XG4gIH07XG5cbiAgLy8gT2J0ZW5lciBsYSBmdWVudGUgZGVsIGFyY2hpdm9cbiAgY29uc3QgZ2V0QXR0YWNobWVudFNvdXJjZSA9ICgpID0+IHtcbiAgICBpZiAoYXR0YWNobWVudC5pc0xhcmdlRmlsZSAmJiBhdHRhY2htZW50LmZpbGVJZCkge1xuICAgICAgcmV0dXJuIGAke2FwaUJhc2VVcmx9L2NoYXRzL2ZpbGUvJHthdHRhY2htZW50LmZpbGVJZH1gO1xuICAgIH1cbiAgICByZXR1cm4gYGRhdGE6JHthdHRhY2htZW50LmNvbnRlbnRUeXBlfTtiYXNlNjQsJHthdHRhY2htZW50LmRhdGF9YDtcbiAgfTtcblxuICAvLyBPYnRlbmVyIGxhIG1pbmlhdHVyYSBwYXJhIHZpZGVvc1xuICBjb25zdCBnZXRUaHVtYm5haWxTb3VyY2UgPSAoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgJiYgYXR0YWNobWVudC5maWxlSWQpIHtcbiAgICAgIHJldHVybiBgJHthcGlCYXNlVXJsfS9jaGF0cy9maWxlLyR7YXR0YWNobWVudC5maWxlSWR9L3RodW1ibmFpbGA7XG4gICAgfVxuICAgIHJldHVybiAnL3ZpZGVvLXBsYWNlaG9sZGVyLnBuZyc7XG4gIH07XG5cbiAgLy8gRGVzY2FyZ2FyIGVsIGFyY2hpdm9cbiAgY29uc3QgaGFuZGxlRG93bmxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGEuaHJlZiA9IGdldEF0dGFjaG1lbnRTb3VyY2UoKTtcbiAgICBhLmRvd25sb2FkID0gYXR0YWNobWVudC5maWxlbmFtZSB8fCAnZG93bmxvYWQnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgYS5jbGljaygpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5hciBlbCB0aXBvIGRlIGFyY2hpdm9cbiAgY29uc3QgZ2V0RmlsZVR5cGUgPSAoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHJldHVybiAnaW1hZ2UnO1xuICAgIGlmIChhdHRhY2htZW50LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ3ZpZGVvLycpKSByZXR1cm4gJ3ZpZGVvJztcbiAgICBpZiAoYXR0YWNobWVudC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuICdhdWRpbyc7XG4gICAgcmV0dXJuICdkb2N1bWVudCc7XG4gIH07XG5cbiAgLy8gTWFuZWphciBmdWxsc2NyZWVuIHBhcmEgdmlkZW9zXG4gIGNvbnN0IHRvZ2dsZUZ1bGxzY3JlZW4gPSAoKSA9PiB7XG4gICAgaWYgKGxvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcpIHJldHVybjtcbiAgICBzZXRTaG93RnVsbHNjcmVlbighc2hvd0Z1bGxzY3JlZW4pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUxvYWRlZERhdGEgPSAoKSA9PiB7XG4gICAgc2V0TG9hZFN0YXRlKCdsb2FkZWQnKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZXRyeSA9ICgpID0+IHtcbiAgICBzZXRSZXRyeUNvdW50KDApO1xuICAgIHNldExvYWRTdGF0ZSgnaW5pdGlhbCcpO1xuICB9O1xuXG4gIGNvbnN0IGZpbGVUeXBlID0gZ2V0RmlsZVR5cGUoKTtcbiAgY29uc3Qgc291cmNlID0gZ2V0QXR0YWNobWVudFNvdXJjZSgpO1xuICBcbiAgLy8gUmVuZGVyIHNlZ8O6biBlbCB0aXBvIGRlIGFyY2hpdm9cbiAgc3dpdGNoIChmaWxlVHlwZSkge1xuICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IGltYWdlLXByZXZpZXdcIj5cbiAgICAgICAgICA8aW1nIFxuICAgICAgICAgICAgc3JjPXtzb3VyY2V9IFxuICAgICAgICAgICAgYWx0PXthdHRhY2htZW50LmZpbGVuYW1lIHx8ICdJbWFnZSd9IFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1pbWFnZVwiXG4gICAgICAgICAgICBvbkxvYWQ9eygpID0+IHNldExvYWRTdGF0ZSgnbG9hZGVkJyl9XG4gICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBzZXRMb2FkU3RhdGUoJ2Vycm9yJyl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9hZFN0YXRlID09PSAnZXJyb3InICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1lcnJvclwiPlxuICAgICAgICAgICAgICA8cD5FcnJvciBhbCBjYXJnYXIgbGEgaW1hZ2VuPC9wPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVJldHJ5fT5SZWludGVudGFyPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRG93bmxvYWR9IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhdHRhY2htZW50LWJ1dHRvbiAke2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcgPyAnZGlzYWJsZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuPuKsh++4jzwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0gXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+8J+UjTwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtzaG93RnVsbHNjcmVlbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxzY3JlZW4tb3ZlcmxheVwiIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxzY3JlZW4tY29udGVudFwiIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9e3NvdXJjZX0gYWx0PXthdHRhY2htZW50LmZpbGVuYW1lIHx8ICdJbWFnZSd9IC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufSBjbGFzc05hbWU9XCJjbG9zZS1idXR0b25cIj7DlzwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICBcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtcHJldmlldyB2aWRlby1wcmV2aWV3XCI+XG4gICAgICAgICAge2xvYWRTdGF0ZSA9PT0gJ2luaXRpYWwnIHx8IGxvYWRTdGF0ZSA9PT0gJ2xvYWRpbmcnID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2aWRlby1wbGFjZWhvbGRlclwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz17Z2V0VGh1bWJuYWlsU291cmNlKCl9IGFsdD1cIlZpZGVvIHRodW1ibmFpbFwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1pbmRpY2F0b3JcIj5cbiAgICAgICAgICAgICAgICB7bG9hZFN0YXRlID09PSAnaW5pdGlhbCcgPyAnUHJlcGFyYW5kbyB2aWRlby4uLicgOiAnQ2FyZ2FuZG8gdmlkZW8uLi4nfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXByb2dyZXNzXCI+e01hdGgubWluKHJldHJ5Q291bnQgKiAxMCwgOTApfSU8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogbG9hZFN0YXRlID09PSAnZXJyb3InID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2aWRlby1lcnJvclwiPlxuICAgICAgICAgICAgICA8aW1nIHNyYz17Z2V0VGh1bWJuYWlsU291cmNlKCl9IGFsdD1cIlZpZGVvIHRodW1ibmFpbFwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3ItbWVzc2FnZVwiPlxuICAgICAgICAgICAgICAgIDxwPnt2aWRlb0Vycm9yfTwvcD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVJldHJ5fSBjbGFzc05hbWU9XCJyZXRyeS1idXR0b25cIj5SZWludGVudGFyPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDx2aWRlbyBcbiAgICAgICAgICAgICAgcmVmPXt2aWRlb1JlZn1cbiAgICAgICAgICAgICAgc3JjPXtzb3VyY2V9IFxuICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXR0YWNobWVudC12aWRlbyBsb2FkZWRcIlxuICAgICAgICAgICAgICBvblBsYXk9e2hhbmRsZVZpZGVvUGxheX1cbiAgICAgICAgICAgICAgb25FcnJvcj17aGFuZGxlVmlkZW9FcnJvcn1cbiAgICAgICAgICAgICAgb25XYWl0aW5nPXtoYW5kbGVWaWRlb0J1ZmZlcmluZ31cbiAgICAgICAgICAgICAgb25DYW5QbGF5PXtoYW5kbGVWaWRlb0NhblBsYXl9XG4gICAgICAgICAgICAgIHBvc3Rlcj17Z2V0VGh1bWJuYWlsU291cmNlKCl9XG4gICAgICAgICAgICAgIHByZWxvYWQ9XCJtZXRhZGF0YVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhdHRhY2htZW50LWJ1dHRvbiAke2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcgPyAnZGlzYWJsZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuPvCflI08L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7c2hvd0Z1bGxzY3JlZW4gJiYgbG9hZFN0YXRlID09PSAnbG9hZGVkJyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxzY3JlZW4tb3ZlcmxheVwiIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxzY3JlZW4tY29udGVudFwiIG9uQ2xpY2s9e2UgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX0+XG4gICAgICAgICAgICAgICAgPHZpZGVvIFxuICAgICAgICAgICAgICAgICAgc3JjPXtzb3VyY2V9IFxuICAgICAgICAgICAgICAgICAgY29udHJvbHMgXG4gICAgICAgICAgICAgICAgICBhdXRvUGxheVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi12aWRlb1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59IGNsYXNzTmFtZT1cImNsb3NlLWJ1dHRvblwiPsOXPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7aXNCdWZmZXJpbmcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidWZmZXJpbmctaW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxwPkNhcmdhbmRvLi4uPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IGF1ZGlvLXByZXZpZXdcIj5cbiAgICAgICAgICA8YXVkaW8gXG4gICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtYXVkaW9cIlxuICAgICAgICAgICAgb25FcnJvcj17KCkgPT4gc2V0TG9hZFN0YXRlKCdlcnJvcicpfVxuICAgICAgICAgIC8+XG4gICAgICAgICAge2xvYWRTdGF0ZSA9PT0gJ2Vycm9yJyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtZXJyb3JcIj5cbiAgICAgICAgICAgICAgPHA+RXJyb3IgYWwgY2FyZ2FyIGVsIGF1ZGlvPC9wPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVJldHJ5fT5SZWludGVudGFyPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRG93bmxvYWR9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICBcbiAgICBjYXNlICdkb2N1bWVudCc6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtcHJldmlldyBkb2N1bWVudC1wcmV2aWV3XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkb2N1bWVudC1pY29uXCI+XG4gICAgICAgICAgICA8c3Bhbj7wn5OEPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZG9jdW1lbnQtbmFtZVwiPnthdHRhY2htZW50LmZpbGVuYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlRG93bmxvYWR9IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtYnV0dG9uXCI+XG4gICAgICAgICAgICAgIDxzcGFuPuKsh++4jzwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkb2N1bWVudC1pY29uXCI+XG4gICAgICAgICAgICA8c3Bhbj7wn5SXPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZG9jdW1lbnQtbmFtZVwiPnthdHRhY2htZW50LmZpbGVuYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlRG93bmxvYWR9IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtYnV0dG9uXCI+XG4gICAgICAgICAgICAgIDxzcGFuPuKsh++4jzwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH1cbn07XG5cbi8qKlxuICogVXRpbGlkYWQgcGFyYSByZWNvbnN0cnVpciBhcmNoaXZvcyBmcmFnbWVudGFkb3NcbiAqL1xuY29uc3QgcmVjb25zdHJ1Y3RGaWxlRnJvbUNodW5rcyA9IChjaHVua3M6IEZpbGVBdHRhY2htZW50W10pOiBzdHJpbmcgPT4ge1xuICAvLyBPcmRlbmFyIGxvcyBjaHVua3MgcG9yIMOtbmRpY2UgKHBvciBzaSBhY2FzbylcbiAgY29uc3Qgc29ydGVkQ2h1bmtzID0gWy4uLmNodW5rc10uc29ydCgoYSwgYikgPT4gXG4gICAgKGEuY2h1bmtJbmRleCB8fCAwKSAtIChiLmNodW5rSW5kZXggfHwgMCkpO1xuICBcbiAgLy8gQ29uY2F0ZW5hciB0b2RvcyBsb3MgZGF0b3MgYmFzZTY0XG4gIGNvbnN0IGZ1bGxCYXNlNjQgPSBzb3J0ZWRDaHVua3MubWFwKGNodW5rID0+IGNodW5rLmRhdGEpLmpvaW4oJycpO1xuICBcbiAgcmV0dXJuIGZ1bGxCYXNlNjQ7XG59O1xuXG4vKipcbiAqIENvbXBvbmVudGUgcGFyYSBtb3N0cmFyIGFyY2hpdm9zIHJlY29uc3RydWlkb3MgZGUgZnJhZ21lbnRvc1xuICovXG5jb25zdCBSZWNvbnN0cnVjdGVkQXR0YWNobWVudCA9ICh7IG9yaWdpbmFsRmlsZSwgY2h1bmtzIH06IHsgXG4gIG9yaWdpbmFsRmlsZTogc3RyaW5nLCBcbiAgY2h1bmtzOiBGaWxlQXR0YWNobWVudFtdIFxufSkgPT4ge1xuICBjb25zdCBbZXhwYW5kZWQsIHNldEV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Z1bGxzY3JlZW5WaWV3LCBzZXRGdWxsc2NyZWVuVmlld10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCB0b2dnbGVFeHBhbmQgPSAoKSA9PiB7XG4gICAgc2V0RXhwYW5kZWQoIWV4cGFuZGVkKTtcbiAgfTtcbiAgXG4gIGNvbnN0IHRvZ2dsZUZ1bGxzY3JlZW4gPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgc2V0RnVsbHNjcmVlblZpZXcoIWZ1bGxzY3JlZW5WaWV3KTtcbiAgfTtcbiAgXG4gIGNvbnN0IGNsb3NlRnVsbHNjcmVlbiA9ICgpID0+IHtcbiAgICBzZXRGdWxsc2NyZWVuVmlldyhmYWxzZSk7XG4gIH07XG4gIFxuICBjb25zdCBmaWxlVHlwZSA9IGNodW5rc1swXT8uZmlsZVR5cGU7XG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gY2h1bmtzWzBdPy5jb250ZW50VHlwZTtcbiAgY29uc3QgZnVsbERhdGEgPSByZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzKGNodW5rcyk7XG4gIGNvbnN0IGJhc2U2NFNyYyA9IGBkYXRhOiR7Y29udGVudFR5cGV9O2Jhc2U2NCwke2Z1bGxEYXRhfWA7XG4gIFxuICBjb25zdCB0b3RhbFNpemUgPSBjaHVua3MucmVkdWNlKCh0b3RhbCwgY2h1bmspID0+IHRvdGFsICsgKGNodW5rLnNpemUgfHwgMCksIDApO1xuICBcbiAgY29uc3QgZm9ybWF0RmlsZVNpemUgPSAoYnl0ZXM/OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIGlmICghYnl0ZXMpIHJldHVybiAnVW5rbm93biBzaXplJztcbiAgICBpZiAoYnl0ZXMgPCAxMDI0KSByZXR1cm4gYCR7Ynl0ZXN9IEJgO1xuICAgIGlmIChieXRlcyA8IDEwMjQgKiAxMDI0KSByZXR1cm4gYCR7KGJ5dGVzIC8gMTAyNCkudG9GaXhlZCgxKX0gS0JgO1xuICAgIHJldHVybiBgJHsoYnl0ZXMgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDEpfSBNQmA7XG4gIH07XG4gIFxuICBzd2l0Y2ggKGZpbGVUeXBlKSB7XG4gICAgY2FzZSBGaWxlVHlwZS5WSURFTzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuICR7ZXhwYW5kZWQgPyAndy1mdWxsIG1heC13LTJ4bCcgOiAndy03Mid9YH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e2Jhc2U2NFNyY30gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgbWF4LWgtOTYgb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgICAgICAgICAgY29udHJvbHNMaXN0PVwibm9kb3dubG9hZFwiXG4gICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4gY29uc29sZS5lcnJvcihcIlZpZGVvIGVycm9yOlwiLCBlKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLlxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgcC0xLjUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLW9wYWNpdHktNzAgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVFeHBhbmR9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRXhwYW5kL0NvbGxhcHNlXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk01IDEwYTEgMSAwIDAxMS0xaDhhMSAxIDAgMTEwIDJINmExIDEgMCAwMS0xLTF6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTAgNWExIDEgMCAwMTEgMXYzaDNhMSAxIDAgMTEwIDJoLTN2M2ExIDEgMCAxMS0yIDB2LTNINmExIDEgMCAxMTAtMmgzVjZhMSAxIDAgMDExLTF6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGEgXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9e2Jhc2U2NFNyY31cbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ9e29yaWdpbmFsRmlsZX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmxhY2sgYmctb3BhY2l0eS01MCB0ZXh0LXdoaXRlIHAtMS41IHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1vcGFjaXR5LTcwIHRyYW5zaXRpb24tYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRG93bmxvYWQgdmlkZW9cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTMgMTdhMSAxIDAgMDExLTFoMTJhMSAxIDAgMTEwIDJINGExIDEgMCAwMS0xLTF6bTMuMjkzLTcuNzA3YTEgMSAwIDAxMS40MTQgMEw5IDEwLjU4NlYzYTEgMSAwIDExMiAwdjcuNTg2bDEuMjkzLTEuMjkzYTEgMSAwIDExMS40MTQgMS40MTRsLTMgM2ExIDEgMCAwMS0xLjQxNCAwbC0zLTNhMSAxIDAgMDEwLTEuNDE0elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0cnVuY2F0ZSBtYXgtdy14c1wiPntvcmlnaW5hbEZpbGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj57Zm9ybWF0RmlsZVNpemUodG90YWxTaXplKX08L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7ZnVsbHNjcmVlblZpZXcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktOTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiIG9uQ2xpY2s9e2Nsb3NlRnVsbHNjcmVlbn0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdy1mdWxsIG1heC13LTZ4bCBtYXgtaC1zY3JlZW4gcC00XCI+XG4gICAgICAgICAgICAgICAgPHZpZGVvIFxuICAgICAgICAgICAgICAgICAgc3JjPXtiYXNlNjRTcmN9IFxuICAgICAgICAgICAgICAgICAgY29udHJvbHMgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG1heC1oLVs5MHZoXSBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIHZpZGVvIHRhZy5cbiAgICAgICAgICAgICAgICA8L3ZpZGVvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IGJnLXdoaXRlIHRleHQtYmxhY2sgcC0yIHJvdW5kZWQtZnVsbFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtjbG9zZUZ1bGxzY3JlZW59XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8Lz5cbiAgICAgICk7XG4gICAgICBcbiAgICAvLyBQYXJhIG90cm9zIHRpcG9zIGRlIGFyY2hpdm9zLCBpbXBsZW1lbnRhciBtYW5lam8gc2ltaWxhci4uLlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBwLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgbXItM1wiPlxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHRleHQtZ3JheS00MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNyAyMWgxMGEyIDIgMCAwMDItMlY5LjQxNGExIDEgMCAwMC0uMjkzLS43MDdsLTUuNDE0LTUuNDE0QTEgMSAwIDAwMTIuNTg2IDNIN2EyIDIgMCAwMC0yIDJ2MTRhMiAyIDAgMDAyIDJ6XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPntvcmlnaW5hbEZpbGV9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAge2Zvcm1hdEZpbGVTaXplKHRvdGFsU2l6ZSl9IOKAoiBSZWNvbnN0cnVpZG8gZGUge2NodW5rcy5sZW5ndGh9IGZyYWdtZW50b3NcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxhIFxuICAgICAgICAgICAgICBocmVmPXtiYXNlNjRTcmN9XG4gICAgICAgICAgICAgIGRvd25sb2FkPXtvcmlnaW5hbEZpbGV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLTMgYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCBwLTEuNSByb3VuZGVkLWZ1bGwgaG92ZXI6YmctYmx1ZS0yMDAgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgICB0aXRsZT1cIkRvd25sb2FkIGZpbGVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTMgMTdhMSAxIDAgMDExLTFoMTJhMSAxIDAgMTEwIDJINGExIDEgMCAwMS0xLTF6bTMuMjkzLTcuNzA3YTEgMSAwIDAxMS40MTQgMEw5IDEwLjU4NlYzYTEgMSAwIDExMiAwdjcuNTg2bDEuMjkzLTEuMjkzYTEgMSAwIDExMS40MTQgMS40MTRsLTMgM2ExIDEgMCAwMS0xLjQxNCAwbC0zLTNhMSAxIDAgMDEwLTEuNDE0elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH1cbn07XG5cbmludGVyZmFjZSBGaWxlQ2h1bmtNYXAge1xuICBbZmlsZW5hbWU6IHN0cmluZ106IHtcbiAgICBjaHVua3M6IEZpbGVBdHRhY2htZW50W107XG4gICAgY29tcGxldGU6IGJvb2xlYW47XG4gICAgY29udGVudFR5cGU6IHN0cmluZztcbiAgICBmaWxlVHlwZTogRmlsZVR5cGU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lc3NhZ2VMaXN0KCkge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgeyBtZXNzYWdlcywgaXNMb2FkaW5nTWVzc2FnZXMsIHR5cGluZ1VzZXJzLCBhY3RpdmVDaGF0IH0gPSB1c2VDaGF0KCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2ZhaWxlZEltYWdlcywgc2V0RmFpbGVkSW1hZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+Pih7fSk7XG4gIGNvbnN0IFtmaWxlQ2h1bmtzLCBzZXRGaWxlQ2h1bmtzXSA9IHVzZVN0YXRlPEZpbGVDaHVua01hcD4oe30pO1xuXG4gIGNvbnN0IGhhbmRsZUltYWdlRXJyb3IgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEZhaWxlZEltYWdlcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2lkXTogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGxvcyBtZW5zYWplcyB5IGRldGVjdGFyIGZyYWdtZW50b3MgZGUgYXJjaGl2b3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPYmpldG8gcGFyYSByYXN0cmVhciBsb3MgY2h1bmtzIGRlIGFyY2hpdm9zXG4gICAgY29uc3QgY2h1bmtzOiBGaWxlQ2h1bmtNYXAgPSB7fTtcbiAgICBcbiAgICAvLyBQcm9jZXNhciBjYWRhIG1lbnNhamUgcGFyYSBkZXRlY3RhciBjaHVua3NcbiAgICBtZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKCFtZXNzYWdlLmF0dGFjaG1lbnRzKSByZXR1cm47XG4gICAgICBcbiAgICAgIG1lc3NhZ2UuYXR0YWNobWVudHMuZm9yRWFjaChhdHRhY2htZW50ID0+IHtcbiAgICAgICAgLy8gU2kgZXMgdW4gY2h1bmssIGxvIGFncmVnYW1vcyBhIG51ZXN0cm8gbWFwYVxuICAgICAgICBpZiAoYXR0YWNobWVudC5pc0NodW5rICYmIGF0dGFjaG1lbnQub3JpZ2luYWxGaWxlbmFtZSAmJiBcbiAgICAgICAgICAgIGF0dGFjaG1lbnQudG90YWxDaHVua3MgJiYgYXR0YWNobWVudC5jaHVua0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBrZXkgPSBhdHRhY2htZW50Lm9yaWdpbmFsRmlsZW5hbWU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFjaHVua3Nba2V5XSkge1xuICAgICAgICAgICAgY2h1bmtzW2tleV0gPSB7XG4gICAgICAgICAgICAgIGNodW5rczogQXJyYXkoYXR0YWNobWVudC50b3RhbENodW5rcykuZmlsbChudWxsKS5tYXAoKCkgPT4gKHt9IGFzIEZpbGVBdHRhY2htZW50KSksXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29udGVudFR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgIGZpbGVUeXBlOiBhdHRhY2htZW50LmZpbGVUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbG1hY2VuYXIgZWwgY2h1bmsgZW4gc3UgcG9zaWNpw7NuIGNvcnJlY3RhXG4gICAgICAgICAgY2h1bmtzW2tleV0uY2h1bmtzW2F0dGFjaG1lbnQuY2h1bmtJbmRleF0gPSBhdHRhY2htZW50O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSB0ZW5lbW9zIHRvZG9zIGxvcyBjaHVua3MgY29tcGxldGFtZW50ZSBkZWZpbmlkb3NcbiAgICAgICAgICBjaHVua3Nba2V5XS5jb21wbGV0ZSA9IGNodW5rc1trZXldLmNodW5rcy5ldmVyeShjaHVuayA9PiBcbiAgICAgICAgICAgIGNodW5rICYmIGNodW5rLmRhdGEgJiYgY2h1bmsuZmlsZW5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBzZXRGaWxlQ2h1bmtzKGNodW5rcyk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIFNjcm9sbCB0byBib3R0b20gd2hlbiBtZXNzYWdlcyBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWVzc2FnZXNFbmRSZWYuY3VycmVudCkge1xuICAgICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIGlmIChpc0xvYWRpbmdNZXNzYWdlcykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1wcmltYXJ5LTUwMFwiPjwvZGl2PlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yIHRleHQtZ3JheS01MDBcIj5Mb2FkaW5nIG1lc3NhZ2VzLi4uPC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcC0zIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtMTAgdy0xMCB0ZXh0LWdyYXktNDAwXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezEuNX0gZD1cIk04IDEyaC4wMU0xMiAxMmguMDFNMTYgMTJoLjAxTTIxIDEyYzAgNC40MTgtNC4wMyA4LTkgOGE5Ljg2MyA5Ljg2MyAwIDAxLTQuMjU1LS45NDlMMyAyMGwxLjM5NS0zLjcyQzMuNTEyIDE1LjA0MiAzIDEzLjU3NCAzIDEyYzAtNC40MTggNC4wMy04IDktOHM5IDMuNTgyIDkgOHpcIiAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgTm8gbWVzc2FnZXMgeWV0LiBTZW5kIGEgbWVzc2FnZSB0byBzdGFydCB0aGUgY29udmVyc2F0aW9uIVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgLy8gR3JvdXAgbWVzc2FnZXMgYnkgZGF0ZVxuICBjb25zdCBtZXNzYWdlc0J5RGF0ZSA9IG1lc3NhZ2VzLnJlZHVjZSgoZ3JvdXBzLCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKG1lc3NhZ2UuY3JlYXRlZEF0KS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICBpZiAoIWdyb3Vwc1tkYXRlXSkge1xuICAgICAgZ3JvdXBzW2RhdGVdID0gW107XG4gICAgfVxuICAgIGdyb3Vwc1tkYXRlXS5wdXNoKG1lc3NhZ2UpO1xuICAgIHJldHVybiBncm91cHM7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHR5cGVvZiBtZXNzYWdlcz4pO1xuXG4gIC8vIEdldCBhcnJheSBvZiB0eXBpbmcgdXNlcnMgKGV4Y2x1ZGluZyBjdXJyZW50IHVzZXIpXG4gIGNvbnN0IHR5cGluZ1VzZXJzTGlzdCA9IE9iamVjdC5lbnRyaWVzKHR5cGluZ1VzZXJzKVxuICAgIC5maWx0ZXIoKFt1c2VySWQsIGlzVHlwaW5nXSkgPT4gaXNUeXBpbmcgJiYgdXNlcklkICE9PSB1c2VyPy5pZClcbiAgICAubWFwKChbdXNlcklkLCB2YWx1ZV0pID0+IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IHVzZXJJZCk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS00XCI+XG4gICAgICB7T2JqZWN0LmVudHJpZXMobWVzc2FnZXNCeURhdGUpLm1hcCgoW2RhdGUsIGRhdGVNZXNzYWdlc10pID0+IChcbiAgICAgICAgPGRpdiBrZXk9e2RhdGV9IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTEwMCBweC0zIHB5LTEgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIHtmb3JtYXQobmV3IERhdGUoZGF0ZSksICdNTU1NIGQsIHl5eXknKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7ZGF0ZU1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNPd25NZXNzYWdlID0gbWVzc2FnZS5zZW5kZXIuX2lkID09PSB1c2VyPy5pZDtcbiAgICAgICAgICAgIGNvbnN0IHNlbmRlcklkID0gbWVzc2FnZS5zZW5kZXIuX2lkIHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgaGFzQXR0YWNobWVudHMgPSBtZXNzYWdlLmF0dGFjaG1lbnRzICYmIG1lc3NhZ2UuYXR0YWNobWVudHMubGVuZ3RoID4gMDtcblxuICAgICAgICAgICAgY29uc3Qgbm9uQ2h1bmtBdHRhY2htZW50cyA9IG1lc3NhZ2UuYXR0YWNobWVudHM/LmZpbHRlcihhdHQgPT4gIWF0dC5pc0NodW5rKSB8fCBbXTtcblxuICAgICAgICAgICAgLy8gRmlsdHJhciBtZW5zYWplcyBxdWUgc29uIHNvbG8gY2h1bmtzIHBhcmEgZXZpdGFyIGR1cGxpY2Fkb3MgZW4gbGEgVUlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgKCFtZXNzYWdlLmF0dGFjaG1lbnRzIHx8IG1lc3NhZ2UuYXR0YWNobWVudHMubGVuZ3RoID09PSAwIHx8IFxuICAgICAgICAgICAgICAgKG1lc3NhZ2UuYXR0YWNobWVudHMubGVuZ3RoID4gMCAmJiBtZXNzYWdlLmF0dGFjaG1lbnRzLmV2ZXJ5KGF0dCA9PiBhdHQuaXNDaHVuaykpKSAmJiBcbiAgICAgICAgICAgICAgKCFtZXNzYWdlLmNvbnRlbnQgfHwgbWVzc2FnZS5jb250ZW50LmluY2x1ZGVzKFwiUGFydGUgXCIpIHx8IFxuICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50LmluY2x1ZGVzKFwiRW52aWFuZG8gXCIpIHx8IFxuICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50ID09PSBcIkVudmlhbmRvIGFyY2hpdm9zIGdyYW5kZXMuLi5cIilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17bWVzc2FnZS5faWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke2lzT3duTWVzc2FnZSA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCBtYXgtdy14cyBtZDptYXgtdy1tZCBsZzptYXgtdy1sZyAke2lzT3duTWVzc2FnZSA/ICdmbGV4LXJvdy1yZXZlcnNlJyA6ICcnfWB9PlxuICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgbXItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC04IHctOCByb3VuZGVkLWZ1bGwgYmctZ3JheS0zMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIuYXZhdGFyICYmIGlzVmFsaWRJbWFnZVNyYyhtZXNzYWdlLnNlbmRlci5hdmF0YXIpICYmICFmYWlsZWRJbWFnZXNbc2VuZGVySWRdID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e21lc3NhZ2Uuc2VuZGVyLmF2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e21lc3NhZ2Uuc2VuZGVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IGhhbmRsZUltYWdlRXJyb3Ioc2VuZGVySWQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldEluaXRpYWxzKG1lc3NhZ2Uuc2VuZGVyLm5hbWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgXG4gICAgICAgICAgICAgICAgICAgICR7aXNPd25NZXNzYWdlIFxuICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXByaW1hcnktNTAwIHRleHQtd2hpdGUgcm91bmRlZC10bC1sZyByb3VuZGVkLXRyLW5vbmUnIFxuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgcm91bmRlZC10ci1sZyByb3VuZGVkLXRsLW5vbmUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm91bmRlZC1ibC1sZyByb3VuZGVkLWJyLWxnIHAtMyBzaGFkb3ctc21cbiAgICAgICAgICAgICAgICAgIGB9PlxuICAgICAgICAgICAgICAgICAgICB7IWlzT3duTWVzc2FnZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXhzIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5jb250ZW50ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UuY29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHsvKiBEaXNwbGF5IGF0dGFjaG1lbnRzICovfVxuICAgICAgICAgICAgICAgICAgICB7aGFzQXR0YWNobWVudHMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHttZXNzYWdlLmNvbnRlbnQgPyAnbXQtMicgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtub25DaHVua0F0dGFjaG1lbnRzPy5tYXAoKGF0dGFjaG1lbnQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxBdHRhY2htZW50UHJldmlldyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake21lc3NhZ2UuX2lkfS1hdHRhY2htZW50LSR7aW5kZXh9YH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudD17YXR0YWNobWVudH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBtdC0xIG9wYWNpdHktODBcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KG5ldyBEYXRlKG1lc3NhZ2UuY3JlYXRlZEF0KSwgJ2g6bW0gYScpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSl9XG5cbiAgICAgIHsvKiBNb3N0cmFtb3MgbG9zIGFyY2hpdm9zIHJlY29uc3RydWlkb3MgKHNvbG8gc2kgZXN0w6FuIGNvbXBsZXRvcykgKi99XG4gICAgICB7T2JqZWN0LmVudHJpZXMoZmlsZUNodW5rcylcbiAgICAgICAgLmZpbHRlcigoW18sIGluZm9dKSA9PiBpbmZvLmNvbXBsZXRlKVxuICAgICAgICAubWFwKChbZmlsZW5hbWUsIGluZm9dKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2ByZWNvbnN0cnVjdGVkLSR7ZmlsZW5hbWV9YH0gY2xhc3NOYW1lPVwibWItNCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHAtMyByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbWItMiB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgIEFyY2hpdm8gcmVjb25zdHJ1aWRvOlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8UmVjb25zdHJ1Y3RlZEF0dGFjaG1lbnQgXG4gICAgICAgICAgICAgIG9yaWdpbmFsRmlsZT17ZmlsZW5hbWV9IFxuICAgICAgICAgICAgICBjaHVua3M9e2luZm8uY2h1bmtzfSBcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHR5cGluZyBpbmRpY2F0b3IgKi99XG4gICAgICB7dHlwaW5nVXNlcnNMaXN0Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiB0ZXh0LWdyYXktNTAwIHRleHQtc21cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0xXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgcm91bmRlZC1mdWxsIGJnLWdyYXktNDAwIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwbXMnIH19PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMjAwbXMnIH19PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnNDAwbXMnIH19PjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAge3R5cGluZ1VzZXJzTGlzdC5sZW5ndGggPT09IDEgXG4gICAgICAgICAgICAgID8gYCR7dHlwaW5nVXNlcnNMaXN0WzBdfSBpcyB0eXBpbmcuLi5gIFxuICAgICAgICAgICAgICA6IGAke3R5cGluZ1VzZXJzTGlzdC5sZW5ndGh9IHBlb3BsZSBhcmUgdHlwaW5nLi4uYH1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVtcHR5IGRpdiB0byBhbGxvdyBzY3JvbGxpbmcgdG8gYm90dG9tIG9mIG1lc3NhZ2VzICovfVxuICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2hhdCIsIkZpbGVUeXBlIiwidXNlQXV0aCIsIkltYWdlIiwiZm9ybWF0IiwiZ2V0SW5pdGlhbHMiLCJuYW1lIiwicGFydHMiLCJ0cmltIiwic3BsaXQiLCJsZW5ndGgiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0cmluZyIsIk1hdGgiLCJtaW4iLCJpc1ZhbGlkSW1hZ2VTcmMiLCJzcmMiLCJzdGFydHNXaXRoIiwiQXR0YWNobWVudFByZXZpZXciLCJhdHRhY2htZW50IiwibG9hZFN0YXRlIiwic2V0TG9hZFN0YXRlIiwicHJldmlld0F2YWlsYWJsZSIsInNldFByZXZpZXdBdmFpbGFibGUiLCJhcGlCYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJ2aWRlb1JlZiIsInNob3dGdWxsc2NyZWVuIiwic2V0U2hvd0Z1bGxzY3JlZW4iLCJyZXRyeUNvdW50Iiwic2V0UmV0cnlDb3VudCIsInZpZGVvRXJyb3IiLCJzZXRWaWRlb0Vycm9yIiwiaXNCdWZmZXJpbmciLCJzZXRJc0J1ZmZlcmluZyIsImlzTGFyZ2VGaWxlIiwiZmlsZUlkIiwiY29udGVudFR5cGUiLCJjaGVja1ZpZGVvQXZhaWxhYmlsaXR5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwic2V0VGltZW91dCIsInByZXYiLCJtZXRhZGF0YSIsImpzb24iLCJjb21wbGV0ZSIsImVycm9yIiwiY29uc29sZSIsImhhbmRsZVZpZGVvUGxheSIsImxvZyIsImhhbmRsZVZpZGVvRXJyb3IiLCJldmVudCIsImhhbmRsZVZpZGVvQnVmZmVyaW5nIiwiaGFuZGxlVmlkZW9DYW5QbGF5IiwiZ2V0QXR0YWNobWVudFNvdXJjZSIsImRhdGEiLCJnZXRUaHVtYm5haWxTb3VyY2UiLCJoYW5kbGVEb3dubG9hZCIsImEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJmaWxlbmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJnZXRGaWxlVHlwZSIsInRvZ2dsZUZ1bGxzY3JlZW4iLCJoYW5kbGVMb2FkZWREYXRhIiwiaGFuZGxlUmV0cnkiLCJmaWxlVHlwZSIsInNvdXJjZSIsImRpdiIsImNsYXNzTmFtZSIsImltZyIsImFsdCIsIm9uTG9hZCIsIm9uRXJyb3IiLCJwIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwic3BhbiIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ2aWRlbyIsInJlZiIsImNvbnRyb2xzIiwib25QbGF5Iiwib25XYWl0aW5nIiwib25DYW5QbGF5IiwicG9zdGVyIiwicHJlbG9hZCIsImF1dG9QbGF5IiwiYXVkaW8iLCJyZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzIiwiY2h1bmtzIiwic29ydGVkQ2h1bmtzIiwic29ydCIsImIiLCJjaHVua0luZGV4IiwiZnVsbEJhc2U2NCIsIm1hcCIsImNodW5rIiwiam9pbiIsIlJlY29uc3RydWN0ZWRBdHRhY2htZW50Iiwib3JpZ2luYWxGaWxlIiwiZXhwYW5kZWQiLCJzZXRFeHBhbmRlZCIsImZ1bGxzY3JlZW5WaWV3Iiwic2V0RnVsbHNjcmVlblZpZXciLCJ0b2dnbGVFeHBhbmQiLCJjbG9zZUZ1bGxzY3JlZW4iLCJmdWxsRGF0YSIsImJhc2U2NFNyYyIsInRvdGFsU2l6ZSIsInJlZHVjZSIsInRvdGFsIiwic2l6ZSIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJ0b0ZpeGVkIiwiVklERU8iLCJjb250cm9sc0xpc3QiLCJ0aXRsZSIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZmlsbFJ1bGUiLCJkIiwiY2xpcFJ1bGUiLCJzdHJva2UiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsIk1lc3NhZ2VMaXN0IiwidXNlciIsIm1lc3NhZ2VzIiwiaXNMb2FkaW5nTWVzc2FnZXMiLCJ0eXBpbmdVc2VycyIsImFjdGl2ZUNoYXQiLCJtZXNzYWdlc0VuZFJlZiIsImZhaWxlZEltYWdlcyIsInNldEZhaWxlZEltYWdlcyIsImZpbGVDaHVua3MiLCJzZXRGaWxlQ2h1bmtzIiwiaGFuZGxlSW1hZ2VFcnJvciIsImlkIiwiZm9yRWFjaCIsIm1lc3NhZ2UiLCJhdHRhY2htZW50cyIsImlzQ2h1bmsiLCJvcmlnaW5hbEZpbGVuYW1lIiwidG90YWxDaHVua3MiLCJ1bmRlZmluZWQiLCJrZXkiLCJBcnJheSIsImV2ZXJ5IiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJtZXNzYWdlc0J5RGF0ZSIsImdyb3VwcyIsImRhdGUiLCJEYXRlIiwiY3JlYXRlZEF0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicHVzaCIsInR5cGluZ1VzZXJzTGlzdCIsIk9iamVjdCIsImVudHJpZXMiLCJmaWx0ZXIiLCJ1c2VySWQiLCJpc1R5cGluZyIsInZhbHVlIiwiZGF0ZU1lc3NhZ2VzIiwiaXNPd25NZXNzYWdlIiwic2VuZGVyIiwiX2lkIiwic2VuZGVySWQiLCJoYXNBdHRhY2htZW50cyIsIm5vbkNodW5rQXR0YWNobWVudHMiLCJhdHQiLCJjb250ZW50IiwiaW5jbHVkZXMiLCJhdmF0YXIiLCJ3aWR0aCIsImhlaWdodCIsImluZGV4IiwiXyIsImluZm8iLCJzdHlsZSIsImFuaW1hdGlvbkRlbGF5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/chat/MessageList.tsx\n"));

/***/ })

});