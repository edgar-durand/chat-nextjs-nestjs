/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "/_error";
exports.ids = ["/_error"];
exports.modules = {

/***/ "../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=..%2F..%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=..%2F..%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"../../node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"../../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./src/pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./src/pages/_app.tsx\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../node_modules/next/dist/pages/_error.js */ \"../../node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__]);\nprivate_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFUyZwYWdlPSUyRl9lcnJvciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9Li4lMkYuLiUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGcGFnZXMlMkZfZXJyb3IuanMmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUNoQztBQUNMO0FBQzFEO0FBQ29EO0FBQ1Y7QUFDMUM7QUFDeUU7QUFDekU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLHVCQUF1Qix3RUFBSyxDQUFDLG1FQUFRO0FBQ3JDLHVCQUF1Qix3RUFBSyxDQUFDLG1FQUFRO0FBQ3JDLDJCQUEyQix3RUFBSyxDQUFDLG1FQUFRO0FBQ3pDLGVBQWUsd0VBQUssQ0FBQyxtRUFBUTtBQUM3Qix3QkFBd0Isd0VBQUssQ0FBQyxtRUFBUTtBQUM3QztBQUNPLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLGlDQUFpQyx3RUFBSyxDQUFDLG1FQUFRO0FBQy9DLGdDQUFnQyx3RUFBSyxDQUFDLG1FQUFRO0FBQzlDLG9DQUFvQyx3RUFBSyxDQUFDLG1FQUFRO0FBQ3pEO0FBQ08sd0JBQXdCLHlHQUFnQjtBQUMvQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVc7QUFDWCxnQkFBZ0I7QUFDaEIsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELGlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLz84YmNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0IERvY3VtZW50IGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2RvY3VtZW50XCI7XG5pbXBvcnQgQXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvcGFnZXMvX2Vycm9yLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGNvbXBvbmVudCAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFNlcnZlclNpZGVQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsIFwicmVwb3J0V2ViVml0YWxzXCIpO1xuLy8gUmUtZXhwb3J0IGxlZ2FjeSBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvX2Vycm9yXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9fZXJyb3JcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBBcHAsXG4gICAgICAgIERvY3VtZW50XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=..%2F..%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./src/contexts/AuthContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/AuthContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_2__]);\naxios__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    login: async ()=>{},\n    loginWithGoogle: async ()=>{},\n    register: async ()=>{},\n    logout: async ()=>{},\n    updateProfile: async ()=>{}\n});\nconst useAuth = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\nconst AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.useSession)();\n    const API_URL = \"http://localhost:3001\" || 0;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check if user is authenticated in NextAuth session\n        if (status === \"authenticated\" && session?.user) {\n            setUser({\n                id: session.user.id || \"\",\n                name: session.user.name || \"\",\n                email: session.user.email || \"\",\n                avatar: session.user.image || \"\"\n            });\n            // Set authorization header for API requests\n            if (session.accessToken) {\n                // Guardar el token en localStorage para que ChatContext pueda utilizarlo\n                localStorage.setItem(\"token\", session.accessToken);\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${session.accessToken}`;\n            }\n            setIsLoading(false);\n            return;\n        } else if (status === \"unauthenticated\") {\n            // Clear user state if not authenticated with NextAuth\n            setUser(null);\n            setIsLoading(false);\n            return;\n        }\n        // Only check localStorage if NextAuth session status is not determined yet\n        if (status === \"loading\") {\n            return;\n        }\n        // Fallback to legacy token authentication\n        const checkAuthStatus = async ()=>{\n            const token = localStorage.getItem(\"token\");\n            if (!token) {\n                setIsLoading(false);\n                return;\n            }\n            try {\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n                const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`${API_URL}/auth/me`);\n                setUser({\n                    id: data._id,\n                    name: data.name,\n                    email: data.email,\n                    avatar: data.avatar || \"\"\n                });\n            } catch (error) {\n                localStorage.removeItem(\"token\");\n                delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        checkAuthStatus();\n    }, [\n        API_URL,\n        session,\n        status\n    ]);\n    const login = async (email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/login`, {\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error logging in\";\n            throw new Error(message);\n        }\n    };\n    const loginWithGoogle = async ()=>{\n        try {\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signIn)(\"google\", {\n                callbackUrl: \"/\"\n            });\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw new Error(\"Error logging in with Google\");\n        }\n    };\n    const register = async (name, email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/register`, {\n                name,\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error registering\";\n            throw new Error(message);\n        }\n    };\n    const logout = async ()=>{\n        if (status === \"authenticated\") {\n            // For NextAuth logout\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signOut)({\n                callbackUrl: \"/login\"\n            });\n        } else {\n            // For legacy logout\n            if (user) {\n                try {\n                    await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/logout`);\n                } catch (error) {\n                    console.error(\"Error logging out:\", error);\n                }\n            }\n            localStorage.removeItem(\"token\");\n            delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            setUser(null);\n            router.push(\"/login\");\n        }\n    };\n    const updateProfile = async (data)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].patch(`${API_URL}/users/profile`, data);\n            if (response.data) {\n                setUser((prevUser)=>{\n                    if (!prevUser) return null;\n                    return {\n                        ...prevUser,\n                        name: data.name || prevUser.name,\n                        avatar: data.avatar || prevUser.avatar\n                    };\n                });\n            }\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error updating profile\";\n            throw new Error(message);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: {\n            user,\n            isAuthenticated: !!user,\n            isLoading,\n            login,\n            loginWithGoogle,\n            register,\n            logout,\n            updateProfile\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/AuthContext.tsx\",\n        lineNumber: 214,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsT0FBTztvQkFFdEIsT0FBTzt3QkFDTCxHQUFHQSxRQUFRO3dCQUNYMUIsTUFBTVIsS0FBS1EsSUFBSSxJQUFJMEIsU0FBUzFCLElBQUk7d0JBQ2hDRSxRQUFRVixLQUFLVSxNQUFNLElBQUl3QixTQUFTeEIsTUFBTTtvQkFDeEM7Z0JBQ0Y7WUFDRjtRQUNGLEVBQUUsT0FBT2EsT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzNDLFlBQVlrRCxRQUFRO1FBQ25CQyxPQUFPO1lBQ0xsRDtZQUNBQyxpQkFBaUIsQ0FBQyxDQUFDRDtZQUNuQkU7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtrQkFFQ0c7Ozs7OztBQUdQLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4PzFmYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiwgc2lnbkluLCBzaWduT3V0IH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlUHJvZmlsZURhdGEge1xuICBuYW1lPzogc3RyaW5nO1xuICBhdmF0YXI/OiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZD86IHN0cmluZztcbiAgbmV3UGFzc3dvcmQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBdXRoQ29udGV4dFR5cGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGxvZ2luOiAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9naW5XaXRoR29vZ2xlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWdpc3RlcjogKG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9nb3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVQcm9maWxlOiAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGU+KHtcbiAgdXNlcjogbnVsbCxcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBsb2dpbjogYXN5bmMgKCkgPT4ge30sXG4gIGxvZ2luV2l0aEdvb2dsZTogYXN5bmMgKCkgPT4ge30sXG4gIHJlZ2lzdGVyOiBhc3luYyAoKSA9PiB7fSxcbiAgbG9nb3V0OiBhc3luYyAoKSA9PiB7fSxcbiAgdXBkYXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiwgc3RhdHVzIH0gPSB1c2VTZXNzaW9uKCk7XG5cbiAgY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgaW4gTmV4dEF1dGggc2Vzc2lvblxuICAgIGlmIChzdGF0dXMgPT09ICdhdXRoZW50aWNhdGVkJyAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IHNlc3Npb24udXNlci5pZCB8fCAnJyxcbiAgICAgICAgbmFtZTogc2Vzc2lvbi51c2VyLm5hbWUgfHwgJycsXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfHwgJycsXG4gICAgICAgIGF2YXRhcjogc2Vzc2lvbi51c2VyLmltYWdlIHx8ICcnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3IgQVBJIHJlcXVlc3RzXG4gICAgICBpZiAoc2Vzc2lvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAvLyBHdWFyZGFyIGVsIHRva2VuIGVuIGxvY2FsU3RvcmFnZSBwYXJhIHF1ZSBDaGF0Q29udGV4dCBwdWVkYSB1dGlsaXphcmxvXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHNlc3Npb24uYWNjZXNzVG9rZW4pO1xuICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Nlc3Npb24uYWNjZXNzVG9rZW59YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3VuYXV0aGVudGljYXRlZCcpIHtcbiAgICAgIC8vIENsZWFyIHVzZXIgc3RhdGUgaWYgbm90IGF1dGhlbnRpY2F0ZWQgd2l0aCBOZXh0QXV0aFxuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgY2hlY2sgbG9jYWxTdG9yYWdlIGlmIE5leHRBdXRoIHNlc3Npb24gc3RhdHVzIGlzIG5vdCBkZXRlcm1pbmVkIHlldFxuICAgIGlmIChzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBsZWdhY3kgdG9rZW4gYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBjaGVja0F1dGhTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgXG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfVVJMfS9hdXRoL21lYCk7XG4gICAgICAgIFxuICAgICAgICBzZXRVc2VyKHtcbiAgICAgICAgICBpZDogZGF0YS5faWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfHwgJycsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgICAgZGVsZXRlIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ107XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja0F1dGhTdGF0dXMoKTtcbiAgfSwgW0FQSV9VUkwsIHNlc3Npb24sIHN0YXR1c10pO1xuXG4gIGNvbnN0IGxvZ2luID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9naW5gLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgbG9nZ2luZyBpbic7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvZ2luV2l0aEdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2lnbkluKCdnb29nbGUnLCB7IGNhbGxiYWNrVXJsOiAnLycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIGxvZ2luIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgbG9nZ2luZyBpbiB3aXRoIEdvb2dsZScpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWdpc3RlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvcmVnaXN0ZXJgLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgcmVnaXN0ZXJpbmcnO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2F1dGhlbnRpY2F0ZWQnKSB7XG4gICAgICAvLyBGb3IgTmV4dEF1dGggbG9nb3V0XG4gICAgICBhd2FpdCBzaWduT3V0KHsgY2FsbGJhY2tVcmw6ICcvbG9naW4nIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgbGVnYWN5IGxvZ291dFxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9nb3V0YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTtcbiAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChgJHtBUElfVVJMfS91c2Vycy9wcm9maWxlYCwgZGF0YSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldFVzZXIocHJldlVzZXIgPT4ge1xuICAgICAgICAgIGlmICghcHJldlVzZXIpIHJldHVybiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wcmV2VXNlcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSB8fCBwcmV2VXNlci5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhciB8fCBwcmV2VXNlci5hdmF0YXIsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8ICdFcnJvciB1cGRhdGluZyBwcm9maWxlJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIGxvZ2luLFxuICAgICAgICBsb2dpbldpdGhHb29nbGUsXG4gICAgICAgIHJlZ2lzdGVyLFxuICAgICAgICBsb2dvdXQsXG4gICAgICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJheGlvcyIsInVzZVJvdXRlciIsInVzZVNlc3Npb24iLCJzaWduSW4iLCJzaWduT3V0IiwiQXV0aENvbnRleHQiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNMb2FkaW5nIiwibG9naW4iLCJsb2dpbldpdGhHb29nbGUiLCJyZWdpc3RlciIsImxvZ291dCIsInVwZGF0ZVByb2ZpbGUiLCJ1c2VBdXRoIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzZXRVc2VyIiwic2V0SXNMb2FkaW5nIiwicm91dGVyIiwiZGF0YSIsInNlc3Npb24iLCJzdGF0dXMiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImF2YXRhciIsImltYWdlIiwiYWNjZXNzVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2hlY2tBdXRoU3RhdHVzIiwidG9rZW4iLCJnZXRJdGVtIiwiZ2V0IiwiX2lkIiwiZXJyb3IiLCJyZW1vdmVJdGVtIiwicGFzc3dvcmQiLCJwb3N0IiwicHVzaCIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsIkVycm9yIiwiY2FsbGJhY2tVcmwiLCJjb25zb2xlIiwicGF0Y2giLCJwcmV2VXNlciIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.tsx\n");

/***/ }),

/***/ "./src/contexts/ChatContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/ChatContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatProvider: () => (/* binding */ ChatProvider),\n/* harmony export */   FileType: () => (/* binding */ FileType),\n/* harmony export */   useChat: () => (/* binding */ useChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthContext */ \"./src/contexts/AuthContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nvar FileType;\n(function(FileType) {\n    FileType[\"IMAGE\"] = \"image\";\n    FileType[\"VIDEO\"] = \"video\";\n    FileType[\"DOCUMENT\"] = \"document\";\n    FileType[\"AUDIO\"] = \"audio\";\n})(FileType || (FileType = {}));\nconst ChatContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    activeChat: null,\n    messages: [],\n    rooms: [],\n    onlineUsers: {},\n    users: [],\n    typingUsers: {},\n    isLoading: true,\n    isLoadingMessages: false,\n    unreadMessages: {},\n    uploadingFiles: {},\n    setActiveChat: ()=>{},\n    sendMessage: async ()=>{},\n    markAsRead: ()=>{},\n    startTyping: ()=>{},\n    stopTyping: ()=>{},\n    loadMoreMessages: async ()=>0,\n    retryFileUpload: ()=>{},\n    cancelFileUpload: ()=>{}\n});\nconst useChat = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatContext);\nconst ChatProvider = ({ children })=>{\n    const { user, isAuthenticated } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [activeChat, setActiveChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rooms, setRooms] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [typingUsers, setTypingUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isLoadingMessages, setIsLoadingMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socketConnected, setSocketConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadMessages, setUnreadMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploadingFilesByChat, setUploadingFilesByChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [selectedFile, setSelectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const uploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!activeChat) return {};\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        return uploadingFilesByChat[chatId] || {};\n    }, [\n        activeChat,\n        uploadingFilesByChat\n    ]);\n    const updateUploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((chatId, fileId, data)=>{\n        console.log(`Actualizando estado de archivo ${fileId} en chat ${chatId}:`, data);\n        setUploadingFilesByChat((prev)=>{\n            const newState = {\n                ...prev\n            };\n            // Si no existe el chat, lo creamos\n            if (!newState[chatId]) {\n                newState[chatId] = {};\n            }\n            // Si data es null, eliminamos el archivo\n            if (data === null) {\n                if (newState[chatId][fileId]) {\n                    const { [fileId]: _, ...restFiles } = newState[chatId];\n                    newState[chatId] = restFiles;\n                    console.log(`Eliminado archivo ${fileId} de chat ${chatId}`);\n                }\n            } else {\n                // Actualizamos o agregamos el archivo\n                newState[chatId][fileId] = data;\n                console.log(`Actualizado archivo ${fileId} en chat ${chatId} con progreso ${data.progress}%`);\n            }\n            return newState;\n        });\n    }, []);\n    const cancelFileUpload = (file)=>{\n        if (!file.tempId || !activeChat) return;\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        updateUploadingFiles(chatId, file.tempId, null);\n    };\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep the ref in sync with the state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        currentActiveChatRef.current = activeChat;\n    }, [\n        activeChat\n    ]);\n    const API_URL = \"http://localhost:3001\" || 0;\n    // Initialize socket connection when authenticated\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated || !user) {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n            return;\n        }\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n        socketRef.current = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(API_URL, {\n            auth: {\n                token\n            },\n            withCredentials: true,\n            // Aumentar el tiempo de espera para permitir envÃ­o de archivos grandes\n            timeout: 60000 // aumentar el tiempo de espera a 60 segundos\n        });\n        // Socket event listeners\n        socketRef.current.on(\"connect\", ()=>{\n            console.log(\"Socket connected\");\n            setSocketConnected(true);\n        });\n        socketRef.current.on(\"new_message\", (message)=>{\n            const activeChat = currentActiveChatRef.current;\n            // Identificar la clave de chat para seguimiento de notificaciones\n            let chatKey = \"\";\n            if (message.room) {\n                chatKey = `room-${message.room}`;\n            } else {\n                chatKey = message.sender._id === user.id ? `private-${message.recipient}` : `private-${message.sender._id}`;\n            }\n            console.log(\"Mensaje recibido:\", message, \"Chat activo:\", activeChat);\n            // Solo agregar el mensaje si es relevante para el chat activo\n            if (activeChat?.type === \"private\" && (message.sender._id === activeChat.id && message.recipient === user.id || message.sender._id === user.id && message.recipient === activeChat.id) || activeChat?.type === \"room\" && message.room === activeChat.id) {\n                console.log(\"Agregando mensaje al chat activo:\", message);\n                setMessages((prev)=>[\n                        ...prev,\n                        message\n                    ]);\n            } else if (message.sender._id !== user.id && chatKey) {\n                console.log(\"New message notification:\", chatKey, message);\n                setUnreadMessages((prev)=>({\n                        ...prev,\n                        [chatKey]: (prev[chatKey] || 0) + 1\n                    }));\n            }\n        });\n        socketRef.current.on(\"user_status_change\", ({ userId, isOnline })=>{\n            setOnlineUsers((prev)=>({\n                    ...prev,\n                    [userId]: isOnline\n                }));\n        });\n        socketRef.current.on(\"typing_indicator\", (data)=>{\n            const activeChat = currentActiveChatRef.current;\n            if (activeChat?.type === \"private\" && data.senderId === activeChat.id || activeChat?.type === \"room\" && data.roomId === activeChat.id) {\n                // Almacenar nombre en lugar de solo la bandera booleana\n                setTypingUsers((prev)=>({\n                        ...prev,\n                        [data.userId]: data.isTyping ? data.userName : false\n                    }));\n            }\n        });\n        socketRef.current.on(\"message_read\", ({ messageId })=>{\n            setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                        ...msg,\n                        isRead: true\n                    } : msg));\n        });\n        // Handle new room creations\n        socketRef.current.on(\"new_room\", (room)=>{\n            console.log(\"New room received:\", room);\n            setRooms((prev)=>{\n                // Check if the room already exists\n                const exists = prev.some((r)=>r._id === room._id);\n                if (exists) return prev;\n                return [\n                    ...prev,\n                    room\n                ];\n            });\n        });\n        // Handle room updates (members added/removed)\n        socketRef.current.on(\"room_updated\", (room)=>{\n            console.log(\"Room updated:\", room);\n            if (room.removed) {\n                // If this room was removed for this user, remove it from the list\n                setRooms((prev)=>prev.filter((r)=>r._id !== room._id));\n                // If active chat is this room, clear it\n                const activeChat = currentActiveChatRef.current;\n                if (activeChat?.type === \"room\" && activeChat.id === room._id) {\n                    setActiveChat(null);\n                }\n            } else {\n                // Update the room in the list\n                setRooms((prev)=>prev.map((r)=>r._id === room._id ? room : r));\n            }\n        });\n        socketRef.current.on(\"disconnect\", ()=>{\n            console.log(\"Socket disconnected\");\n            setSocketConnected(false);\n        });\n        return ()=>{\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n        };\n    }, [\n        isAuthenticated,\n        user,\n        API_URL\n    ]);\n    // Load initial data: users and rooms\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated) {\n            setIsLoading(false);\n            return;\n        }\n        const fetchInitialData = async ()=>{\n            try {\n                setIsLoading(true);\n                const [usersResponse, roomsResponse] = await Promise.all([\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/users`),\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/rooms/my`)\n                ]);\n                setUsers(usersResponse.data);\n                setRooms(roomsResponse.data);\n                // Set initial online status\n                const initialOnlineStatus = {};\n                usersResponse.data.forEach((user)=>{\n                    initialOnlineStatus[user._id] = user.isOnline || false;\n                });\n                setOnlineUsers(initialOnlineStatus);\n            } catch (error) {\n                console.error(\"Error fetching initial data:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchInitialData();\n    }, [\n        isAuthenticated,\n        API_URL\n    ]);\n    // Cuando se inicia el socket y se conecta, solicitamos el estado actual de mensajes no leÃ­dos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (socketConnected && socketRef.current && user) {\n            // Solicitar mensajes no leÃ­dos al servidor\n            socketRef.current.emit(\"get_unread_messages\");\n            // Escuchar la respuesta con el recuento de mensajes no leÃ­dos\n            socketRef.current.on(\"unread_messages_count\", (unreadCounts)=>{\n                console.log(\"Received unread counts:\", unreadCounts);\n                setUnreadMessages(unreadCounts);\n            });\n            return ()=>{\n                socketRef.current?.off(\"unread_messages_count\");\n            };\n        }\n    }, [\n        socketConnected,\n        user\n    ]);\n    // Asegurarse de que los mensajes se marquen como leÃ­dos cuando se abre un chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeChat && socketRef.current) {\n            // Crear una clave para el chat actual\n            const chatKey = `${activeChat.type}-${activeChat.id}`;\n            // Resetear el contador de mensajes no leÃ­dos para este chat\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n            // Notificar al servidor que los mensajes se han leÃ­do\n            socketRef.current.emit(\"mark_messages_read\", {\n                chatId: activeChat.id,\n                chatType: activeChat.type\n            });\n        }\n    }, [\n        activeChat\n    ]);\n    // FunciÃ³n para manejar el cambio de chat activo\n    const handleActiveChatChange = (chat)=>{\n        // Limpiar las notificaciones no leÃ­das cuando se activa un chat\n        if (chat) {\n            const chatKey = `${chat.type}-${chat.id}`;\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n        }\n        setActiveChat(chat);\n    };\n    // Efecto para actualizar los mensajes cuando cambia el chat activo\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeChat || !isAuthenticated) return;\n        // Resetear el estado al cambiar de chat\n        setMessages([]);\n        setIsLoadingMessages(true);\n        // Reiniciar estados de mensajes no leÃ­dos y archivos en carga\n        if (activeChat) {\n            // Limpiar mensajes no leÃ­dos\n            setUnreadMessages((prev)=>{\n                const chatKey = `${activeChat.type}-${activeChat.id}`;\n                if (prev[chatKey]) {\n                    const newState = {\n                        ...prev\n                    };\n                    delete newState[chatKey];\n                    return newState;\n                }\n                return prev;\n            });\n            // Asegurarnos de que la secciÃ³n \"Archivos en proceso\" desaparezca al cambiar de chat\n            // incluso cuando ya habÃ­a terminado la carga con 100%\n            const chatId = `${activeChat.type}-${activeChat.id}`;\n            if (chatId in uploadingFilesByChat) {\n                const hasCompletedUploads = Object.values(uploadingFilesByChat[chatId]).some((status)=>status.progress === 100);\n                if (hasCompletedUploads) {\n                    setUploadingFilesByChat((prev)=>{\n                        const newState = {\n                            ...prev\n                        };\n                        delete newState[chatId];\n                        return newState;\n                    });\n                }\n            }\n        }\n        // Solicitar mensajes al servidor\n        const fetchMessages = async ()=>{\n            try {\n                let endpoint = \"\";\n                if (activeChat.type === \"private\") {\n                    endpoint = `${API_URL}/chats/direct/${activeChat.id}`;\n                    // Join user room for direct messages\n                    socketRef.current?.emit(\"join_room\", {\n                        userId: activeChat.id\n                    });\n                } else {\n                    endpoint = `${API_URL}/chats/room/${activeChat.id}`;\n                    // Join room\n                    socketRef.current?.emit(\"join_room\", {\n                        roomId: activeChat.id\n                    });\n                }\n                const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n                setMessages(response.data);\n                // Marcar los mensajes como leÃ­dos en el servidor\n                if (response.data.length > 0) {\n                    socketRef.current?.emit(\"mark_messages_read\", {\n                        chatType: activeChat.type,\n                        chatId: activeChat.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error fetching messages:\", error);\n            } finally{\n                setIsLoadingMessages(false);\n            }\n        };\n        fetchMessages();\n        return ()=>{\n            // Clean up - leave rooms\n            if (activeChat.type === \"room\") {\n                socketRef.current?.emit(\"leave_room\", {\n                    roomId: activeChat.id\n                });\n            }\n        };\n    }, [\n        activeChat,\n        user,\n        isAuthenticated,\n        API_URL\n    ]);\n    // Efecto para limpiar archivos completados automÃ¡ticamente\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Revisa cada 2 segundos si hay archivos que estÃ¡n al 100% que deban eliminarse\n        const cleanupInterval = setInterval(()=>{\n            setUploadingFilesByChat((prev)=>{\n                const newState = {\n                    ...prev\n                };\n                let hasChanges = false;\n                // Revisar todos los chats\n                Object.keys(newState).forEach((chatId)=>{\n                    // Revisar todos los archivos en ese chat\n                    Object.keys(newState[chatId]).forEach((fileId)=>{\n                        // Si un archivo estÃ¡ al 100%, eliminarlo\n                        if (newState[chatId][fileId].progress === 100) {\n                            delete newState[chatId][fileId];\n                            hasChanges = true;\n                        }\n                    });\n                    // Si el chat ya no tiene archivos, eliminar el chat\n                    if (Object.keys(newState[chatId]).length === 0) {\n                        delete newState[chatId];\n                        hasChanges = true;\n                    }\n                });\n                return hasChanges ? newState : prev;\n            });\n        }, 2000);\n        return ()=>clearInterval(cleanupInterval);\n    }, []);\n    const sendMessage = async (content, attachments)=>{\n        if (!socketRef.current || !activeChat) return;\n        try {\n            // Generar tempIds para los archivos y convertirlos a FileAttachment\n            const attachmentsWithIds = [];\n            if (attachments && attachments.length > 0) {\n                for (const file of attachments){\n                    const tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n                    // Determinar tipo de archivo de forma segura\n                    let fileType = \"document\";\n                    const fileTypeString = file.type || \"\"; // Usar string vacÃ­o si type es undefined\n                    if (fileTypeString.startsWith(\"image/\")) {\n                        fileType = \"image\";\n                    } else if (fileTypeString.startsWith(\"video/\")) {\n                        fileType = \"video\";\n                    } else if (fileTypeString.startsWith(\"audio/\")) {\n                        fileType = \"audio\";\n                    } else {\n                        fileType = \"document\";\n                    }\n                    // Crear objeto FileAttachment para el archivo\n                    const attachment = {\n                        tempId,\n                        filename: file.name || \"archivo\",\n                        contentType: file.type || \"application/octet-stream\",\n                        fileType,\n                        size: file.size || 0\n                    };\n                    // Iniciar indicador de carga inmediatamente para todos los archivos\n                    const chatId = `${activeChat?.type}-${activeChat?.id}`;\n                    updateUploadingFiles(chatId, tempId, {\n                        progress: 0,\n                        error: undefined\n                    });\n                    // Si es un archivo grande, lo procesamos para subida en segundo plano\n                    if (file.size > 5 * 1024 * 1024) {\n                        attachment.isLargeFile = true;\n                        // Leer como base64 para preprocesamiento\n                        const reader = new FileReader();\n                        reader.readAsDataURL(file);\n                        await new Promise((resolve)=>{\n                            reader.onload = ()=>{\n                                const base64data = reader.result?.toString() || \"\";\n                                // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                                const base64Clean = base64data.split(\",\")[1];\n                                attachment.data = base64Clean;\n                                resolve();\n                            };\n                        });\n                        // Agregar a la lista de adjuntos\n                        attachmentsWithIds.push(attachment);\n                        // Iniciar subida en segundo plano\n                        uploadLargeFileToServer(attachment).then((fileId)=>{\n                            if (fileId) {\n                                // Actualizar el attachment con el fileId\n                                attachment.fileId = fileId;\n                                attachment.isLargeFile = true;\n                                attachment.data = undefined; // Eliminar los datos binarios\n                                // Actualizar progreso a 100%\n                                updateUploadingFiles(chatId, tempId, {\n                                    progress: 100,\n                                    error: undefined\n                                });\n                            }\n                        }).catch((error)=>{\n                            console.error(\"Error subiendo archivo:\", error);\n                            updateUploadingFiles(chatId, tempId, {\n                                progress: 0,\n                                error: error.message || \"Error al subir el archivo\"\n                            });\n                        });\n                    } else {\n                        // Para archivos pequeÃ±os (<5MB), leerlos como base64 y enviar con el mensaje\n                        const reader = new FileReader();\n                        reader.readAsDataURL(file);\n                        await new Promise((resolve)=>{\n                            reader.onload = ()=>{\n                                const base64data = reader.result?.toString() || \"\";\n                                // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                                const base64Clean = base64data.split(\",\")[1];\n                                attachment.data = base64Clean;\n                                resolve();\n                            };\n                        });\n                        // Agregar a la lista de adjuntos\n                        attachmentsWithIds.push(attachment);\n                        // Marcar como completado tambiÃ©n para archivos pequeÃ±os\n                        updateUploadingFiles(chatId, tempId, {\n                            progress: 100,\n                            error: undefined\n                        });\n                    }\n                }\n            }\n            // Preparar datos del mensaje\n            const messageData = {\n                content,\n                attachments: attachmentsWithIds,\n                ...activeChat.type === \"private\" ? {\n                    recipientId: activeChat.id\n                } : {\n                    roomId: activeChat.id\n                }\n            };\n            console.log(\"Enviando mensaje:\", messageData);\n            // Enviar el mensaje a travÃ©s del socket\n            socketRef.current.emit(\"send_message\", messageData, (response)=>{\n                console.log(\"Respuesta al enviar mensaje:\", response);\n                if (!response.success) {\n                    console.error(\"Error al enviar mensaje:\", response.error);\n                }\n            });\n            // Limpiar formulario despuÃ©s de enviar\n            if (fileInputRef.current) {\n                fileInputRef.current.value = \"\";\n            }\n            setSelectedFile(null);\n        } catch (error) {\n            console.error(\"Error al procesar mensaje:\", error);\n        }\n    };\n    const createRoom = async (name, description = \"\", isPrivate = false, members = [])=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms`, {\n                name,\n                description,\n                isPrivate,\n                members\n            });\n            // No need to manually add to rooms array, the socket event will handle it\n            return data;\n        } catch (error) {\n            console.error(\"Error creating room:\", error);\n            throw error;\n        }\n    };\n    const updateRoom = async (roomId, updateData)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].put(`${API_URL}/rooms/${roomId}`, updateData);\n            // Update the room in the local state to immediately reflect changes\n            setRooms((prevRooms)=>prevRooms.map((room)=>room._id === roomId ? {\n                        ...room,\n                        ...data\n                    } : room));\n            return data;\n        } catch (error) {\n            console.error(\"Error updating room:\", error);\n            throw error;\n        }\n    };\n    const joinRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin adding others)\n            // Otherwise use current user's ID (for self-joining)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error joining room:\", error);\n            throw error;\n        }\n    };\n    const leaveRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin removing others)\n            // Otherwise use current user's ID (for self-leaving)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error leaving room:\", error);\n            throw error;\n        }\n    };\n    const setTyping = (isTyping)=>{\n        if (!activeChat || !socketRef.current) return;\n        const typingData = {\n            isTyping,\n            ...activeChat.type === \"private\" ? {\n                recipientId: activeChat.id\n            } : {\n                roomId: activeChat.id\n            }\n        };\n        socketRef.current.emit(\"typing\", typingData);\n    };\n    const clearChatHistory = async (recipientId)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/direct/${recipientId}`);\n            return {\n                success: true,\n                message: \"Chat history cleared successfully\"\n            };\n        } catch (error) {\n            console.error(\"Error clearing chat history:\", error);\n            return {\n                success: false,\n                message: \"Failed to clear chat history\"\n            };\n        }\n    };\n    // ImplementaciÃ³n de retryFileUpload\n    const retryFileUpload = (file)=>{\n        if (!file.tempId) return;\n        // Reset progress\n        const chatId = `${activeChat?.type}-${activeChat?.id}`;\n        updateUploadingFiles(chatId, file.tempId, {\n            progress: 0,\n            error: undefined\n        });\n        // Prepare for re-upload\n        if (file.data) {\n            // Es un archivo ya convertido a base64\n            uploadLargeFileToServer(file);\n        } else if (file.fileId) {\n            // Remover el error pero mantener el progreso como completado\n            // ya que el archivo ya estÃ¡ subido\n            updateUploadingFiles(chatId, file.tempId, {\n                progress: 100,\n                error: undefined\n            });\n        }\n    };\n    // FunciÃ³n auxiliar para subir un archivo grande directamente al servidor\n    const uploadLargeFileToServer = async (attachment)=>{\n        if (!attachment.tempId) {\n            attachment.tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        }\n        try {\n            // Convertir datos base64 a Blob para subir\n            const base64Data = attachment.data || \"\";\n            const byteCharacters = atob(base64Data);\n            const byteArrays = [];\n            for(let offset = 0; offset < byteCharacters.length; offset += 512){\n                const slice = byteCharacters.slice(offset, offset + 512);\n                const byteNumbers = new Array(slice.length);\n                for(let i = 0; i < slice.length; i++){\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n                const byteArray = new Uint8Array(byteNumbers);\n                byteArrays.push(byteArray);\n            }\n            const blob = new Blob(byteArrays, {\n                type: attachment.contentType\n            });\n            const file = new File([\n                blob\n            ], attachment.filename, {\n                type: attachment.contentType\n            });\n            // Crear FormData para la subida\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            // Iniciar la carga y actualizar el estado\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: undefined\n            });\n            // Realizar la subida con seguimiento de progreso\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/file-storage/upload`, formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                },\n                onUploadProgress: (progressEvent)=>{\n                    const percentCompleted = progressEvent.total ? Math.round(progressEvent.loaded * 100 / progressEvent.total) : 0;\n                    console.log(`Progreso de subida para ${attachment.tempId}: ${percentCompleted}%`);\n                    updateUploadingFiles(chatId, attachment.tempId, {\n                        progress: percentCompleted,\n                        error: undefined\n                    });\n                    // Si el archivo ha terminado de cargarse (100%), lo eliminamos de la lista despuÃ©s de un segundo\n                    if (percentCompleted === 100) {\n                        console.log(`Subida completada para ${attachment.tempId}, eliminando en 1 segundo`);\n                        // Esperar un segundo para que el usuario vea que se completÃ³ y luego eliminar\n                        setTimeout(()=>{\n                            updateUploadingFiles(chatId, attachment.tempId, null);\n                        }, 1000);\n                    }\n                }\n            });\n            if (response.data && response.data.fileId) {\n                return response.data.fileId;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error al subir archivo:\", error);\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: error.message || \"Error al subir el archivo\"\n            });\n            return null;\n        }\n    };\n    // Esta funciÃ³n se encarga de marcar un mensaje como leÃ­do\n    const handleMarkAsRead = (messageId)=>{\n        if (!socketRef.current) return;\n        socketRef.current.emit(\"mark_message_read\", {\n            messageId\n        });\n        // Actualizar el estado de mensajes localmente\n        setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                    ...msg,\n                    isRead: true\n                } : msg));\n    };\n    // Esta funciÃ³n carga mÃ¡s mensajes para la paginaciÃ³n\n    const fetchMoreMessages = async (beforeMessageId)=>{\n        if (!activeChat || !user || !isAuthenticated) return;\n        try {\n            let endpoint = \"\";\n            if (activeChat.type === \"private\") {\n                endpoint = `${API_URL}/chats/direct/${activeChat.id}?before=${beforeMessageId}`;\n            } else {\n                endpoint = `${API_URL}/chats/room/${activeChat.id}?before=${beforeMessageId}`;\n            }\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n            // AÃ±adir los mensajes anteriores al inicio del array de mensajes\n            setMessages((prev)=>[\n                    ...response.data,\n                    ...prev\n                ]);\n            return response.data.length;\n        } catch (error) {\n            console.error(\"Error al cargar m\\xe1s mensajes:\", error);\n            return 0;\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatContext.Provider, {\n        value: {\n            activeChat,\n            messages,\n            rooms,\n            onlineUsers,\n            users,\n            typingUsers,\n            isLoading,\n            isLoadingMessages,\n            unreadMessages,\n            uploadingFiles,\n            setActiveChat: handleActiveChatChange,\n            sendMessage,\n            markAsRead: handleMarkAsRead,\n            startTyping: ()=>setTyping(true),\n            stopTyping: ()=>setTyping(false),\n            loadMoreMessages: fetchMoreMessages,\n            retryFileUpload,\n            cancelFileUpload\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/ChatContext.tsx\",\n        lineNumber: 854,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsUUFBUSxFQUFFOEosZ0JBQWdCLENBQUM7WUFDL0U7WUFFQSxNQUFNdkYsV0FBVyxNQUFNbEgsaURBQVMsQ0FBQ2lIO1lBRWpDLGlFQUFpRTtZQUNqRXRGLFlBQVlzQixDQUFBQSxPQUFRO3VCQUFJaUUsU0FBU3BFLElBQUk7dUJBQUtHO2lCQUFLO1lBRS9DLE9BQU9pRSxTQUFTcEUsSUFBSSxDQUFDcUUsTUFBTTtRQUM3QixFQUFFLE9BQU9kLE9BQU87WUFDZHRELFFBQVFzRCxLQUFLLENBQUMsb0NBQWlDQTtZQUMvQyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLHFCQUNFLDhEQUFDbEcsWUFBWXVNLFFBQVE7UUFBQzlDLE9BQU87WUFDM0J4SjtZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQyxlQUFlNEY7WUFDZjNGO1lBQ0FDLFlBQVl1TDtZQUNadEwsYUFBYSxJQUFNeUosVUFBVTtZQUM3QnhKLFlBQVksSUFBTXdKLFVBQVU7WUFDNUJ2SixrQkFBa0JxTDtZQUNsQnBMO1lBQ0FDO1FBQ0Y7a0JBQ0dHOzs7Ozs7QUFHUCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbnRleHRzL0NoYXRDb250ZXh0LnRzeD8wYjU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaW8sIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuL0F1dGhDb250ZXh0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBfaWQ/OiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgYXZhdGFyOiBzdHJpbmc7XG4gIGlzT25saW5lPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGVudW0gRmlsZVR5cGUge1xuICBJTUFHRSA9ICdpbWFnZScsXG4gIFZJREVPID0gJ3ZpZGVvJyxcbiAgRE9DVU1FTlQgPSAnZG9jdW1lbnQnLFxuICBBVURJTyA9ICdhdWRpbydcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlQXR0YWNobWVudCB7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gIGZpbGVUeXBlOiBGaWxlVHlwZTtcbiAgZGF0YT86IHN0cmluZzsgLy8gQmFzZTY0IGVuY29kZWQgZGF0YSBwYXJhIGFyY2hpdm9zIHBlcXVlw7Fvc1xuICBzaXplPzogbnVtYmVyO1xuICBmaWxlSWQ/OiBzdHJpbmc7IC8vIElEIHBhcmEgYXJjaGl2b3MgZ3JhbmRlcyBhbG1hY2VuYWRvcyBwb3Igc2VwYXJhZG9cbiAgaXNMYXJnZUZpbGU/OiBib29sZWFuOyAvLyBJbmRpY2Egc2kgZWwgYXJjaGl2byBlc3TDoSBhbG1hY2VuYWRvIHBvciBzZXBhcmFkb1xuICBpc0NodW5rPzogYm9vbGVhbjtcbiAgb3JpZ2luYWxGaWxlbmFtZT86IHN0cmluZztcbiAgY2h1bmtJbmRleD86IG51bWJlcjtcbiAgdG90YWxDaHVua3M/OiBudW1iZXI7XG4gIHRlbXBJZD86IHN0cmluZzsgLy8gSUQgdGVtcG9yYWwgcGFyYSBzZWd1aW1pZW50byBkZSBjYXJnYVxufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIF9pZDogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nO1xuICBhdHRhY2htZW50cz86IEZpbGVBdHRhY2htZW50W107XG4gIHNlbmRlcjogVXNlcjtcbiAgcmVjaXBpZW50Pzogc3RyaW5nO1xuICByb29tPzogc3RyaW5nO1xuICBpc1JlYWQ6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUm9vbSB7XG4gIF9pZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBpbWFnZT86IHN0cmluZztcbiAgY3JlYXRvcjogVXNlcjtcbiAgbWVtYmVyczogVXNlcltdO1xuICBpc1ByaXZhdGU6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICByZW1vdmVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENoYXRDb250ZXh0VHlwZSB7XG4gIGFjdGl2ZUNoYXQ6IHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsO1xuICBtZXNzYWdlczogTWVzc2FnZVtdO1xuICByb29tczogUm9vbVtdO1xuICBvbmxpbmVVc2VyczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj47XG4gIHVzZXJzOiBVc2VyW107XG4gIHR5cGluZ1VzZXJzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPjtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBpc0xvYWRpbmdNZXNzYWdlczogYm9vbGVhbjtcbiAgdW5yZWFkTWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHVwbG9hZGluZ0ZpbGVzOiBSZWNvcmQ8c3RyaW5nLCB7IHByb2dyZXNzOiBudW1iZXIsIGVycm9yPzogc3RyaW5nIH0+O1xuICBzZXRBY3RpdmVDaGF0OiAoY2hhdDogeyB0eXBlOiAncHJpdmF0ZScgfCAncm9vbScsIGlkOiBzdHJpbmcgfSB8IG51bGwpID0+IHZvaWQ7XG4gIHNlbmRNZXNzYWdlOiAoY29udGVudDogc3RyaW5nLCBhdHRhY2htZW50cz86IEZpbGVbXSkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbWFya0FzUmVhZDogKG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzdGFydFR5cGluZzogKCkgPT4gdm9pZDtcbiAgc3RvcFR5cGluZzogKCkgPT4gdm9pZDtcbiAgbG9hZE1vcmVNZXNzYWdlczogKGJlZm9yZU1lc3NhZ2VJZDogc3RyaW5nKSA9PiBQcm9taXNlPG51bWJlcj47XG4gIHJldHJ5RmlsZVVwbG9hZDogKGZpbGU6IEZpbGVBdHRhY2htZW50KSA9PiB2b2lkO1xuICBjYW5jZWxGaWxlVXBsb2FkOiAoZmlsZTogRmlsZUF0dGFjaG1lbnQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IENoYXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxDaGF0Q29udGV4dFR5cGU+KHtcbiAgYWN0aXZlQ2hhdDogbnVsbCxcbiAgbWVzc2FnZXM6IFtdLFxuICByb29tczogW10sXG4gIG9ubGluZVVzZXJzOiB7fSxcbiAgdXNlcnM6IFtdLFxuICB0eXBpbmdVc2Vyczoge30sXG4gIGlzTG9hZGluZzogdHJ1ZSxcbiAgaXNMb2FkaW5nTWVzc2FnZXM6IGZhbHNlLFxuICB1bnJlYWRNZXNzYWdlczoge30sXG4gIHVwbG9hZGluZ0ZpbGVzOiB7fSxcbiAgc2V0QWN0aXZlQ2hhdDogKCkgPT4ge30sXG4gIHNlbmRNZXNzYWdlOiBhc3luYyAoKSA9PiB7fSxcbiAgbWFya0FzUmVhZDogKCkgPT4ge30sXG4gIHN0YXJ0VHlwaW5nOiAoKSA9PiB7fSxcbiAgc3RvcFR5cGluZzogKCkgPT4ge30sXG4gIGxvYWRNb3JlTWVzc2FnZXM6IGFzeW5jICgpID0+IDAsXG4gIHJldHJ5RmlsZVVwbG9hZDogKCkgPT4ge30sXG4gIGNhbmNlbEZpbGVVcGxvYWQ6ICgpID0+IHt9LFxufSk7XG5cbmV4cG9ydCBjb25zdCB1c2VDaGF0ID0gKCkgPT4gdXNlQ29udGV4dChDaGF0Q29udGV4dCk7XG5cbmV4cG9ydCBjb25zdCBDaGF0UHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgW2FjdGl2ZUNoYXQsIHNldEFjdGl2ZUNoYXRdID0gdXNlU3RhdGU8eyB0eXBlOiAncHJpdmF0ZScgfCAncm9vbScsIGlkOiBzdHJpbmcgfSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbcm9vbXMsIHNldFJvb21zXSA9IHVzZVN0YXRlPFJvb21bXT4oW10pO1xuICBjb25zdCBbdXNlcnMsIHNldFVzZXJzXSA9IHVzZVN0YXRlPFVzZXJbXT4oW10pO1xuICBjb25zdCBbb25saW5lVXNlcnMsIHNldE9ubGluZVVzZXJzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+Pih7fSk7XG4gIGNvbnN0IFt0eXBpbmdVc2Vycywgc2V0VHlwaW5nVXNlcnNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgYm9vbGVhbiB8IHN0cmluZz4+KHt9KTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbaXNMb2FkaW5nTWVzc2FnZXMsIHNldElzTG9hZGluZ01lc3NhZ2VzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NvY2tldENvbm5lY3RlZCwgc2V0U29ja2V0Q29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VucmVhZE1lc3NhZ2VzLCBzZXRVbnJlYWRNZXNzYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pih7fSk7XG4gIGNvbnN0IFt1cGxvYWRpbmdGaWxlc0J5Q2hhdCwgc2V0VXBsb2FkaW5nRmlsZXNCeUNoYXRdID0gdXNlU3RhdGU8e1xuICAgIFtjaGF0SWQ6IHN0cmluZ106IHtcbiAgICAgIFtmaWxlSWQ6IHN0cmluZ106IHtcbiAgICAgICAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgICAgICAgZXJyb3I/OiBzdHJpbmc7XG4gICAgICB9XG4gICAgfVxuICB9Pih7fSk7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGUsIHNldFNlbGVjdGVkRmlsZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIFxuICBjb25zdCB1cGxvYWRpbmdGaWxlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghYWN0aXZlQ2hhdCkgcmV0dXJuIHt9O1xuICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQudHlwZX0tJHthY3RpdmVDaGF0LmlkfWA7XG4gICAgcmV0dXJuIHVwbG9hZGluZ0ZpbGVzQnlDaGF0W2NoYXRJZF0gfHwge307XG4gIH0sIFthY3RpdmVDaGF0LCB1cGxvYWRpbmdGaWxlc0J5Q2hhdF0pO1xuXG4gIGNvbnN0IHVwZGF0ZVVwbG9hZGluZ0ZpbGVzID0gdXNlQ2FsbGJhY2soKFxuICAgIGNoYXRJZDogc3RyaW5nLFxuICAgIGZpbGVJZDogc3RyaW5nLFxuICAgIGRhdGE6IHsgcHJvZ3Jlc3M6IG51bWJlcjsgZXJyb3I/OiBzdHJpbmcgfSB8IG51bGxcbiAgKSA9PiB7XG4gICAgY29uc29sZS5sb2coYEFjdHVhbGl6YW5kbyBlc3RhZG8gZGUgYXJjaGl2byAke2ZpbGVJZH0gZW4gY2hhdCAke2NoYXRJZH06YCwgZGF0YSk7XG4gICAgXG4gICAgc2V0VXBsb2FkaW5nRmlsZXNCeUNoYXQocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4ucHJldiB9O1xuICAgICAgXG4gICAgICAvLyBTaSBubyBleGlzdGUgZWwgY2hhdCwgbG8gY3JlYW1vc1xuICAgICAgaWYgKCFuZXdTdGF0ZVtjaGF0SWRdKSB7XG4gICAgICAgIG5ld1N0YXRlW2NoYXRJZF0gPSB7fTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2kgZGF0YSBlcyBudWxsLCBlbGltaW5hbW9zIGVsIGFyY2hpdm9cbiAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgIGlmIChuZXdTdGF0ZVtjaGF0SWRdW2ZpbGVJZF0pIHtcbiAgICAgICAgICBjb25zdCB7IFtmaWxlSWRdOiBfLCAuLi5yZXN0RmlsZXMgfSA9IG5ld1N0YXRlW2NoYXRJZF07XG4gICAgICAgICAgbmV3U3RhdGVbY2hhdElkXSA9IHJlc3RGaWxlcztcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRWxpbWluYWRvIGFyY2hpdm8gJHtmaWxlSWR9IGRlIGNoYXQgJHtjaGF0SWR9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFjdHVhbGl6YW1vcyBvIGFncmVnYW1vcyBlbCBhcmNoaXZvXG4gICAgICAgIG5ld1N0YXRlW2NoYXRJZF1bZmlsZUlkXSA9IGRhdGE7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBY3R1YWxpemFkbyBhcmNoaXZvICR7ZmlsZUlkfSBlbiBjaGF0ICR7Y2hhdElkfSBjb24gcHJvZ3Jlc28gJHtkYXRhLnByb2dyZXNzfSVgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2FuY2VsRmlsZVVwbG9hZCA9IChmaWxlOiBGaWxlQXR0YWNobWVudCkgPT4ge1xuICAgIGlmICghZmlsZS50ZW1wSWQgfHwgIWFjdGl2ZUNoYXQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0LnR5cGV9LSR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCwgZmlsZS50ZW1wSWQsIG51bGwpO1xuICB9O1xuXG4gIGNvbnN0IHNvY2tldFJlZiA9IHVzZVJlZjxTb2NrZXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgY3VycmVudEFjdGl2ZUNoYXRSZWYgPSB1c2VSZWYoYWN0aXZlQ2hhdCk7XG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgXG4gIC8vIEtlZXAgdGhlIHJlZiBpbiBzeW5jIHdpdGggdGhlIHN0YXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY3VycmVudEFjdGl2ZUNoYXRSZWYuY3VycmVudCA9IGFjdGl2ZUNoYXQ7XG4gIH0sIFthY3RpdmVDaGF0XSk7XG4gIFxuICBjb25zdCBBUElfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJztcbiAgXG4gIC8vIEluaXRpYWxpemUgc29ja2V0IGNvbm5lY3Rpb24gd2hlbiBhdXRoZW50aWNhdGVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQgfHwgIXVzZXIpIHtcbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XG4gICAgXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50ID0gaW8oQVBJX1VSTCwge1xuICAgICAgYXV0aDogeyB0b2tlbiB9LFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgLy8gQXVtZW50YXIgZWwgdGllbXBvIGRlIGVzcGVyYSBwYXJhIHBlcm1pdGlyIGVudsOtbyBkZSBhcmNoaXZvcyBncmFuZGVzXG4gICAgICB0aW1lb3V0OiA2MDAwMCAvLyBhdW1lbnRhciBlbCB0aWVtcG8gZGUgZXNwZXJhIGEgNjAgc2VndW5kb3NcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTb2NrZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnU29ja2V0IGNvbm5lY3RlZCcpO1xuICAgICAgc2V0U29ja2V0Q29ubmVjdGVkKHRydWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCduZXdfbWVzc2FnZScsIChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVDaGF0ID0gY3VycmVudEFjdGl2ZUNoYXRSZWYuY3VycmVudDtcbiAgICAgIFxuICAgICAgLy8gSWRlbnRpZmljYXIgbGEgY2xhdmUgZGUgY2hhdCBwYXJhIHNlZ3VpbWllbnRvIGRlIG5vdGlmaWNhY2lvbmVzXG4gICAgICBsZXQgY2hhdEtleSA9ICcnO1xuICAgICAgaWYgKG1lc3NhZ2Uucm9vbSkge1xuICAgICAgICBjaGF0S2V5ID0gYHJvb20tJHttZXNzYWdlLnJvb219YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXRLZXkgPSBtZXNzYWdlLnNlbmRlci5faWQgPT09IHVzZXIuaWQgPyBgcHJpdmF0ZS0ke21lc3NhZ2UucmVjaXBpZW50fWAgOiBgcHJpdmF0ZS0ke21lc3NhZ2Uuc2VuZGVyLl9pZH1gO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnTWVuc2FqZSByZWNpYmlkbzonLCBtZXNzYWdlLCAnQ2hhdCBhY3Rpdm86JywgYWN0aXZlQ2hhdCk7XG4gICAgICBcbiAgICAgIC8vIFNvbG8gYWdyZWdhciBlbCBtZW5zYWplIHNpIGVzIHJlbGV2YW50ZSBwYXJhIGVsIGNoYXQgYWN0aXZvXG4gICAgICBpZiAoXG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncHJpdmF0ZScgJiYgXG4gICAgICAgICAgKChtZXNzYWdlLnNlbmRlci5faWQgPT09IGFjdGl2ZUNoYXQuaWQgJiYgbWVzc2FnZS5yZWNpcGllbnQgPT09IHVzZXIuaWQpIHx8IFxuICAgICAgICAgICAobWVzc2FnZS5zZW5kZXIuX2lkID09PSB1c2VyLmlkICYmIG1lc3NhZ2UucmVjaXBpZW50ID09PSBhY3RpdmVDaGF0LmlkKSkpIHx8XG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncm9vbScgJiYgbWVzc2FnZS5yb29tID09PSBhY3RpdmVDaGF0LmlkKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBZ3JlZ2FuZG8gbWVuc2FqZSBhbCBjaGF0IGFjdGl2bzonLCBtZXNzYWdlKTtcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgbWVzc2FnZV0pO1xuICAgICAgfSBcbiAgICAgIC8vIFNpIGVsIG1lbnNhamUgbm8gZXMgcGFyYSBlbCBjaGF0IGFjdGl2byB5IG5vIGZ1ZSBlbnZpYWRvIHBvciBlbCB1c3VhcmlvIGFjdHVhbCwgaW5jcmVtZW50YXIgY29udGFkb3JcbiAgICAgIGVsc2UgaWYgKG1lc3NhZ2Uuc2VuZGVyLl9pZCAhPT0gdXNlci5pZCAmJiBjaGF0S2V5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOZXcgbWVzc2FnZSBub3RpZmljYXRpb246JywgY2hhdEtleSwgbWVzc2FnZSk7XG4gICAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHByZXYgPT4gKHtcbiAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgIFtjaGF0S2V5XTogKHByZXZbY2hhdEtleV0gfHwgMCkgKyAxXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbigndXNlcl9zdGF0dXNfY2hhbmdlJywgKHsgdXNlcklkLCBpc09ubGluZSB9KSA9PiB7XG4gICAgICBzZXRPbmxpbmVVc2VycyhwcmV2ID0+ICh7IC4uLnByZXYsIFt1c2VySWRdOiBpc09ubGluZSB9KSk7XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3R5cGluZ19pbmRpY2F0b3InLCAoZGF0YTogeyB1c2VySWQ6IHN0cmluZywgdXNlck5hbWU6IHN0cmluZywgaXNUeXBpbmc6IGJvb2xlYW4sIHJvb21JZD86IHN0cmluZywgc2VuZGVySWQ/OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZlQ2hhdCA9IGN1cnJlbnRBY3RpdmVDaGF0UmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoXG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncHJpdmF0ZScgJiYgZGF0YS5zZW5kZXJJZCA9PT0gYWN0aXZlQ2hhdC5pZCkgfHxcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdyb29tJyAmJiBkYXRhLnJvb21JZCA9PT0gYWN0aXZlQ2hhdC5pZClcbiAgICAgICkge1xuICAgICAgICAvLyBBbG1hY2VuYXIgbm9tYnJlIGVuIGx1Z2FyIGRlIHNvbG8gbGEgYmFuZGVyYSBib29sZWFuYVxuICAgICAgICBzZXRUeXBpbmdVc2VycyhwcmV2ID0+ICh7IFxuICAgICAgICAgIC4uLnByZXYsIFxuICAgICAgICAgIFtkYXRhLnVzZXJJZF06IGRhdGEuaXNUeXBpbmcgPyBkYXRhLnVzZXJOYW1lIDogZmFsc2UgXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbWVzc2FnZV9yZWFkJywgKHsgbWVzc2FnZUlkIH0pID0+IHtcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gXG4gICAgICAgIHByZXYubWFwKG1zZyA9PiBcbiAgICAgICAgICBtc2cuX2lkID09PSBtZXNzYWdlSWQgPyB7IC4uLm1zZywgaXNSZWFkOiB0cnVlIH0gOiBtc2dcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgbmV3IHJvb20gY3JlYXRpb25zXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ25ld19yb29tJywgKHJvb206IFJvb20pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdOZXcgcm9vbSByZWNlaXZlZDonLCByb29tKTtcbiAgICAgIHNldFJvb21zKHByZXYgPT4ge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcm9vbSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LnNvbWUociA9PiByLl9pZCA9PT0gcm9vbS5faWQpO1xuICAgICAgICBpZiAoZXhpc3RzKSByZXR1cm4gcHJldjtcbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCByb29tXTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSByb29tIHVwZGF0ZXMgKG1lbWJlcnMgYWRkZWQvcmVtb3ZlZClcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbigncm9vbV91cGRhdGVkJywgKHJvb206IFJvb20pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdSb29tIHVwZGF0ZWQ6Jywgcm9vbSk7XG4gICAgICBpZiAocm9vbS5yZW1vdmVkKSB7XG4gICAgICAgIC8vIElmIHRoaXMgcm9vbSB3YXMgcmVtb3ZlZCBmb3IgdGhpcyB1c2VyLCByZW1vdmUgaXQgZnJvbSB0aGUgbGlzdFxuICAgICAgICBzZXRSb29tcyhwcmV2ID0+IHByZXYuZmlsdGVyKHIgPT4gci5faWQgIT09IHJvb20uX2lkKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBhY3RpdmUgY2hhdCBpcyB0aGlzIHJvb20sIGNsZWFyIGl0XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNoYXQgPSBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nICYmIGFjdGl2ZUNoYXQuaWQgPT09IHJvb20uX2lkKSB7XG4gICAgICAgICAgc2V0QWN0aXZlQ2hhdChudWxsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSByb29tIGluIHRoZSBsaXN0XG4gICAgICAgIHNldFJvb21zKHByZXYgPT4gcHJldi5tYXAociA9PiByLl9pZCA9PT0gcm9vbS5faWQgPyByb29tIDogcikpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1NvY2tldCBkaXNjb25uZWN0ZWQnKTtcbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfTtcbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlciwgQVBJX1VSTF0pO1xuICBcbiAgLy8gTG9hZCBpbml0aWFsIGRhdGE6IHVzZXJzIGFuZCByb29tc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmZXRjaEluaXRpYWxEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgW3VzZXJzUmVzcG9uc2UsIHJvb21zUmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS91c2Vyc2ApLFxuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS9yb29tcy9teWApXG4gICAgICAgIF0pO1xuICAgICAgICBcbiAgICAgICAgc2V0VXNlcnModXNlcnNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgc2V0Um9vbXMocm9vbXNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBpbml0aWFsIG9ubGluZSBzdGF0dXNcbiAgICAgICAgY29uc3QgaW5pdGlhbE9ubGluZVN0YXR1czogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbiAgICAgICAgdXNlcnNSZXNwb25zZS5kYXRhLmZvckVhY2goKHVzZXI6IFVzZXIpID0+IHtcbiAgICAgICAgICBpbml0aWFsT25saW5lU3RhdHVzW3VzZXIuX2lkIV0gPSB1c2VyLmlzT25saW5lIHx8IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0T25saW5lVXNlcnMoaW5pdGlhbE9ubGluZVN0YXR1cyk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW5pdGlhbCBkYXRhOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaEluaXRpYWxEYXRhKCk7XG4gIH0sIFtpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEN1YW5kbyBzZSBpbmljaWEgZWwgc29ja2V0IHkgc2UgY29uZWN0YSwgc29saWNpdGFtb3MgZWwgZXN0YWRvIGFjdHVhbCBkZSBtZW5zYWplcyBubyBsZcOtZG9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNvY2tldENvbm5lY3RlZCAmJiBzb2NrZXRSZWYuY3VycmVudCAmJiB1c2VyKSB7XG4gICAgICAvLyBTb2xpY2l0YXIgbWVuc2FqZXMgbm8gbGXDrWRvcyBhbCBzZXJ2aWRvclxuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnZ2V0X3VucmVhZF9tZXNzYWdlcycpO1xuICAgICAgXG4gICAgICAvLyBFc2N1Y2hhciBsYSByZXNwdWVzdGEgY29uIGVsIHJlY3VlbnRvIGRlIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd1bnJlYWRfbWVzc2FnZXNfY291bnQnLCAodW5yZWFkQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCB1bnJlYWQgY291bnRzOicsIHVucmVhZENvdW50cyk7XG4gICAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHVucmVhZENvdW50cyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQ/Lm9mZigndW5yZWFkX21lc3NhZ2VzX2NvdW50Jyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3NvY2tldENvbm5lY3RlZCwgdXNlcl0pO1xuXG4gIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxvcyBtZW5zYWplcyBzZSBtYXJxdWVuIGNvbW8gbGXDrWRvcyBjdWFuZG8gc2UgYWJyZSB1biBjaGF0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZUNoYXQgJiYgc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIC8vIENyZWFyIHVuYSBjbGF2ZSBwYXJhIGVsIGNoYXQgYWN0dWFsXG4gICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIFxuICAgICAgLy8gUmVzZXRlYXIgZWwgY29udGFkb3IgZGUgbWVuc2FqZXMgbm8gbGXDrWRvcyBwYXJhIGVzdGUgY2hhdFxuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gTm90aWZpY2FyIGFsIHNlcnZpZG9yIHF1ZSBsb3MgbWVuc2FqZXMgc2UgaGFuIGxlw61kb1xuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICBjaGF0SWQ6IGFjdGl2ZUNoYXQuaWQsXG4gICAgICAgIGNoYXRUeXBlOiBhY3RpdmVDaGF0LnR5cGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIC8vIEZ1bmNpw7NuIHBhcmEgbWFuZWphciBlbCBjYW1iaW8gZGUgY2hhdCBhY3Rpdm9cbiAgY29uc3QgaGFuZGxlQWN0aXZlQ2hhdENoYW5nZSA9IChjaGF0OiB7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xuICAgIC8vIExpbXBpYXIgbGFzIG5vdGlmaWNhY2lvbmVzIG5vIGxlw61kYXMgY3VhbmRvIHNlIGFjdGl2YSB1biBjaGF0XG4gICAgaWYgKGNoYXQpIHtcbiAgICAgIGNvbnN0IGNoYXRLZXkgPSBgJHtjaGF0LnR5cGV9LSR7Y2hhdC5pZH1gO1xuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgXG4gICAgc2V0QWN0aXZlQ2hhdChjaGF0KTtcbiAgfTtcblxuICAvLyBFZmVjdG8gcGFyYSBhY3R1YWxpemFyIGxvcyBtZW5zYWplcyBjdWFuZG8gY2FtYmlhIGVsIGNoYXQgYWN0aXZvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0IHx8ICFpc0F1dGhlbnRpY2F0ZWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBSZXNldGVhciBlbCBlc3RhZG8gYWwgY2FtYmlhciBkZSBjaGF0XG4gICAgc2V0TWVzc2FnZXMoW10pO1xuICAgIHNldElzTG9hZGluZ01lc3NhZ2VzKHRydWUpO1xuICAgIFxuICAgIC8vIFJlaW5pY2lhciBlc3RhZG9zIGRlIG1lbnNhamVzIG5vIGxlw61kb3MgeSBhcmNoaXZvcyBlbiBjYXJnYVxuICAgIGlmIChhY3RpdmVDaGF0KSB7XG4gICAgICAvLyBMaW1waWFyIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgICAgaWYgKHByZXZbY2hhdEtleV0pIHtcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4ucHJldiB9O1xuICAgICAgICAgIGRlbGV0ZSBuZXdTdGF0ZVtjaGF0S2V5XTtcbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQXNlZ3VyYXJub3MgZGUgcXVlIGxhIHNlY2Npw7NuIFwiQXJjaGl2b3MgZW4gcHJvY2Vzb1wiIGRlc2FwYXJlemNhIGFsIGNhbWJpYXIgZGUgY2hhdFxuICAgICAgLy8gaW5jbHVzbyBjdWFuZG8geWEgaGFiw61hIHRlcm1pbmFkbyBsYSBjYXJnYSBjb24gMTAwJVxuICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIGlmIChjaGF0SWQgaW4gdXBsb2FkaW5nRmlsZXNCeUNoYXQpIHtcbiAgICAgICAgY29uc3QgaGFzQ29tcGxldGVkVXBsb2FkcyA9IE9iamVjdC52YWx1ZXModXBsb2FkaW5nRmlsZXNCeUNoYXRbY2hhdElkXSlcbiAgICAgICAgICAuc29tZShzdGF0dXMgPT4gc3RhdHVzLnByb2dyZXNzID09PSAxMDApO1xuICAgICAgICAgIFxuICAgICAgICBpZiAoaGFzQ29tcGxldGVkVXBsb2Fkcykge1xuICAgICAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7Li4ucHJldn07XG4gICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXTtcbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvbGljaXRhciBtZW5zYWplcyBhbCBzZXJ2aWRvclxuICAgIGNvbnN0IGZldGNoTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJykge1xuICAgICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gdXNlciByb29tIGZvciBkaXJlY3QgbWVzc2FnZXNcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnam9pbl9yb29tJywgeyB1c2VySWQ6IGFjdGl2ZUNoYXQuaWQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5kcG9pbnQgPSBgJHtBUElfVVJMfS9jaGF0cy9yb29tLyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gcm9vbVxuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5lbWl0KCdqb2luX3Jvb20nLCB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZW5kcG9pbnQpO1xuICAgICAgICBzZXRNZXNzYWdlcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmNhciBsb3MgbWVuc2FqZXMgY29tbyBsZcOtZG9zIGVuIGVsIHNlcnZpZG9yXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICAgICAgY2hhdFR5cGU6IGFjdGl2ZUNoYXQudHlwZSxcbiAgICAgICAgICAgIGNoYXRJZDogYWN0aXZlQ2hhdC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlczonLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmdNZXNzYWdlcyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaE1lc3NhZ2VzKCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIENsZWFuIHVwIC0gbGVhdmUgcm9vbXNcbiAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdyb29tJykge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbGVhdmVfcm9vbScsIHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFthY3RpdmVDaGF0LCB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEVmZWN0byBwYXJhIGxpbXBpYXIgYXJjaGl2b3MgY29tcGxldGFkb3MgYXV0b23DoXRpY2FtZW50ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFJldmlzYSBjYWRhIDIgc2VndW5kb3Mgc2kgaGF5IGFyY2hpdm9zIHF1ZSBlc3TDoW4gYWwgMTAwJSBxdWUgZGViYW4gZWxpbWluYXJzZVxuICAgIGNvbnN0IGNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsuLi5wcmV2fTtcbiAgICAgICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJldmlzYXIgdG9kb3MgbG9zIGNoYXRzXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1N0YXRlKS5mb3JFYWNoKGNoYXRJZCA9PiB7XG4gICAgICAgICAgLy8gUmV2aXNhciB0b2RvcyBsb3MgYXJjaGl2b3MgZW4gZXNlIGNoYXRcbiAgICAgICAgICBPYmplY3Qua2V5cyhuZXdTdGF0ZVtjaGF0SWRdKS5mb3JFYWNoKGZpbGVJZCA9PiB7XG4gICAgICAgICAgICAvLyBTaSB1biBhcmNoaXZvIGVzdMOhIGFsIDEwMCUsIGVsaW1pbmFybG9cbiAgICAgICAgICAgIGlmIChuZXdTdGF0ZVtjaGF0SWRdW2ZpbGVJZF0ucHJvZ3Jlc3MgPT09IDEwMCkge1xuICAgICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXVtmaWxlSWRdO1xuICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaSBlbCBjaGF0IHlhIG5vIHRpZW5lIGFyY2hpdm9zLCBlbGltaW5hciBlbCBjaGF0XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ld1N0YXRlW2NoYXRJZF0pLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIG5ld1N0YXRlW2NoYXRJZF07XG4gICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZXMgPyBuZXdTdGF0ZSA6IHByZXY7XG4gICAgICB9KTtcbiAgICB9LCAyMDAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjbGVhbnVwSW50ZXJ2YWwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAoY29udGVudDogc3RyaW5nLCBhdHRhY2htZW50cz86IEZpbGVbXSkgPT4ge1xuICAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQgfHwgIWFjdGl2ZUNoYXQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2VuZXJhciB0ZW1wSWRzIHBhcmEgbG9zIGFyY2hpdm9zIHkgY29udmVydGlybG9zIGEgRmlsZUF0dGFjaG1lbnRcbiAgICAgIGNvbnN0IGF0dGFjaG1lbnRzV2l0aElkczogRmlsZUF0dGFjaG1lbnRbXSA9IFtdO1xuICAgICAgXG4gICAgICBpZiAoYXR0YWNobWVudHMgJiYgYXR0YWNobWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYXR0YWNobWVudHMpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wSWQgPSBgdGVtcC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRGV0ZXJtaW5hciB0aXBvIGRlIGFyY2hpdm8gZGUgZm9ybWEgc2VndXJhXG4gICAgICAgICAgbGV0IGZpbGVUeXBlID0gRmlsZVR5cGUuRE9DVU1FTlQ7XG4gICAgICAgICAgY29uc3QgZmlsZVR5cGVTdHJpbmcgPSBmaWxlLnR5cGUgfHwgJyc7IC8vIFVzYXIgc3RyaW5nIHZhY8OtbyBzaSB0eXBlIGVzIHVuZGVmaW5lZFxuICAgICAgICAgIGlmIChmaWxlVHlwZVN0cmluZy5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgZmlsZVR5cGUgPSBGaWxlVHlwZS5JTUFHRTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVUeXBlU3RyaW5nLnN0YXJ0c1dpdGgoJ3ZpZGVvLycpKSB7XG4gICAgICAgICAgICBmaWxlVHlwZSA9IEZpbGVUeXBlLlZJREVPO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGVTdHJpbmcuc3RhcnRzV2l0aCgnYXVkaW8vJykpIHtcbiAgICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuQVVESU87XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuRE9DVU1FTlQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWFyIG9iamV0byBGaWxlQXR0YWNobWVudCBwYXJhIGVsIGFyY2hpdm9cbiAgICAgICAgICBjb25zdCBhdHRhY2htZW50OiBGaWxlQXR0YWNobWVudCA9IHtcbiAgICAgICAgICAgIHRlbXBJZCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlLm5hbWUgfHwgJ2FyY2hpdm8nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZpbGUudHlwZSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcbiAgICAgICAgICAgIGZpbGVUeXBlLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplIHx8IDBcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEluaWNpYXIgaW5kaWNhZG9yIGRlIGNhcmdhIGlubWVkaWF0YW1lbnRlIHBhcmEgdG9kb3MgbG9zIGFyY2hpdm9zXG4gICAgICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdD8udHlwZX0tJHthY3RpdmVDaGF0Py5pZH1gO1xuICAgICAgICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCEsIHRlbXBJZCwgeyBwcm9ncmVzczogMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaSBlcyB1biBhcmNoaXZvIGdyYW5kZSwgbG8gcHJvY2VzYW1vcyBwYXJhIHN1YmlkYSBlbiBzZWd1bmRvIHBsYW5vXG4gICAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDUgKiAxMDI0ICogMTAyNCkgeyAvLyBNw6FzIGRlIDVNQlxuICAgICAgICAgICAgYXR0YWNobWVudC5pc0xhcmdlRmlsZSA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExlZXIgY29tbyBiYXNlNjQgcGFyYSBwcmVwcm9jZXNhbWllbnRvXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NGRhdGEgPSByZWFkZXIucmVzdWx0Py50b1N0cmluZygpIHx8ICcnO1xuICAgICAgICAgICAgICAgIC8vIFF1aXRhciBlbCBwcmVmaWpvIChlai4gXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NENsZWFuID0gYmFzZTY0ZGF0YS5zcGxpdCgnLCcpWzFdO1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQuZGF0YSA9IGJhc2U2NENsZWFuO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZ3JlZ2FyIGEgbGEgbGlzdGEgZGUgYWRqdW50b3NcbiAgICAgICAgICAgIGF0dGFjaG1lbnRzV2l0aElkcy5wdXNoKGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbmljaWFyIHN1YmlkYSBlbiBzZWd1bmRvIHBsYW5vXG4gICAgICAgICAgICB1cGxvYWRMYXJnZUZpbGVUb1NlcnZlcihhdHRhY2htZW50KS50aGVuKGZpbGVJZCA9PiB7XG4gICAgICAgICAgICAgIGlmIChmaWxlSWQpIHtcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGF0dGFjaG1lbnQgY29uIGVsIGZpbGVJZFxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQuZmlsZUlkID0gZmlsZUlkO1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQuZGF0YSA9IHVuZGVmaW5lZDsgLy8gRWxpbWluYXIgbG9zIGRhdG9zIGJpbmFyaW9zXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBwcm9ncmVzbyBhIDEwMCVcbiAgICAgICAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQsIHRlbXBJZCwgeyBwcm9ncmVzczogMTAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1YmllbmRvIGFyY2hpdm86JywgZXJyb3IpO1xuICAgICAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQsIHRlbXBJZCwgeyBwcm9ncmVzczogMCwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGFsIHN1YmlyIGVsIGFyY2hpdm8nIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhcmEgYXJjaGl2b3MgcGVxdWXDsW9zICg8NU1CKSwgbGVlcmxvcyBjb21vIGJhc2U2NCB5IGVudmlhciBjb24gZWwgbWVuc2FqZVxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gcmVhZGVyLnJlc3VsdD8udG9TdHJpbmcoKSB8fCAnJztcbiAgICAgICAgICAgICAgICAvLyBRdWl0YXIgZWwgcHJlZmlqbyAoZWouIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCxcIilcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRDbGVhbiA9IGJhc2U2NGRhdGEuc3BsaXQoJywnKVsxXTtcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50LmRhdGEgPSBiYXNlNjRDbGVhbjtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWdyZWdhciBhIGxhIGxpc3RhIGRlIGFkanVudG9zXG4gICAgICAgICAgICBhdHRhY2htZW50c1dpdGhJZHMucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWFyY2FyIGNvbW8gY29tcGxldGFkbyB0YW1iacOpbiBwYXJhIGFyY2hpdm9zIHBlcXVlw7Fvc1xuICAgICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCB0ZW1wSWQsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHJlcGFyYXIgZGF0b3MgZGVsIG1lbnNhamVcbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBhdHRhY2htZW50czogYXR0YWNobWVudHNXaXRoSWRzLFxuICAgICAgICAuLi4oYWN0aXZlQ2hhdC50eXBlID09PSAncHJpdmF0ZScgPyB7IHJlY2lwaWVudElkOiBhY3RpdmVDaGF0LmlkIH0gOiB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdFbnZpYW5kbyBtZW5zYWplOicsIG1lc3NhZ2VEYXRhKTtcbiAgICAgIFxuICAgICAgLy8gRW52aWFyIGVsIG1lbnNhamUgYSB0cmF2w6lzIGRlbCBzb2NrZXRcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ3NlbmRfbWVzc2FnZScsIG1lc3NhZ2VEYXRhLCAocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVzcHVlc3RhIGFsIGVudmlhciBtZW5zYWplOicsIHJlc3BvbnNlKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZW52aWFyIG1lbnNhamU6JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTGltcGlhciBmb3JtdWxhcmlvIGRlc3B1w6lzIGRlIGVudmlhclxuICAgICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICBzZXRTZWxlY3RlZEZpbGUobnVsbCk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcHJvY2VzYXIgbWVuc2FqZTonLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgY3JlYXRlUm9vbSA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uID0gJycsIGlzUHJpdmF0ZSA9IGZhbHNlLCBtZW1iZXJzOiBzdHJpbmdbXSA9IFtdKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdChgJHtBUElfVVJMfS9yb29tc2AsIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGlzUHJpdmF0ZSxcbiAgICAgICAgbWVtYmVycyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBObyBuZWVkIHRvIG1hbnVhbGx5IGFkZCB0byByb29tcyBhcnJheSwgdGhlIHNvY2tldCBldmVudCB3aWxsIGhhbmRsZSBpdFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJvb206JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgdXBkYXRlUm9vbSA9IGFzeW5jIChyb29tSWQ6IHN0cmluZywgdXBkYXRlRGF0YTogeyBuYW1lPzogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZzsgaW1hZ2U/OiBzdHJpbmc7IGlzUHJpdmF0ZT86IGJvb2xlYW4gfSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnB1dChgJHtBUElfVVJMfS9yb29tcy8ke3Jvb21JZH1gLCB1cGRhdGVEYXRhKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSByb29tIGluIHRoZSBsb2NhbCBzdGF0ZSB0byBpbW1lZGlhdGVseSByZWZsZWN0IGNoYW5nZXNcbiAgICAgIHNldFJvb21zKHByZXZSb29tcyA9PiBcbiAgICAgICAgcHJldlJvb21zLm1hcChyb29tID0+IFxuICAgICAgICAgIHJvb20uX2lkID09PSByb29tSWQgPyB7IC4uLnJvb20sIC4uLmRhdGEgfSA6IHJvb21cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJvb206JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3Qgam9pblJvb20gPSBhc3luYyAocm9vbUlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykgPT4ge1xuICAgIGlmICghdXNlciAmJiAhdXNlcklkKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHVzZXJJZCBpcyBwcm92aWRlZCwgdXNlIGl0IChmb3IgYWRtaW4gYWRkaW5nIG90aGVycylcbiAgICAgIC8vIE90aGVyd2lzZSB1c2UgY3VycmVudCB1c2VyJ3MgSUQgKGZvciBzZWxmLWpvaW5pbmcpXG4gICAgICBjb25zdCB0YXJnZXRVc2VySWQgPSB1c2VySWQgfHwgdXNlciEuaWQ7XG4gICAgICBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L3Jvb21zLyR7cm9vbUlkfS9tZW1iZXJzLyR7dGFyZ2V0VXNlcklkfWApO1xuICAgICAgLy8gUm9vbSB1cGRhdGUgd2lsbCBiZSBoYW5kbGVkIGJ5IHNvY2tldCBldmVudFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBqb2luaW5nIHJvb206JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgbGVhdmVSb29tID0gYXN5bmMgKHJvb21JZDogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXVzZXIgJiYgIXVzZXJJZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBJZiB1c2VySWQgaXMgcHJvdmlkZWQsIHVzZSBpdCAoZm9yIGFkbWluIHJlbW92aW5nIG90aGVycylcbiAgICAgIC8vIE90aGVyd2lzZSB1c2UgY3VycmVudCB1c2VyJ3MgSUQgKGZvciBzZWxmLWxlYXZpbmcpXG4gICAgICBjb25zdCB0YXJnZXRVc2VySWQgPSB1c2VySWQgfHwgdXNlciEuaWQ7XG4gICAgICBhd2FpdCBheGlvcy5kZWxldGUoYCR7QVBJX1VSTH0vcm9vbXMvJHtyb29tSWR9L21lbWJlcnMvJHt0YXJnZXRVc2VySWR9YCk7XG4gICAgICAvLyBSb29tIHVwZGF0ZSB3aWxsIGJlIGhhbmRsZWQgYnkgc29ja2V0IGV2ZW50XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxlYXZpbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBzZXRUeXBpbmcgPSAoaXNUeXBpbmc6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNoYXQgfHwgIXNvY2tldFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdHlwaW5nRGF0YSA9IHtcbiAgICAgIGlzVHlwaW5nLFxuICAgICAgLi4uKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnID8geyByZWNpcGllbnRJZDogYWN0aXZlQ2hhdC5pZCB9IDogeyByb29tSWQ6IGFjdGl2ZUNoYXQuaWQgfSksXG4gICAgfTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCd0eXBpbmcnLCB0eXBpbmdEYXRhKTtcbiAgfTtcbiAgXG4gIGNvbnN0IGNsZWFyQ2hhdEhpc3RvcnkgPSBhc3luYyAocmVjaXBpZW50SWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtBUElfVVJMfS9jaGF0cy9kaXJlY3QvJHtyZWNpcGllbnRJZH1gKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdDaGF0IGhpc3RvcnkgY2xlYXJlZCBzdWNjZXNzZnVsbHknIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNsZWFyaW5nIGNoYXQgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byBjbGVhciBjaGF0IGhpc3RvcnknIH07XG4gICAgfVxuICB9O1xuICBcbiAgLy8gSW1wbGVtZW50YWNpw7NuIGRlIHJldHJ5RmlsZVVwbG9hZFxuICBjb25zdCByZXRyeUZpbGVVcGxvYWQgPSAoZmlsZTogRmlsZUF0dGFjaG1lbnQpID0+IHtcbiAgICBpZiAoIWZpbGUudGVtcElkKSByZXR1cm47XG4gICAgXG4gICAgLy8gUmVzZXQgcHJvZ3Jlc3NcbiAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0Py50eXBlfS0ke2FjdGl2ZUNoYXQ/LmlkfWA7XG4gICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgZmlsZS50ZW1wSWQhLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgIFxuICAgIC8vIFByZXBhcmUgZm9yIHJlLXVwbG9hZFxuICAgIGlmIChmaWxlLmRhdGEpIHtcbiAgICAgIC8vIEVzIHVuIGFyY2hpdm8geWEgY29udmVydGlkbyBhIGJhc2U2NFxuICAgICAgdXBsb2FkTGFyZ2VGaWxlVG9TZXJ2ZXIoZmlsZSk7XG4gICAgfSBlbHNlIGlmIChmaWxlLmZpbGVJZCkge1xuICAgICAgLy8gUmVtb3ZlciBlbCBlcnJvciBwZXJvIG1hbnRlbmVyIGVsIHByb2dyZXNvIGNvbW8gY29tcGxldGFkb1xuICAgICAgLy8geWEgcXVlIGVsIGFyY2hpdm8geWEgZXN0w6Egc3ViaWRvXG4gICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBmaWxlLnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBGdW5jacOzbiBhdXhpbGlhciBwYXJhIHN1YmlyIHVuIGFyY2hpdm8gZ3JhbmRlIGRpcmVjdGFtZW50ZSBhbCBzZXJ2aWRvclxuICBjb25zdCB1cGxvYWRMYXJnZUZpbGVUb1NlcnZlciA9IGFzeW5jIChhdHRhY2htZW50OiBGaWxlQXR0YWNobWVudCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4gPT4ge1xuICAgIGlmICghYXR0YWNobWVudC50ZW1wSWQpIHtcbiAgICAgIGF0dGFjaG1lbnQudGVtcElkID0gYHRlbXAtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ29udmVydGlyIGRhdG9zIGJhc2U2NCBhIEJsb2IgcGFyYSBzdWJpclxuICAgICAgY29uc3QgYmFzZTY0RGF0YSA9IGF0dGFjaG1lbnQuZGF0YSB8fCAnJztcbiAgICAgIGNvbnN0IGJ5dGVDaGFyYWN0ZXJzID0gYXRvYihiYXNlNjREYXRhKTtcbiAgICAgIGNvbnN0IGJ5dGVBcnJheXMgPSBbXTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoOyBvZmZzZXQgKz0gNTEyKSB7XG4gICAgICAgIGNvbnN0IHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyA1MTIpO1xuICAgICAgICBjb25zdCBieXRlTnVtYmVycyA9IG5ldyBBcnJheShzbGljZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYnl0ZU51bWJlcnNbaV0gPSBzbGljZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTtcbiAgICAgICAgYnl0ZUFycmF5cy5wdXNoKGJ5dGVBcnJheSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihieXRlQXJyYXlzLCB7IHR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgfSk7XG4gICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBhdHRhY2htZW50LmZpbGVuYW1lLCB7IHR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUgfSk7XG4gICAgICBcbiAgICAgIC8vIENyZWFyIEZvcm1EYXRhIHBhcmEgbGEgc3ViaWRhXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICBcbiAgICAgIC8vIEluaWNpYXIgbGEgY2FyZ2EgeSBhY3R1YWxpemFyIGVsIGVzdGFkb1xuICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdD8udHlwZX0tJHthY3RpdmVDaGF0Py5pZH1gO1xuICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgYXR0YWNobWVudC50ZW1wSWQhLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgICAgXG4gICAgICAvLyBSZWFsaXphciBsYSBzdWJpZGEgY29uIHNlZ3VpbWllbnRvIGRlIHByb2dyZXNvXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vZmlsZS1zdG9yYWdlL3VwbG9hZGAsIGZvcm1EYXRhLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgICAgIH0sXG4gICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IChwcm9ncmVzc0V2ZW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgcGVyY2VudENvbXBsZXRlZCA9IHByb2dyZXNzRXZlbnQudG90YWwgXG4gICAgICAgICAgICA/IE1hdGgucm91bmQoKHByb2dyZXNzRXZlbnQubG9hZGVkICogMTAwKSAvIHByb2dyZXNzRXZlbnQudG90YWwpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvZ3Jlc28gZGUgc3ViaWRhIHBhcmEgJHthdHRhY2htZW50LnRlbXBJZH06ICR7cGVyY2VudENvbXBsZXRlZH0lYCk7XG4gICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgYXR0YWNobWVudC50ZW1wSWQhLCB7IHByb2dyZXNzOiBwZXJjZW50Q29tcGxldGVkLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gaGEgdGVybWluYWRvIGRlIGNhcmdhcnNlICgxMDAlKSwgbG8gZWxpbWluYW1vcyBkZSBsYSBsaXN0YSBkZXNwdcOpcyBkZSB1biBzZWd1bmRvXG4gICAgICAgICAgaWYgKHBlcmNlbnRDb21wbGV0ZWQgPT09IDEwMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFN1YmlkYSBjb21wbGV0YWRhIHBhcmEgJHthdHRhY2htZW50LnRlbXBJZH0sIGVsaW1pbmFuZG8gZW4gMSBzZWd1bmRvYCk7XG4gICAgICAgICAgICAvLyBFc3BlcmFyIHVuIHNlZ3VuZG8gcGFyYSBxdWUgZWwgdXN1YXJpbyB2ZWEgcXVlIHNlIGNvbXBsZXTDsyB5IGx1ZWdvIGVsaW1pbmFyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgYXR0YWNobWVudC50ZW1wSWQhLCBudWxsKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuZmlsZUlkKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmZpbGVJZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHN1YmlyIGFyY2hpdm86JywgZXJyb3IpO1xuICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdD8udHlwZX0tJHthY3RpdmVDaGF0Py5pZH1gO1xuICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgYXR0YWNobWVudC50ZW1wSWQhLCB7IFxuICAgICAgICBwcm9ncmVzczogMCwgXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBhbCBzdWJpciBlbCBhcmNoaXZvJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBFc3RhIGZ1bmNpw7NuIHNlIGVuY2FyZ2EgZGUgbWFyY2FyIHVuIG1lbnNhamUgY29tbyBsZcOtZG9cbiAgY29uc3QgaGFuZGxlTWFya0FzUmVhZCA9IChtZXNzYWdlSWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghc29ja2V0UmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdtYXJrX21lc3NhZ2VfcmVhZCcsIHsgbWVzc2FnZUlkIH0pO1xuICAgIFxuICAgIC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGRlIG1lbnNhamVzIGxvY2FsbWVudGVcbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxuICAgICAgcHJldi5tYXAobXNnID0+IFxuICAgICAgICBtc2cuX2lkID09PSBtZXNzYWdlSWQgPyB7IC4uLm1zZywgaXNSZWFkOiB0cnVlIH0gOiBtc2dcbiAgICAgIClcbiAgICApO1xuICB9O1xuICBcbiAgLy8gRXN0YSBmdW5jacOzbiBjYXJnYSBtw6FzIG1lbnNhamVzIHBhcmEgbGEgcGFnaW5hY2nDs25cbiAgY29uc3QgZmV0Y2hNb3JlTWVzc2FnZXMgPSBhc3luYyAoYmVmb3JlTWVzc2FnZUlkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNoYXQgfHwgIXVzZXIgfHwgIWlzQXV0aGVudGljYXRlZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnKSB7XG4gICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH0/YmVmb3JlPSR7YmVmb3JlTWVzc2FnZUlkfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmRwb2ludCA9IGAke0FQSV9VUkx9L2NoYXRzL3Jvb20vJHthY3RpdmVDaGF0LmlkfT9iZWZvcmU9JHtiZWZvcmVNZXNzYWdlSWR9YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZW5kcG9pbnQpO1xuICAgICAgXG4gICAgICAvLyBBw7FhZGlyIGxvcyBtZW5zYWplcyBhbnRlcmlvcmVzIGFsIGluaWNpbyBkZWwgYXJyYXkgZGUgbWVuc2FqZXNcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnJlc3BvbnNlLmRhdGEsIC4uLnByZXZdKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubGVuZ3RoO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBjYXJnYXIgbcOhcyBtZW5zYWplczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH07XG4gIFxuICByZXR1cm4gKFxuICAgIDxDaGF0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17e1xuICAgICAgYWN0aXZlQ2hhdCxcbiAgICAgIG1lc3NhZ2VzLFxuICAgICAgcm9vbXMsXG4gICAgICBvbmxpbmVVc2VycyxcbiAgICAgIHVzZXJzLFxuICAgICAgdHlwaW5nVXNlcnMsXG4gICAgICBpc0xvYWRpbmcsXG4gICAgICBpc0xvYWRpbmdNZXNzYWdlcyxcbiAgICAgIHVucmVhZE1lc3NhZ2VzLFxuICAgICAgdXBsb2FkaW5nRmlsZXMsXG4gICAgICBzZXRBY3RpdmVDaGF0OiBoYW5kbGVBY3RpdmVDaGF0Q2hhbmdlLFxuICAgICAgc2VuZE1lc3NhZ2UsXG4gICAgICBtYXJrQXNSZWFkOiBoYW5kbGVNYXJrQXNSZWFkLFxuICAgICAgc3RhcnRUeXBpbmc6ICgpID0+IHNldFR5cGluZyh0cnVlKSxcbiAgICAgIHN0b3BUeXBpbmc6ICgpID0+IHNldFR5cGluZyhmYWxzZSksXG4gICAgICBsb2FkTW9yZU1lc3NhZ2VzOiBmZXRjaE1vcmVNZXNzYWdlcyxcbiAgICAgIHJldHJ5RmlsZVVwbG9hZCxcbiAgICAgIGNhbmNlbEZpbGVVcGxvYWRcbiAgICB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0NoYXRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJpbyIsImF4aW9zIiwidXNlQXV0aCIsIkZpbGVUeXBlIiwiQ2hhdENvbnRleHQiLCJhY3RpdmVDaGF0IiwibWVzc2FnZXMiLCJyb29tcyIsIm9ubGluZVVzZXJzIiwidXNlcnMiLCJ0eXBpbmdVc2VycyIsImlzTG9hZGluZyIsImlzTG9hZGluZ01lc3NhZ2VzIiwidW5yZWFkTWVzc2FnZXMiLCJ1cGxvYWRpbmdGaWxlcyIsInNldEFjdGl2ZUNoYXQiLCJzZW5kTWVzc2FnZSIsIm1hcmtBc1JlYWQiLCJzdGFydFR5cGluZyIsInN0b3BUeXBpbmciLCJsb2FkTW9yZU1lc3NhZ2VzIiwicmV0cnlGaWxlVXBsb2FkIiwiY2FuY2VsRmlsZVVwbG9hZCIsInVzZUNoYXQiLCJDaGF0UHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZXRNZXNzYWdlcyIsInNldFJvb21zIiwic2V0VXNlcnMiLCJzZXRPbmxpbmVVc2VycyIsInNldFR5cGluZ1VzZXJzIiwic2V0SXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nTWVzc2FnZXMiLCJzb2NrZXRDb25uZWN0ZWQiLCJzZXRTb2NrZXRDb25uZWN0ZWQiLCJzZXRVbnJlYWRNZXNzYWdlcyIsInVwbG9hZGluZ0ZpbGVzQnlDaGF0Iiwic2V0VXBsb2FkaW5nRmlsZXNCeUNoYXQiLCJzZWxlY3RlZEZpbGUiLCJzZXRTZWxlY3RlZEZpbGUiLCJjaGF0SWQiLCJ0eXBlIiwiaWQiLCJ1cGRhdGVVcGxvYWRpbmdGaWxlcyIsImZpbGVJZCIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwicHJldiIsIm5ld1N0YXRlIiwiXyIsInJlc3RGaWxlcyIsInByb2dyZXNzIiwiZmlsZSIsInRlbXBJZCIsInNvY2tldFJlZiIsImN1cnJlbnRBY3RpdmVDaGF0UmVmIiwiZmlsZUlucHV0UmVmIiwiY3VycmVudCIsIkFQSV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImRpc2Nvbm5lY3QiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhdXRoIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsIm9uIiwibWVzc2FnZSIsImNoYXRLZXkiLCJyb29tIiwic2VuZGVyIiwiX2lkIiwicmVjaXBpZW50IiwidXNlcklkIiwiaXNPbmxpbmUiLCJzZW5kZXJJZCIsInJvb21JZCIsImlzVHlwaW5nIiwidXNlck5hbWUiLCJtZXNzYWdlSWQiLCJtYXAiLCJtc2ciLCJpc1JlYWQiLCJleGlzdHMiLCJzb21lIiwiciIsInJlbW92ZWQiLCJmaWx0ZXIiLCJmZXRjaEluaXRpYWxEYXRhIiwidXNlcnNSZXNwb25zZSIsInJvb21zUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZ2V0IiwiaW5pdGlhbE9ubGluZVN0YXR1cyIsImZvckVhY2giLCJlcnJvciIsImVtaXQiLCJ1bnJlYWRDb3VudHMiLCJvZmYiLCJjaGF0VHlwZSIsImhhbmRsZUFjdGl2ZUNoYXRDaGFuZ2UiLCJjaGF0IiwiaGFzQ29tcGxldGVkVXBsb2FkcyIsIk9iamVjdCIsInZhbHVlcyIsInN0YXR1cyIsImZldGNoTWVzc2FnZXMiLCJlbmRwb2ludCIsInJlc3BvbnNlIiwibGVuZ3RoIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJoYXNDaGFuZ2VzIiwia2V5cyIsImNsZWFySW50ZXJ2YWwiLCJjb250ZW50IiwiYXR0YWNobWVudHMiLCJhdHRhY2htZW50c1dpdGhJZHMiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZVR5cGUiLCJmaWxlVHlwZVN0cmluZyIsInN0YXJ0c1dpdGgiLCJhdHRhY2htZW50IiwiZmlsZW5hbWUiLCJuYW1lIiwiY29udGVudFR5cGUiLCJzaXplIiwidW5kZWZpbmVkIiwiaXNMYXJnZUZpbGUiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsInJlc29sdmUiLCJvbmxvYWQiLCJiYXNlNjRkYXRhIiwicmVzdWx0IiwiYmFzZTY0Q2xlYW4iLCJzcGxpdCIsInB1c2giLCJ1cGxvYWRMYXJnZUZpbGVUb1NlcnZlciIsInRoZW4iLCJjYXRjaCIsIm1lc3NhZ2VEYXRhIiwicmVjaXBpZW50SWQiLCJzdWNjZXNzIiwidmFsdWUiLCJjcmVhdGVSb29tIiwiZGVzY3JpcHRpb24iLCJpc1ByaXZhdGUiLCJtZW1iZXJzIiwicG9zdCIsInVwZGF0ZVJvb20iLCJ1cGRhdGVEYXRhIiwicHV0IiwicHJldlJvb21zIiwiam9pblJvb20iLCJ0YXJnZXRVc2VySWQiLCJsZWF2ZVJvb20iLCJkZWxldGUiLCJzZXRUeXBpbmciLCJ0eXBpbmdEYXRhIiwiY2xlYXJDaGF0SGlzdG9yeSIsImJhc2U2NERhdGEiLCJieXRlQ2hhcmFjdGVycyIsImF0b2IiLCJieXRlQXJyYXlzIiwib2Zmc2V0Iiwic2xpY2UiLCJieXRlTnVtYmVycyIsIkFycmF5IiwiaSIsImNoYXJDb2RlQXQiLCJieXRlQXJyYXkiLCJVaW50OEFycmF5IiwiYmxvYiIsIkJsb2IiLCJGaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImhlYWRlcnMiLCJvblVwbG9hZFByb2dyZXNzIiwicHJvZ3Jlc3NFdmVudCIsInBlcmNlbnRDb21wbGV0ZWQiLCJ0b3RhbCIsInJvdW5kIiwibG9hZGVkIiwic2V0VGltZW91dCIsImhhbmRsZU1hcmtBc1JlYWQiLCJmZXRjaE1vcmVNZXNzYWdlcyIsImJlZm9yZU1lc3NhZ2VJZCIsIlByb3ZpZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/contexts/ChatContext.tsx\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_auth_react__WEBPACK_IMPORTED_MODULE_2__.SessionProvider, {\n        session: pageProps.session,\n        refetchInterval: 0,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.ChatProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                lineNumber: 14,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n            lineNumber: 13,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2FwcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUVtQjtBQUNLO0FBQ0E7QUFFdkQsU0FBU0csTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBWTtJQUMvQyxxQkFDRSw4REFBQ0wsNERBQWVBO1FBQ2RNLFNBQVNELFVBQVVDLE9BQU87UUFDMUJDLGlCQUFpQjtrQkFFakIsNEVBQUNOLCtEQUFZQTtzQkFDWCw0RUFBQ0MsK0RBQVlBOzBCQUNYLDRFQUFDRTtvQkFBVyxHQUFHQyxTQUFTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbEM7QUFFQSxpRUFBZUYsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9fYXBwLnRzeD9mOWQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyBTZXNzaW9uUHJvdmlkZXIgfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgQ2hhdFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQ2hhdENvbnRleHQnO1xuXG5mdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IEFwcFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Qcm92aWRlciBcbiAgICAgIHNlc3Npb249e3BhZ2VQcm9wcy5zZXNzaW9ufVxuICAgICAgcmVmZXRjaEludGVydmFsPXswfSAvLyBEaXNhYmxlIGF1dG9tYXRpYyByZWZldGNoaW5nXG4gICAgPlxuICAgICAgPEF1dGhQcm92aWRlcj5cbiAgICAgICAgPENoYXRQcm92aWRlcj5cbiAgICAgICAgICA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG4gICAgICAgIDwvQ2hhdFByb3ZpZGVyPlxuICAgICAgPC9BdXRoUHJvdmlkZXI+XG4gICAgPC9TZXNzaW9uUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwO1xuIl0sIm5hbWVzIjpbIlNlc3Npb25Qcm92aWRlciIsIkF1dGhQcm92aWRlciIsIkNoYXRQcm92aWRlciIsIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIiwic2Vzc2lvbiIsInJlZmV0Y2hJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/pages/_document.tsx":
/*!*********************************!*\
  !*** ./src/pages/_document.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"../../node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Document() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n        lang: \"en\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 7,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Real-time chat application\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 8,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 11,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 12,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 10,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFFOUMsU0FBU0k7SUFDdEIscUJBQ0UsOERBQUNKLCtDQUFJQTtRQUFDSyxNQUFLOzswQkFDVCw4REFBQ0osK0NBQUlBOztrQ0FDSCw4REFBQ0s7d0JBQUtDLEtBQUk7d0JBQU9DLE1BQUs7Ozs7OztrQ0FDdEIsOERBQUNDO3dCQUFLQyxNQUFLO3dCQUFjQyxTQUFROzs7Ozs7Ozs7Ozs7MEJBRW5DLDhEQUFDQzs7a0NBQ0MsOERBQUNWLCtDQUFJQTs7Ozs7a0NBQ0wsOERBQUNDLHFEQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeD8xODhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0bWwsIEhlYWQsIE1haW4sIE5leHRTY3JpcHQgfSBmcm9tICduZXh0L2RvY3VtZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRG9jdW1lbnQoKSB7XG4gIHJldHVybiAoXG4gICAgPEh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPGxpbmsgcmVsPVwiaWNvblwiIGhyZWY9XCIvZmF2aWNvbi5pY29cIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiUmVhbC10aW1lIGNoYXQgYXBwbGljYXRpb25cIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgPGJvZHk+XG4gICAgICAgIDxNYWluIC8+XG4gICAgICAgIDxOZXh0U2NyaXB0IC8+XG4gICAgICA8L2JvZHk+XG4gICAgPC9IdG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkh0bWwiLCJIZWFkIiwiTWFpbiIsIk5leHRTY3JpcHQiLCJEb2N1bWVudCIsImxhbmciLCJsaW5rIiwicmVsIiwiaHJlZiIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/_document.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("axios");;

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=..%2F..%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();