/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/chat";
exports.ids = ["pages/chat"];
exports.modules = {

/***/ "../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"../../node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"../../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./src/pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./src/pages/_app.tsx\");\n/* harmony import */ var _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/pages/chat/index.tsx */ \"./src/pages/chat/index.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__]);\n([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/chat\",\n        pathname: \"/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFUyZwYWdlPSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmNoYXQlMkZpbmRleC50c3gmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ2hDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDVjtBQUMxQztBQUN1RDtBQUN2RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsc0RBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsc0RBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsc0RBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLHNEQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsc0RBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsc0RBQVE7QUFDekQ7QUFDTyx3QkFBd0IseUdBQWdCO0FBQy9DO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvP2E0ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCBBcHAgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fYXBwXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvY2hhdC9pbmRleC50c3hcIjtcbi8vIFJlLWV4cG9ydCB0aGUgY29tcG9uZW50IChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbmV4cG9ydCBjb25zdCByZXBvcnRXZWJWaXRhbHMgPSBob2lzdCh1c2VybGFuZCwgXCJyZXBvcnRXZWJWaXRhbHNcIik7XG4vLyBSZS1leHBvcnQgbGVnYWN5IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhcmFtcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhcmFtc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wc1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICBwYWdlOiBcIi9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9jaGF0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgQXBwLFxuICAgICAgICBEb2N1bWVudFxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./src/components/chat/ChatHeader.tsx":
/*!********************************************!*\
  !*** ./src/components/chat/ChatHeader.tsx ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatHeader)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EditRoomModal */ \"./src/components/chat/EditRoomModal.tsx\");\n/* harmony import */ var _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RoomMembersModal */ \"./src/components/chat/RoomMembersModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__, _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__, _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\nfunction ChatHeader() {\n    const { activeChat, users, rooms, onlineUsers, clearChatHistory } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const [isEditModalOpen, setIsEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isMembersModalOpen, setIsMembersModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isClearing, setIsClearing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clearSuccess, setClearSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    if (!activeChat) return null;\n    // Get chat room from the list of rooms\n    const room = rooms.find((r)=>r._id === activeChat.id);\n    // Is this a group chat?\n    const isGroupChat = activeChat.type === \"room\";\n    // For private chats, get the recipient (the other user)\n    const recipient = !isGroupChat ? users.find((u)=>u._id === activeChat.id) : null;\n    // For group chats, display the room information\n    if (isGroupChat && room) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center p-3 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden mr-3\",\n                                    children: room.image && isValidImageSrc(room.image) && !failedImages[room._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                        src: room.image,\n                                        alt: room.name,\n                                        width: 40,\n                                        height: 40,\n                                        className: \"h-full w-full object-cover\",\n                                        priority: false,\n                                        onError: ()=>room._id && handleImageError(room._id || \"\")\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 74,\n                                        columnNumber: 17\n                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl font-semibold\",\n                                        children: getInitials(room.name)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 84,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 72,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"font-semibold\",\n                                            children: room.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 88,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-sm text-gray-500\",\n                                            children: [\n                                                room.members?.length,\n                                                \" members\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 89,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 87,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 71,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center space-x-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100\",\n                                    title: \"View members\",\n                                    onClick: ()=>setIsMembersModalOpen(true),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 103,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 97,\n                                    columnNumber: 13\n                                }, this),\n                                room.creator && user && room.creator._id === user.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100\",\n                                    title: \"Edit room\",\n                                    onClick: ()=>setIsEditModalOpen(true),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            fillRule: \"evenodd\",\n                                            d: \"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\",\n                                            clipRule: \"evenodd\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 115,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 114,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 109,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 95,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 70,\n                    columnNumber: 9\n                }, this),\n                isEditModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_EditRoomModal__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                    isOpen: isEditModalOpen,\n                    onClose: ()=>setIsEditModalOpen(false),\n                    roomId: activeChat.id\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 124,\n                    columnNumber: 11\n                }, this),\n                isMembersModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                    isOpen: isMembersModalOpen,\n                    onClose: ()=>setIsMembersModalOpen(false),\n                    roomId: activeChat.id\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 132,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    // For private chats, display the user information\n    if (recipient) {\n        const handleClearChatHistory = async ()=>{\n            if (!recipient._id) {\n                setClearSuccess({\n                    success: false,\n                    message: \"No se pudo identificar al usuario\"\n                });\n                return;\n            }\n            if (window.confirm(\"\\xbfEst\\xe1s seguro que deseas eliminar todo el historial de mensajes con este usuario? Esta acci\\xf3n no se puede deshacer.\")) {\n                setIsClearing(true);\n                try {\n                    const result = await clearChatHistory(recipient._id);\n                    setClearSuccess(result);\n                    setTimeout(()=>setClearSuccess(null), 3000); // Mostrar el mensaje por 3 segundos\n                } catch (error) {\n                    console.error(\"Error al limpiar historial:\", error);\n                    setClearSuccess({\n                        success: false,\n                        message: \"Error al limpiar el historial\"\n                    });\n                } finally{\n                    setIsClearing(false);\n                }\n            }\n        };\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center p-3 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative mr-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold overflow-hidden\",\n                                            children: recipient.avatar && isValidImageSrc(recipient.avatar) && !failedImages[recipient._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                src: recipient.avatar,\n                                                alt: recipient.name,\n                                                width: 40,\n                                                height: 40,\n                                                className: \"h-full w-full object-cover\",\n                                                onError: ()=>recipient._id && handleImageError(recipient._id || \"\")\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                                lineNumber: 172,\n                                                columnNumber: 19\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: getInitials(recipient.name)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                                lineNumber: 181,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 170,\n                                            columnNumber: 15\n                                        }, this),\n                                        onlineUsers && recipient._id && onlineUsers[recipient._id] && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute bottom-0 right-0 bg-green-500 h-2.5 w-2.5 rounded-full border border-white\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 185,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 169,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"font-semibold\",\n                                            children: recipient.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 189,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: onlineUsers && recipient._id && onlineUsers[recipient._id] ? \"Online\" : \"Offline\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 190,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 188,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `p-2 rounded-full hover:bg-gray-100 ${isClearing ? \"text-gray-400\" : \"text-gray-500 hover:text-red-500\"}`,\n                                title: \"Limpiar historial de chat\",\n                                onClick: handleClearChatHistory,\n                                disabled: isClearing,\n                                children: isClearing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"animate-spin h-5 w-5\",\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                            className: \"opacity-25\",\n                                            cx: \"12\",\n                                            cy: \"12\",\n                                            r: \"10\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"4\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 206,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            className: \"opacity-75\",\n                                            fill: \"currentColor\",\n                                            d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 207,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 205,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-5 w-5\",\n                                    viewBox: \"0 0 20 20\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        fillRule: \"evenodd\",\n                                        d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n                                        clipRule: \"evenodd\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 211,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 210,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                lineNumber: 198,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 197,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 167,\n                    columnNumber: 9\n                }, this),\n                clearSuccess && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `px-3 py-2 text-sm text-center ${clearSuccess.success ? \"bg-green-100 text-green-700\" : \"bg-red-100 text-red-700\"}`,\n                    children: clearSuccess.message\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 220,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    return null;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXRIZWFkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNTO0FBQ0E7QUFDbEI7QUFDYTtBQUNNO0FBRWxEOzs7Q0FHQyxHQUNELE1BQU1PLGNBQWMsQ0FBQ0M7SUFDbkIsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFFbEIsTUFBTUMsUUFBUUQsS0FBS0UsSUFBSSxHQUFHQyxLQUFLLENBQUM7SUFDaEMsSUFBSUYsTUFBTUcsTUFBTSxJQUFJLEdBQUc7UUFDckIsMENBQTBDO1FBQzFDLE9BQU8sQ0FBQyxFQUFFSCxLQUFLLENBQUMsRUFBRSxDQUFDSSxNQUFNLENBQUMsR0FBRyxFQUFFSixLQUFLLENBQUMsRUFBRSxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLFdBQVc7SUFDakUsT0FBTztRQUNMLHVDQUF1QztRQUN2QyxPQUFPTixLQUFLTyxTQUFTLENBQUMsR0FBR0MsS0FBS0MsR0FBRyxDQUFDLEdBQUdULEtBQUtJLE1BQU0sR0FBR0UsV0FBVztJQUNoRTtBQUNGO0FBRUE7O0NBRUMsR0FDRCxNQUFNSSxrQkFBa0IsQ0FBQ0M7SUFDdkIsSUFBSSxDQUFDQSxLQUFLLE9BQU87SUFFakIsMkNBQTJDO0lBQzNDLE9BQ0VBLElBQUlDLFVBQVUsQ0FBQyxjQUNmRCxJQUFJQyxVQUFVLENBQUMsZUFDZkQsSUFBSUMsVUFBVSxDQUFDO0FBRW5CO0FBRWUsU0FBU0M7SUFDdEIsTUFBTSxFQUFFQyxVQUFVLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxXQUFXLEVBQUVDLGdCQUFnQixFQUFFLEdBQUd4Qiw4REFBT0E7SUFDM0UsTUFBTSxFQUFFeUIsSUFBSSxFQUFFLEdBQUd4Qiw4REFBT0E7SUFDeEIsTUFBTSxDQUFDeUIsaUJBQWlCQyxtQkFBbUIsR0FBRzVCLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQzZCLG9CQUFvQkMsc0JBQXNCLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUM3RCxNQUFNLENBQUMrQixjQUFjQyxnQkFBZ0IsR0FBR2hDLCtDQUFRQSxDQUEwQixDQUFDO0lBQzNFLE1BQU0sQ0FBQ2lDLFlBQVlDLGNBQWMsR0FBR2xDLCtDQUFRQSxDQUFDO0lBQzdDLE1BQU0sQ0FBQ21DLGNBQWNDLGdCQUFnQixHQUFHcEMsK0NBQVFBLENBQStDO0lBRS9GLE1BQU1xQyxtQkFBbUIsQ0FBQ0M7UUFDeEJOLGdCQUFnQk8sQ0FBQUEsT0FBUztnQkFDdkIsR0FBR0EsSUFBSTtnQkFDUCxDQUFDRCxHQUFHLEVBQUU7WUFDUjtJQUNGO0lBRUEsSUFBSSxDQUFDakIsWUFBWSxPQUFPO0lBRXhCLHVDQUF1QztJQUN2QyxNQUFNbUIsT0FBT2pCLE1BQU1rQixJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLEdBQUcsS0FBS3RCLFdBQVdpQixFQUFFO0lBRXBELHdCQUF3QjtJQUN4QixNQUFNTSxjQUFjdkIsV0FBV3dCLElBQUksS0FBSztJQUV4Qyx3REFBd0Q7SUFDeEQsTUFBTUMsWUFBWSxDQUFDRixjQUFjdEIsTUFBTW1CLElBQUksQ0FBQ00sQ0FBQUEsSUFBS0EsRUFBRUosR0FBRyxLQUFLdEIsV0FBV2lCLEVBQUUsSUFBSTtJQUU1RSxnREFBZ0Q7SUFDaEQsSUFBSU0sZUFBZUosTUFBTTtRQUN2QixxQkFDRTs7OEJBQ0UsOERBQUNRO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDRDtvQ0FBSUMsV0FBVTs4Q0FDWlQsS0FBS1UsS0FBSyxJQUFJakMsZ0JBQWdCdUIsS0FBS1UsS0FBSyxLQUFLLENBQUNuQixZQUFZLENBQUNTLEtBQUtHLEdBQUcsSUFBSSxHQUFHLGlCQUN6RSw4REFBQ3hDLG1EQUFLQTt3Q0FDSmUsS0FBS3NCLEtBQUtVLEtBQUs7d0NBQ2ZDLEtBQUtYLEtBQUtqQyxJQUFJO3dDQUNkNkMsT0FBTzt3Q0FDUEMsUUFBUTt3Q0FDUkosV0FBVTt3Q0FDVkssVUFBVTt3Q0FDVkMsU0FBUyxJQUFNZixLQUFLRyxHQUFHLElBQUlOLGlCQUFpQkcsS0FBS0csR0FBRyxJQUFJOzs7Ozs2REFHMUQsOERBQUNhO3dDQUFLUCxXQUFVO2tEQUF5QjNDLFlBQVlrQyxLQUFLakMsSUFBSTs7Ozs7Ozs7Ozs7OENBR2xFLDhEQUFDeUM7O3NEQUNDLDhEQUFDUzs0Q0FBR1IsV0FBVTtzREFBaUJULEtBQUtqQyxJQUFJOzs7Ozs7c0RBQ3hDLDhEQUFDbUQ7NENBQUVULFdBQVU7O2dEQUNWVCxLQUFLbUIsT0FBTyxFQUFFaEQ7Z0RBQU87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0NBSzVCLDhEQUFDcUM7NEJBQUlDLFdBQVU7OzhDQUViLDhEQUFDVztvQ0FDQ1gsV0FBVTtvQ0FDVlksT0FBTTtvQ0FDTkMsU0FBUyxJQUFNaEMsc0JBQXNCOzhDQUVyQyw0RUFBQ2lDO3dDQUFJQyxPQUFNO3dDQUE2QmYsV0FBVTt3Q0FBVWdCLFNBQVE7d0NBQVlDLE1BQUs7a0RBQ25GLDRFQUFDQzs0Q0FBS0MsR0FBRTs7Ozs7Ozs7Ozs7Ozs7OztnQ0FLWDVCLEtBQUs2QixPQUFPLElBQUkzQyxRQUFRYyxLQUFLNkIsT0FBTyxDQUFDMUIsR0FBRyxLQUFLakIsS0FBS1ksRUFBRSxrQkFDbkQsOERBQUNzQjtvQ0FDQ1gsV0FBVTtvQ0FDVlksT0FBTTtvQ0FDTkMsU0FBUyxJQUFNbEMsbUJBQW1COzhDQUVsQyw0RUFBQ21DO3dDQUFJQyxPQUFNO3dDQUE2QmYsV0FBVTt3Q0FBVWdCLFNBQVE7d0NBQVlDLE1BQUs7a0RBQ25GLDRFQUFDQzs0Q0FBS0csVUFBUzs0Q0FBVUYsR0FBRTs0Q0FBK2ZHLFVBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBUTVpQjVDLGlDQUNDLDhEQUFDdkIsc0RBQWFBO29CQUNab0UsUUFBUTdDO29CQUNSOEMsU0FBUyxJQUFNN0MsbUJBQW1CO29CQUNsQzhDLFFBQVFyRCxXQUFXaUIsRUFBRTs7Ozs7O2dCQUl4QlQsb0NBQ0MsOERBQUN4Qix5REFBZ0JBO29CQUNmbUUsUUFBUTNDO29CQUNSNEMsU0FBUyxJQUFNM0Msc0JBQXNCO29CQUNyQzRDLFFBQVFyRCxXQUFXaUIsRUFBRTs7Ozs7Ozs7SUFLL0I7SUFFQSxrREFBa0Q7SUFDbEQsSUFBSVEsV0FBVztRQUNiLE1BQU02Qix5QkFBeUI7WUFDN0IsSUFBSSxDQUFDN0IsVUFBVUgsR0FBRyxFQUFFO2dCQUNsQlAsZ0JBQWdCO29CQUFFd0MsU0FBUztvQkFBT0MsU0FBUztnQkFBb0M7Z0JBQy9FO1lBQ0Y7WUFFQSxJQUFJQyxPQUFPQyxPQUFPLENBQUMsaUlBQXdIO2dCQUN6STdDLGNBQWM7Z0JBQ2QsSUFBSTtvQkFDRixNQUFNOEMsU0FBUyxNQUFNdkQsaUJBQWlCcUIsVUFBVUgsR0FBRztvQkFDbkRQLGdCQUFnQjRDO29CQUNoQkMsV0FBVyxJQUFNN0MsZ0JBQWdCLE9BQU8sT0FBTyxvQ0FBb0M7Z0JBQ3JGLEVBQUUsT0FBTzhDLE9BQU87b0JBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO29CQUM3QzlDLGdCQUFnQjt3QkFBRXdDLFNBQVM7d0JBQU9DLFNBQVM7b0JBQWdDO2dCQUM3RSxTQUFVO29CQUNSM0MsY0FBYztnQkFDaEI7WUFDRjtRQUNGO1FBRUEscUJBQ0U7OzhCQUNFLDhEQUFDYztvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ0Q7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDRDs0Q0FBSUMsV0FBVTtzREFDWkgsVUFBVXNDLE1BQU0sSUFBSW5FLGdCQUFnQjZCLFVBQVVzQyxNQUFNLEtBQUssQ0FBQ3JELFlBQVksQ0FBQ2UsVUFBVUgsR0FBRyxJQUFJLEdBQUcsaUJBQzFGLDhEQUFDeEMsbURBQUtBO2dEQUNKZSxLQUFLNEIsVUFBVXNDLE1BQU07Z0RBQ3JCakMsS0FBS0wsVUFBVXZDLElBQUk7Z0RBQ25CNkMsT0FBTztnREFDUEMsUUFBUTtnREFDUkosV0FBVTtnREFDVk0sU0FBUyxJQUFNVCxVQUFVSCxHQUFHLElBQUlOLGlCQUFpQlMsVUFBVUgsR0FBRyxJQUFJOzs7OztxRUFHcEUsOERBQUNhOzBEQUFNbEQsWUFBWXdDLFVBQVV2QyxJQUFJOzs7Ozs7Ozs7Ozt3Q0FHcENpQixlQUFlc0IsVUFBVUgsR0FBRyxJQUFJbkIsV0FBVyxDQUFDc0IsVUFBVUgsR0FBRyxDQUFDLGtCQUN6RCw4REFBQ0s7NENBQUlDLFdBQVU7Ozs7Ozs7Ozs7Ozs4Q0FHbkIsOERBQUNEOztzREFDQyw4REFBQ1M7NENBQUdSLFdBQVU7c0RBQWlCSCxVQUFVdkMsSUFBSTs7Ozs7O3NEQUM3Qyw4REFBQ21EOzRDQUFFVCxXQUFVO3NEQUNWekIsZUFBZXNCLFVBQVVILEdBQUcsSUFBSW5CLFdBQVcsQ0FBQ3NCLFVBQVVILEdBQUcsQ0FBQyxHQUFHLFdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQ0FNL0UsOERBQUNLOzRCQUFJQyxXQUFVO3NDQUNiLDRFQUFDVztnQ0FDQ1gsV0FBVyxDQUFDLG1DQUFtQyxFQUFFaEIsYUFBYSxrQkFBa0IsbUNBQW1DLENBQUM7Z0NBQ3BINEIsT0FBTTtnQ0FDTkMsU0FBU2E7Z0NBQ1RVLFVBQVVwRDswQ0FFVEEsMkJBQ0MsOERBQUM4QjtvQ0FBSWQsV0FBVTtvQ0FBdUJlLE9BQU07b0NBQTZCRSxNQUFLO29DQUFPRCxTQUFROztzREFDM0YsOERBQUNxQjs0Q0FBT3JDLFdBQVU7NENBQWFzQyxJQUFHOzRDQUFLQyxJQUFHOzRDQUFLOUMsR0FBRTs0Q0FBSytDLFFBQU87NENBQWVDLGFBQVk7Ozs7OztzREFDeEYsOERBQUN2Qjs0Q0FBS2xCLFdBQVU7NENBQWFpQixNQUFLOzRDQUFlRSxHQUFFOzs7Ozs7Ozs7Ozt5REFHckQsOERBQUNMO29DQUFJQyxPQUFNO29DQUE2QmYsV0FBVTtvQ0FBVWdCLFNBQVE7b0NBQVlDLE1BQUs7OENBQ25GLDRFQUFDQzt3Q0FBS0csVUFBUzt3Q0FBVUYsR0FBRTt3Q0FBOE1HLFVBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQkFRM1BwQyw4QkFDQyw4REFBQ2E7b0JBQUlDLFdBQVcsQ0FBQyw4QkFBOEIsRUFBRWQsYUFBYXlDLE9BQU8sR0FBRyxnQ0FBZ0MsMEJBQTBCLENBQUM7OEJBQ2hJekMsYUFBYTBDLE9BQU87Ozs7Ozs7O0lBSy9CO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DaGF0SGVhZGVyLnRzeD80MGMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCBFZGl0Um9vbU1vZGFsIGZyb20gJy4vRWRpdFJvb21Nb2RhbCc7XG5pbXBvcnQgUm9vbU1lbWJlcnNNb2RhbCBmcm9tICcuL1Jvb21NZW1iZXJzTW9kYWwnO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgaW5pdGlhbHMgZnJvbSBhIG5hbWVcbiAqIFJldHVybnMgdXAgdG8gMiBpbml0aWFscyAoZmlyc3QgYW5kIGxhc3QgbmFtZSBvciBmaXJzdCB0d28gd29yZHMpXG4gKi9cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICBcbiAgY29uc3QgcGFydHMgPSBuYW1lLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAvLyBHZXQgZmlyc3QgbGV0dGVyIG9mIGZpcnN0IGFuZCBsYXN0IG5hbWVcbiAgICByZXR1cm4gYCR7cGFydHNbMF0uY2hhckF0KDApfSR7cGFydHNbMV0uY2hhckF0KDApfWAudG9VcHBlckNhc2UoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgZmlyc3QgdHdvIGxldHRlcnMgb2Ygc2luZ2xlIG5hbWVcbiAgICByZXR1cm4gbmFtZS5zdWJzdHJpbmcoMCwgTWF0aC5taW4oMiwgbmFtZS5sZW5ndGgpKS50b1VwcGVyQ2FzZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiBhIHN0cmluZyBpcyBhIHZhbGlkIGltYWdlIFVSTCBvciBiYXNlNjQgaW1hZ2UgZGF0YVxuICovXG5jb25zdCBpc1ZhbGlkSW1hZ2VTcmMgPSAoc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKCFzcmMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGlmIGl0J3MgYSB2YWxpZCBVUkwgb3IgYmFzZTY0IGRhdGFcbiAgcmV0dXJuIChcbiAgICBzcmMuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwczovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpXG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGF0SGVhZGVyKCkge1xuICBjb25zdCB7IGFjdGl2ZUNoYXQsIHVzZXJzLCByb29tcywgb25saW5lVXNlcnMsIGNsZWFyQ2hhdEhpc3RvcnkgfSA9IHVzZUNoYXQoKTtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IFtpc0VkaXRNb2RhbE9wZW4sIHNldElzRWRpdE1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc01lbWJlcnNNb2RhbE9wZW4sIHNldElzTWVtYmVyc01vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmYWlsZWRJbWFnZXMsIHNldEZhaWxlZEltYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuICBjb25zdCBbaXNDbGVhcmluZywgc2V0SXNDbGVhcmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjbGVhclN1Y2Nlc3MsIHNldENsZWFyU3VjY2Vzc10gPSB1c2VTdGF0ZTx7IHN1Y2Nlc3M6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VFcnJvciA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmFpbGVkSW1hZ2VzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbaWRdOiB0cnVlXG4gICAgfSkpO1xuICB9O1xuXG4gIGlmICghYWN0aXZlQ2hhdCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gR2V0IGNoYXQgcm9vbSBmcm9tIHRoZSBsaXN0IG9mIHJvb21zXG4gIGNvbnN0IHJvb20gPSByb29tcy5maW5kKHIgPT4gci5faWQgPT09IGFjdGl2ZUNoYXQuaWQpO1xuICBcbiAgLy8gSXMgdGhpcyBhIGdyb3VwIGNoYXQ/XG4gIGNvbnN0IGlzR3JvdXBDaGF0ID0gYWN0aXZlQ2hhdC50eXBlID09PSAncm9vbSc7XG4gIFxuICAvLyBGb3IgcHJpdmF0ZSBjaGF0cywgZ2V0IHRoZSByZWNpcGllbnQgKHRoZSBvdGhlciB1c2VyKVxuICBjb25zdCByZWNpcGllbnQgPSAhaXNHcm91cENoYXQgPyB1c2Vycy5maW5kKHUgPT4gdS5faWQgPT09IGFjdGl2ZUNoYXQuaWQpIDogbnVsbDtcbiAgXG4gIC8vIEZvciBncm91cCBjaGF0cywgZGlzcGxheSB0aGUgcm9vbSBpbmZvcm1hdGlvblxuICBpZiAoaXNHcm91cENoYXQgJiYgcm9vbSkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTMgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTAgdy0xMCByb3VuZGVkLWZ1bGwgYmctZ3JheS0zMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIG1yLTNcIj5cbiAgICAgICAgICAgICAge3Jvb20uaW1hZ2UgJiYgaXNWYWxpZEltYWdlU3JjKHJvb20uaW1hZ2UpICYmICFmYWlsZWRJbWFnZXNbcm9vbS5faWQgfHwgJyddID8gKFxuICAgICAgICAgICAgICAgIDxJbWFnZSBcbiAgICAgICAgICAgICAgICAgIHNyYz17cm9vbS5pbWFnZX1cbiAgICAgICAgICAgICAgICAgIGFsdD17cm9vbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgd2lkdGg9ezQwfVxuICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgIHByaW9yaXR5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHJvb20uX2lkICYmIGhhbmRsZUltYWdlRXJyb3Iocm9vbS5faWQgfHwgJycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkXCI+e2dldEluaXRpYWxzKHJvb20ubmFtZSl9PC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPntyb29tLm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAge3Jvb20ubWVtYmVycz8ubGVuZ3RofSBtZW1iZXJzXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICB7LyogTWllbWJyb3MgZGVsIGNoYXQgKi99XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTEwMFwiXG4gICAgICAgICAgICAgIHRpdGxlPVwiVmlldyBtZW1iZXJzXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNNZW1iZXJzTW9kYWxPcGVuKHRydWUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEzIDZhMyAzIDAgMTEtNiAwIDMgMyAwIDAxNiAwek0xOCA4YTIgMiAwIDExLTQgMCAyIDIgMCAwMTQgMHpNMTQgMTVhNCA0IDAgMDAtOCAwdjNoOHYtM3pNNiA4YTIgMiAwIDExLTQgMCAyIDIgMCAwMTQgMHpNMTYgMTh2LTNhNS45NzIgNS45NzIgMCAwMC0uNzUtMi45MDZBMy4wMDUgMy4wMDUgMCAwMTE5IDE1djNoLTN6TTQuNzUgMTIuMDk0QTUuOTczIDUuOTczIDAgMDA0IDE1djNIMXYtM2EzIDMgMCAwMTMuNzUtMi45MDZ6XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIEVkaXRhciBjaGF0IChzb2xvIHBhcmEgZWwgY3JlYWRvcikgKi99XG4gICAgICAgICAgICB7cm9vbS5jcmVhdG9yICYmIHVzZXIgJiYgcm9vbS5jcmVhdG9yLl9pZCA9PT0gdXNlci5pZCAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgICAgIHRpdGxlPVwiRWRpdCByb29tXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc0VkaXRNb2RhbE9wZW4odHJ1ZSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTEuNDkgMy4xN2MtLjM4LTEuNTYtMi42LTEuNTYtMi45OCAwYTEuNTMyIDEuNTMyIDAgMDEtMi4yODYuOTQ4Yy0xLjM3Mi0uODM2LTIuOTQyLjczNC0yLjEwNiAyLjEwNi41NC44ODYuMDYxIDIuMDQyLS45NDcgMi4yODctMS41NjEuMzc5LTEuNTYxIDIuNiAwIDIuOTc4YTEuNTMyIDEuNTMyIDAgMDEuOTQ3IDIuMjg3Yy0uODM2IDEuMzcyLjczNCAyLjk0MiAyLjEwNiAyLjEwNmExLjUzMiAxLjUzMiAwIDAxMi4yODcuOTQ3Yy4zNzkgMS41NjEgMi42IDEuNTYxIDIuOTc4IDBhMS41MzMgMS41MzMgMCAwMTIuMjg3LS45NDdjMS4zNzIuODM2IDIuOTQyLS43MzQgMi4xMDYtMi4xMDZhMS41MzMgMS41MzMgMCAwMS45NDctMi4yODdjMS41NjEtLjM3OSAxLjU2MS0yLjYgMC0yLjk3OGExLjUzMiAxLjUzMiAwIDAxLS45NDctMi4yODdjLjgzNi0xLjM3Mi0uNzM0LTIuOTQyLTIuMTA2LTIuMTA2YTEuNTMyIDEuNTMyIDAgMDEtMi4yODctLjk0N3pNMTAgMTNhMyAzIDAgMTAwLTYgMyAzIDAgMDAwIDZ6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHsvKiBNb2RhbGVzIHBhcmEgY2hhdCBncnVwYWwgKi99XG4gICAgICAgIHtpc0VkaXRNb2RhbE9wZW4gJiYgKFxuICAgICAgICAgIDxFZGl0Um9vbU1vZGFsIFxuICAgICAgICAgICAgaXNPcGVuPXtpc0VkaXRNb2RhbE9wZW59IFxuICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0SXNFZGl0TW9kYWxPcGVuKGZhbHNlKX0gXG4gICAgICAgICAgICByb29tSWQ9e2FjdGl2ZUNoYXQuaWR9IFxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7aXNNZW1iZXJzTW9kYWxPcGVuICYmIChcbiAgICAgICAgICA8Um9vbU1lbWJlcnNNb2RhbFxuICAgICAgICAgICAgaXNPcGVuPXtpc01lbWJlcnNNb2RhbE9wZW59XG4gICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc01lbWJlcnNNb2RhbE9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgcm9vbUlkPXthY3RpdmVDaGF0LmlkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG4gIFxuICAvLyBGb3IgcHJpdmF0ZSBjaGF0cywgZGlzcGxheSB0aGUgdXNlciBpbmZvcm1hdGlvblxuICBpZiAocmVjaXBpZW50KSB7XG4gICAgY29uc3QgaGFuZGxlQ2xlYXJDaGF0SGlzdG9yeSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghcmVjaXBpZW50Ll9pZCkge1xuICAgICAgICBzZXRDbGVhclN1Y2Nlc3MoeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ05vIHNlIHB1ZG8gaWRlbnRpZmljYXIgYWwgdXN1YXJpbycgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCfCv0VzdMOhcyBzZWd1cm8gcXVlIGRlc2VhcyBlbGltaW5hciB0b2RvIGVsIGhpc3RvcmlhbCBkZSBtZW5zYWplcyBjb24gZXN0ZSB1c3VhcmlvPyBFc3RhIGFjY2nDs24gbm8gc2UgcHVlZGUgZGVzaGFjZXIuJykpIHtcbiAgICAgICAgc2V0SXNDbGVhcmluZyh0cnVlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGVhckNoYXRIaXN0b3J5KHJlY2lwaWVudC5faWQpO1xuICAgICAgICAgIHNldENsZWFyU3VjY2VzcyhyZXN1bHQpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0Q2xlYXJTdWNjZXNzKG51bGwpLCAzMDAwKTsgLy8gTW9zdHJhciBlbCBtZW5zYWplIHBvciAzIHNlZ3VuZG9zXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgbGltcGlhciBoaXN0b3JpYWw6JywgZXJyb3IpO1xuICAgICAgICAgIHNldENsZWFyU3VjY2Vzcyh7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRXJyb3IgYWwgbGltcGlhciBlbCBoaXN0b3JpYWwnIH0pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHNldElzQ2xlYXJpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTMgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIG1yLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgcm91bmRlZC1mdWxsIGJnLWdyYXktMzAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteGwgZm9udC1zZW1pYm9sZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICB7cmVjaXBpZW50LmF2YXRhciAmJiBpc1ZhbGlkSW1hZ2VTcmMocmVjaXBpZW50LmF2YXRhcikgJiYgIWZhaWxlZEltYWdlc1tyZWNpcGllbnQuX2lkIHx8ICcnXSA/IChcbiAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICBzcmM9e3JlY2lwaWVudC5hdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgIGFsdD17cmVjaXBpZW50Lm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPXs0MH1cbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiByZWNpcGllbnQuX2lkICYmIGhhbmRsZUltYWdlRXJyb3IocmVjaXBpZW50Ll9pZCB8fCAnJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8c3Bhbj57Z2V0SW5pdGlhbHMocmVjaXBpZW50Lm5hbWUpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge29ubGluZVVzZXJzICYmIHJlY2lwaWVudC5faWQgJiYgb25saW5lVXNlcnNbcmVjaXBpZW50Ll9pZF0gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBiZy1ncmVlbi01MDAgaC0yLjUgdy0yLjUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItd2hpdGVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj57cmVjaXBpZW50Lm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAge29ubGluZVVzZXJzICYmIHJlY2lwaWVudC5faWQgJiYgb25saW5lVXNlcnNbcmVjaXBpZW50Ll9pZF0gPyAnT25saW5lJyA6ICdPZmZsaW5lJ31cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIEJvdMOzbiBwYXJhIGxpbXBpYXIgaGlzdG9yaWFsIGRlIGNoYXQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTEwMCAke2lzQ2xlYXJpbmcgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LXJlZC01MDAnfWB9XG4gICAgICAgICAgICAgIHRpdGxlPVwiTGltcGlhciBoaXN0b3JpYWwgZGUgY2hhdFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsZWFyQ2hhdEhpc3Rvcnl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0NsZWFyaW5nfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXNDbGVhcmluZyA/IChcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTUgdy01XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJvcGFjaXR5LTI1XCIgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2VXaWR0aD1cIjRcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzTmFtZT1cIm9wYWNpdHktNzVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNOSAyYTEgMSAwIDAwLS44OTQuNTUzTDcuMzgyIDRINGExIDEgMCAwMDAgMnYxMGEyIDIgMCAwMDIgMmg4YTIgMiAwIDAwMi0yVjZhMSAxIDAgMTAwLTJoLTMuMzgybC0uNzI0LTEuNDQ3QTEgMSAwIDAwMTEgMkg5ek03IDhhMSAxIDAgMDEyIDB2NmExIDEgMCAxMS0yIDBWOHptNS0xYTEgMSAwIDAwLTEgMXY2YTEgMSAwIDEwMiAwVjhhMSAxIDAgMDAtMS0xelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogTWVuc2FqZSBkZSDDqXhpdG8gbyBlcnJvciBhbCBsaW1waWFyIGhpc3RvcmlhbCAqL31cbiAgICAgICAge2NsZWFyU3VjY2VzcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LWNlbnRlciAke2NsZWFyU3VjY2Vzcy5zdWNjZXNzID8gJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTcwMCcgOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC03MDAnfWB9PlxuICAgICAgICAgICAge2NsZWFyU3VjY2Vzcy5tZXNzYWdlfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDaGF0IiwidXNlQXV0aCIsIkltYWdlIiwiRWRpdFJvb21Nb2RhbCIsIlJvb21NZW1iZXJzTW9kYWwiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiTWF0aCIsIm1pbiIsImlzVmFsaWRJbWFnZVNyYyIsInNyYyIsInN0YXJ0c1dpdGgiLCJDaGF0SGVhZGVyIiwiYWN0aXZlQ2hhdCIsInVzZXJzIiwicm9vbXMiLCJvbmxpbmVVc2VycyIsImNsZWFyQ2hhdEhpc3RvcnkiLCJ1c2VyIiwiaXNFZGl0TW9kYWxPcGVuIiwic2V0SXNFZGl0TW9kYWxPcGVuIiwiaXNNZW1iZXJzTW9kYWxPcGVuIiwic2V0SXNNZW1iZXJzTW9kYWxPcGVuIiwiZmFpbGVkSW1hZ2VzIiwic2V0RmFpbGVkSW1hZ2VzIiwiaXNDbGVhcmluZyIsInNldElzQ2xlYXJpbmciLCJjbGVhclN1Y2Nlc3MiLCJzZXRDbGVhclN1Y2Nlc3MiLCJoYW5kbGVJbWFnZUVycm9yIiwiaWQiLCJwcmV2Iiwicm9vbSIsImZpbmQiLCJyIiwiX2lkIiwiaXNHcm91cENoYXQiLCJ0eXBlIiwicmVjaXBpZW50IiwidSIsImRpdiIsImNsYXNzTmFtZSIsImltYWdlIiwiYWx0Iiwid2lkdGgiLCJoZWlnaHQiLCJwcmlvcml0eSIsIm9uRXJyb3IiLCJzcGFuIiwiaDMiLCJwIiwibWVtYmVycyIsImJ1dHRvbiIsInRpdGxlIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZCIsImNyZWF0b3IiLCJmaWxsUnVsZSIsImNsaXBSdWxlIiwiaXNPcGVuIiwib25DbG9zZSIsInJvb21JZCIsImhhbmRsZUNsZWFyQ2hhdEhpc3RvcnkiLCJzdWNjZXNzIiwibWVzc2FnZSIsIndpbmRvdyIsImNvbmZpcm0iLCJyZXN1bHQiLCJzZXRUaW1lb3V0IiwiZXJyb3IiLCJjb25zb2xlIiwiYXZhdGFyIiwiZGlzYWJsZWQiLCJjaXJjbGUiLCJjeCIsImN5Iiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/ChatHeader.tsx\n");

/***/ }),

/***/ "./src/components/chat/ChatSidebar.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/ChatSidebar.tsx ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatSidebar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../profile/ProfileModal */ \"./src/components/profile/ProfileModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\nfunction ChatSidebar({ onCreateRoom }) {\n    const { user, logout } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { rooms, users, onlineUsers, activeChat, setActiveChat, isLoading, unreadMessages } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chats\");\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isProfileModalOpen, setIsProfileModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"w-64 flex-shrink-0 bg-gray-800 text-white p-4 flex flex-col h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 74,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n            lineNumber: 73,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-64 flex-shrink-0 bg-gray-800 text-white flex flex-col h-full\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b border-gray-700\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-3 relative\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                            children: user?.avatar && isValidImageSrc(user.avatar) && !failedImages[user?.id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                src: user.avatar,\n                                alt: user?.name || \"User avatar\",\n                                width: 40,\n                                height: 40,\n                                className: \"h-full w-full object-cover\",\n                                priority: false,\n                                onError: ()=>handleImageError(user?.id || \"\")\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 88,\n                                columnNumber: 15\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-lg font-medium\",\n                                children: user?.name ? getInitials(user.name) : \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 98,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 86,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 min-w-0\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-white truncate\",\n                                    children: user?.name\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 102,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-400\",\n                                    children: \"Online\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 103,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 101,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                            className: \"text-white p-1 rounded-full hover:bg-gray-700 transition\",\n                            title: \"Profile settings\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    d: \"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 111,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 110,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 105,\n                            columnNumber: 11\n                        }, this),\n                        showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute right-0 top-10 mt-1 w-48 bg-gray-700 rounded-md shadow-lg z-10\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                className: \"py-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>{\n                                                setIsProfileModalOpen(true);\n                                                setShowProfileMenu(false);\n                                            },\n                                            className: \"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600\",\n                                            children: \"Profile Settings\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 120,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 119,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: logout,\n                                            className: \"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600\",\n                                            children: \"Logout\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 131,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 130,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 118,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 117,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 85,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 84,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex border-b border-gray-700\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: `flex-1 py-3 text-center text-sm font-medium relative ${activeTab === \"chats\" ? \"text-white border-b-2 border-blue-500\" : \"text-gray-400 hover:text-white\"}`,\n                        onClick: ()=>setActiveTab(\"chats\"),\n                        children: [\n                            \"Direct Messages\",\n                            Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"user_\")).reduce((total, [_, count])=>total + count, 0) > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute top-2 right-12 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                children: Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"user_\")).reduce((total, [_, count])=>total + count, 0)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 154,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                        lineNumber: 146,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: `flex-1 py-3 text-center text-sm font-medium relative ${activeTab === \"rooms\" ? \"text-white border-b-2 border-blue-500\" : \"text-gray-400 hover:text-white\"}`,\n                        onClick: ()=>setActiveTab(\"rooms\"),\n                        children: [\n                            \"Rooms\",\n                            Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"room_\")).reduce((total, [_, count])=>total + count, 0) > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute top-2 right-12 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                children: Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"room_\")).reduce((total, [_, count])=>total + count, 0)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 169,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                        lineNumber: 161,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 145,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto\",\n                children: activeTab === \"chats\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xs uppercase text-gray-500 font-semibold px-2 py-1\",\n                            children: \"Direct Messages\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 182,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-1\",\n                            children: users.filter((u)=>u._id !== user?.id) // Don't show the current user\n                            .map((otherUser)=>{\n                                const isActive = activeChat?.id === otherUser._id && activeChat?.type === \"private\";\n                                const isOnline = onlineUsers && otherUser._id ? onlineUsers[otherUser._id] : false;\n                                const unreadCount = otherUser._id ? unreadMessages[`user_${otherUser._id}`] || 0 : 0;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: `w-full text-left flex items-center rounded-md p-2 ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`,\n                                    onClick: ()=>setActiveChat({\n                                            id: otherUser._id || \"\",\n                                            type: \"private\"\n                                        }),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"relative\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                                                    children: otherUser.avatar && isValidImageSrc(otherUser.avatar) && !failedImages[otherUser._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: otherUser.avatar,\n                                                        alt: otherUser.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\",\n                                                        priority: false,\n                                                        onError: ()=>otherUser._id && handleImageError(otherUser._id || \"\")\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                        lineNumber: 200,\n                                                        columnNumber: 29\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium\",\n                                                        children: getInitials(otherUser.name)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                        lineNumber: 210,\n                                                        columnNumber: 29\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 198,\n                                                    columnNumber: 25\n                                                }, this),\n                                                isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute bottom-0 right-0 bg-green-500 h-2 w-2 rounded-full\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 214,\n                                                    columnNumber: 27\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 197,\n                                            columnNumber: 23\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-2 flex-1 min-w-0\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium truncate\",\n                                                            children: otherUser.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 219,\n                                                            columnNumber: 27\n                                                        }, this),\n                                                        unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                                            children: unreadCount\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 221,\n                                                            columnNumber: 29\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 218,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-400 truncate\",\n                                                    children: isOnline ? \"Online\" : \"Offline\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 226,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 217,\n                                            columnNumber: 23\n                                        }, this)\n                                    ]\n                                }, otherUser._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 21\n                                }, this);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 183,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 181,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between px-2 py-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-xs uppercase text-gray-500 font-semibold\",\n                                    children: \"Rooms\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 238,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: onCreateRoom,\n                                    className: \"text-gray-400 hover:text-white\",\n                                    title: \"Create a new room\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M12 4v16m8-8H4\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 245,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 244,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 239,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 237,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-1\",\n                            children: rooms.map((room)=>{\n                                const isActive = activeChat?.id === room._id && activeChat?.type === \"room\";\n                                const unreadCount = unreadMessages[`room_${room._id}`] || 0;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: `w-full text-left flex items-center rounded-md p-2 ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`,\n                                    onClick: ()=>setActiveChat({\n                                            id: room._id,\n                                            type: \"room\"\n                                        }),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"h-8 w-8 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                                            children: room.image && isValidImageSrc(room.image) && !failedImages[room._id] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                src: room.image,\n                                                alt: room.name,\n                                                width: 32,\n                                                height: 32,\n                                                className: \"h-full w-full object-cover\",\n                                                priority: false,\n                                                onError: ()=>handleImageError(room._id)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                lineNumber: 262,\n                                                columnNumber: 25\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm font-medium\",\n                                                children: getInitials(room.name)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                lineNumber: 272,\n                                                columnNumber: 25\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 260,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-2 flex-1 min-w-0\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium truncate\",\n                                                            children: room.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 277,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                                            children: unreadCount\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 279,\n                                                            columnNumber: 27\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 276,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-400 truncate\",\n                                                    children: [\n                                                        room.members.length,\n                                                        \" members\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 284,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 275,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, room._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 255,\n                                    columnNumber: 19\n                                }, this);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 249,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 236,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 179,\n                columnNumber: 7\n            }, this),\n            isProfileModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                isOpen: isProfileModalOpen,\n                onClose: ()=>setIsProfileModalOpen(false)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 296,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n        lineNumber: 82,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TVYsaUJBQWlCOEMsS0FBS2IsR0FBRzs7Ozs7cUVBRzFDLDhEQUFDdEI7Z0RBQUtQLFdBQVU7MERBQXVCckMsWUFBWStFLEtBQUs5RSxJQUFJOzs7Ozs7Ozs7OztzREFHaEUsOERBQUNtQzs0Q0FBSUMsV0FBVTs7OERBQ2IsOERBQUNEO29EQUFJQyxXQUFVOztzRUFDYiw4REFBQ29DOzREQUFHcEMsV0FBVTtzRUFBZ0MwQyxLQUFLOUUsSUFBSTs7Ozs7O3dEQUN0RHVFLGNBQWMsbUJBQ2IsOERBQUM1Qjs0REFBS1AsV0FBVTtzRUFDYm1DOzs7Ozs7Ozs7Ozs7OERBSVAsOERBQUNFO29EQUFFckMsV0FBVTs7d0RBQWtDMEMsS0FBS0UsT0FBTyxDQUFDNUUsTUFBTTt3REFBQzs7Ozs7Ozs7Ozs7Ozs7bUNBNUJoRTBFLEtBQUtiLEdBQUc7Ozs7OzRCQWdDbkI7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBT1ByQyxvQ0FDQyw4REFBQzlCLDZEQUFZQTtnQkFDWG1GLFFBQVFyRDtnQkFDUnNELFNBQVMsSUFBTXJELHNCQUFzQjs7Ozs7Ozs7Ozs7O0FBSy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DaGF0U2lkZWJhci50c3g/NzAwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCBQcm9maWxlTW9kYWwgZnJvbSAnLi4vcHJvZmlsZS9Qcm9maWxlTW9kYWwnO1xuXG5pbnRlcmZhY2UgQ2hhdFNpZGViYXJQcm9wcyB7XG4gIG9uQ3JlYXRlUm9vbTogKCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIEFjdGl2ZUNoYXQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncHJpdmF0ZScgfCAncm9vbSc7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBpbml0aWFscyBmcm9tIGEgbmFtZVxuICogUmV0dXJucyB1cCB0byAyIGluaXRpYWxzIChmaXJzdCBhbmQgbGFzdCBuYW1lIG9yIGZpcnN0IHR3byB3b3JkcylcbiAqL1xuY29uc3QgZ2V0SW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIFxuICBjb25zdCBwYXJ0cyA9IG5hbWUudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuICAgIC8vIEdldCBmaXJzdCBsZXR0ZXIgb2YgZmlyc3QgYW5kIGxhc3QgbmFtZVxuICAgIHJldHVybiBgJHtwYXJ0c1swXS5jaGFyQXQoMCl9JHtwYXJ0c1sxXS5jaGFyQXQoMCl9YC50b1VwcGVyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCBmaXJzdCB0d28gbGV0dGVycyBvZiBzaW5nbGUgbmFtZVxuICAgIHJldHVybiBuYW1lLnN1YnN0cmluZygwLCBNYXRoLm1pbigyLCBuYW1lLmxlbmd0aCkpLnRvVXBwZXJDYXNlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIGEgc3RyaW5nIGlzIGEgdmFsaWQgaW1hZ2UgVVJMIG9yIGJhc2U2NCBpbWFnZSBkYXRhXG4gKi9cbmNvbnN0IGlzVmFsaWRJbWFnZVNyYyA9IChzcmM6IHN0cmluZyB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoIXNyYykgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQ2hlY2sgaWYgaXQncyBhIHZhbGlkIFVSTCBvciBiYXNlNjQgZGF0YVxuICByZXR1cm4gKFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJylcbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRTaWRlYmFyKHsgb25DcmVhdGVSb29tIH06IENoYXRTaWRlYmFyUHJvcHMpIHtcbiAgY29uc3QgeyB1c2VyLCBsb2dvdXQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgeyBcbiAgICByb29tcywgXG4gICAgdXNlcnMsIFxuICAgIG9ubGluZVVzZXJzLCBcbiAgICBhY3RpdmVDaGF0LCBcbiAgICBzZXRBY3RpdmVDaGF0LFxuICAgIGlzTG9hZGluZyxcbiAgICB1bnJlYWRNZXNzYWdlc1xuICB9ID0gdXNlQ2hhdCgpO1xuXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTwnY2hhdHMnIHwgJ3Jvb21zJz4oJ2NoYXRzJyk7XG4gIGNvbnN0IFtzaG93UHJvZmlsZU1lbnUsIHNldFNob3dQcm9maWxlTWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1Byb2ZpbGVNb2RhbE9wZW4sIHNldElzUHJvZmlsZU1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmYWlsZWRJbWFnZXMsIHNldEZhaWxlZEltYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuXG4gIGNvbnN0IGhhbmRsZUltYWdlRXJyb3IgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEZhaWxlZEltYWdlcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2lkXTogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy02NCBmbGV4LXNocmluay0wIGJnLWdyYXktODAwIHRleHQtd2hpdGUgcC00IGZsZXggZmxleC1jb2wgaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci13aGl0ZVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy02NCBmbGV4LXNocmluay0wIGJnLWdyYXktODAwIHRleHQtd2hpdGUgZmxleCBmbGV4LWNvbCBoLWZ1bGxcIj5cbiAgICAgIHsvKiBVc2VyIHByb2ZpbGUgc2VjdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyByZWxhdGl2ZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgIHt1c2VyPy5hdmF0YXIgJiYgaXNWYWxpZEltYWdlU3JjKHVzZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW3VzZXI/LmlkIHx8ICcnXSA/IChcbiAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgc3JjPXt1c2VyLmF2YXRhcn1cbiAgICAgICAgICAgICAgICBhbHQ9e3VzZXI/Lm5hbWUgfHwgJ1VzZXIgYXZhdGFyJ31cbiAgICAgICAgICAgICAgICB3aWR0aD17NDB9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IGhhbmRsZUltYWdlRXJyb3IodXNlcj8uaWQgfHwgJycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bVwiPnt1c2VyPy5uYW1lID8gZ2V0SW5pdGlhbHModXNlci5uYW1lKSA6ICcnfTwvc3Bhbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdHJ1bmNhdGVcIj57dXNlcj8ubmFtZX08L2gzPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwXCI+T25saW5lPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UHJvZmlsZU1lbnUoIXNob3dQcm9maWxlTWVudSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHAtMSByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS03MDAgdHJhbnNpdGlvblwiXG4gICAgICAgICAgICB0aXRsZT1cIlByb2ZpbGUgc2V0dGluZ3NcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDZhMiAyIDAgMTEwLTQgMiAyIDAgMDEwIDR6TTEwIDEyYTIgMiAwIDExMC00IDIgMiAwIDAxMCA0ek0xMCAxOGEyIDIgMCAxMTAtNCAyIDIgMCAwMTAgNHpcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICB7LyogUHJvZmlsZSBtZW51IGRyb3Bkb3duICovfVxuICAgICAgICAgIHtzaG93UHJvZmlsZU1lbnUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0wIHRvcC0xMCBtdC0xIHctNDggYmctZ3JheS03MDAgcm91bmRlZC1tZCBzaGFkb3ctbGcgei0xMFwiPlxuICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwicHktMVwiPlxuICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRJc1Byb2ZpbGVNb2RhbE9wZW4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgdGV4dC1zbSB0ZXh0LXdoaXRlIGhvdmVyOmJnLWdyYXktNjAwXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgUHJvZmlsZSBTZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtsb2dvdXR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIHRleHQtc20gdGV4dC13aGl0ZSBob3ZlcjpiZy1ncmF5LTYwMFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIExvZ291dFxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBUYWJzIG5hdmlnYXRpb24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwXCI+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIHB5LTMgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LW1lZGl1bSByZWxhdGl2ZSAke2FjdGl2ZVRhYiA9PT0gJ2NoYXRzJyA/ICd0ZXh0LXdoaXRlIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtd2hpdGUnfWB9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdjaGF0cycpfVxuICAgICAgICA+XG4gICAgICAgICAgRGlyZWN0IE1lc3NhZ2VzXG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVucmVhZE1lc3NhZ2VzKVxuICAgICAgICAgICAgLmZpbHRlcigoW2tleV0pID0+IGtleS5zdGFydHNXaXRoKCd1c2VyXycpKVxuICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApID4gMCAmJiAoXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0xMiBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMS41IHB5LTAuNSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1bnJlYWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ3VzZXJfJykpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBweS0zIHRleHQtY2VudGVyIHRleHQtc20gZm9udC1tZWRpdW0gcmVsYXRpdmUgJHthY3RpdmVUYWIgPT09ICdyb29tcycgPyAndGV4dC13aGl0ZSBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCcgOiAndGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlJ31gfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYigncm9vbXMnKX1cbiAgICAgICAgPlxuICAgICAgICAgIFJvb21zXG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVucmVhZE1lc3NhZ2VzKVxuICAgICAgICAgICAgLmZpbHRlcigoW2tleV0pID0+IGtleS5zdGFydHNXaXRoKCdyb29tXycpKVxuICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApID4gMCAmJiAoXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0xMiBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMS41IHB5LTAuNSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1bnJlYWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ3Jvb21fJykpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBDaGF0L1Jvb20gbGlzdCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICB7YWN0aXZlVGFiID09PSAnY2hhdHMnID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14cyB1cHBlcmNhc2UgdGV4dC1ncmF5LTUwMCBmb250LXNlbWlib2xkIHB4LTIgcHktMVwiPkRpcmVjdCBNZXNzYWdlczwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICB7dXNlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5faWQgIT09IHVzZXI/LmlkKSAvLyBEb24ndCBzaG93IHRoZSBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgICAgICAubWFwKG90aGVyVXNlciA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGFjdGl2ZUNoYXQ/LmlkID09PSBvdGhlclVzZXIuX2lkICYmIGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJztcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlzT25saW5lID0gb25saW5lVXNlcnMgJiYgb3RoZXJVc2VyLl9pZCA/IG9ubGluZVVzZXJzW290aGVyVXNlci5faWRdIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICBjb25zdCB1bnJlYWRDb3VudCA9IG90aGVyVXNlci5faWQgPyB1bnJlYWRNZXNzYWdlc1tgdXNlcl8ke290aGVyVXNlci5faWR9YF0gfHwgMCA6IDA7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e290aGVyVXNlci5faWR9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBmbGV4IGl0ZW1zLWNlbnRlciByb3VuZGVkLW1kIHAtMiAke2lzQWN0aXZlID8gJ2JnLWdyYXktNzAwJyA6ICdob3ZlcjpiZy1ncmF5LTcwMCd9YH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVDaGF0KHsgaWQ6IG90aGVyVXNlci5faWQgfHwgJycsIHR5cGU6ICdwcml2YXRlJyB9KX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC04IHctOCByb3VuZGVkLWZ1bGwgYmctZ3JheS02MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtvdGhlclVzZXIuYXZhdGFyICYmIGlzVmFsaWRJbWFnZVNyYyhvdGhlclVzZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW290aGVyVXNlci5faWQgfHwgJyddID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtvdGhlclVzZXIuYXZhdGFyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtvdGhlclVzZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBvdGhlclVzZXIuX2lkICYmIGhhbmRsZUltYWdlRXJyb3Iob3RoZXJVc2VyLl9pZCB8fCAnJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e2dldEluaXRpYWxzKG90aGVyVXNlci5uYW1lKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc09ubGluZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBiZy1ncmVlbi01MDAgaC0yIHctMiByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC0yIGZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRydW5jYXRlXCI+e290aGVyVXNlci5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTEgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB4LTIgcHktMSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dW5yZWFkQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2lzT25saW5lID8gJ09ubGluZScgOiAnT2ZmbGluZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteHMgdXBwZXJjYXNlIHRleHQtZ3JheS01MDAgZm9udC1zZW1pYm9sZFwiPlJvb21zPC9oMz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNyZWF0ZVJvb219XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIkNyZWF0ZSBhIG5ldyByb29tXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMiA0djE2bTgtOEg0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgIHtyb29tcy5tYXAocm9vbSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVDaGF0Py5pZCA9PT0gcm9vbS5faWQgJiYgYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVucmVhZENvdW50ID0gdW5yZWFkTWVzc2FnZXNbYHJvb21fJHtyb29tLl9pZH1gXSB8fCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtleT17cm9vbS5faWR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1tZCBwLTIgJHtpc0FjdGl2ZSA/ICdiZy1ncmF5LTcwMCcgOiAnaG92ZXI6YmctZ3JheS03MDAnfWB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZUNoYXQoeyBpZDogcm9vbS5faWQsIHR5cGU6ICdyb29tJyB9KX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7cm9vbS5pbWFnZSAmJiBpc1ZhbGlkSW1hZ2VTcmMocm9vbS5pbWFnZSkgJiYgIWZhaWxlZEltYWdlc1tyb29tLl9pZF0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtyb29tLmltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3Jvb20ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4gaGFuZGxlSW1hZ2VFcnJvcihyb29tLl9pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e2dldEluaXRpYWxzKHJvb20ubmFtZSl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLTIgZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZVwiPntyb29tLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0xIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC0yIHB5LTEgdGV4dC14cyBmb250LWJvbGQgbGVhZGluZy1ub25lIHRleHQtcmVkLTEwMCBiZy1yZWQtNjAwIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj57cm9vbS5tZW1iZXJzLmxlbmd0aH0gbWVtYmVyczwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBQcm9maWxlIG1vZGFsICovfVxuICAgICAge2lzUHJvZmlsZU1vZGFsT3BlbiAmJiAoXG4gICAgICAgIDxQcm9maWxlTW9kYWxcbiAgICAgICAgICBpc09wZW49e2lzUHJvZmlsZU1vZGFsT3Blbn1cbiAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc1Byb2ZpbGVNb2RhbE9wZW4oZmFsc2UpfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNoYXQiLCJ1c2VBdXRoIiwiSW1hZ2UiLCJQcm9maWxlTW9kYWwiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiTWF0aCIsIm1pbiIsImlzVmFsaWRJbWFnZVNyYyIsInNyYyIsInN0YXJ0c1dpdGgiLCJDaGF0U2lkZWJhciIsIm9uQ3JlYXRlUm9vbSIsInVzZXIiLCJsb2dvdXQiLCJyb29tcyIsInVzZXJzIiwib25saW5lVXNlcnMiLCJhY3RpdmVDaGF0Iiwic2V0QWN0aXZlQ2hhdCIsImlzTG9hZGluZyIsInVucmVhZE1lc3NhZ2VzIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwic2hvd1Byb2ZpbGVNZW51Iiwic2V0U2hvd1Byb2ZpbGVNZW51IiwiaXNQcm9maWxlTW9kYWxPcGVuIiwic2V0SXNQcm9maWxlTW9kYWxPcGVuIiwiZmFpbGVkSW1hZ2VzIiwic2V0RmFpbGVkSW1hZ2VzIiwiaGFuZGxlSW1hZ2VFcnJvciIsImlkIiwicHJldiIsImRpdiIsImNsYXNzTmFtZSIsImF2YXRhciIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwicHJpb3JpdHkiLCJvbkVycm9yIiwic3BhbiIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInRpdGxlIiwic3ZnIiwieG1sbnMiLCJ2aWV3Qm94IiwiZmlsbCIsInBhdGgiLCJkIiwidWwiLCJsaSIsIk9iamVjdCIsImVudHJpZXMiLCJmaWx0ZXIiLCJrZXkiLCJyZWR1Y2UiLCJ0b3RhbCIsIl8iLCJjb3VudCIsInUiLCJfaWQiLCJtYXAiLCJvdGhlclVzZXIiLCJpc0FjdGl2ZSIsInR5cGUiLCJpc09ubGluZSIsInVucmVhZENvdW50IiwiaDQiLCJwIiwic3Ryb2tlIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJyb29tIiwiaW1hZ2UiLCJtZW1iZXJzIiwiaXNPcGVuIiwib25DbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/ChatSidebar.tsx\n");

/***/ }),

/***/ "./src/components/chat/CreateRoomModal.tsx":
/*!*************************************************!*\
  !*** ./src/components/chat/CreateRoomModal.tsx ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CreateRoomModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-hook-form */ \"react-hook-form\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, react_hook_form__WEBPACK_IMPORTED_MODULE_3__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, react_hook_form__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nfunction CreateRoomModal({ isOpen, onClose }) {\n    const { createRoom, users, setActiveChat } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { register, handleSubmit, reset, watch, formState: { errors } } = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_3__.useForm)({\n        defaultValues: {\n            name: \"\",\n            description: \"\",\n            isPrivate: false,\n            selectedUsers: []\n        }\n    });\n    const isPrivate = watch(\"isPrivate\");\n    const onSubmit = async (data)=>{\n        try {\n            setIsSubmitting(true);\n            setError(null);\n            const newRoom = await createRoom(data.name, data.description, data.isPrivate, data.selectedUsers);\n            // Set the newly created room as active chat\n            setActiveChat({\n                type: \"room\",\n                id: newRoom._id\n            });\n            // Close modal and reset form\n            handleClose();\n        } catch (err) {\n            setError(err.message || \"Failed to create room. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleClose = ()=>{\n        reset();\n        setError(null);\n        onClose();\n    };\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-50 overflow-y-auto\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\",\n                    onClick: handleClose\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"inline-block w-full max-w-md px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:p-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute top-0 right-0 pt-4 pr-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"button\",\n                                onClick: handleClose,\n                                className: \"text-gray-400 hover:text-gray-500 focus:outline-none\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"sr-only\",\n                                        children: \"Close\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 88,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-6 h-6\",\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                            lineNumber: 90,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 89,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                lineNumber: 83,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                            lineNumber: 82,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"sm:flex sm:items-start\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 text-center sm:mt-0 sm:text-left w-full\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-medium leading-6 text-gray-900\",\n                                        children: \"Create a New Room\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 97,\n                                        columnNumber: 15\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 p-2 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                        onSubmit: handleSubmit(onSubmit),\n                                        className: \"mt-4 space-y-4\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"name\",\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Room Name *\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 109,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"text\",\n                                                        id: \"name\",\n                                                        ...register(\"name\", {\n                                                            required: \"Room name is required\"\n                                                        }),\n                                                        className: \"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 112,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    errors.name && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"mt-1 text-sm text-red-600\",\n                                                        children: errors.name.message\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 119,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 108,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"description\",\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Description\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 124,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        id: \"description\",\n                                                        rows: 3,\n                                                        ...register(\"description\"),\n                                                        className: \"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\",\n                                                        placeholder: \"Describe what this room is about...\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 127,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 123,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"checkbox\",\n                                                        id: \"isPrivate\",\n                                                        ...register(\"isPrivate\"),\n                                                        className: \"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 137,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"isPrivate\",\n                                                        className: \"ml-2 block text-sm text-gray-700\",\n                                                        children: \"Private Room (invite only)\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 143,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 136,\n                                                columnNumber: 17\n                                            }, this),\n                                            isPrivate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Invite Users\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 150,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-1 max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2\",\n                                                        children: users.map((user)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex items-center py-1\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                        type: \"checkbox\",\n                                                                        id: `user-${user._id}`,\n                                                                        value: user._id,\n                                                                        ...register(\"selectedUsers\"),\n                                                                        className: \"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                        lineNumber: 156,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                                        htmlFor: `user-${user._id}`,\n                                                                        className: \"ml-2 block text-sm text-gray-700\",\n                                                                        children: [\n                                                                            user.name,\n                                                                            \" (\",\n                                                                            user.email,\n                                                                            \")\"\n                                                                        ]\n                                                                    }, void 0, true, {\n                                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                        lineNumber: 163,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                ]\n                                                            }, user._id, true, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                lineNumber: 155,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 153,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 149,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"submit\",\n                                                        disabled: isSubmitting,\n                                                        className: \"inline-flex justify-center w-full px-4 py-2 text-base font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                        children: isSubmitting ? \"Creating...\" : \"Create Room\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 173,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: handleClose,\n                                                        className: \"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm\",\n                                                        children: \"Cancel\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 180,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 172,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 107,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                            lineNumber: 95,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                    lineNumber: 81,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n            lineNumber: 73,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n        lineNumber: 72,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L0NyZWF0ZVJvb21Nb2RhbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDZ0I7QUFDUDtBQWMzQixTQUFTRyxnQkFBZ0IsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQXdCO0lBQy9FLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVDLGFBQWEsRUFBRSxHQUFHUCw4REFBT0E7SUFDcEQsTUFBTSxDQUFDUSxjQUFjQyxnQkFBZ0IsR0FBR1YsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDVyxPQUFPQyxTQUFTLEdBQUdaLCtDQUFRQSxDQUFnQjtJQUVsRCxNQUFNLEVBQ0phLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxLQUFLLEVBQ0xDLEtBQUssRUFDTEMsV0FBVyxFQUFFQyxNQUFNLEVBQUUsRUFDdEIsR0FBR2hCLHdEQUFPQSxDQUFxQjtRQUM5QmlCLGVBQWU7WUFDYkMsTUFBTTtZQUNOQyxhQUFhO1lBQ2JDLFdBQVc7WUFDWEMsZUFBZSxFQUFFO1FBQ25CO0lBQ0Y7SUFFQSxNQUFNRCxZQUFZTixNQUFNO0lBRXhCLE1BQU1RLFdBQVcsT0FBT0M7UUFDdEIsSUFBSTtZQUNGZixnQkFBZ0I7WUFDaEJFLFNBQVM7WUFFVCxNQUFNYyxVQUFVLE1BQU1wQixXQUNwQm1CLEtBQUtMLElBQUksRUFDVEssS0FBS0osV0FBVyxFQUNoQkksS0FBS0gsU0FBUyxFQUNkRyxLQUFLRixhQUFhO1lBR3BCLDRDQUE0QztZQUM1Q2YsY0FBYztnQkFBRW1CLE1BQU07Z0JBQVFDLElBQUlGLFFBQVFHLEdBQUc7WUFBQztZQUU5Qyw2QkFBNkI7WUFDN0JDO1FBQ0YsRUFBRSxPQUFPQyxLQUFVO1lBQ2pCbkIsU0FBU21CLElBQUlDLE9BQU8sSUFBSTtRQUMxQixTQUFVO1lBQ1J0QixnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLE1BQU1vQixjQUFjO1FBQ2xCZjtRQUNBSCxTQUFTO1FBQ1RQO0lBQ0Y7SUFFQSxJQUFJLENB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O3dEQUNUSSxXQUFVO2tFQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DcmVhdGVSb29tTW9kYWwudHN4PzNhNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VDaGF0IH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcblxuaW50ZXJmYWNlIENyZWF0ZVJvb21Nb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlUm9vbUZvcm1EYXRhIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpc1ByaXZhdGU6IGJvb2xlYW47XG4gIHNlbGVjdGVkVXNlcnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVSb29tTW9kYWwoeyBpc09wZW4sIG9uQ2xvc2UgfTogQ3JlYXRlUm9vbU1vZGFsUHJvcHMpIHtcbiAgY29uc3QgeyBjcmVhdGVSb29tLCB1c2Vycywgc2V0QWN0aXZlQ2hhdCB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgeyBcbiAgICByZWdpc3RlciwgXG4gICAgaGFuZGxlU3VibWl0LCBcbiAgICByZXNldCxcbiAgICB3YXRjaCxcbiAgICBmb3JtU3RhdGU6IHsgZXJyb3JzIH0gXG4gIH0gPSB1c2VGb3JtPENyZWF0ZVJvb21Gb3JtRGF0YT4oe1xuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgaXNQcml2YXRlOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkVXNlcnM6IFtdXG4gICAgfVxuICB9KTtcbiAgXG4gIGNvbnN0IGlzUHJpdmF0ZSA9IHdhdGNoKCdpc1ByaXZhdGUnKTtcblxuICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jIChkYXRhOiBDcmVhdGVSb29tRm9ybURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1Jvb20gPSBhd2FpdCBjcmVhdGVSb29tKFxuICAgICAgICBkYXRhLm5hbWUsXG4gICAgICAgIGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIGRhdGEuaXNQcml2YXRlLFxuICAgICAgICBkYXRhLnNlbGVjdGVkVXNlcnNcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFNldCB0aGUgbmV3bHkgY3JlYXRlZCByb29tIGFzIGFjdGl2ZSBjaGF0XG4gICAgICBzZXRBY3RpdmVDaGF0KHsgdHlwZTogJ3Jvb20nLCBpZDogbmV3Um9vbS5faWQgfSk7XG4gICAgICBcbiAgICAgIC8vIENsb3NlIG1vZGFsIGFuZCByZXNldCBmb3JtXG4gICAgICBoYW5kbGVDbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSByb29tLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIHJlc2V0KCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgb25DbG9zZSgpO1xuICB9O1xuICBcbiAgaWYgKCFpc09wZW4pIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotNTAgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlbiBweC00IHB0LTQgcGItMjAgdGV4dC1jZW50ZXIgc206YmxvY2sgc206cC0wXCI+XG4gICAgICAgIHsvKiBCYWNrZ3JvdW5kIG92ZXJsYXkgKi99XG4gICAgICAgIDxkaXYgXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB0cmFuc2l0aW9uLW9wYWNpdHkgYmctZ3JheS01MDAgYmctb3BhY2l0eS03NVwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgID48L2Rpdj5cblxuICAgICAgICB7LyogTW9kYWwgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrIHctZnVsbCBtYXgtdy1tZCBweC00IHB0LTUgcGItNCBvdmVyZmxvdy1oaWRkZW4gdGV4dC1sZWZ0IGFsaWduLWJvdHRvbSB0cmFuc2l0aW9uLWFsbCB0cmFuc2Zvcm0gYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgc206bXktOCBzbTphbGlnbi1taWRkbGUgc206cC02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMCByaWdodC0wIHB0LTQgcHItNFwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMCBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+Q2xvc2U8L3NwYW4+XG4gICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy02IGgtNlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbTpmbGV4IHNtOml0ZW1zLXN0YXJ0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgdGV4dC1jZW50ZXIgc206bXQtMCBzbTp0ZXh0LWxlZnQgdy1mdWxsXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIGxlYWRpbmctNiB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgQ3JlYXRlIGEgTmV3IFJvb21cbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHAtMiBiZy1yZWQtNTAgYm9yZGVyLWwtNCBib3JkZXItcmVkLTUwMCB0ZXh0LXJlZC03MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdChvblN1Ym1pdCl9IGNsYXNzTmFtZT1cIm10LTQgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICBSb29tIE5hbWUgKlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignbmFtZScsIHsgcmVxdWlyZWQ6ICdSb29tIG5hbWUgaXMgcmVxdWlyZWQnIH0pfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgbXQtMSBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBmb2N1czpib3JkZXItcHJpbWFyeS01MDAgc206dGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAge2Vycm9ycy5uYW1lICYmIChcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPntlcnJvcnMubmFtZS5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZGVzY3JpcHRpb25cIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignZGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIG10LTEgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgZm9jdXM6Ym9yZGVyLXByaW1hcnktNTAwIHNtOnRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkRlc2NyaWJlIHdoYXQgdGhpcyByb29tIGlzIGFib3V0Li4uXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiaXNQcml2YXRlXCJcbiAgICAgICAgICAgICAgICAgICAgey4uLnJlZ2lzdGVyKCdpc1ByaXZhdGUnKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LXByaW1hcnktNjAwIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWRcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiaXNQcml2YXRlXCIgY2xhc3NOYW1lPVwibWwtMiBibG9jayB0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZSBSb29tIChpbnZpdGUgb25seSlcbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge2lzUHJpdmF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgSW52aXRlIFVzZXJzXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBtYXgtaC00OCBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHt1c2Vycy5tYXAodXNlciA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dXNlci5faWR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YHVzZXItJHt1c2VyLl9pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1c2VyLl9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4ucmVnaXN0ZXIoJ3NlbGVjdGVkVXNlcnMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcHJpbWFyeS02MDAgZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBib3JkZXItZ3JheS0zMDAgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXtgdXNlci0ke3VzZXIuX2lkfWB9IGNsYXNzTmFtZT1cIm1sLTIgYmxvY2sgdGV4dC1zbSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIubmFtZX0gKHt1c2VyLmVtYWlsfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC01IHNtOm10LTQgc206ZmxleCBzbTpmbGV4LXJvdy1yZXZlcnNlXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgcHgtNCBweS0yIHRleHQtYmFzZSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIGJnLXByaW1hcnktNjAwIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgcm91bmRlZC1tZCBzaGFkb3ctc20gaG92ZXI6YmctcHJpbWFyeS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgc206bWwtMyBzbTp3LWF1dG8gc206dGV4dC1zbSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc1N1Ym1pdHRpbmcgPyAnQ3JlYXRpbmcuLi4nIDogJ0NyZWF0ZSBSb29tJ31cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGp1c3RpZnktY2VudGVyIHctZnVsbCBweC00IHB5LTIgbXQtMyB0ZXh0LWJhc2UgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgc206bXQtMCBzbTp3LWF1dG8gc206dGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2hhdCIsInVzZUZvcm0iLCJDcmVhdGVSb29tTW9kYWwiLCJpc09wZW4iLCJvbkNsb3NlIiwiY3JlYXRlUm9vbSIsInVzZXJzIiwic2V0QWN0aXZlQ2hhdCIsImlzU3VibWl0dGluZyIsInNldElzU3VibWl0dGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJyZWdpc3RlciIsImhhbmRsZVN1Ym1pdCIsInJlc2V0Iiwid2F0Y2giLCJmb3JtU3RhdGUiLCJlcnJvcnMiLCJkZWZhdWx0VmFsdWVzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiaXNQcml2YXRlIiwic2VsZWN0ZWRVc2VycyIsIm9uU3VibWl0IiwiZGF0YSIsIm5ld1Jvb20iLCJ0eXBlIiwiaWQiLCJfaWQiLCJoYW5kbGVDbG9zZSIsImVyciIsIm1lc3NhZ2UiLCJkaXYiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwiYnV0dG9uIiwic3BhbiIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaDMiLCJmb3JtIiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJyZXF1aXJlZCIsInAiLCJ0ZXh0YXJlYSIsInJvd3MiLCJwbGFjZWhvbGRlciIsIm1hcCIsInVzZXIiLCJ2YWx1ZSIsImVtYWlsIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/CreateRoomModal.tsx\n");

/***/ }),

/***/ "./src/components/chat/EditRoomModal.tsx":
/*!***********************************************!*\
  !*** ./src/components/chat/EditRoomModal.tsx ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditRoomModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction EditRoomModal({ isOpen, onClose, roomId }) {\n    const { rooms, updateRoom } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const room = rooms.find((r)=>r._id === roomId);\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [description, setDescription] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isPrivate, setIsPrivate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [localImagePreview, setLocalImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUrlInput, setShowUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (room) {\n            setName(room.name || \"\");\n            setDescription(room.description || \"\");\n            setImage(room.image || \"\");\n            setIsPrivate(room.isPrivate || false);\n            setLocalImagePreview(null);\n            setShowUrlInput(false);\n        }\n    }, [\n        room\n    ]);\n    if (!isOpen || !room) return null;\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        try {\n            setIsSubmitting(true);\n            // Use localImagePreview if available, otherwise use image URL\n            const imageToUse = localImagePreview || image;\n            await updateRoom(roomId, {\n                name,\n                description,\n                image: imageToUse,\n                isPrivate\n            });\n            onClose();\n        } catch (err) {\n            console.error(\"Error updating room:\", err);\n            setError(\"Failed to update room. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleImageUpload = (e)=>{\n        const file = e.target.files?.[0];\n        if (!file) return;\n        // Check file size (limit to 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n            setError(\"Image size must be less than 5MB\");\n            return;\n        }\n        // Check file type\n        if (!file.type.startsWith(\"image/\")) {\n            setError(\"File must be an image\");\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (event)=>{\n            if (event.target?.result) {\n                setLocalImagePreview(event.target.result);\n                setImage(\"\"); // Clear URL input when local file is selected\n                setShowUrlInput(false); // Hide URL input when file is selected\n            }\n        };\n        reader.readAsDataURL(file);\n    };\n    const handleRemoveImage = ()=>{\n        setLocalImagePreview(null);\n        setImage(\"\");\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n        setShowUrlInput(false);\n    };\n    const toggleUrlInput = ()=>{\n        setShowUrlInput(!showUrlInput);\n        if (showUrlInput && fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-5 border-b\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-medium text-gray-900\",\n                        children: \"Edit Room\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                        lineNumber: 110,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                    lineNumber: 109,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSubmit,\n                    className: \"p-5 space-y-4\",\n                    children: [\n                        error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-red-50 text-red-600 p-3 rounded-md text-sm\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 115,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"name\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Room Name *\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 121,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    id: \"name\",\n                                    value: name,\n                                    onChange: (e)=>setName(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                    required: true\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 124,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 120,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"description\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Description\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 135,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                    id: \"description\",\n                                    value: description,\n                                    onChange: (e)=>setDescription(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                    rows: 3\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 138,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 134,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Room Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 148,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-center mb-3\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"relative w-52 h-32 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center\",\n                                                children: localImagePreview || image ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                    src: localImagePreview || image,\n                                                    alt: name,\n                                                    layout: \"fill\",\n                                                    objectFit: \"cover\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                    lineNumber: 158,\n                                                    columnNumber: 21\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-gray-400\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-12 w-12\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        stroke: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            strokeLinecap: \"round\",\n                                                            strokeLinejoin: \"round\",\n                                                            strokeWidth: 1,\n                                                            d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 167,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 166,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                    lineNumber: 165,\n                                                    columnNumber: 21\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                lineNumber: 156,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute -bottom-2 right-0 flex space-x-1\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"file\",\n                                                        id: \"room-image-upload\",\n                                                        ref: fileInputRef,\n                                                        onChange: handleImageUpload,\n                                                        accept: \"image/*\",\n                                                        className: \"hidden\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 176,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: ()=>fileInputRef.current?.click(),\n                                                        className: \"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-colors\",\n                                                        title: \"Upload image from device\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 193,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 192,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 186,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: toggleUrlInput,\n                                                        className: \"bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors\",\n                                                        title: \"Enter image URL\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 205,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 204,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 198,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    (localImagePreview || image) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: handleRemoveImage,\n                                                        className: \"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors\",\n                                                        title: \"Remove image\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 218,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 217,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 211,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                lineNumber: 174,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                        lineNumber: 154,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 153,\n                                    columnNumber: 13\n                                }, this),\n                                showUrlInput && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mb-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"image\",\n                                            className: \"block text-xs font-medium text-gray-700 mb-1\",\n                                            children: \"Enter image URL\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                            lineNumber: 229,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"url\",\n                                            id: \"image\",\n                                            value: image,\n                                            onChange: (e)=>{\n                                                setImage(e.target.value);\n                                                if (e.target.value) {\n                                                    setLocalImagePreview(null);\n                                                    if (fileInputRef.current) {\n                                                        fileInputRef.current.value = \"\";\n                                                    }\n                                                }\n                                            },\n                                            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            placeholder: \"https://example.com/room-image.jpg\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                            lineNumber: 232,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 228,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-center text-gray-500\",\n                                    children: \"For best results, use a rectangular or square image. Max size: 5MB.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 251,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 147,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center mt-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"checkbox\",\n                                    id: \"is-private\",\n                                    checked: isPrivate,\n                                    onChange: (e)=>setIsPrivate(e.target.checked),\n                                    className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 257,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"is-private\",\n                                    className: \"ml-2 block text-sm text-gray-700\",\n                                    children: \"Private Room (Only invited members can join)\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 264,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 256,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end mt-5 pt-4 border-t\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    disabled: isSubmitting,\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 270,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isSubmitting ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    disabled: isSubmitting,\n                                    children: isSubmitting ? \"Saving...\" : \"Save Changes\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 278,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 269,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                    lineNumber: 113,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n            lineNumber: 108,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n        lineNumber: 107,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtvQ0FDVGlELFdBQVU7b0NBQ1ZxQyxVQUFVdEU7OENBQ1g7Ozs7Ozs4Q0FHRCw4REFBQzZEO29DQUNDekMsTUFBSztvQ0FDTGEsV0FBVyxDQUFDLDRIQUE0SCxFQUN0SWpDLGVBQWUsa0NBQWtDLEdBQ2xELENBQUM7b0NBQ0ZzRSxVQUFVdEU7OENBRVRBLGVBQWUsY0FBYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29tcG9uZW50cy9jaGF0L0VkaXRSb29tTW9kYWwudHN4P2EyODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgRWRpdFJvb21Nb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWRpdFJvb21Nb2RhbCh7IGlzT3Blbiwgb25DbG9zZSwgcm9vbUlkIH06IEVkaXRSb29tTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHJvb21zLCB1cGRhdGVSb29tIH0gPSB1c2VDaGF0KCk7XG4gIGNvbnN0IHJvb20gPSByb29tcy5maW5kKHIgPT4gci5faWQgPT09IHJvb21JZCk7XG5cbiAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZGVzY3JpcHRpb24sIHNldERlc2NyaXB0aW9uXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2ltYWdlLCBzZXRJbWFnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1ByaXZhdGUsIHNldElzUHJpdmF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbG9jYWxJbWFnZVByZXZpZXcsIHNldExvY2FsSW1hZ2VQcmV2aWV3XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1VybElucHV0LCBzZXRTaG93VXJsSW5wdXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJvb20pIHtcbiAgICAgIHNldE5hbWUocm9vbS5uYW1lIHx8ICcnKTtcbiAgICAgIHNldERlc2NyaXB0aW9uKHJvb20uZGVzY3JpcHRpb24gfHwgJycpO1xuICAgICAgc2V0SW1hZ2Uocm9vbS5pbWFnZSB8fCAnJyk7XG4gICAgICBzZXRJc1ByaXZhdGUocm9vbS5pc1ByaXZhdGUgfHwgZmFsc2UpO1xuICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Jvb21dKTtcblxuICBpZiAoIWlzT3BlbiB8fCAhcm9vbSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRFcnJvcignJyk7XG5cbiAgICB0cnkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgLy8gVXNlIGxvY2FsSW1hZ2VQcmV2aWV3IGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBpbWFnZSBVUkxcbiAgICAgIGNvbnN0IGltYWdlVG9Vc2UgPSBsb2NhbEltYWdlUHJldmlldyB8fCBpbWFnZTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXBkYXRlUm9vbShyb29tSWQsIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGltYWdlOiBpbWFnZVRvVXNlLFxuICAgICAgICBpc1ByaXZhdGVcbiAgICAgIH0pO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcm9vbTonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcm9vbS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIC8vIENoZWNrIGZpbGUgc2l6ZSAobGltaXQgdG8gNU1CKVxuICAgIGlmIChmaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHtcbiAgICAgIHNldEVycm9yKCdJbWFnZSBzaXplIG11c3QgYmUgbGVzcyB0aGFuIDVNQicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZVxuICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICBzZXRFcnJvcignRmlsZSBtdXN0IGJlIGFuIGltYWdlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Py5yZXN1bHQpIHtcbiAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcoZXZlbnQudGFyZ2V0LnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICBzZXRJbWFnZSgnJyk7IC8vIENsZWFyIFVSTCBpbnB1dCB3aGVuIGxvY2FsIGZpbGUgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2V0U2hvd1VybElucHV0KGZhbHNlKTsgLy8gSGlkZSBVUkwgaW5wdXQgd2hlbiBmaWxlIGlzIHNlbGVjdGVkXG4gICAgICB9XG4gICAgfTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRMb2NhbEltYWdlUHJldmlldyhudWxsKTtcbiAgICBzZXRJbWFnZSgnJyk7XG4gICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVVybElucHV0ID0gKCkgPT4ge1xuICAgIHNldFNob3dVcmxJbnB1dCghc2hvd1VybElucHV0KTtcbiAgICBpZiAoc2hvd1VybElucHV0ICYmIGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXhsIG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC01IGJvcmRlci1iXCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPkVkaXQgUm9vbTwvaDM+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cInAtNSBzcGFjZS15LTRcIj5cbiAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyByb3VuZGVkLW1kIHRleHQtc21cIj5cbiAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5hbWVcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICAgICBSb29tIE5hbWUgKlxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImRlc2NyaXB0aW9uXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgRGVzY3JpcHRpb25cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgaWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXREZXNjcmlwdGlvbihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICAgICBSb29tIEltYWdlXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogSW1hZ2UgcHJldmlldyB3aXRoIGNhbWVyYSBjb250cm9scyAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgey8qIFJvb20gaW1hZ2UgcHJldmlldyAqL31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctNTIgaC0zMiByb3VuZGVkLW1kIG92ZXJmbG93LWhpZGRlbiBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAge2xvY2FsSW1hZ2VQcmV2aWV3IHx8IGltYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2xvY2FsSW1hZ2VQcmV2aWV3IHx8IGltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgIGFsdD17bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ9XCJmaWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ9XCJjb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTEyIHctMTJcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17MX0gZD1cIk00IDE2bDQuNTg2LTQuNTg2YTIgMiAwIDAxMi44MjggMEwxNiAxNm0tMi0ybDEuNTg2LTEuNTg2YTIgMiAwIDAxMi44MjggMEwyMCAxNG0tNi02aC4wMU02IDIwaDEyYTIgMiAwIDAwMi0yVjZhMiAyIDAgMDAtMi0ySDZhMiAyIDAgMDAtMiAydjEyYTIgMiAwIDAwMiAyelwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQ2FtZXJhIGNvbnRyb2xzICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLWJvdHRvbS0yIHJpZ2h0LTAgZmxleCBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICAgIHsvKiBIaWRkZW4gZmlsZSBpbnB1dCAqL31cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwicm9vbS1pbWFnZS11cGxvYWRcIlxuICAgICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUltYWdlVXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBVcGxvYWQgYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZmlsZUlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcC0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVXBsb2FkIGltYWdlIGZyb20gZGV2aWNlXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk00IDVhMiAyIDAgMDAtMiAydjhhMiAyIDAgMDAyIDJoMTJhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTEuNTg2YTEgMSAwIDAxLS43MDctLjI5M2wtMS4xMjEtMS4xMjFBMiAyIDAgMDAxMS4xNzIgM0g4LjgyOGEyIDIgMCAwMC0xLjQxNC41ODZMNi4yOTMgNC43MDdBMSAxIDAgMDE1LjU4NiA1SDR6bTYgOWEzIDMgMCAxMDAtNiAzIDMgMCAwMDAgNnpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogVVJMIGJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVVybElucHV0fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVudGVyIGltYWdlIFVSTFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTIuNTg2IDQuNTg2YTIgMiAwIDExMi44MjggMi44MjhsLTMgM2EyIDIgMCAwMS0yLjgyOCAwIDEgMSAwIDAwLTEuNDE0IDEuNDE0IDQgNCAwIDAwNS42NTYgMGwzLTNhNCA0IDAgMDAtNS42NTYtNS42NTZsLTEuNSAxLjVhMSAxIDAgMTAxLjQxNCAxLjQxNGwxLjUtMS41em0tNSA1YTIgMiAwIDAxMi44MjggMCAxIDEgMCAxMDEuNDE0LTEuNDE0IDQgNCAwIDAwLTUuNjU2IDBsLTMgM2E0IDQgMCAxMDUuNjU2IDUuNjU2bDEuNS0xLjVhMSAxIDAgMTAtMS40MTQtMS40MTRsLTEuNSAxLjVhMiAyIDAgMTEtMi44MjgtMi44MjhsMy0zelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBSZW1vdmUgYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgeyhsb2NhbEltYWdlUHJldmlldyB8fCBpbWFnZSkgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZUltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXJlZC01MDAgdGV4dC13aGl0ZSBwLTIgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXJlZC02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUmVtb3ZlIGltYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk00LjI5MyA0LjI5M2ExIDEgMCAwMTEuNDE0IDBMMTAgOC41ODZsNC4yOTMtNC4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNEwxMS40MTQgMTBsNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogVVJMIElucHV0ICh0b2dnbGVhYmxlKSAqL31cbiAgICAgICAgICAgIHtzaG93VXJsSW5wdXQgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImltYWdlXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgIEVudGVyIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidXJsXCJcbiAgICAgICAgICAgICAgICAgIGlkPVwiaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2ltYWdlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEltYWdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHBzOi8vZXhhbXBsZS5jb20vcm9vbS1pbWFnZS5qcGdcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIEZvciBiZXN0IHJlc3VsdHMsIHVzZSBhIHJlY3Rhbmd1bGFyIG9yIHNxdWFyZSBpbWFnZS4gTWF4IHNpemU6IDVNQi5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXQtMlwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgIGlkPVwiaXMtcHJpdmF0ZVwiXG4gICAgICAgICAgICAgIGNoZWNrZWQ9e2lzUHJpdmF0ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJc1ByaXZhdGUoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ibHVlLTYwMCBmb2N1czpyaW5nLWJsdWUtNTAwIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImlzLXByaXZhdGVcIiBjbGFzc05hbWU9XCJtbC0yIGJsb2NrIHRleHQtc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICBQcml2YXRlIFJvb20gKE9ubHkgaW52aXRlZCBtZW1iZXJzIGNhbiBqb2luKVxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBtdC01IHB0LTQgYm9yZGVyLXRcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBtci0zIHRleHQtZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWJsdWUtNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCAke1xuICAgICAgICAgICAgICAgIGlzU3VibWl0dGluZyA/ICdvcGFjaXR5LTc1IGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdTYXZpbmcuLi4nIDogJ1NhdmUgQ2hhbmdlcyd9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VDaGF0IiwiSW1hZ2UiLCJFZGl0Um9vbU1vZGFsIiwiaXNPcGVuIiwib25DbG9zZSIsInJvb21JZCIsInJvb21zIiwidXBkYXRlUm9vbSIsInJvb20iLCJmaW5kIiwiciIsIl9pZCIsIm5hbWUiLCJzZXROYW1lIiwiZGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsImltYWdlIiwic2V0SW1hZ2UiLCJpc1ByaXZhdGUiLCJzZXRJc1ByaXZhdGUiLCJpc1N1Ym1pdHRpbmciLCJzZXRJc1N1Ym1pdHRpbmciLCJlcnJvciIsInNldEVycm9yIiwibG9jYWxJbWFnZVByZXZpZXciLCJzZXRMb2NhbEltYWdlUHJldmlldyIsInNob3dVcmxJbnB1dCIsInNldFNob3dVcmxJbnB1dCIsImZpbGVJbnB1dFJlZiIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImltYWdlVG9Vc2UiLCJlcnIiLCJjb25zb2xlIiwiaGFuZGxlSW1hZ2VVcGxvYWQiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJzaXplIiwidHlwZSIsInN0YXJ0c1dpdGgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJjdXJyZW50IiwidmFsdWUiLCJ0b2dnbGVVcmxJbnB1dCIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiZm9ybSIsIm9uU3VibWl0IiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJpZCIsIm9uQ2hhbmdlIiwicmVxdWlyZWQiLCJ0ZXh0YXJlYSIsInJvd3MiLCJzcmMiLCJhbHQiLCJsYXlvdXQiLCJvYmplY3RGaXQiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsInJlZiIsImFjY2VwdCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJjbGljayIsInRpdGxlIiwiZmlsbFJ1bGUiLCJjbGlwUnVsZSIsInBsYWNlaG9sZGVyIiwicCIsImNoZWNrZWQiLCJkaXNhYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/EditRoomModal.tsx\n");

/***/ }),

/***/ "./src/components/chat/MessageInput.tsx":
/*!**********************************************!*\
  !*** ./src/components/chat/MessageInput.tsx ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MessageInput)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nfunction MessageInput() {\n    const { sendMessage, activeChat, setTyping, uploadingFiles } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedFiles, setSelectedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [previewUrls, setPreviewUrls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep track of the previous active chat to prevent unnecessary resets\n    const prevActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    // Store activeChat ID for comparisons\n    const activeChatId = activeChat ? `${activeChat.type}-${activeChat.id}` : null;\n    const prevActiveChatId = prevActiveChatRef.current ? `${prevActiveChatRef.current.type}-${prevActiveChatRef.current.id}` : null;\n    // Handle typing indicator with debounce\n    const typingTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const handleTypingIndicator = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((isTyping)=>{\n        if (typingTimeoutRef.current) {\n            clearTimeout(typingTimeoutRef.current);\n            typingTimeoutRef.current = null;\n        }\n        setTyping(isTyping);\n        if (isTyping) {\n            typingTimeoutRef.current = setTimeout(()=>{\n                setTyping(false);\n                typingTimeoutRef.current = null;\n            }, 2000); // Stop typing indicator after 2 seconds of inactivity\n        }\n    }, [\n        setTyping\n    ]);\n    const handleChange = (e)=>{\n        const newValue = e.target.value;\n        setMessage(newValue);\n        if (newValue.length > 0) {\n            handleTypingIndicator(true);\n        } else {\n            handleTypingIndicator(false);\n        }\n    };\n    const handleKeyDown = (e)=>{\n        // Send message on Enter key (without Shift)\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleSubmit();\n        }\n    };\n    const handleSubmit = async ()=>{\n        if (!message.trim() && selectedFiles.length === 0 || !activeChat || isSubmitting) return;\n        try {\n            setIsSubmitting(true);\n            handleTypingIndicator(false);\n            await sendMessage(message.trim(), selectedFiles);\n            setMessage(\"\");\n            setSelectedFiles([]);\n            setPreviewUrls([]);\n        } catch (error) {\n            console.error(\"Failed to send message:\", error);\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleFileSelect = async (event)=>{\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n        // Reducir el tamaño máximo a 15MB para evitar el límite de BSON de MongoDB (16MB)\n        const maxSize = 15 * 1024 * 1024; // 15MB máximo para evitar límites de MongoDB\n        let newFiles = [];\n        let newPreviewUrls = [];\n        let processedCount = 0;\n        const totalFiles = Array.from(files).length;\n        // Procesar cada archivo seleccionado\n        Array.from(files).forEach(async (file)=>{\n            try {\n                // Verificar tamaño\n                if (file.size > maxSize) {\n                    alert(`El archivo ${file.name} excede el límite de 15MB. Los archivos deben ser menores a 15MB debido a limitaciones de la base de datos.`);\n                    processedCount++;\n                    return;\n                }\n                // Crear URL para vista previa\n                const previewUrl = URL.createObjectURL(file);\n                newPreviewUrls.push(previewUrl);\n                const reader = new FileReader();\n                reader.onload = (e)=>{\n                    try {\n                        if (e.target?.result) {\n                            // Extraer la parte base64 de la cadena completa\n                            const base64String = e.target.result.toString();\n                            const base64Data = base64String.split(\",\")[1];\n                            let fileType;\n                            // Determinar el tipo de archivo\n                            if (file.type.startsWith(\"image/\")) {\n                                fileType = _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.IMAGE;\n                            } else if (file.type.startsWith(\"video/\")) {\n                                fileType = _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO;\n                            } else if (file.type.startsWith(\"audio/\")) {\n                                fileType = _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.AUDIO;\n                            } else {\n                                fileType = _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.DOCUMENT;\n                            }\n                            // Crear objeto de adjunto\n                            const newFile = {\n                                filename: file.name,\n                                contentType: file.type,\n                                fileType,\n                                data: base64Data,\n                                size: file.size\n                            };\n                            // Actualizar arrays temporales\n                            newFiles.push(newFile);\n                        }\n                    } catch (error) {\n                        console.error(\"Error processing file:\", error);\n                    } finally{\n                        processedCount++;\n                        // Actualizar estado solo cuando todos los archivos han sido procesados\n                        if (processedCount === totalFiles) {\n                            setSelectedFiles((prev)=>[\n                                    ...prev,\n                                    ...newFiles\n                                ]);\n                            setPreviewUrls((prev)=>[\n                                    ...prev,\n                                    ...newPreviewUrls\n                                ]);\n                        }\n                    }\n                };\n                // Error handling\n                reader.onerror = ()=>{\n                    console.error(`Error reading file: ${file.name}`);\n                    processedCount++;\n                    // Verificar si todos los archivos han sido procesados\n                    if (processedCount === totalFiles) {\n                        setSelectedFiles((prev)=>[\n                                ...prev,\n                                ...newFiles\n                            ]);\n                        setPreviewUrls((prev)=>[\n                                ...prev,\n                                ...newPreviewUrls\n                            ]);\n                    }\n                };\n                // Leer el archivo en chunks para archivos grandes (especialmente videos)\n                reader.readAsDataURL(file);\n            } catch (error) {\n                console.error(\"Error processing file:\", error);\n                processedCount++;\n            }\n        });\n        // Reset file input\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    const removeFile = (index)=>{\n        setSelectedFiles((prev)=>prev.filter((_, i)=>i !== index));\n        setPreviewUrls((prev)=>prev.filter((_, i)=>i !== index));\n    };\n    // Reset message input only when actually changing chats\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Only reset if the active chat ID actually changed\n        if (activeChatId !== prevActiveChatId) {\n            setMessage(\"\");\n            setSelectedFiles([]);\n            setPreviewUrls([]);\n            handleTypingIndicator(false);\n            prevActiveChatRef.current = activeChat;\n        }\n    }, [\n        activeChatId,\n        prevActiveChatId,\n        activeChat,\n        handleTypingIndicator\n    ]);\n    // Cleanup typing timeout on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            if (typingTimeoutRef.current) {\n                clearTimeout(typingTimeoutRef.current);\n            }\n            // Cleanup URLs\n            previewUrls.forEach((url)=>URL.revokeObjectURL(url));\n        };\n    }, [\n        previewUrls\n    ]);\n    if (!activeChat) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col p-4 border-t border-gray-200\",\n        children: [\n            selectedFiles.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-wrap gap-2 mb-2\",\n                children: selectedFiles.map((file, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative group\",\n                        children: [\n                            file.fileType === _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.IMAGE ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: previewUrls[index],\n                                alt: file.filename,\n                                className: \"h-20 w-20 object-cover rounded border border-gray-300\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 212,\n                                columnNumber: 17\n                            }, this) : file.fileType === _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-20 w-20 flex items-center justify-center bg-gray-100 rounded border border-gray-300\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-8 w-8 text-gray-500\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 220,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 221,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 219,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 218,\n                                columnNumber: 17\n                            }, this) : file.fileType === _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.AUDIO ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-20 w-20 flex items-center justify-center bg-gray-100 rounded border border-gray-300\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-8 w-8 text-gray-500\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 227,\n                                        columnNumber: 21\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 226,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 225,\n                                columnNumber: 17\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-20 w-20 flex items-center justify-center bg-gray-100 rounded border border-gray-300\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-8 w-8 text-gray-500\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 233,\n                                        columnNumber: 21\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 232,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 231,\n                                columnNumber: 17\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>removeFile(index),\n                                className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\",\n                                children: \"\\xd7\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 237,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs truncate px-1\",\n                                children: file.filename.length > 10 ? `${file.filename.substring(0, 10)}...` : file.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 243,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, index, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 210,\n                        columnNumber: 13\n                    }, this))\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 208,\n                columnNumber: 9\n            }, this),\n            Object.keys(uploadingFiles).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col gap-2 mb-3 bg-gray-50 p-3 rounded-lg\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                        className: \"text-sm font-medium text-gray-700\",\n                        children: \"Archivos en proceso\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 254,\n                        columnNumber: 11\n                    }, this),\n                    Object.entries(uploadingFiles).map(([id, { progress, error }])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-center mb-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: error ? \"Error al procesar\" : progress === 100 ? \"Completado\" : \"Procesando...\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 258,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs font-medium text-gray-700\",\n                                            children: [\n                                                progress,\n                                                \"%\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 261,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 257,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full bg-gray-200 rounded-full h-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: `h-2 rounded-full ${error ? \"bg-red-500\" : \"bg-primary-500\"}`,\n                                        style: {\n                                            width: `${progress}%`\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 264,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 263,\n                                    columnNumber: 15\n                                }, this),\n                                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-1 flex flex-col\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-xs text-red-500\",\n                                            children: error\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 271,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"self-start text-xs text-primary-500 hover:text-primary-600 mt-1\",\n                                            onClick: ()=>{\n                                                const matchingFile = selectedFiles.find((f)=>f.tempId === id);\n                                                if (matchingFile) {\n                                                    // Reintentar enviando este archivo\n                                                    const filesToSend = [\n                                                        matchingFile\n                                                    ];\n                                                    sendMessage(\"\", filesToSend);\n                                                }\n                                            },\n                                            children: \"Reintentar\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 272,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 270,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, id, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 256,\n                            columnNumber: 13\n                        }, this))\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 253,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>fileInputRef.current?.click(),\n                        className: \"mr-2 text-gray-500 hover:text-primary-500 focus:outline-none\",\n                        title: \"Attach file\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            className: \"h-6 w-6\",\n                            fill: \"none\",\n                            viewBox: \"0 0 24 24\",\n                            stroke: \"currentColor\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                strokeWidth: 2,\n                                d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 300,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 299,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 294,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"file\",\n                        ref: fileInputRef,\n                        onChange: handleFileSelect,\n                        className: \"hidden\",\n                        multiple: true,\n                        accept: \"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 303,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 mr-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"text\",\n                            value: message,\n                            onChange: handleChange,\n                            onKeyDown: handleKeyDown,\n                            className: \"w-full h-10 px-4 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",\n                            placeholder: \"Type a message...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 312,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 311,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleSubmit,\n                            disabled: message.trim().length === 0 && selectedFiles.length === 0 || isSubmitting,\n                            className: \"h-10 w-10 rounded-full bg-primary-500 hover:bg-primary-600 text-white flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: isSubmitting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: \"animate-spin h-5 w-5 text-white\",\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                        className: \"opacity-25\",\n                                        cx: \"12\",\n                                        cy: \"12\",\n                                        r: \"10\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"4\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 329,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        className: \"opacity-75\",\n                                        fill: \"currentColor\",\n                                        d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 330,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 328,\n                                columnNumber: 15\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    d: \"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 334,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 333,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 322,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 321,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 293,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n        lineNumber: 205,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFReEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29tcG9uZW50cy9jaGF0L01lc3NhZ2VJbnB1dC50c3g/ZTk4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCwgRmlsZVR5cGUsIEZpbGVBdHRhY2htZW50IH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lc3NhZ2VJbnB1dCgpIHtcbiAgY29uc3QgeyBzZW5kTWVzc2FnZSwgYWN0aXZlQ2hhdCwgc2V0VHlwaW5nLCB1cGxvYWRpbmdGaWxlcyB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGVzLCBzZXRTZWxlY3RlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVBdHRhY2htZW50W10+KFtdKTtcbiAgY29uc3QgW3ByZXZpZXdVcmxzLCBzZXRQcmV2aWV3VXJsc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG4gIFxuICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBwcmV2aW91cyBhY3RpdmUgY2hhdCB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlc2V0c1xuICBjb25zdCBwcmV2QWN0aXZlQ2hhdFJlZiA9IHVzZVJlZihhY3RpdmVDaGF0KTtcbiAgXG4gIC8vIFN0b3JlIGFjdGl2ZUNoYXQgSUQgZm9yIGNvbXBhcmlzb25zXG4gIGNvbnN0IGFjdGl2ZUNoYXRJZCA9IGFjdGl2ZUNoYXQgPyBgJHthY3RpdmVDaGF0LnR5cGV9LSR7YWN0aXZlQ2hhdC5pZH1gIDogbnVsbDtcbiAgY29uc3QgcHJldkFjdGl2ZUNoYXRJZCA9IHByZXZBY3RpdmVDaGF0UmVmLmN1cnJlbnQgXG4gICAgPyBgJHtwcmV2QWN0aXZlQ2hhdFJlZi5jdXJyZW50LnR5cGV9LSR7cHJldkFjdGl2ZUNoYXRSZWYuY3VycmVudC5pZH1gIFxuICAgIDogbnVsbDtcblxuICAvLyBIYW5kbGUgdHlwaW5nIGluZGljYXRvciB3aXRoIGRlYm91bmNlXG4gIGNvbnN0IHR5cGluZ1RpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IGhhbmRsZVR5cGluZ0luZGljYXRvciA9IHVzZUNhbGxiYWNrKChpc1R5cGluZzogYm9vbGVhbikgPT4ge1xuICAgIGlmICh0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgdHlwaW5nVGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgc2V0VHlwaW5nKGlzVHlwaW5nKTtcbiAgICBcbiAgICBpZiAoaXNUeXBpbmcpIHtcbiAgICAgIHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRUeXBpbmcoZmFsc2UpO1xuICAgICAgICB0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSwgMjAwMCk7IC8vIFN0b3AgdHlwaW5nIGluZGljYXRvciBhZnRlciAyIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICAgIH1cbiAgfSwgW3NldFR5cGluZ10pO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gZS50YXJnZXQudmFsdWU7XG4gICAgc2V0TWVzc2FnZShuZXdWYWx1ZSk7XG4gICAgXG4gICAgaWYgKG5ld1ZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGhhbmRsZVR5cGluZ0luZGljYXRvcih0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlVHlwaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgLy8gU2VuZCBtZXNzYWdlIG9uIEVudGVyIGtleSAod2l0aG91dCBTaGlmdClcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhhbmRsZVN1Ym1pdCgpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCghbWVzc2FnZS50cmltKCkgJiYgc2VsZWN0ZWRGaWxlcy5sZW5ndGggPT09IDApIHx8ICFhY3RpdmVDaGF0IHx8IGlzU3VibWl0dGluZykgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIHNldElzU3VibWl0dGluZyh0cnVlKTtcbiAgICAgIGhhbmRsZVR5cGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgICBhd2FpdCBzZW5kTWVzc2FnZShtZXNzYWdlLnRyaW0oKSwgc2VsZWN0ZWRGaWxlcyk7XG4gICAgICBzZXRNZXNzYWdlKCcnKTtcbiAgICAgIHNldFNlbGVjdGVkRmlsZXMoW10pO1xuICAgICAgc2V0UHJldmlld1VybHMoW10pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdCA9IGFzeW5jIChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlcztcbiAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gUmVkdWNpciBlbCB0YW1hw7FvIG3DoXhpbW8gYSAxNU1CIHBhcmEgZXZpdGFyIGVsIGzDrW1pdGUgZGUgQlNPTiBkZSBNb25nb0RCICgxNk1CKVxuICAgIGNvbnN0IG1heFNpemUgPSAxNSAqIDEwMjQgKiAxMDI0OyAvLyAxNU1CIG3DoXhpbW8gcGFyYSBldml0YXIgbMOtbWl0ZXMgZGUgTW9uZ29EQlxuICAgIGxldCBuZXdGaWxlczogRmlsZUF0dGFjaG1lbnRbXSA9IFtdO1xuICAgIGxldCBuZXdQcmV2aWV3VXJsczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgcHJvY2Vzc2VkQ291bnQgPSAwO1xuICAgIGNvbnN0IHRvdGFsRmlsZXMgPSBBcnJheS5mcm9tKGZpbGVzKS5sZW5ndGg7XG4gICAgXG4gICAgLy8gUHJvY2VzYXIgY2FkYSBhcmNoaXZvIHNlbGVjY2lvbmFkb1xuICAgIEFycmF5LmZyb20oZmlsZXMpLmZvckVhY2goYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciB0YW1hw7FvXG4gICAgICAgIGlmIChmaWxlLnNpemUgPiBtYXhTaXplKSB7XG4gICAgICAgICAgYWxlcnQoYEVsIGFyY2hpdm8gJHtmaWxlLm5hbWV9IGV4Y2VkZSBlbCBsw61taXRlIGRlIDE1TUIuIExvcyBhcmNoaXZvcyBkZWJlbiBzZXIgbWVub3JlcyBhIDE1TUIgZGViaWRvIGEgbGltaXRhY2lvbmVzIGRlIGxhIGJhc2UgZGUgZGF0b3MuYCk7XG4gICAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIFVSTCBwYXJhIHZpc3RhIHByZXZpYVxuICAgICAgICBjb25zdCBwcmV2aWV3VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgbmV3UHJldmlld1VybHMucHVzaChwcmV2aWV3VXJsKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIFxuICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0Py5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgLy8gRXh0cmFlciBsYSBwYXJ0ZSBiYXNlNjQgZGUgbGEgY2FkZW5hIGNvbXBsZXRhXG4gICAgICAgICAgICAgIGNvbnN0IGJhc2U2NFN0cmluZyA9IGUudGFyZ2V0LnJlc3VsdC50b1N0cmluZygpO1xuICAgICAgICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gYmFzZTY0U3RyaW5nLnNwbGl0KCcsJylbMV07XG4gICAgICAgICAgICAgIGxldCBmaWxlVHlwZTogRmlsZVR5cGU7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBEZXRlcm1pbmFyIGVsIHRpcG8gZGUgYXJjaGl2b1xuICAgICAgICAgICAgICBpZiAoZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICAgICAgICAgICAgZmlsZVR5cGUgPSBGaWxlVHlwZS5JTUFHRTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHtcbiAgICAgICAgICAgICAgICBmaWxlVHlwZSA9IEZpbGVUeXBlLlZJREVPO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkge1xuICAgICAgICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuQVVESU87XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlsZVR5cGUgPSBGaWxlVHlwZS5ET0NVTUVOVDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENyZWFyIG9iamV0byBkZSBhZGp1bnRvXG4gICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbGU6IEZpbGVBdHRhY2htZW50ID0ge1xuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBmaWxlVHlwZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjREYXRhLFxuICAgICAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgYXJyYXlzIHRlbXBvcmFsZXNcbiAgICAgICAgICAgICAgbmV3RmlsZXMucHVzaChuZXdGaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlc3RhZG8gc29sbyBjdWFuZG8gdG9kb3MgbG9zIGFyY2hpdm9zIGhhbiBzaWRvIHByb2Nlc2Fkb3NcbiAgICAgICAgICAgIGlmIChwcm9jZXNzZWRDb3VudCA9PT0gdG90YWxGaWxlcykge1xuICAgICAgICAgICAgICBzZXRTZWxlY3RlZEZpbGVzKHByZXYgPT4gWy4uLnByZXYsIC4uLm5ld0ZpbGVzXSk7XG4gICAgICAgICAgICAgIHNldFByZXZpZXdVcmxzKHByZXYgPT4gWy4uLnByZXYsIC4uLm5ld1ByZXZpZXdVcmxzXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmdcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBmaWxlOiAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgICBwcm9jZXNzZWRDb3VudCsrO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSB0b2RvcyBsb3MgYXJjaGl2b3MgaGFuIHNpZG8gcHJvY2VzYWRvc1xuICAgICAgICAgIGlmIChwcm9jZXNzZWRDb3VudCA9PT0gdG90YWxGaWxlcykge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5uZXdGaWxlc10pO1xuICAgICAgICAgICAgc2V0UHJldmlld1VybHMocHJldiA9PiBbLi4ucHJldiwgLi4ubmV3UHJldmlld1VybHNdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBMZWVyIGVsIGFyY2hpdm8gZW4gY2h1bmtzIHBhcmEgYXJjaGl2b3MgZ3JhbmRlcyAoZXNwZWNpYWxtZW50ZSB2aWRlb3MpXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKTtcbiAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlc2V0IGZpbGUgaW5wdXRcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUZpbGUgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFNlbGVjdGVkRmlsZXMocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgICBzZXRQcmV2aWV3VXJscyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpO1xuICB9O1xuXG4gIC8vIFJlc2V0IG1lc3NhZ2UgaW5wdXQgb25seSB3aGVuIGFjdHVhbGx5IGNoYW5naW5nIGNoYXRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSByZXNldCBpZiB0aGUgYWN0aXZlIGNoYXQgSUQgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmIChhY3RpdmVDaGF0SWQgIT09IHByZXZBY3RpdmVDaGF0SWQpIHtcbiAgICAgIHNldE1lc3NhZ2UoJycpO1xuICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhbXSk7XG4gICAgICBzZXRQcmV2aWV3VXJscyhbXSk7XG4gICAgICBoYW5kbGVUeXBpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgcHJldkFjdGl2ZUNoYXRSZWYuY3VycmVudCA9IGFjdGl2ZUNoYXQ7XG4gICAgfVxuICB9LCBbYWN0aXZlQ2hhdElkLCBwcmV2QWN0aXZlQ2hhdElkLCBhY3RpdmVDaGF0LCBoYW5kbGVUeXBpbmdJbmRpY2F0b3JdKTtcblxuICAvLyBDbGVhbnVwIHR5cGluZyB0aW1lb3V0IG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodHlwaW5nVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW51cCBVUkxzXG4gICAgICBwcmV2aWV3VXJscy5mb3JFYWNoKHVybCA9PiBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCkpO1xuICAgIH07XG4gIH0sIFtwcmV2aWV3VXJsc10pO1xuXG4gIGlmICghYWN0aXZlQ2hhdCkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC00IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgey8qIEZpbGUgcHJldmlld3MgKi99XG4gICAgICB7c2VsZWN0ZWRGaWxlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMiBtYi0yXCI+XG4gICAgICAgICAge3NlbGVjdGVkRmlsZXMubWFwKChmaWxlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJyZWxhdGl2ZSBncm91cFwiPlxuICAgICAgICAgICAgICB7ZmlsZS5maWxlVHlwZSA9PT0gRmlsZVR5cGUuSU1BR0UgPyAoXG4gICAgICAgICAgICAgICAgPGltZyBcbiAgICAgICAgICAgICAgICAgIHNyYz17cHJldmlld1VybHNbaW5kZXhdfSBcbiAgICAgICAgICAgICAgICAgIGFsdD17ZmlsZS5maWxlbmFtZX0gXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTIwIHctMjAgb2JqZWN0LWNvdmVyIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTMwMFwiIFxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiBmaWxlLmZpbGVUeXBlID09PSBGaWxlVHlwZS5WSURFTyA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMjAgdy0yMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTEwMCByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtOCB3LTggdGV4dC1ncmF5LTUwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTQuNzUyIDExLjE2OGwtMy4xOTctMi4xMzJBMSAxIDAgMDAxMCA5Ljg3djQuMjYzYTEgMSAwIDAwMS41NTUuODMybDMuMTk3LTIuMTMyYTEgMSAwIDAwMC0xLjY2NHpcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6XCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogZmlsZS5maWxlVHlwZSA9PT0gRmlsZVR5cGUuQVVESU8gPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTIwIHctMjAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS0xMDAgcm91bmRlZCBib3JkZXIgYm9yZGVyLWdyYXktMzAwXCI+XG4gICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHRleHQtZ3JheS01MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTkgMTlWNmwxMi0zdjEzTTkgMTljMCAxLjEwNS0xLjM0MyAyLTMgMnMtMy0uODk1LTMtMiAxLjM0My0yIDMtMiAzIC44OTUgMyAyem0xMi0zYzAgMS4xMDUtMS4zNDMgMi0zIDJzLTMtLjg5NS0zLTIgMS4zNDMtMiAzLTIgMyAuODk1IDMgMnpNOSAxMGwxMi0zXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0yMCB3LTIwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktMTAwIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTMwMFwiPlxuICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC04IHctOCB0ZXh0LWdyYXktNTAwXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk05IDEyaDZtLTYgNGg2bTIgNUg3YTIgMiAwIDAxLTItMlY1YTIgMiAwIDAxMi0yaDUuNTg2YTEgMSAwIDAxLjcwNy4yOTNsNS40MTQgNS40MTRhMSAxIDAgMDEuMjkzLjcwN1YxOWEyIDIgMCAwMS0yIDJ6XCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJlbW92ZUZpbGUoaW5kZXgpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIC10b3AtMiAtcmlnaHQtMiBiZy1yZWQtNTAwIHRleHQtd2hpdGUgcm91bmRlZC1mdWxsIGgtNSB3LTUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAmdGltZXM7XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgdGV4dC14cyB0cnVuY2F0ZSBweC0xXCI+XG4gICAgICAgICAgICAgICAge2ZpbGUuZmlsZW5hbWUubGVuZ3RoID4gMTAgPyBgJHtmaWxlLmZpbGVuYW1lLnN1YnN0cmluZygwLCAxMCl9Li4uYCA6IGZpbGUuZmlsZW5hbWV9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBVcGxvYWRpbmcgZmlsZXMgcHJvZ3Jlc3MgKi99XG4gICAgICB7T2JqZWN0LmtleXModXBsb2FkaW5nRmlsZXMpLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTIgbWItMyBiZy1ncmF5LTUwIHAtMyByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPkFyY2hpdm9zIGVuIHByb2Nlc288L2g0PlxuICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1cGxvYWRpbmdGaWxlcykubWFwKChbaWQsIHsgcHJvZ3Jlc3MsIGVycm9yIH1dKSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17aWR9IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAge2Vycm9yID8gJ0Vycm9yIGFsIHByb2Nlc2FyJyA6IHByb2dyZXNzID09PSAxMDAgPyAnQ29tcGxldGFkbycgOiAnUHJvY2VzYW5kby4uLid9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPntwcm9ncmVzc30lPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BoLTIgcm91bmRlZC1mdWxsICR7ZXJyb3IgPyAnYmctcmVkLTUwMCcgOiAnYmctcHJpbWFyeS01MDAnfWB9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7cHJvZ3Jlc3N9JWAgfX1cbiAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcmVkLTUwMFwiPntlcnJvcn08L3A+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzZWxmLXN0YXJ0IHRleHQteHMgdGV4dC1wcmltYXJ5LTUwMCBob3Zlcjp0ZXh0LXByaW1hcnktNjAwIG10LTFcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdGaWxlID0gc2VsZWN0ZWRGaWxlcy5maW5kKGYgPT4gZi50ZW1wSWQgPT09IGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWludGVudGFyIGVudmlhbmRvIGVzdGUgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZXNUb1NlbmQgPSBbbWF0Y2hpbmdGaWxlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlKCcnLCBmaWxlc1RvU2VuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBSZWludGVudGFyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIHsvKiBNZXNzYWdlIGlucHV0IGFuZCBhY3Rpb25zICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1yLTIgdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LXByaW1hcnktNTAwIGZvY3VzOm91dGxpbmUtbm9uZVwiXG4gICAgICAgICAgdGl0bGU9XCJBdHRhY2ggZmlsZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTYgdy02XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTUuMTcyIDdsLTYuNTg2IDYuNTg2YTIgMiAwIDEwMi44MjggMi44MjhsNi40MTQtNi41ODZhNCA0IDAgMDAtNS42NTYtNS42NTZsLTYuNDE1IDYuNTg1YTYgNiAwIDEwOC40ODYgOC40ODZMMjAuNSAxM1wiIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgcmVmPXtmaWxlSW5wdXRSZWZ9XG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVTZWxlY3R9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICBtdWx0aXBsZVxuICAgICAgICAgIGFjY2VwdD1cImltYWdlLyosdmlkZW8vKixhdWRpby8qLC5wZGYsLmRvYywuZG9jeCwueGxzLC54bHN4LC50eHRcIlxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtci0yXCI+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICB2YWx1ZT17bWVzc2FnZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICBvbktleURvd249e2hhbmRsZUtleURvd259XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0xMCBweC00IGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1mdWxsIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBmb2N1czpib3JkZXItcHJpbWFyeS01MDBcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUeXBlIGEgbWVzc2FnZS4uLlwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgZGlzYWJsZWQ9eyhtZXNzYWdlLnRyaW0oKS5sZW5ndGggPT09IDAgJiYgc2VsZWN0ZWRGaWxlcy5sZW5ndGggPT09IDApIHx8IGlzU3VibWl0dGluZ31cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTAgdy0xMCByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS01MDAgaG92ZXI6YmctcHJpbWFyeS02MDAgdGV4dC13aGl0ZSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTIgZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzU3VibWl0dGluZyA/IChcbiAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNSB0ZXh0LXdoaXRlXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwib3BhY2l0eS0yNVwiIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlV2lkdGg9XCI0XCI+PC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgPHBhdGggY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTQgMTJhOCA4IDAgMDE4LThWMEM1LjM3MyAwIDAgNS4zNzMgMCAxMmg0em0yIDUuMjkxQTcuOTYyIDcuOTYyIDAgMDE0IDEySDBjMCAzLjA0MiAxLjEzNSA1LjgyNCAzIDcuOTM4bDMtMi42NDd6XCI+PC9wYXRoPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAuODk0IDIuNTUzYTEgMSAwIDAwLTEuNzg4IDBsLTcgMTRhMSAxIDAgMDAxLjE2OSAxLjQwOWw1LTEuNDI5QTEgMSAwIDAwOSAxNS41NzFWMTFhMSAxIDAgMTEyIDB2NC41NzFhMSAxIDAgMDAuNzI1Ljk2Mmw1IDEuNDI4YTEgMSAwIDAwMS4xNy0xLjQwOGwtNy0xNHpcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZUNoYXQiLCJGaWxlVHlwZSIsIk1lc3NhZ2VJbnB1dCIsInNlbmRNZXNzYWdlIiwiYWN0aXZlQ2hhdCIsInNldFR5cGluZyIsInVwbG9hZGluZ0ZpbGVzIiwibWVzc2FnZSIsInNldE1lc3NhZ2UiLCJpc1N1Ym1pdHRpbmciLCJzZXRJc1N1Ym1pdHRpbmciLCJzZWxlY3RlZEZpbGVzIiwic2V0U2VsZWN0ZWRGaWxlcyIsInByZXZpZXdVcmxzIiwic2V0UHJldmlld1VybHMiLCJmaWxlSW5wdXRSZWYiLCJwcmV2QWN0aXZlQ2hhdFJlZiIsImFjdGl2ZUNoYXRJZCIsInR5cGUiLCJpZCIsInByZXZBY3RpdmVDaGF0SWQiLCJjdXJyZW50IiwidHlwaW5nVGltZW91dFJlZiIsImhhbmRsZVR5cGluZ0luZGljYXRvciIsImlzVHlwaW5nIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImhhbmRsZUNoYW5nZSIsImUiLCJuZXdWYWx1ZSIsInRhcmdldCIsInZhbHVlIiwibGVuZ3RoIiwiaGFuZGxlS2V5RG93biIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVTdWJtaXQiLCJ0cmltIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFuZGxlRmlsZVNlbGVjdCIsImV2ZW50IiwiZmlsZXMiLCJtYXhTaXplIiwibmV3RmlsZXMiLCJuZXdQcmV2aWV3VXJscyIsInByb2Nlc3NlZENvdW50IiwidG90YWxGaWxlcyIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJmaWxlIiwic2l6ZSIsImFsZXJ0IiwibmFtZSIsInByZXZpZXdVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJwdXNoIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsInJlc3VsdCIsImJhc2U2NFN0cmluZyIsInRvU3RyaW5nIiwiYmFzZTY0RGF0YSIsInNwbGl0IiwiZmlsZVR5cGUiLCJzdGFydHNXaXRoIiwiSU1BR0UiLCJWSURFTyIsIkFVRElPIiwiRE9DVU1FTlQiLCJuZXdGaWxlIiwiZmlsZW5hbWUiLCJjb250ZW50VHlwZSIsImRhdGEiLCJwcmV2Iiwib25lcnJvciIsInJlYWRBc0RhdGFVUkwiLCJyZW1vdmVGaWxlIiwiaW5kZXgiLCJmaWx0ZXIiLCJfIiwiaSIsInVybCIsInJldm9rZU9iamVjdFVSTCIsImRpdiIsImNsYXNzTmFtZSIsIm1hcCIsImltZyIsInNyYyIsImFsdCIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiYnV0dG9uIiwib25DbGljayIsInNwYW4iLCJzdWJzdHJpbmciLCJPYmplY3QiLCJrZXlzIiwiaDQiLCJlbnRyaWVzIiwicHJvZ3Jlc3MiLCJzdHlsZSIsIndpZHRoIiwicCIsIm1hdGNoaW5nRmlsZSIsImZpbmQiLCJmIiwidGVtcElkIiwiZmlsZXNUb1NlbmQiLCJjbGljayIsInRpdGxlIiwiaW5wdXQiLCJyZWYiLCJvbkNoYW5nZSIsIm11bHRpcGxlIiwiYWNjZXB0Iiwib25LZXlEb3duIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImNpcmNsZSIsImN4IiwiY3kiLCJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/chat/MessageInput.tsx\n");

/***/ }),

/***/ "./src/components/chat/MessageList.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/MessageList.tsx ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MessageList)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns/format */ \"date-fns/format\");\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(date_fns_format__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\n/**\n * Renders a file attachment based on its type\n */ const AttachmentPreview = ({ attachment })=>{\n    const [loadState, setLoadState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"initial\");\n    const [previewAvailable, setPreviewAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const apiBaseUrl = \"http://localhost:3001\" || 0;\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [showFullscreen, setShowFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Si es un video grande, verificar si está disponible\n        if (attachment.isLargeFile && attachment.fileId && attachment.contentType.startsWith(\"video/\")) {\n            checkVideoAvailability();\n        } else {\n            setLoadState(\"loaded\");\n        }\n    }, [\n        attachment.fileId,\n        retryCount\n    ]);\n    // Verificar si el video está disponible\n    const checkVideoAvailability = async ()=>{\n        try {\n            setLoadState(\"loading\");\n            const response = await fetch(`${apiBaseUrl}/chats/file/${attachment.fileId}?preview=true`);\n            if (!response.ok) {\n                if (retryCount < 10) {\n                    // Reintentamos después de un tiempo\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000); // Reintento cada 2 segundos\n                } else {\n                    setLoadState(\"error\");\n                }\n                return;\n            }\n            const metadata = await response.json();\n            if (metadata.complete) {\n                setLoadState(\"loaded\");\n                setPreviewAvailable(true);\n            } else {\n                // Archivo todavía no está completo, reintentamos\n                if (retryCount < 10) {\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000);\n                } else {\n                    setLoadState(\"error\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error verificando disponibilidad del video:\", error);\n            setLoadState(\"error\");\n        }\n    };\n    // Obtener la fuente del archivo\n    const getAttachmentSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return `${apiBaseUrl}/chats/file/${attachment.fileId}`;\n        }\n        return `data:${attachment.contentType};base64,${attachment.data}`;\n    };\n    // Obtener la miniatura para videos\n    const getThumbnailSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return `${apiBaseUrl}/chats/file/${attachment.fileId}/thumbnail`;\n        }\n        return \"/video-placeholder.png\";\n    };\n    // Descargar el archivo\n    const handleDownload = ()=>{\n        if (loadState !== \"loaded\") return;\n        const a = document.createElement(\"a\");\n        a.href = getAttachmentSource();\n        a.download = attachment.filename || \"download\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    };\n    // Determinar el tipo de archivo\n    const getFileType = ()=>{\n        if (attachment.contentType.startsWith(\"image/\")) return \"image\";\n        if (attachment.contentType.startsWith(\"video/\")) return \"video\";\n        if (attachment.contentType.startsWith(\"audio/\")) return \"audio\";\n        return \"document\";\n    };\n    // Manejar fullscreen para videos\n    const toggleFullscreen = ()=>{\n        if (loadState !== \"loaded\") return;\n        setShowFullscreen(!showFullscreen);\n    };\n    const handleLoadedData = ()=>{\n        setLoadState(\"loaded\");\n    };\n    const handleVideoError = ()=>{\n        // Si hay un error al cargar el video, reintentar\n        if (retryCount < 10) {\n            setTimeout(()=>{\n                setRetryCount((prev)=>prev + 1);\n            }, 2000);\n        } else {\n            setLoadState(\"error\");\n        }\n    };\n    // Función para reintentar cargar el video\n    const handleRetry = ()=>{\n        setRetryCount(0);\n        setLoadState(\"initial\");\n    };\n    const fileType = getFileType();\n    const source = getAttachmentSource();\n    // Render según el tipo de archivo\n    switch(fileType){\n        case \"image\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview image-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: source,\n                        alt: attachment.filename || \"Image\",\n                        className: \"attachment-image\",\n                        onLoad: ()=>setLoadState(\"loaded\"),\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 167,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar la imagen\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 176,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 177,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 175,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 186,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 181,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 193,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 188,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 180,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: source,\n                                    alt: attachment.filename || \"Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 199,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 200,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 198,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 197,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 166,\n                columnNumber: 9\n            }, undefined);\n        case \"video\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview video-preview\",\n                children: [\n                    loadState === \"initial\" || loadState === \"loading\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-placeholder\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 212,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-indicator\",\n                                children: [\n                                    loadState === \"initial\" ? \"Preparando video...\" : \"Cargando video...\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-spinner\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 215,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-progress\",\n                                        children: [\n                                            Math.min(retryCount * 10, 90),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 216,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 213,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 211,\n                        columnNumber: 13\n                    }, undefined) : loadState === \"error\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 221,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"error-message\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: \"Error al cargar el video\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 223,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleRetry,\n                                        className: \"retry-button\",\n                                        children: \"Reintentar\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 224,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 222,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 220,\n                        columnNumber: 13\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                        ref: videoRef,\n                        src: source,\n                        controls: true,\n                        className: \"attachment-video loaded\",\n                        onLoadedData: handleLoadedData,\n                        onError: handleVideoError,\n                        poster: getThumbnailSource(),\n                        preload: \"metadata\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 228,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"⬇️\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 245,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 240,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 252,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 247,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 239,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && loadState === \"loaded\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: source,\n                                    controls: true,\n                                    autoPlay: true,\n                                    className: \"fullscreen-video\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 258,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 264,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 257,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 256,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 209,\n                columnNumber: 9\n            }, undefined);\n        case \"audio\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview audio-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                        src: source,\n                        controls: true,\n                        className: \"attachment-audio\",\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 274,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar el audio\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 282,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 283,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 281,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                            disabled: loadState !== \"loaded\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 292,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 287,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 286,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 273,\n                columnNumber: 9\n            }, undefined);\n        case \"document\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview document-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDCC4\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 302,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 303,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 301,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 307,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 306,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 305,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 300,\n                columnNumber: 9\n            }, undefined);\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDD17\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 317,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 318,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 316,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"⬇️\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 322,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 321,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 320,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 315,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n/**\n * Utilidad para reconstruir archivos fragmentados\n */ const reconstructFileFromChunks = (chunks)=>{\n    // Ordenar los chunks por índice (por si acaso)\n    const sortedChunks = [\n        ...chunks\n    ].sort((a, b)=>(a.chunkIndex || 0) - (b.chunkIndex || 0));\n    // Concatenar todos los datos base64\n    const fullBase64 = sortedChunks.map((chunk)=>chunk.data).join(\"\");\n    return fullBase64;\n};\n/**\n * Componente para mostrar archivos reconstruidos de fragmentos\n */ const ReconstructedAttachment = ({ originalFile, chunks })=>{\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fullscreenView, setFullscreenView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const toggleExpand = ()=>{\n        setExpanded(!expanded);\n    };\n    const toggleFullscreen = (e)=>{\n        e.stopPropagation();\n        setFullscreenView(!fullscreenView);\n    };\n    const closeFullscreen = ()=>{\n        setFullscreenView(false);\n    };\n    const fileType = chunks[0]?.fileType;\n    const contentType = chunks[0]?.contentType;\n    const fullData = reconstructFileFromChunks(chunks);\n    const base64Src = `data:${contentType};base64,${fullData}`;\n    const totalSize = chunks.reduce((total, chunk)=>total + (chunk.size || 0), 0);\n    const formatFileSize = (bytes)=>{\n        if (!bytes) return \"Unknown size\";\n        if (bytes < 1024) return `${bytes} B`;\n        if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n        return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    };\n    switch(fileType){\n        case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 relative\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `bg-gray-100 rounded-lg overflow-hidden ${expanded ? \"w-full max-w-2xl\" : \"w-72\"}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                            src: base64Src,\n                                            controls: true,\n                                            className: \"w-full h-full max-h-96 object-contain\",\n                                            controlsList: \"nodownload\",\n                                            onError: (e)=>console.error(\"Video error:\", e),\n                                            children: \"Your browser does not support the video tag.\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 388,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute top-2 right-2 flex space-x-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: toggleExpand,\n                                                    title: \"Expand/Collapse\",\n                                                    children: expanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 405,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 404,\n                                                        columnNumber: 23\n                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 409,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 408,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 398,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                    href: base64Src,\n                                                    download: originalFile,\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: (e)=>e.stopPropagation(),\n                                                    title: \"Download video\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 421,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 420,\n                                                        columnNumber: 21\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 413,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 397,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 387,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"px-3 py-2 text-sm text-gray-700\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"font-medium truncate max-w-xs\",\n                                            children: originalFile\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 427,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: formatFileSize(totalSize)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 428,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 426,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 386,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 385,\n                        columnNumber: 11\n                    }, undefined),\n                    fullscreenView && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center\",\n                        onClick: closeFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative w-full max-w-6xl max-h-screen p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: base64Src,\n                                    controls: true,\n                                    className: \"w-full h-full max-h-[90vh] object-contain\",\n                                    children: \"Your browser does not support the video tag.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 436,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"absolute top-4 right-4 bg-white text-black p-2 rounded-full\",\n                                    onClick: closeFullscreen,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-6 w-6\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 448,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 447,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 443,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 435,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 434,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true);\n        // Para otros tipos de archivos, implementar manejo similar...\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 bg-gray-100 rounded-lg p-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-shrink-0 mr-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-8 w-8 text-gray-400\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 464,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 463,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 462,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-grow\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm font-medium\",\n                                    children: originalFile\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 468,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        formatFileSize(totalSize),\n                                        \" • Reconstruido de \",\n                                        chunks.length,\n                                        \" fragmentos\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 469,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 467,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                            href: base64Src,\n                            download: originalFile,\n                            className: \"ml-3 bg-blue-100 text-blue-800 p-1.5 rounded-full hover:bg-blue-200 transition-all\",\n                            title: \"Download file\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 480,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 479,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 473,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 461,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 460,\n                columnNumber: 9\n            }, undefined);\n    }\n};\nfunction MessageList() {\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { messages, isLoading, typingUsers, activeChat } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [fileChunks, setFileChunks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    // Función para procesar los mensajes y detectar fragmentos de archivos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Objeto para rastrear los chunks de archivos\n        const chunks = {};\n        // Procesar cada mensaje para detectar chunks\n        messages.forEach((message)=>{\n            if (!message.attachments) return;\n            message.attachments.forEach((attachment)=>{\n                // Si es un chunk, lo agregamos a nuestro mapa\n                if (attachment.isChunk && attachment.originalFilename && attachment.totalChunks && attachment.chunkIndex !== undefined) {\n                    const key = attachment.originalFilename;\n                    if (!chunks[key]) {\n                        chunks[key] = {\n                            chunks: Array(attachment.totalChunks).fill(null).map(()=>({})),\n                            complete: false,\n                            contentType: attachment.contentType,\n                            fileType: attachment.fileType\n                        };\n                    }\n                    // Almacenar el chunk en su posición correcta\n                    chunks[key].chunks[attachment.chunkIndex] = attachment;\n                    // Verificar si tenemos todos los chunks completamente definidos\n                    chunks[key].complete = chunks[key].chunks.every((chunk)=>chunk && chunk.data && chunk.filename);\n                }\n            });\n        });\n        setFileChunks(chunks);\n    }, [\n        messages\n    ]);\n    // Scroll to bottom when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messagesEndRef.current) {\n            messagesEndRef.current.scrollIntoView({\n                behavior: \"smooth\"\n            });\n        }\n    }, [\n        messages\n    ]);\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 560,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-2 text-gray-500\",\n                    children: \"Loading messages...\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 561,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 559,\n            columnNumber: 7\n        }, this);\n    }\n    if (messages.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-gray-100 p-3 rounded-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-10 w-10 text-gray-400\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 1.5,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 571,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 570,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 569,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-gray-500 text-center\",\n                    children: \"No messages yet. Send a message to start the conversation!\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 574,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 568,\n            columnNumber: 7\n        }, this);\n    }\n    // Group messages by date\n    const messagesByDate = messages.reduce((groups, message)=>{\n        const date = new Date(message.createdAt).toLocaleDateString();\n        if (!groups[date]) {\n            groups[date] = [];\n        }\n        groups[date].push(message);\n        return groups;\n    }, {});\n    // Get array of typing users (excluding current user)\n    const typingUsersList = Object.entries(typingUsers).filter(([userId, isTyping])=>isTyping && userId !== user?.id).map(([userId, value])=>typeof value === \"string\" ? value : userId);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full overflow-y-auto p-4 space-y-4\",\n        children: [\n            Object.entries(messagesByDate).map(([date, dateMessages])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gray-100 px-3 py-1 rounded-full\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: date_fns_format__WEBPACK_IMPORTED_MODULE_5___default()(new Date(date), \"MMMM d, yyyy\")\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 602,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 601,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 600,\n                            columnNumber: 11\n                        }, this),\n                        dateMessages.map((message)=>{\n                            const isOwnMessage = message.sender._id === user?.id;\n                            const senderId = message.sender._id || \"\";\n                            const hasAttachments = message.attachments && message.attachments.length > 0;\n                            const nonChunkAttachments = message.attachments?.filter((att)=>!att.isChunk) || [];\n                            // Filtrar mensajes que son solo chunks para evitar duplicados en la UI\n                            if ((!message.attachments || message.attachments.length === 0 || message.attachments.length > 0 && message.attachments.every((att)=>att.isChunk)) && (!message.content || message.content.includes(\"Parte \") || message.content.includes(\"Enviando \") || message.content === \"Enviando archivos grandes...\")) {\n                                return null;\n                            }\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"}`,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `flex max-w-xs md:max-w-md lg:max-w-lg ${isOwnMessage ? \"flex-row-reverse\" : \"\"}`,\n                                    children: [\n                                        !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-shrink-0 mr-3\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden\",\n                                                children: message.sender.avatar && isValidImageSrc(message.sender.avatar) && !failedImages[senderId] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                    src: message.sender.avatar,\n                                                    alt: message.sender.name,\n                                                    width: 32,\n                                                    height: 32,\n                                                    className: \"h-full w-full object-cover\",\n                                                    onError: ()=>handleImageError(senderId)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 636,\n                                                    columnNumber: 27\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-sm font-medium text-gray-700\",\n                                                    children: getInitials(message.sender.name)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 645,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                lineNumber: 634,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 633,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `\n                    ${isOwnMessage ? \"bg-primary-500 text-white rounded-tl-lg rounded-tr-none\" : \"bg-gray-200 text-gray-800 rounded-tr-lg rounded-tl-none\"}\n                    rounded-bl-lg rounded-br-lg p-3 shadow-sm\n                  `,\n                                            children: [\n                                                !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"font-medium text-xs mb-1\",\n                                                    children: message.sender.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 661,\n                                                    columnNumber: 23\n                                                }, this),\n                                                message.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 666,\n                                                    columnNumber: 23\n                                                }, this),\n                                                hasAttachments && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: `${message.content ? \"mt-2\" : \"\"}`,\n                                                    children: nonChunkAttachments?.map((attachment, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AttachmentPreview, {\n                                                            attachment: attachment\n                                                        }, `${message._id}-attachment-${index}`, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 675,\n                                                            columnNumber: 27\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 673,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs mt-1 opacity-80\",\n                                                    children: date_fns_format__WEBPACK_IMPORTED_MODULE_5___default()(new Date(message.createdAt), \"h:mm a\")\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 683,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 653,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 631,\n                                    columnNumber: 17\n                                }, this)\n                            }, message._id, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 627,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    ]\n                }, date, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 599,\n                    columnNumber: 9\n                }, this)),\n            Object.entries(fileChunks).filter(([_, info])=>info.complete).map(([filename, info])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 border border-gray-200 p-3 rounded-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-medium mb-2 text-gray-700\",\n                            children: \"Archivo reconstruido:\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 699,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReconstructedAttachment, {\n                            originalFile: filename,\n                            chunks: info.chunks\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 702,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, `reconstructed-${filename}`, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 698,\n                    columnNumber: 11\n                }, this)),\n            typingUsersList.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center space-x-2 text-gray-500 text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex space-x-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 714,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"200ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 715,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"400ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 716,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 713,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: typingUsersList.length === 1 ? `${typingUsersList[0]} is typing...` : `${typingUsersList.length} people are typing...`\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 718,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 712,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesEndRef\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 727,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n        lineNumber: 597,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qjs0QkFDQ0MsY0FBYzVDOzRCQUNka0MsUUFBUWdHLEtBQUtoRyxNQUFNOzs7Ozs7O21CQU5iLENBQUMsY0FBYyxFQUFFbEMsU0FBUyxDQUFDOzs7OztZQWF4QzRHLGdCQUFnQjNKLE1BQU0sR0FBRyxtQkFDeEIsOERBQUMyRDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNEO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7Z0NBQUlDLFdBQVU7Z0NBQWtEc0gsT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFNOzs7Ozs7MENBQ2hHLDhEQUFDeEg7Z0NBQUlDLFdBQVU7Z0NBQWtEc0gsT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFROzs7Ozs7MENBQ2xHLDhEQUFDeEg7Z0NBQUlDLFdBQVU7Z0NBQWtEc0gsT0FBTztvQ0FBRUMsZ0JBQWdCO2dDQUFROzs7Ozs7Ozs7Ozs7a0NBRXBHLDhEQUFDOUc7a0NBQ0VzRixnQkFBZ0IzSixNQUFNLEtBQUssSUFDeEIsQ0FBQyxFQUFFMkosZUFBZSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FDcEMsQ0FBQyxFQUFFQSxnQkFBZ0IzSixNQUFNLENBQUMscUJBQXFCLENBQUM7Ozs7Ozs7Ozs7OzswQkFNMUQsOERBQUMyRDtnQkFBSWMsS0FBS3VEOzs7Ozs7Ozs7Ozs7QUFHaEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29tcG9uZW50cy9jaGF0L01lc3NhZ2VMaXN0LnRzeD81N2Y2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQsIEZpbGVUeXBlLCBGaWxlQXR0YWNobWVudCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgaW5pdGlhbHMgZnJvbSBhIG5hbWVcbiAqIFJldHVybnMgdXAgdG8gMiBpbml0aWFscyAoZmlyc3QgYW5kIGxhc3QgbmFtZSBvciBmaXJzdCB0d28gd29yZHMpXG4gKi9cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICBcbiAgY29uc3QgcGFydHMgPSBuYW1lLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAvLyBHZXQgZmlyc3QgbGV0dGVyIG9mIGZpcnN0IGFuZCBsYXN0IG5hbWVcbiAgICByZXR1cm4gYCR7cGFydHNbMF0uY2hhckF0KDApfSR7cGFydHNbMV0uY2hhckF0KDApfWAudG9VcHBlckNhc2UoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgZmlyc3QgdHdvIGxldHRlcnMgb2Ygc2luZ2xlIG5hbWVcbiAgICByZXR1cm4gbmFtZS5zdWJzdHJpbmcoMCwgTWF0aC5taW4oMiwgbmFtZS5sZW5ndGgpKS50b1VwcGVyQ2FzZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiBhIHN0cmluZyBpcyBhIHZhbGlkIGltYWdlIFVSTCBvciBiYXNlNjQgaW1hZ2UgZGF0YVxuICovXG5jb25zdCBpc1ZhbGlkSW1hZ2VTcmMgPSAoc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKCFzcmMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGlmIGl0J3MgYSB2YWxpZCBVUkwgb3IgYmFzZTY0IGRhdGFcbiAgcmV0dXJuIChcbiAgICBzcmMuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwczovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpXG4gICk7XG59O1xuXG4vKipcbiAqIFJlbmRlcnMgYSBmaWxlIGF0dGFjaG1lbnQgYmFzZWQgb24gaXRzIHR5cGVcbiAqL1xuY29uc3QgQXR0YWNobWVudFByZXZpZXcgPSAoeyBhdHRhY2htZW50IH06IHsgYXR0YWNobWVudDogRmlsZUF0dGFjaG1lbnQgfSkgPT4ge1xuICBjb25zdCBbbG9hZFN0YXRlLCBzZXRMb2FkU3RhdGVdID0gdXNlU3RhdGU8J2luaXRpYWwnIHwgJ2xvYWRpbmcnIHwgJ2xvYWRlZCcgfCAnZXJyb3InPignaW5pdGlhbCcpO1xuICBjb25zdCBbcHJldmlld0F2YWlsYWJsZSwgc2V0UHJldmlld0F2YWlsYWJsZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IGFwaUJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuICBjb25zdCB2aWRlb1JlZiA9IHVzZVJlZjxIVE1MVmlkZW9FbGVtZW50PihudWxsKTtcbiAgY29uc3QgW3Nob3dGdWxsc2NyZWVuLCBzZXRTaG93RnVsbHNjcmVlbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZXRyeUNvdW50LCBzZXRSZXRyeUNvdW50XSA9IHVzZVN0YXRlKDApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2kgZXMgdW4gdmlkZW8gZ3JhbmRlLCB2ZXJpZmljYXIgc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgIGlmIChhdHRhY2htZW50LmlzTGFyZ2VGaWxlICYmIGF0dGFjaG1lbnQuZmlsZUlkICYmIGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHtcbiAgICAgIGNoZWNrVmlkZW9BdmFpbGFiaWxpdHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG9hZFN0YXRlKCdsb2FkZWQnKTtcbiAgICB9XG4gIH0sIFthdHRhY2htZW50LmZpbGVJZCwgcmV0cnlDb3VudF0pO1xuXG4gIC8vIFZlcmlmaWNhciBzaSBlbCB2aWRlbyBlc3TDoSBkaXNwb25pYmxlXG4gIGNvbnN0IGNoZWNrVmlkZW9BdmFpbGFiaWxpdHkgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldExvYWRTdGF0ZSgnbG9hZGluZycpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9jaGF0cy9maWxlLyR7YXR0YWNobWVudC5maWxlSWR9P3ByZXZpZXc9dHJ1ZWApO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGlmIChyZXRyeUNvdW50IDwgMTApIHtcbiAgICAgICAgICAvLyBSZWludGVudGFtb3MgZGVzcHXDqXMgZGUgdW4gdGllbXBvXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRSZXRyeUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgIH0sIDIwMDApOyAvLyBSZWludGVudG8gY2FkYSAyIHNlZ3VuZG9zXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAobWV0YWRhdGEuY29tcGxldGUpIHtcbiAgICAgICAgc2V0TG9hZFN0YXRlKCdsb2FkZWQnKTtcbiAgICAgICAgc2V0UHJldmlld0F2YWlsYWJsZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFyY2hpdm8gdG9kYXbDrWEgbm8gZXN0w6EgY29tcGxldG8sIHJlaW50ZW50YW1vc1xuICAgICAgICBpZiAocmV0cnlDb3VudCA8IDEwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRSZXRyeUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvYWRTdGF0ZSgnZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdmVyaWZpY2FuZG8gZGlzcG9uaWJpbGlkYWQgZGVsIHZpZGVvOlwiLCBlcnJvcik7XG4gICAgICBzZXRMb2FkU3RhdGUoJ2Vycm9yJyk7XG4gICAgfVxuICB9O1xuXG4gIC8vIE9idGVuZXIgbGEgZnVlbnRlIGRlbCBhcmNoaXZvXG4gIGNvbnN0IGdldEF0dGFjaG1lbnRTb3VyY2UgPSAoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgJiYgYXR0YWNobWVudC5maWxlSWQpIHtcbiAgICAgIHJldHVybiBgJHthcGlCYXNlVXJsfS9jaGF0cy9maWxlLyR7YXR0YWNobWVudC5maWxlSWR9YDtcbiAgICB9XG4gICAgcmV0dXJuIGBkYXRhOiR7YXR0YWNobWVudC5jb250ZW50VHlwZX07YmFzZTY0LCR7YXR0YWNobWVudC5kYXRhfWA7XG4gIH07XG5cbiAgLy8gT2J0ZW5lciBsYSBtaW5pYXR1cmEgcGFyYSB2aWRlb3NcbiAgY29uc3QgZ2V0VGh1bWJuYWlsU291cmNlID0gKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50LmlzTGFyZ2VGaWxlICYmIGF0dGFjaG1lbnQuZmlsZUlkKSB7XG4gICAgICByZXR1cm4gYCR7YXBpQmFzZVVybH0vY2hhdHMvZmlsZS8ke2F0dGFjaG1lbnQuZmlsZUlkfS90aHVtYm5haWxgO1xuICAgIH1cbiAgICByZXR1cm4gJy92aWRlby1wbGFjZWhvbGRlci5wbmcnO1xuICB9O1xuXG4gIC8vIERlc2NhcmdhciBlbCBhcmNoaXZvXG4gIGNvbnN0IGhhbmRsZURvd25sb2FkID0gKCkgPT4ge1xuICAgIGlmIChsb2FkU3RhdGUgIT09ICdsb2FkZWQnKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmhyZWYgPSBnZXRBdHRhY2htZW50U291cmNlKCk7XG4gICAgYS5kb3dubG9hZCA9IGF0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ2Rvd25sb2FkJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgIGEuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xuICB9O1xuXG4gIC8vIERldGVybWluYXIgZWwgdGlwbyBkZSBhcmNoaXZvXG4gIGNvbnN0IGdldEZpbGVUeXBlID0gKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gJ2ltYWdlJztcbiAgICBpZiAoYXR0YWNobWVudC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkgcmV0dXJuICd2aWRlbyc7XG4gICAgaWYgKGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgnYXVkaW8vJykpIHJldHVybiAnYXVkaW8nO1xuICAgIHJldHVybiAnZG9jdW1lbnQnO1xuICB9O1xuXG4gIC8vIE1hbmVqYXIgZnVsbHNjcmVlbiBwYXJhIHZpZGVvc1xuICBjb25zdCB0b2dnbGVGdWxsc2NyZWVuID0gKCkgPT4ge1xuICAgIGlmIChsb2FkU3RhdGUgIT09ICdsb2FkZWQnKSByZXR1cm47XG4gICAgc2V0U2hvd0Z1bGxzY3JlZW4oIXNob3dGdWxsc2NyZWVuKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVMb2FkZWREYXRhID0gKCkgPT4ge1xuICAgIHNldExvYWRTdGF0ZSgnbG9hZGVkJyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlkZW9FcnJvciA9ICgpID0+IHtcbiAgICAvLyBTaSBoYXkgdW4gZXJyb3IgYWwgY2FyZ2FyIGVsIHZpZGVvLCByZWludGVudGFyXG4gICAgaWYgKHJldHJ5Q291bnQgPCAxMCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldFJldHJ5Q291bnQocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICB9LCAyMDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIHJlaW50ZW50YXIgY2FyZ2FyIGVsIHZpZGVvXG4gIGNvbnN0IGhhbmRsZVJldHJ5ID0gKCkgPT4ge1xuICAgIHNldFJldHJ5Q291bnQoMCk7XG4gICAgc2V0TG9hZFN0YXRlKCdpbml0aWFsJyk7XG4gIH07XG5cbiAgY29uc3QgZmlsZVR5cGUgPSBnZXRGaWxlVHlwZSgpO1xuICBjb25zdCBzb3VyY2UgPSBnZXRBdHRhY2htZW50U291cmNlKCk7XG4gIFxuICAvLyBSZW5kZXIgc2Vnw7puIGVsIHRpcG8gZGUgYXJjaGl2b1xuICBzd2l0Y2ggKGZpbGVUeXBlKSB7XG4gICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgaW1hZ2UtcHJldmlld1wiPlxuICAgICAgICAgIDxpbWcgXG4gICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICBhbHQ9e2F0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ0ltYWdlJ30gXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhdHRhY2htZW50LWltYWdlXCJcbiAgICAgICAgICAgIG9uTG9hZD17KCkgPT4gc2V0TG9hZFN0YXRlKCdsb2FkZWQnKX1cbiAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHNldExvYWRTdGF0ZSgnZXJyb3InKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdlcnJvcicgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWVycm9yXCI+XG4gICAgICAgICAgICAgIDxwPkVycm9yIGFsIGNhcmdhciBsYSBpbWFnZW48L3A+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9PlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7wn5SNPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3Nob3dGdWxsc2NyZWVuICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1vdmVybGF5XCIgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1jb250ZW50XCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17c291cmNlfSBhbHQ9e2F0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ0ltYWdlJ30gLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59IGNsYXNzTmFtZT1cImNsb3NlLWJ1dHRvblwiPsOXPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IHZpZGVvLXByZXZpZXdcIj5cbiAgICAgICAgICB7bG9hZFN0YXRlID09PSAnaW5pdGlhbCcgfHwgbG9hZFN0YXRlID09PSAnbG9hZGluZycgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLXBsYWNlaG9sZGVyXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtnZXRUaHVtYm5haWxTb3VyY2UoKX0gYWx0PVwiVmlkZW8gdGh1bWJuYWlsXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdpbml0aWFsJyA/ICdQcmVwYXJhbmRvIHZpZGVvLi4uJyA6ICdDYXJnYW5kbyB2aWRlby4uLid9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctcHJvZ3Jlc3NcIj57TWF0aC5taW4ocmV0cnlDb3VudCAqIDEwLCA5MCl9JTwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBsb2FkU3RhdGUgPT09ICdlcnJvcicgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLWVycm9yXCI+XG4gICAgICAgICAgICAgIDxpbWcgc3JjPXtnZXRUaHVtYm5haWxTb3VyY2UoKX0gYWx0PVwiVmlkZW8gdGh1bWJuYWlsXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgPHA+RXJyb3IgYWwgY2FyZ2FyIGVsIHZpZGVvPC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9IGNsYXNzTmFtZT1cInJldHJ5LWJ1dHRvblwiPlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPHZpZGVvIFxuICAgICAgICAgICAgICByZWY9e3ZpZGVvUmVmfVxuICAgICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhdHRhY2htZW50LXZpZGVvIGxvYWRlZFwiXG4gICAgICAgICAgICAgIG9uTG9hZGVkRGF0YT17aGFuZGxlTG9hZGVkRGF0YX1cbiAgICAgICAgICAgICAgb25FcnJvcj17aGFuZGxlVmlkZW9FcnJvcn1cbiAgICAgICAgICAgICAgcG9zdGVyPXtnZXRUaHVtYm5haWxTb3VyY2UoKX1cbiAgICAgICAgICAgICAgcHJlbG9hZD1cIm1ldGFkYXRhXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGF0dGFjaG1lbnQtYnV0dG9uICR7bG9hZFN0YXRlICE9PSAnbG9hZGVkJyA/ICdkaXNhYmxlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZFN0YXRlICE9PSAnbG9hZGVkJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHNwYW4+8J+UjTwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtzaG93RnVsbHNjcmVlbiAmJiBsb2FkU3RhdGUgPT09ICdsb2FkZWQnICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1vdmVybGF5XCIgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbHNjcmVlbi1jb250ZW50XCIgb25DbGljaz17ZSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e3NvdXJjZX0gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGF1dG9QbGF5XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLXZpZGVvXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0gY2xhc3NOYW1lPVwiY2xvc2UtYnV0dG9uXCI+w5c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgXG4gICAgY2FzZSAnYXVkaW8nOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgYXVkaW8tcHJldmlld1wiPlxuICAgICAgICAgIDxhdWRpbyBcbiAgICAgICAgICAgIHNyYz17c291cmNlfSBcbiAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1hdWRpb1wiXG4gICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBzZXRMb2FkU3RhdGUoJ2Vycm9yJyl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9hZFN0YXRlID09PSAnZXJyb3InICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1lcnJvclwiPlxuICAgICAgICAgICAgICA8cD5FcnJvciBhbCBjYXJnYXIgZWwgYXVkaW88L3A+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmV0cnl9PlJlaW50ZW50YXI8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgJ2RvY3VtZW50JzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1wcmV2aWV3IGRvY3VtZW50LXByZXZpZXdcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvY3VtZW50LWljb25cIj5cbiAgICAgICAgICAgIDxzcGFuPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb2N1bWVudC1uYW1lXCI+e2F0dGFjaG1lbnQuZmlsZW5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gY2xhc3NOYW1lPVwiYXR0YWNobWVudC1idXR0b25cIj5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXdcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvY3VtZW50LWljb25cIj5cbiAgICAgICAgICAgIDxzcGFuPvCflJc8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkb2N1bWVudC1uYW1lXCI+e2F0dGFjaG1lbnQuZmlsZW5hbWV9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH0gY2xhc3NOYW1lPVwiYXR0YWNobWVudC1idXR0b25cIj5cbiAgICAgICAgICAgICAgPHNwYW4+4qyH77iPPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVdGlsaWRhZCBwYXJhIHJlY29uc3RydWlyIGFyY2hpdm9zIGZyYWdtZW50YWRvc1xuICovXG5jb25zdCByZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzID0gKGNodW5rczogRmlsZUF0dGFjaG1lbnRbXSk6IHN0cmluZyA9PiB7XG4gIC8vIE9yZGVuYXIgbG9zIGNodW5rcyBwb3Igw61uZGljZSAocG9yIHNpIGFjYXNvKVxuICBjb25zdCBzb3J0ZWRDaHVua3MgPSBbLi4uY2h1bmtzXS5zb3J0KChhLCBiKSA9PiBcbiAgICAoYS5jaHVua0luZGV4IHx8IDApIC0gKGIuY2h1bmtJbmRleCB8fCAwKSk7XG4gIFxuICAvLyBDb25jYXRlbmFyIHRvZG9zIGxvcyBkYXRvcyBiYXNlNjRcbiAgY29uc3QgZnVsbEJhc2U2NCA9IHNvcnRlZENodW5rcy5tYXAoY2h1bmsgPT4gY2h1bmsuZGF0YSkuam9pbignJyk7XG4gIFxuICByZXR1cm4gZnVsbEJhc2U2NDtcbn07XG5cbi8qKlxuICogQ29tcG9uZW50ZSBwYXJhIG1vc3RyYXIgYXJjaGl2b3MgcmVjb25zdHJ1aWRvcyBkZSBmcmFnbWVudG9zXG4gKi9cbmNvbnN0IFJlY29uc3RydWN0ZWRBdHRhY2htZW50ID0gKHsgb3JpZ2luYWxGaWxlLCBjaHVua3MgfTogeyBcbiAgb3JpZ2luYWxGaWxlOiBzdHJpbmcsIFxuICBjaHVua3M6IEZpbGVBdHRhY2htZW50W10gXG59KSA9PiB7XG4gIGNvbnN0IFtleHBhbmRlZCwgc2V0RXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZnVsbHNjcmVlblZpZXcsIHNldEZ1bGxzY3JlZW5WaWV3XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIGNvbnN0IHRvZ2dsZUV4cGFuZCA9ICgpID0+IHtcbiAgICBzZXRFeHBhbmRlZCghZXhwYW5kZWQpO1xuICB9O1xuICBcbiAgY29uc3QgdG9nZ2xlRnVsbHNjcmVlbiA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRGdWxsc2NyZWVuVmlldyghZnVsbHNjcmVlblZpZXcpO1xuICB9O1xuICBcbiAgY29uc3QgY2xvc2VGdWxsc2NyZWVuID0gKCkgPT4ge1xuICAgIHNldEZ1bGxzY3JlZW5WaWV3KGZhbHNlKTtcbiAgfTtcbiAgXG4gIGNvbnN0IGZpbGVUeXBlID0gY2h1bmtzWzBdPy5maWxlVHlwZTtcbiAgY29uc3QgY29udGVudFR5cGUgPSBjaHVua3NbMF0/LmNvbnRlbnRUeXBlO1xuICBjb25zdCBmdWxsRGF0YSA9IHJlY29uc3RydWN0RmlsZUZyb21DaHVua3MoY2h1bmtzKTtcbiAgY29uc3QgYmFzZTY0U3JjID0gYGRhdGE6JHtjb250ZW50VHlwZX07YmFzZTY0LCR7ZnVsbERhdGF9YDtcbiAgXG4gIGNvbnN0IHRvdGFsU2l6ZSA9IGNodW5rcy5yZWR1Y2UoKHRvdGFsLCBjaHVuaykgPT4gdG90YWwgKyAoY2h1bmsuc2l6ZSB8fCAwKSwgMCk7XG4gIFxuICBjb25zdCBmb3JtYXRGaWxlU2l6ZSA9IChieXRlcz86IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgaWYgKCFieXRlcykgcmV0dXJuICdVbmtub3duIHNpemUnO1xuICAgIGlmIChieXRlcyA8IDEwMjQpIHJldHVybiBgJHtieXRlc30gQmA7XG4gICAgaWYgKGJ5dGVzIDwgMTAyNCAqIDEwMjQpIHJldHVybiBgJHsoYnl0ZXMgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQmA7XG4gICAgcmV0dXJuIGAkeyhieXRlcyAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMSl9IE1CYDtcbiAgfTtcbiAgXG4gIHN3aXRjaCAoZmlsZVR5cGUpIHtcbiAgICBjYXNlIEZpbGVUeXBlLlZJREVPOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gJHtleHBhbmRlZCA/ICd3LWZ1bGwgbWF4LXctMnhsJyA6ICd3LTcyJ31gfT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgIDx2aWRlbyBcbiAgICAgICAgICAgICAgICAgIHNyYz17YmFzZTY0U3JjfSBcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBtYXgtaC05NiBvYmplY3QtY29udGFpblwiXG4gICAgICAgICAgICAgICAgICBjb250cm9sc0xpc3Q9XCJub2Rvd25sb2FkXCJcbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiBjb25zb2xlLmVycm9yKFwiVmlkZW8gZXJyb3I6XCIsIGUpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSB2aWRlbyB0YWcuXG4gICAgICAgICAgICAgICAgPC92aWRlbz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSBwLTEuNSByb3VuZGVkLWZ1bGwgaG92ZXI6Ymctb3BhY2l0eS03MCB0cmFuc2l0aW9uLWFsbFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUV4cGFuZH1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJFeHBhbmQvQ29sbGFwc2VcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7ZXhwYW5kZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTUgMTBhMSAxIDAgMDExLTFoOGExIDEgMCAxMTAgMkg2YTEgMSAwIDAxLTEtMXpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMCA1YTEgMSAwIDAxMSAxdjNoM2ExIDEgMCAxMTAgMmgtM3YzYTEgMSAwIDExLTIgMHYtM0g2YTEgMSAwIDExMC0yaDNWNmExIDEgMCAwMTEtMXpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8YSBcbiAgICAgICAgICAgICAgICAgICAgaHJlZj17YmFzZTY0U3JjfVxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZD17b3JpZ2luYWxGaWxlfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgcC0xLjUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLW9wYWNpdHktNzAgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJEb3dubG9hZCB2aWRlb1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMyAxN2ExIDEgMCAwMTEtMWgxMmExIDEgMCAxMTAgMkg0YTEgMSAwIDAxLTEtMXptMy4yOTMtNy43MDdhMSAxIDAgMDExLjQxNCAwTDkgMTAuNTg2VjNhMSAxIDAgMTEyIDB2Ny41ODZsMS4yOTMtMS4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNGwtMyAzYTEgMSAwIDAxLTEuNDE0IDBsLTMtM2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiB0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRydW5jYXRlIG1heC13LXhzXCI+e29yaWdpbmFsRmlsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPntmb3JtYXRGaWxlU2l6ZSh0b3RhbFNpemUpfTwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHtmdWxsc2NyZWVuVmlldyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS05MCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgb25DbGljaz17Y2xvc2VGdWxsc2NyZWVufT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctNnhsIG1heC1oLXNjcmVlbiBwLTRcIj5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e2Jhc2U2NFNyY30gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgbWF4LWgtWzkwdmhdIG9iamVjdC1jb250YWluXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLlxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IHJpZ2h0LTQgYmctd2hpdGUgdGV4dC1ibGFjayBwLTIgcm91bmRlZC1mdWxsXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlRnVsbHNjcmVlbn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTYgdy02XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICAgIFxuICAgIC8vIFBhcmEgb3Ryb3MgdGlwb3MgZGUgYXJjaGl2b3MsIGltcGxlbWVudGFyIG1hbmVqbyBzaW1pbGFyLi4uXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBiZy1ncmF5LTEwMCByb3VuZGVkLWxnIHAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBtci0zXCI+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtOCB3LTggdGV4dC1ncmF5LTQwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk03IDIxaDEwYTIgMiAwIDAwMi0yVjkuNDE0YTEgMSAwIDAwLS4yOTMtLjcwN2wtNS40MTQtNS40MTRBMSAxIDAgMDAxMi41ODYgM0g3YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMnpcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e29yaWdpbmFsRmlsZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0RmlsZVNpemUodG90YWxTaXplKX0g4oCiIFJlY29uc3RydWlkbyBkZSB7Y2h1bmtzLmxlbmd0aH0gZnJhZ21lbnRvc1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGEgXG4gICAgICAgICAgICAgIGhyZWY9e2Jhc2U2NFNyY31cbiAgICAgICAgICAgICAgZG93bmxvYWQ9e29yaWdpbmFsRmlsZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibWwtMyBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHAtMS41IHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ibHVlLTIwMCB0cmFuc2l0aW9uLWFsbFwiXG4gICAgICAgICAgICAgIHRpdGxlPVwiRG93bmxvYWQgZmlsZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMyAxN2ExIDEgMCAwMTEtMWgxMmExIDEgMCAxMTAgMkg0YTEgMSAwIDAxLTEtMXptMy4yOTMtNy43MDdhMSAxIDAgMDExLjQxNCAwTDkgMTAuNTg2VjNhMSAxIDAgMTEyIDB2Ny41ODZsMS4yOTMtMS4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNGwtMyAzYTEgMSAwIDAxLTEuNDE0IDBsLTMtM2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgfVxufTtcblxuaW50ZXJmYWNlIEZpbGVDaHVua01hcCB7XG4gIFtmaWxlbmFtZTogc3RyaW5nXToge1xuICAgIGNodW5rczogRmlsZUF0dGFjaG1lbnRbXTtcbiAgICBjb21wbGV0ZTogYm9vbGVhbjtcbiAgICBjb250ZW50VHlwZTogc3RyaW5nO1xuICAgIGZpbGVUeXBlOiBGaWxlVHlwZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVzc2FnZUxpc3QoKSB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7IG1lc3NhZ2VzLCBpc0xvYWRpbmcsIHR5cGluZ1VzZXJzLCBhY3RpdmVDaGF0IH0gPSB1c2VDaGF0KCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2ZhaWxlZEltYWdlcywgc2V0RmFpbGVkSW1hZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+Pih7fSk7XG4gIGNvbnN0IFtmaWxlQ2h1bmtzLCBzZXRGaWxlQ2h1bmtzXSA9IHVzZVN0YXRlPEZpbGVDaHVua01hcD4oe30pO1xuXG4gIGNvbnN0IGhhbmRsZUltYWdlRXJyb3IgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEZhaWxlZEltYWdlcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2lkXTogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIHByb2Nlc2FyIGxvcyBtZW5zYWplcyB5IGRldGVjdGFyIGZyYWdtZW50b3MgZGUgYXJjaGl2b3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPYmpldG8gcGFyYSByYXN0cmVhciBsb3MgY2h1bmtzIGRlIGFyY2hpdm9zXG4gICAgY29uc3QgY2h1bmtzOiBGaWxlQ2h1bmtNYXAgPSB7fTtcbiAgICBcbiAgICAvLyBQcm9jZXNhciBjYWRhIG1lbnNhamUgcGFyYSBkZXRlY3RhciBjaHVua3NcbiAgICBtZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKCFtZXNzYWdlLmF0dGFjaG1lbnRzKSByZXR1cm47XG4gICAgICBcbiAgICAgIG1lc3NhZ2UuYXR0YWNobWVudHMuZm9yRWFjaChhdHRhY2htZW50ID0+IHtcbiAgICAgICAgLy8gU2kgZXMgdW4gY2h1bmssIGxvIGFncmVnYW1vcyBhIG51ZXN0cm8gbWFwYVxuICAgICAgICBpZiAoYXR0YWNobWVudC5pc0NodW5rICYmIGF0dGFjaG1lbnQub3JpZ2luYWxGaWxlbmFtZSAmJiBcbiAgICAgICAgICAgIGF0dGFjaG1lbnQudG90YWxDaHVua3MgJiYgYXR0YWNobWVudC5jaHVua0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBrZXkgPSBhdHRhY2htZW50Lm9yaWdpbmFsRmlsZW5hbWU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFjaHVua3Nba2V5XSkge1xuICAgICAgICAgICAgY2h1bmtzW2tleV0gPSB7XG4gICAgICAgICAgICAgIGNodW5rczogQXJyYXkoYXR0YWNobWVudC50b3RhbENodW5rcykuZmlsbChudWxsKS5tYXAoKCkgPT4gKHt9IGFzIEZpbGVBdHRhY2htZW50KSksXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29udGVudFR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgIGZpbGVUeXBlOiBhdHRhY2htZW50LmZpbGVUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbG1hY2VuYXIgZWwgY2h1bmsgZW4gc3UgcG9zaWNpw7NuIGNvcnJlY3RhXG4gICAgICAgICAgY2h1bmtzW2tleV0uY2h1bmtzW2F0dGFjaG1lbnQuY2h1bmtJbmRleF0gPSBhdHRhY2htZW50O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSB0ZW5lbW9zIHRvZG9zIGxvcyBjaHVua3MgY29tcGxldGFtZW50ZSBkZWZpbmlkb3NcbiAgICAgICAgICBjaHVua3Nba2V5XS5jb21wbGV0ZSA9IGNodW5rc1trZXldLmNodW5rcy5ldmVyeShjaHVuayA9PiBcbiAgICAgICAgICAgIGNodW5rICYmIGNodW5rLmRhdGEgJiYgY2h1bmsuZmlsZW5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBzZXRGaWxlQ2h1bmtzKGNodW5rcyk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIFNjcm9sbCB0byBib3R0b20gd2hlbiBtZXNzYWdlcyBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWVzc2FnZXNFbmRSZWYuY3VycmVudCkge1xuICAgICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItcHJpbWFyeS01MDBcIj48L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LWdyYXktNTAwXCI+TG9hZGluZyBtZXNzYWdlcy4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMTAwIHAtMyByb3VuZGVkLWZ1bGxcIj5cbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTEwIHctMTAgdGV4dC1ncmF5LTQwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsxLjV9IGQ9XCJNOCAxMmguMDFNMTIgMTJoLjAxTTE2IDEyaC4wMU0yMSAxMmMwIDQuNDE4LTQuMDMgOC05IDhhOS44NjMgOS44NjMgMCAwMS00LjI1NS0uOTQ5TDMgMjBsMS4zOTUtMy43MkMzLjUxMiAxNS4wNDIgMyAxMy41NzQgMyAxMmMwLTQuNDE4IDQuMDMtOCA5LThzOSAzLjU4MiA5IDh6XCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIE5vIG1lc3NhZ2VzIHlldC4gU2VuZCBhIG1lc3NhZ2UgdG8gc3RhcnQgdGhlIGNvbnZlcnNhdGlvbiFcbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIEdyb3VwIG1lc3NhZ2VzIGJ5IGRhdGVcbiAgY29uc3QgbWVzc2FnZXNCeURhdGUgPSBtZXNzYWdlcy5yZWR1Y2UoKGdyb3VwcywgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgaWYgKCFncm91cHNbZGF0ZV0pIHtcbiAgICAgIGdyb3Vwc1tkYXRlXSA9IFtdO1xuICAgIH1cbiAgICBncm91cHNbZGF0ZV0ucHVzaChtZXNzYWdlKTtcbiAgICByZXR1cm4gZ3JvdXBzO1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB0eXBlb2YgbWVzc2FnZXM+KTtcblxuICAvLyBHZXQgYXJyYXkgb2YgdHlwaW5nIHVzZXJzIChleGNsdWRpbmcgY3VycmVudCB1c2VyKVxuICBjb25zdCB0eXBpbmdVc2Vyc0xpc3QgPSBPYmplY3QuZW50cmllcyh0eXBpbmdVc2VycylcbiAgICAuZmlsdGVyKChbdXNlcklkLCBpc1R5cGluZ10pID0+IGlzVHlwaW5nICYmIHVzZXJJZCAhPT0gdXNlcj8uaWQpXG4gICAgLm1hcCgoW3VzZXJJZCwgdmFsdWVdKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB1c2VySWQpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBvdmVyZmxvdy15LWF1dG8gcC00IHNwYWNlLXktNFwiPlxuICAgICAge09iamVjdC5lbnRyaWVzKG1lc3NhZ2VzQnlEYXRlKS5tYXAoKFtkYXRlLCBkYXRlTWVzc2FnZXNdKSA9PiAoXG4gICAgICAgIDxkaXYga2V5PXtkYXRlfSBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcHgtMyBweS0xIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnTU1NTSBkLCB5eXl5Jyl9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAge2RhdGVNZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzT3duTWVzc2FnZSA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gdXNlcj8uaWQ7XG4gICAgICAgICAgICBjb25zdCBzZW5kZXJJZCA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IGhhc0F0dGFjaG1lbnRzID0gbWVzc2FnZS5hdHRhY2htZW50cyAmJiBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vbkNodW5rQXR0YWNobWVudHMgPSBtZXNzYWdlLmF0dGFjaG1lbnRzPy5maWx0ZXIoYXR0ID0+ICFhdHQuaXNDaHVuaykgfHwgW107XG5cbiAgICAgICAgICAgIC8vIEZpbHRyYXIgbWVuc2FqZXMgcXVlIHNvbiBzb2xvIGNodW5rcyBwYXJhIGV2aXRhciBkdXBsaWNhZG9zIGVuIGxhIFVJXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICghbWVzc2FnZS5hdHRhY2htZW50cyB8fCBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA9PT0gMCB8fCBcbiAgICAgICAgICAgICAgIChtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZS5hdHRhY2htZW50cy5ldmVyeShhdHQgPT4gYXR0LmlzQ2h1bmspKSkgJiYgXG4gICAgICAgICAgICAgICghbWVzc2FnZS5jb250ZW50IHx8IG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIlBhcnRlIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIkVudmlhbmRvIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9PT0gXCJFbnZpYW5kbyBhcmNoaXZvcyBncmFuZGVzLi4uXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuX2lkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHtpc093bk1lc3NhZ2UgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggbWF4LXcteHMgbWQ6bWF4LXctbWQgbGc6bWF4LXctbGcgJHtpc093bk1lc3NhZ2UgPyAnZmxleC1yb3ctcmV2ZXJzZScgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgIHshaXNPd25NZXNzYWdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMzAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyLmF2YXRhciAmJiBpc1ZhbGlkSW1hZ2VTcmMobWVzc2FnZS5zZW5kZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW3NlbmRlcklkXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLnNlbmRlci5hdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXttZXNzYWdlLnNlbmRlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBoYW5kbGVJbWFnZUVycm9yKHNlbmRlcklkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJbml0aWFscyhtZXNzYWdlLnNlbmRlci5uYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAke2lzT3duTWVzc2FnZSBcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1wcmltYXJ5LTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtdGwtbGcgcm91bmRlZC10ci1ub25lJyBcbiAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQtdHItbGcgcm91bmRlZC10bC1ub25lJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQtYmwtbGcgcm91bmRlZC1ici1sZyBwLTMgc2hhZG93LXNtXG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC14cyBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UuY29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogRGlzcGxheSBhdHRhY2htZW50cyAqL31cbiAgICAgICAgICAgICAgICAgICAge2hhc0F0dGFjaG1lbnRzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7bWVzc2FnZS5jb250ZW50ID8gJ210LTInIDogJyd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bm9uQ2h1bmtBdHRhY2htZW50cz8ubWFwKChhdHRhY2htZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QXR0YWNobWVudFByZXZpZXcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHttZXNzYWdlLl9pZH0tYXR0YWNobWVudC0ke2luZGV4fWB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgbXQtMSBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRBdCksICdoOm1tIGEnKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICkpfVxuXG4gICAgICB7LyogTW9zdHJhbW9zIGxvcyBhcmNoaXZvcyByZWNvbnN0cnVpZG9zIChzb2xvIHNpIGVzdMOhbiBjb21wbGV0b3MpICovfVxuICAgICAge09iamVjdC5lbnRyaWVzKGZpbGVDaHVua3MpXG4gICAgICAgIC5maWx0ZXIoKFtfLCBpbmZvXSkgPT4gaW5mby5jb21wbGV0ZSlcbiAgICAgICAgLm1hcCgoW2ZpbGVuYW1lLCBpbmZvXSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtgcmVjb25zdHJ1Y3RlZC0ke2ZpbGVuYW1lfWB9IGNsYXNzTmFtZT1cIm1iLTQgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTMgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTIgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICBBcmNoaXZvIHJlY29uc3RydWlkbzpcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPFJlY29uc3RydWN0ZWRBdHRhY2htZW50IFxuICAgICAgICAgICAgICBvcmlnaW5hbEZpbGU9e2ZpbGVuYW1lfSBcbiAgICAgICAgICAgICAgY2h1bmtzPXtpbmZvLmNodW5rc30gXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKVxuICAgICAgfVxuICAgICAgXG4gICAgICB7LyogU2hvdyB0eXBpbmcgaW5kaWNhdG9yICovfVxuICAgICAge3R5cGluZ1VzZXJzTGlzdC5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC1ncmF5LTUwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctZ3JheS00MDAgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzIwMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctZ3JheS00MDAgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzQwMG1zJyB9fT48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgIHt0eXBpbmdVc2Vyc0xpc3QubGVuZ3RoID09PSAxIFxuICAgICAgICAgICAgICA/IGAke3R5cGluZ1VzZXJzTGlzdFswXX0gaXMgdHlwaW5nLi4uYCBcbiAgICAgICAgICAgICAgOiBgJHt0eXBpbmdVc2Vyc0xpc3QubGVuZ3RofSBwZW9wbGUgYXJlIHR5cGluZy4uLmB9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFbXB0eSBkaXYgdG8gYWxsb3cgc2Nyb2xsaW5nIHRvIGJvdHRvbSBvZiBtZXNzYWdlcyAqL31cbiAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNoYXQiLCJGaWxlVHlwZSIsInVzZUF1dGgiLCJJbWFnZSIsImZvcm1hdCIsImdldEluaXRpYWxzIiwibmFtZSIsInBhcnRzIiwidHJpbSIsInNwbGl0IiwibGVuZ3RoIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzdWJzdHJpbmciLCJNYXRoIiwibWluIiwiaXNWYWxpZEltYWdlU3JjIiwic3JjIiwic3RhcnRzV2l0aCIsIkF0dGFjaG1lbnRQcmV2aWV3IiwiYXR0YWNobWVudCIsImxvYWRTdGF0ZSIsInNldExvYWRTdGF0ZSIsInByZXZpZXdBdmFpbGFibGUiLCJzZXRQcmV2aWV3QXZhaWxhYmxlIiwiYXBpQmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwidmlkZW9SZWYiLCJzaG93RnVsbHNjcmVlbiIsInNldFNob3dGdWxsc2NyZWVuIiwicmV0cnlDb3VudCIsInNldFJldHJ5Q291bnQiLCJpc0xhcmdlRmlsZSIsImZpbGVJZCIsImNvbnRlbnRUeXBlIiwiY2hlY2tWaWRlb0F2YWlsYWJpbGl0eSIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsInNldFRpbWVvdXQiLCJwcmV2IiwibWV0YWRhdGEiLCJqc29uIiwiY29tcGxldGUiLCJlcnJvciIsImNvbnNvbGUiLCJnZXRBdHRhY2htZW50U291cmNlIiwiZGF0YSIsImdldFRodW1ibmFpbFNvdXJjZSIsImhhbmRsZURvd25sb2FkIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImZpbGVuYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsImdldEZpbGVUeXBlIiwidG9nZ2xlRnVsbHNjcmVlbiIsImhhbmRsZUxvYWRlZERhdGEiLCJoYW5kbGVWaWRlb0Vycm9yIiwiaGFuZGxlUmV0cnkiLCJmaWxlVHlwZSIsInNvdXJjZSIsImRpdiIsImNsYXNzTmFtZSIsImltZyIsImFsdCIsIm9uTG9hZCIsIm9uRXJyb3IiLCJwIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwic3BhbiIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJ2aWRlbyIsInJlZiIsImNvbnRyb2xzIiwib25Mb2FkZWREYXRhIiwicG9zdGVyIiwicHJlbG9hZCIsImF1dG9QbGF5IiwiYXVkaW8iLCJyZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzIiwiY2h1bmtzIiwic29ydGVkQ2h1bmtzIiwic29ydCIsImIiLCJjaHVua0luZGV4IiwiZnVsbEJhc2U2NCIsIm1hcCIsImNodW5rIiwiam9pbiIsIlJlY29uc3RydWN0ZWRBdHRhY2htZW50Iiwib3JpZ2luYWxGaWxlIiwiZXhwYW5kZWQiLCJzZXRFeHBhbmRlZCIsImZ1bGxzY3JlZW5WaWV3Iiwic2V0RnVsbHNjcmVlblZpZXciLCJ0b2dnbGVFeHBhbmQiLCJjbG9zZUZ1bGxzY3JlZW4iLCJmdWxsRGF0YSIsImJhc2U2NFNyYyIsInRvdGFsU2l6ZSIsInJlZHVjZSIsInRvdGFsIiwic2l6ZSIsImZvcm1hdEZpbGVTaXplIiwiYnl0ZXMiLCJ0b0ZpeGVkIiwiVklERU8iLCJjb250cm9sc0xpc3QiLCJ0aXRsZSIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZmlsbFJ1bGUiLCJkIiwiY2xpcFJ1bGUiLCJzdHJva2UiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsIk1lc3NhZ2VMaXN0IiwidXNlciIsIm1lc3NhZ2VzIiwiaXNMb2FkaW5nIiwidHlwaW5nVXNlcnMiLCJhY3RpdmVDaGF0IiwibWVzc2FnZXNFbmRSZWYiLCJmYWlsZWRJbWFnZXMiLCJzZXRGYWlsZWRJbWFnZXMiLCJmaWxlQ2h1bmtzIiwic2V0RmlsZUNodW5rcyIsImhhbmRsZUltYWdlRXJyb3IiLCJpZCIsImZvckVhY2giLCJtZXNzYWdlIiwiYXR0YWNobWVudHMiLCJpc0NodW5rIiwib3JpZ2luYWxGaWxlbmFtZSIsInRvdGFsQ2h1bmtzIiwidW5kZWZpbmVkIiwia2V5IiwiQXJyYXkiLCJldmVyeSIsImN1cnJlbnQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwibWVzc2FnZXNCeURhdGUiLCJncm91cHMiLCJkYXRlIiwiRGF0ZSIsImNyZWF0ZWRBdCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInB1c2giLCJ0eXBpbmdVc2Vyc0xpc3QiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsdGVyIiwidXNlcklkIiwiaXNUeXBpbmciLCJ2YWx1ZSIsImRhdGVNZXNzYWdlcyIsImlzT3duTWVzc2FnZSIsInNlbmRlciIsIl9pZCIsInNlbmRlcklkIiwiaGFzQXR0YWNobWVudHMiLCJub25DaHVua0F0dGFjaG1lbnRzIiwiYXR0IiwiY29udGVudCIsImluY2x1ZGVzIiwiYXZhdGFyIiwid2lkdGgiLCJoZWlnaHQiLCJpbmRleCIsIl8iLCJpbmZvIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/MessageList.tsx\n");

/***/ }),

/***/ "./src/components/chat/RoomMembersModal.tsx":
/*!**************************************************!*\
  !*** ./src/components/chat/RoomMembersModal.tsx ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RoomMembersModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction RoomMembersModal({ isOpen, onClose, roomId }) {\n    const { rooms, users, joinRoom, leaveRoom } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const room = rooms.find((r)=>r._id === roomId);\n    const [selectedUsers, setSelectedUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isAdding, setIsAdding] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRemoving, setIsRemoving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Reset state when modal opens/closes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isOpen) {\n            setSelectedUsers([]);\n            setSearchTerm(\"\");\n            setIsAdding(false);\n            setIsRemoving(false);\n            setError(\"\");\n        }\n    }, [\n        isOpen\n    ]);\n    if (!isOpen || !room) return null;\n    // Check if current user is the creator\n    const isCreator = user && room.creator && room.creator._id === user.id;\n    // Get non-member users for adding\n    const nonMemberUsers = users.filter((u)=>!room.members.some((m)=>m._id === u._id) && u._id !== user?.id);\n    // Filter users by search term\n    const filteredNonMembers = searchTerm ? nonMemberUsers.filter((u)=>u.name.toLowerCase().includes(searchTerm.toLowerCase()) || u.email.toLowerCase().includes(searchTerm.toLowerCase())) : nonMemberUsers;\n    const handleAddMembers = async ()=>{\n        if (selectedUsers.length === 0) return;\n        setError(\"\");\n        setIsAdding(true);\n        try {\n            // Add each selected user to the room\n            for (const userId of selectedUsers){\n                if (userId) {\n                    await joinRoom(roomId, userId);\n                }\n            }\n            // Clear selection after successful addition\n            setSelectedUsers([]);\n        } catch (err) {\n            console.error(\"Error adding members:\", err);\n            setError(\"Failed to add members. Please try again.\");\n        } finally{\n            setIsAdding(false);\n        }\n    };\n    const handleRemoveMember = async (userId)=>{\n        if (!userId) return; // Skip if userId is undefined\n        setError(\"\");\n        setIsRemoving(true);\n        try {\n            await leaveRoom(roomId, userId);\n        } catch (err) {\n            console.error(\"Error removing member:\", err);\n            setError(\"Failed to remove member. Please try again.\");\n        } finally{\n            setIsRemoving(false);\n        }\n    };\n    const toggleUserSelection = (userId)=>{\n        if (!userId) return; // Skip if userId is undefined\n        setSelectedUsers((prev)=>prev.includes(userId) ? prev.filter((id)=>id !== userId) : [\n                ...prev,\n                userId\n            ]);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-medium text-gray-900\",\n                            children: \"Room Members\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 106,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 112,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 111,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 107,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 105,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-red-50 text-red-600 p-3 m-4 rounded-md text-sm\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 118,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                            className: \"font-medium text-gray-700 mb-2\",\n                            children: [\n                                \"Current Members (\",\n                                room.members.length,\n                                \")\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 124,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2 max-h-60 overflow-y-auto\",\n                            children: room.members.map((member)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-between p-2 hover:bg-gray-50 rounded-md\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\",\n                                                    children: member.avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: member.avatar,\n                                                        alt: member.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 131,\n                                                        columnNumber: 23\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium text-gray-700\",\n                                                        children: member.name.charAt(0)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 139,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 129,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-medium text-gray-800\",\n                                                            children: member.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 143,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-gray-500\",\n                                                            children: member.email\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 144,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 142,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 128,\n                                            columnNumber: 17\n                                        }, this),\n                                        isCreator && member._id && room.creator._id && member._id !== room.creator._id && member._id !== user?.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: isRemoving,\n                                            onClick: ()=>handleRemoveMember(member._id),\n                                            className: \"text-red-500 hover:text-red-700 text-xs\",\n                                            children: isRemoving ? \"Removing...\" : \"Remove\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 149,\n                                            columnNumber: 19\n                                        }, this),\n                                        member._id && room.creator._id && member._id === room.creator._id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-gray-500 px-2 py-0.5 bg-gray-100 rounded-full\",\n                                            children: \"Creator\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 159,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, member._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 127,\n                                    columnNumber: 15\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 125,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 123,\n                    columnNumber: 9\n                }, this),\n                isCreator && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                            className: \"font-medium text-gray-700 mb-2\",\n                            children: \"Add Members\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"text\",\n                                placeholder: \"Search users...\",\n                                value: searchTerm,\n                                onChange: (e)=>setSearchTerm(e.target.value),\n                                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 170,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 169,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2 max-h-60 overflow-y-auto mb-4\",\n                            children: filteredNonMembers.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm text-gray-500 p-2\",\n                                children: \"No users found\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 181,\n                                columnNumber: 17\n                            }, this) : filteredNonMembers.map((user)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `flex items-center justify-between p-2 hover:bg-gray-50 rounded-md cursor-pointer ${user._id && selectedUsers.includes(user._id) ? \"bg-blue-50\" : \"\"}`,\n                                    onClick: ()=>toggleUserSelection(user._id),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\",\n                                                    children: user.avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: user.avatar,\n                                                        alt: user.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 194,\n                                                        columnNumber: 27\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium text-gray-700\",\n                                                        children: user.name.charAt(0)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 202,\n                                                        columnNumber: 27\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 192,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-medium text-gray-800\",\n                                                            children: user.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 206,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-gray-500\",\n                                                            children: user.email\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 207,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 205,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 191,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: user._id ? selectedUsers.includes(user._id) : false,\n                                                onChange: ()=>{},\n                                                className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\",\n                                                onClick: (e)=>e.stopPropagation()\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                lineNumber: 212,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 211,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, user._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 184,\n                                    columnNumber: 19\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 179,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                disabled: selectedUsers.length === 0 || isAdding,\n                                onClick: handleAddMembers,\n                                className: \"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\",\n                                children: isAdding ? \"Adding...\" : `Add Selected (${selectedUsers.length})`\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 226,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 225,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 167,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n            lineNumber: 104,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n        lineNumber: 103,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L1Jvb21NZW1iZXJzTW9kYWwudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSztBQUNBO0FBQ2xCO0FBUWhCLFNBQVNLLGlCQUFpQixFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUF5QjtJQUN6RixNQUFNLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLFNBQVMsRUFBRSxHQUFHViw4REFBT0E7SUFDckQsTUFBTSxFQUFFVyxJQUFJLEVBQUUsR0FBR1YsOERBQU9BO0lBQ3hCLE1BQU1XLE9BQU9MLE1BQU1NLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsR0FBRyxLQUFLVDtJQUV2QyxNQUFNLENBQUNVLGVBQWVDLGlCQUFpQixHQUFHbkIsK0NBQVFBLENBQVcsRUFBRTtJQUMvRCxNQUFNLENBQUNvQixZQUFZQyxjQUFjLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNzQixVQUFVQyxZQUFZLEdBQUd2QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUN3QixZQUFZQyxjQUFjLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUMwQixPQUFPQyxTQUFTLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUVuQyxzQ0FBc0M7SUFDdENDLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSUssUUFBUTtZQUNWYSxpQkFBaUIsRUFBRTtZQUNuQkUsY0FBYztZQUNkRSxZQUFZO1lBQ1pFLGNBQWM7WUFDZEUsU0FBUztRQUNYO0lBQ0YsR0FBRztRQUFDckI7S0FBTztJQUVYLElBQUksQ0FBQ0EsVUFBVSxDQUFDUSxNQUFNLE9BQU87SUFFN0IsdUNBQXVDO0lBQ3ZDLE1BQU1jLFlBQVlmLFFBQVFDLEtBQUtlLE9BQU8sSUFBSWYsS0FBS2UsT0FBTyxDQUFDWixHQUFHLEtBQUtKLEtBQUtpQixFQUFFO0lBRXRFLGtDQUFrQztJQUNsQyxNQUFNQyxpQkFBaUJyQixN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S0FBS3JCO2dDQUN4Q2dDLFNBQVNaO2dDQUNUUyxXQUFVOzBDQUVUN0IsV0FBVyxjQUFjLENBQUMsY0FBYyxFQUFFSixjQUFjeUIsTUFBTSxDQUFDLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFsRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9jb21wb25lbnRzL2NoYXQvUm9vbU1lbWJlcnNNb2RhbC50c3g/YzIyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgUm9vbU1lbWJlcnNNb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vbU1lbWJlcnNNb2RhbCh7IGlzT3Blbiwgb25DbG9zZSwgcm9vbUlkIH06IFJvb21NZW1iZXJzTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHJvb21zLCB1c2Vycywgam9pblJvb20sIGxlYXZlUm9vbSB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3Qgcm9vbSA9IHJvb21zLmZpbmQociA9PiByLl9pZCA9PT0gcm9vbUlkKTtcbiAgXG4gIGNvbnN0IFtzZWxlY3RlZFVzZXJzLCBzZXRTZWxlY3RlZFVzZXJzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtzZWFyY2hUZXJtLCBzZXRTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2lzQWRkaW5nLCBzZXRJc0FkZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1JlbW92aW5nLCBzZXRJc1JlbW92aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgLy8gUmVzZXQgc3RhdGUgd2hlbiBtb2RhbCBvcGVucy9jbG9zZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRTZWxlY3RlZFVzZXJzKFtdKTtcbiAgICAgIHNldFNlYXJjaFRlcm0oJycpO1xuICAgICAgc2V0SXNBZGRpbmcoZmFsc2UpO1xuICAgICAgc2V0SXNSZW1vdmluZyhmYWxzZSk7XG4gICAgICBzZXRFcnJvcignJyk7XG4gICAgfVxuICB9LCBbaXNPcGVuXSk7XG5cbiAgaWYgKCFpc09wZW4gfHwgIXJvb20pIHJldHVybiBudWxsO1xuXG4gIC8vIENoZWNrIGlmIGN1cnJlbnQgdXNlciBpcyB0aGUgY3JlYXRvclxuICBjb25zdCBpc0NyZWF0b3IgPSB1c2VyICYmIHJvb20uY3JlYXRvciAmJiByb29tLmNyZWF0b3IuX2lkID09PSB1c2VyLmlkO1xuXG4gIC8vIEdldCBub24tbWVtYmVyIHVzZXJzIGZvciBhZGRpbmdcbiAgY29uc3Qgbm9uTWVtYmVyVXNlcnMgPSB1c2Vycy5maWx0ZXIoXG4gICAgdSA9PiAhcm9vbS5tZW1iZXJzLnNvbWUobSA9PiBtLl9pZCA9PT0gdS5faWQpICYmIHUuX2lkICE9PSB1c2VyPy5pZFxuICApO1xuXG4gIC8vIEZpbHRlciB1c2VycyBieSBzZWFyY2ggdGVybVxuICBjb25zdCBmaWx0ZXJlZE5vbk1lbWJlcnMgPSBzZWFyY2hUZXJtIFxuICAgID8gbm9uTWVtYmVyVXNlcnMuZmlsdGVyKHUgPT4gXG4gICAgICAgIHUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHwgXG4gICAgICAgIHUuZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICApXG4gICAgOiBub25NZW1iZXJVc2VycztcblxuICBjb25zdCBoYW5kbGVBZGRNZW1iZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZFVzZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIHNldEVycm9yKCcnKTtcbiAgICBzZXRJc0FkZGluZyh0cnVlKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQWRkIGVhY2ggc2VsZWN0ZWQgdXNlciB0byB0aGUgcm9vbVxuICAgICAgZm9yIChjb25zdCB1c2VySWQgb2Ygc2VsZWN0ZWRVc2Vycykge1xuICAgICAgICBpZiAodXNlcklkKSB7IC8vIEVuc3VyZSB1c2VySWQgaXMgZGVmaW5lZFxuICAgICAgICAgIGF3YWl0IGpvaW5Sb29tKHJvb21JZCwgdXNlcklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gYWZ0ZXIgc3VjY2Vzc2Z1bCBhZGRpdGlvblxuICAgICAgc2V0U2VsZWN0ZWRVc2VycyhbXSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgbWVtYmVyczonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBhZGQgbWVtYmVycy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBZGRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZW1vdmVNZW1iZXIgPSBhc3luYyAodXNlcklkOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHtcbiAgICBpZiAoIXVzZXJJZCkgcmV0dXJuOyAvLyBTa2lwIGlmIHVzZXJJZCBpcyB1bmRlZmluZWRcbiAgICBcbiAgICBzZXRFcnJvcignJyk7XG4gICAgc2V0SXNSZW1vdmluZyh0cnVlKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbGVhdmVSb29tKHJvb21JZCwgdXNlcklkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIG1lbWJlcjonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byByZW1vdmUgbWVtYmVyLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1JlbW92aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVXNlclNlbGVjdGlvbiA9ICh1c2VySWQ6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIGlmICghdXNlcklkKSByZXR1cm47IC8vIFNraXAgaWYgdXNlcklkIGlzIHVuZGVmaW5lZFxuICAgIFxuICAgIHNldFNlbGVjdGVkVXNlcnMocHJldiA9PiBcbiAgICAgIHByZXYuaW5jbHVkZXModXNlcklkKVxuICAgICAgICA/IHByZXYuZmlsdGVyKGlkID0+IGlkICE9PSB1c2VySWQpXG4gICAgICAgIDogWy4uLnByZXYsIHVzZXJJZF1cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgbWF4LXctbWQgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlJvb20gTWVtYmVyczwvaDM+XG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS01MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyBtLTQgcm91bmRlZC1tZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+Q3VycmVudCBNZW1iZXJzICh7cm9vbS5tZW1iZXJzLmxlbmd0aH0pPC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtYXgtaC02MCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgIHtyb29tLm1lbWJlcnMubWFwKG1lbWJlciA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXttZW1iZXIuX2lkfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGhvdmVyOmJnLWdyYXktNTAgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICB7bWVtYmVyLmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17bWVtYmVyLmF2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17bWVtYmVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+e21lbWJlci5uYW1lLmNoYXJBdCgwKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPnttZW1iZXIubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnttZW1iZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge2lzQ3JlYXRvciAmJiBtZW1iZXIuX2lkICYmIHJvb20uY3JlYXRvci5faWQgJiYgbWVtYmVyLl9pZCAhPT0gcm9vbS5jcmVhdG9yLl9pZCAmJiBtZW1iZXIuX2lkICE9PSB1c2VyPy5pZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1JlbW92aW5nfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVSZW1vdmVNZW1iZXIobWVtYmVyLl9pZCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc1JlbW92aW5nID8gJ1JlbW92aW5nLi4uJyA6ICdSZW1vdmUnfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7bWVtYmVyLl9pZCAmJiByb29tLmNyZWF0b3IuX2lkICYmIG1lbWJlci5faWQgPT09IHJvb20uY3JlYXRvci5faWQgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIHB4LTIgcHktMC41IGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbFwiPkNyZWF0b3I8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge2lzQ3JlYXRvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTRcIj5cbiAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5BZGQgTWVtYmVyczwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIHVzZXJzLi4uXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaFRlcm0oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTIgbWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIG1iLTRcIj5cbiAgICAgICAgICAgICAge2ZpbHRlcmVkTm9uTWVtYmVycy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwIHAtMlwiPk5vIHVzZXJzIGZvdW5kPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpbHRlcmVkTm9uTWVtYmVycy5tYXAodXNlciA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICBrZXk9e3VzZXIuX2lkfSBcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBob3ZlcjpiZy1ncmF5LTUwIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXIgJHtcbiAgICAgICAgICAgICAgICAgICAgICB1c2VyLl9pZCAmJiBzZWxlY3RlZFVzZXJzLmluY2x1ZGVzKHVzZXIuX2lkKSA/ICdiZy1ibHVlLTUwJyA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVVc2VyU2VsZWN0aW9uKHVzZXIuX2lkKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIuYXZhdGFyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3VzZXIuYXZhdGFyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17dXNlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPnt1c2VyLm5hbWUuY2hhckF0KDApfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPnt1c2VyLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e3VzZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt1c2VyLl9pZCA/IHNlbGVjdGVkVXNlcnMuaW5jbHVkZXModXNlci5faWQpIDogZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319IC8vIEhhbmRsZWQgYnkgZGl2IGNsaWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCBib3JkZXItZ3JheS0zMDAgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2VsZWN0ZWRVc2Vycy5sZW5ndGggPT09IDAgfHwgaXNBZGRpbmd9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWVtYmVyc31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIGJnLWJsdWUtNjAwIHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzQWRkaW5nID8gJ0FkZGluZy4uLicgOiBgQWRkIFNlbGVjdGVkICgke3NlbGVjdGVkVXNlcnMubGVuZ3RofSlgfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDaGF0IiwidXNlQXV0aCIsIkltYWdlIiwiUm9vbU1lbWJlcnNNb2RhbCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJyb29tSWQiLCJyb29tcyIsInVzZXJzIiwiam9pblJvb20iLCJsZWF2ZVJvb20iLCJ1c2VyIiwicm9vbSIsImZpbmQiLCJyIiwiX2lkIiwic2VsZWN0ZWRVc2VycyIsInNldFNlbGVjdGVkVXNlcnMiLCJzZWFyY2hUZXJtIiwic2V0U2VhcmNoVGVybSIsImlzQWRkaW5nIiwic2V0SXNBZGRpbmciLCJpc1JlbW92aW5nIiwic2V0SXNSZW1vdmluZyIsImVycm9yIiwic2V0RXJyb3IiLCJpc0NyZWF0b3IiLCJjcmVhdG9yIiwiaWQiLCJub25NZW1iZXJVc2VycyIsImZpbHRlciIsInUiLCJtZW1iZXJzIiwic29tZSIsIm0iLCJmaWx0ZXJlZE5vbk1lbWJlcnMiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImVtYWlsIiwiaGFuZGxlQWRkTWVtYmVycyIsImxlbmd0aCIsInVzZXJJZCIsImVyciIsImNvbnNvbGUiLCJoYW5kbGVSZW1vdmVNZW1iZXIiLCJ0b2dnbGVVc2VyU2VsZWN0aW9uIiwicHJldiIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZmlsbFJ1bGUiLCJkIiwiY2xpcFJ1bGUiLCJoNCIsIm1hcCIsIm1lbWJlciIsImF2YXRhciIsInNyYyIsImFsdCIsIndpZHRoIiwiaGVpZ2h0Iiwic3BhbiIsImNoYXJBdCIsInAiLCJkaXNhYmxlZCIsImlucHV0IiwidHlwZSIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJjaGVja2VkIiwic3RvcFByb3BhZ2F0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/chat/RoomMembersModal.tsx\n");

/***/ }),

/***/ "./src/components/profile/ProfileModal.tsx":
/*!*************************************************!*\
  !*** ./src/components/profile/ProfileModal.tsx ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfileModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction ProfileModal({ isOpen, onClose }) {\n    const { user, updateProfile } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [avatar, setAvatar] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [currentPassword, setCurrentPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [newPassword, setNewPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [confirmPassword, setConfirmPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [successMessage, setSuccessMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"general\"); // 'general' or 'security'\n    const [localImagePreview, setLocalImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUrlInput, setShowUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (user) {\n            setName(user.name);\n            setAvatar(user.avatar);\n        }\n        // Reset form state when modal opens/closes\n        if (isOpen) {\n            setCurrentPassword(\"\");\n            setNewPassword(\"\");\n            setConfirmPassword(\"\");\n            setError(\"\");\n            setSuccessMessage(\"\");\n            setLocalImagePreview(null);\n            setShowUrlInput(false);\n        }\n    }, [\n        user,\n        isOpen\n    ]);\n    if (!isOpen || !user) return null;\n    const handleGeneralUpdate = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        setSuccessMessage(\"\");\n        try {\n            setIsLoading(true);\n            // Use localImagePreview if available, otherwise use avatar URL\n            const avatarToUse = localImagePreview || avatar;\n            await updateProfile({\n                name,\n                avatar: avatarToUse\n            });\n            setSuccessMessage(\"Profile updated successfully\");\n        } catch (err) {\n            setError(err.message || \"Failed to update profile\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handlePasswordUpdate = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        setSuccessMessage(\"\");\n        if (newPassword !== confirmPassword) {\n            setError(\"New passwords do not match\");\n            return;\n        }\n        try {\n            setIsLoading(true);\n            await updateProfile({\n                currentPassword,\n                newPassword\n            });\n            // Reset password fields\n            setCurrentPassword(\"\");\n            setNewPassword(\"\");\n            setConfirmPassword(\"\");\n            setSuccessMessage(\"Password updated successfully\");\n        } catch (err) {\n            setError(err.message || \"Failed to update password\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleImageUpload = (e)=>{\n        const file = e.target.files?.[0];\n        if (!file) return;\n        // Check file size (limit to 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n            setError(\"Image size must be less than 5MB\");\n            return;\n        }\n        // Check file type\n        if (!file.type.startsWith(\"image/\")) {\n            setError(\"File must be an image\");\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (event)=>{\n            if (event.target?.result) {\n                setLocalImagePreview(event.target.result);\n                setAvatar(\"\"); // Clear URL input when local file is selected\n                setShowUrlInput(false); // Hide URL input when file is selected\n            }\n        };\n        reader.readAsDataURL(file);\n    };\n    const handleRemoveImage = ()=>{\n        setLocalImagePreview(null);\n        setAvatar(\"\");\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n        setShowUrlInput(false);\n    };\n    const toggleUrlInput = ()=>{\n        setShowUrlInput(!showUrlInput);\n        if (showUrlInput && fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-medium text-gray-900\",\n                            children: \"Profile Settings\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 149,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 155,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                lineNumber: 154,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 150,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 148,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: `flex-1 p-3 text-center ${activeTab === \"general\" ? \"text-blue-600 border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`,\n                            onClick: ()=>setActiveTab(\"general\"),\n                            children: \"General\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 162,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: `flex-1 p-3 text-center ${activeTab === \"security\" ? \"text-blue-600 border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`,\n                            onClick: ()=>setActiveTab(\"security\"),\n                            children: \"Security\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 161,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-red-50 text-red-600 p-3 m-4 rounded-md text-sm\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 177,\n                    columnNumber: 11\n                }, this),\n                successMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-green-50 text-green-600 p-3 m-4 rounded-md text-sm\",\n                    children: successMessage\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 183,\n                    columnNumber: 11\n                }, this),\n                activeTab === \"general\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleGeneralUpdate,\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col items-center mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative h-24 w-24 mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"relative h-24 w-24 rounded-full overflow-hidden bg-gray-200\",\n                                            children: localImagePreview ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                src: localImagePreview,\n                                                alt: name,\n                                                layout: \"fill\",\n                                                objectFit: \"cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 196,\n                                                columnNumber: 21\n                                            }, this) : avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                src: avatar,\n                                                alt: name,\n                                                layout: \"fill\",\n                                                objectFit: \"cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 203,\n                                                columnNumber: 21\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-full w-full flex items-center justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-2xl font-medium text-gray-700\",\n                                                    children: name.charAt(0)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 211,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 210,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 194,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute bottom-0 right-0 flex space-x-1\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"file\",\n                                                    id: \"image-upload\",\n                                                    ref: fileInputRef,\n                                                    onChange: handleImageUpload,\n                                                    accept: \"image/*\",\n                                                    className: \"hidden\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 218,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: ()=>fileInputRef.current?.click(),\n                                                    className: \"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-colors\",\n                                                    title: \"Upload image from device\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 233,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 232,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 226,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: toggleUrlInput,\n                                                    className: \"bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors\",\n                                                    title: \"Enter image URL\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 244,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 243,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 237,\n                                                    columnNumber: 19\n                                                }, this),\n                                                (localImagePreview || avatar) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: handleRemoveImage,\n                                                    className: \"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors\",\n                                                    title: \"Remove image\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 256,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 255,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 249,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 217,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 15\n                                }, this),\n                                showUrlInput && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"avatar\",\n                                            className: \"block text-xs font-medium text-gray-700 mb-1\",\n                                            children: \"Enter image URL\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 266,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"url\",\n                                            id: \"avatar\",\n                                            value: avatar,\n                                            onChange: (e)=>{\n                                                setAvatar(e.target.value);\n                                                if (e.target.value) {\n                                                    setLocalImagePreview(null);\n                                                    if (fileInputRef.current) {\n                                                        fileInputRef.current.value = \"\";\n                                                    }\n                                                }\n                                            },\n                                            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            placeholder: \"https://example.com/avatar.jpg\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 269,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 265,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-center text-gray-500 mb-4\",\n                                    children: \"For best results, use a square image. Max size: 5MB.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 288,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full space-y-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    htmlFor: \"name\",\n                                                    className: \"block text-sm font-medium text-gray-700\",\n                                                    children: \"Name\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 294,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"text\",\n                                                    id: \"name\",\n                                                    value: name,\n                                                    onChange: (e)=>setName(e.target.value),\n                                                    className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                                    required: true\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 297,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 293,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    className: \"block text-sm font-medium text-gray-700\",\n                                                    children: \"Email\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 308,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-1 w-full px-3 py-2 bg-gray-100 rounded-md text-gray-700\",\n                                                    children: user.email\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 311,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"mt-1 text-xs text-gray-500\",\n                                                    children: \"Email cannot be changed\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 314,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 307,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 292,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 191,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 322,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    disabled: isLoading,\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isLoading ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    children: isLoading ? \"Saving...\" : \"Save Changes\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 329,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 321,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 190,\n                    columnNumber: 11\n                }, this),\n                activeTab === \"security\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handlePasswordUpdate,\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"current-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"Current Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 347,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"current-password\",\n                                            value: currentPassword,\n                                            onChange: (e)=>setCurrentPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 350,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 346,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"new-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"New Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 361,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"new-password\",\n                                            value: newPassword,\n                                            onChange: (e)=>setNewPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 364,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 360,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"confirm-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"Confirm New Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 375,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"confirm-password\",\n                                            value: confirmPassword,\n                                            onChange: (e)=>setConfirmPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 378,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 374,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 345,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-6 flex justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 390,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    disabled: isLoading,\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isLoading ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    children: isLoading ? \"Updating...\" : \"Update Password\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 397,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 389,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 344,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n            lineNumber: 147,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n        lineNumber: 146,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZS9Qcm9maWxlTW9kYWwudHN4PzQxN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgUHJvZmlsZU1vZGFsUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2ZpbGVNb2RhbCh7IGlzT3Blbiwgb25DbG9zZSB9OiBQcm9maWxlTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHVzZXIsIHVwZGF0ZVByb2ZpbGUgfSA9IHVzZUF1dGgoKTtcbiAgXG4gIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2F2YXRhciwgc2V0QXZhdGFyXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2N1cnJlbnRQYXNzd29yZCwgc2V0Q3VycmVudFBhc3N3b3JkXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW25ld1Bhc3N3b3JkLCBzZXROZXdQYXNzd29yZF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtjb25maXJtUGFzc3dvcmQsIHNldENvbmZpcm1QYXNzd29yZF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VjY2Vzc01lc3NhZ2UsIHNldFN1Y2Nlc3NNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdnZW5lcmFsJyk7IC8vICdnZW5lcmFsJyBvciAnc2VjdXJpdHknXG4gIGNvbnN0IFtsb2NhbEltYWdlUHJldmlldywgc2V0TG9jYWxJbWFnZVByZXZpZXddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93VXJsSW5wdXQsIHNldFNob3dVcmxJbnB1dF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodXNlcikge1xuICAgICAgc2V0TmFtZSh1c2VyLm5hbWUpO1xuICAgICAgc2V0QXZhdGFyKHVzZXIuYXZhdGFyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgZm9ybSBzdGF0ZSB3aGVuIG1vZGFsIG9wZW5zL2Nsb3Nlc1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldEN1cnJlbnRQYXNzd29yZCgnJyk7XG4gICAgICBzZXROZXdQYXNzd29yZCgnJyk7XG4gICAgICBzZXRDb25maXJtUGFzc3dvcmQoJycpO1xuICAgICAgc2V0RXJyb3IoJycpO1xuICAgICAgc2V0U3VjY2Vzc01lc3NhZ2UoJycpO1xuICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3VzZXIsIGlzT3Blbl0pO1xuXG4gIGlmICghaXNPcGVuIHx8ICF1c2VyKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVHZW5lcmFsVXBkYXRlID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRFcnJvcignJyk7XG4gICAgc2V0U3VjY2Vzc01lc3NhZ2UoJycpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFVzZSBsb2NhbEltYWdlUHJldmlldyBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgYXZhdGFyIFVSTFxuICAgICAgY29uc3QgYXZhdGFyVG9Vc2UgPSBsb2NhbEltYWdlUHJldmlldyB8fCBhdmF0YXI7XG4gICAgICBcbiAgICAgIGF3YWl0IHVwZGF0ZVByb2ZpbGUoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhdmF0YXI6IGF2YXRhclRvVXNlLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHNldFN1Y2Nlc3NNZXNzYWdlKCdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUGFzc3dvcmRVcGRhdGUgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldEVycm9yKCcnKTtcbiAgICBzZXRTdWNjZXNzTWVzc2FnZSgnJyk7XG4gICAgXG4gICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcbiAgICAgIHNldEVycm9yKCdOZXcgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgXG4gICAgICBhd2FpdCB1cGRhdGVQcm9maWxlKHtcbiAgICAgICAgY3VycmVudFBhc3N3b3JkLFxuICAgICAgICBuZXdQYXNzd29yZCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBSZXNldCBwYXNzd29yZCBmaWVsZHNcbiAgICAgIHNldEN1cnJlbnRQYXNzd29yZCgnJyk7XG4gICAgICBzZXROZXdQYXNzd29yZCgnJyk7XG4gICAgICBzZXRDb25maXJtUGFzc3dvcmQoJycpO1xuICAgICAgXG4gICAgICBzZXRTdWNjZXNzTWVzc2FnZSgnUGFzc3dvcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byB1cGRhdGUgcGFzc3dvcmQnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIC8vIENoZWNrIGZpbGUgc2l6ZSAobGltaXQgdG8gNU1CKVxuICAgIGlmIChmaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHtcbiAgICAgIHNldEVycm9yKCdJbWFnZSBzaXplIG11c3QgYmUgbGVzcyB0aGFuIDVNQicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZVxuICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICBzZXRFcnJvcignRmlsZSBtdXN0IGJlIGFuIGltYWdlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Py5yZXN1bHQpIHtcbiAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcoZXZlbnQudGFyZ2V0LnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICBzZXRBdmF0YXIoJycpOyAvLyBDbGVhciBVUkwgaW5wdXQgd2hlbiBsb2NhbCBmaWxlIGlzIHNlbGVjdGVkXG4gICAgICAgIHNldFNob3dVcmxJbnB1dChmYWxzZSk7IC8vIEhpZGUgVVJMIGlucHV0IHdoZW4gZmlsZSBpcyBzZWxlY3RlZFxuICAgICAgfVxuICAgIH07XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVtb3ZlSW1hZ2UgPSAoKSA9PiB7XG4gICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgc2V0QXZhdGFyKCcnKTtcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICAgIHNldFNob3dVcmxJbnB1dChmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVXJsSW5wdXQgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1VybElucHV0KCFzaG93VXJsSW5wdXQpO1xuICAgIGlmIChzaG93VXJsSW5wdXQgJiYgZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgbWF4LXctbWQgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5Qcm9maWxlIFNldHRpbmdzPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC01IHctNVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNNC4yOTMgNC4yOTNhMSAxIDAgMDExLjQxNCAwTDEwIDguNTg2bDQuMjkzLTQuMjkzYTEgMSAwIDExMS40MTQgMS40MTRMMTEuNDE0IDEwbDQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0IDEuNDE0TDEwIDExLjQxNGwtNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQtMS40MTRMOC41ODYgMTAgNC4yOTMgNS43MDdhMSAxIDAgMDEwLTEuNDE0elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogVGFiIE5hdmlnYXRpb24gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBib3JkZXItYlwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBwLTMgdGV4dC1jZW50ZXIgJHthY3RpdmVUYWIgPT09ICdnZW5lcmFsJyA/ICd0ZXh0LWJsdWUtNjAwIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNjAwIGZvbnQtbWVkaXVtJyA6ICd0ZXh0LWdyYXktNTAwJ31gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdnZW5lcmFsJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgR2VuZXJhbFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBwLTMgdGV4dC1jZW50ZXIgJHthY3RpdmVUYWIgPT09ICdzZWN1cml0eScgPyAndGV4dC1ibHVlLTYwMCBib3JkZXItYi0yIGJvcmRlci1ibHVlLTYwMCBmb250LW1lZGl1bScgOiAndGV4dC1ncmF5LTUwMCd9YH1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignc2VjdXJpdHknKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBTZWN1cml0eVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyBtLTQgcm91bmRlZC1tZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7c3VjY2Vzc01lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAgdGV4dC1ncmVlbi02MDAgcC0zIG0tNCByb3VuZGVkLW1kIHRleHQtc21cIj5cbiAgICAgICAgICAgIHtzdWNjZXNzTWVzc2FnZX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgXG4gICAgICAgIHsvKiBHZW5lcmFsIFRhYiAqL31cbiAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ2dlbmVyYWwnICYmIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlR2VuZXJhbFVwZGF0ZX0gY2xhc3NOYW1lPVwicC00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIG1iLTZcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLTI0IHctMjQgbWItNFwiPlxuICAgICAgICAgICAgICAgIHsvKiBBdmF0YXIgQ2lyY2xlIHdpdGggSW1hZ2UgKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLTI0IHctMjQgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbiBiZy1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICAgICAge2xvY2FsSW1hZ2VQcmV2aWV3ID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2xvY2FsSW1hZ2VQcmV2aWV3fVxuICAgICAgICAgICAgICAgICAgICAgIGFsdD17bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ9XCJmaWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ9XCJjb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApIDogYXZhdGFyID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2F2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICBhbHQ9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgbGF5b3V0PVwiZmlsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Rml0PVwiY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPntuYW1lLmNoYXJBdCgwKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQ2FtZXJhIEljb24gQnV0dG9uICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBmbGV4IHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJpbWFnZS11cGxvYWRcIlxuICAgICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUltYWdlVXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBwLTIgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJVcGxvYWQgaW1hZ2UgZnJvbSBkZXZpY2VcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQgNWEyIDIgMCAwMC0yIDJ2OGEyIDIgMCAwMDIgMmgxMmEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMS41ODZhMSAxIDAgMDEtLjcwNy0uMjkzbC0xLjEyMS0xLjEyMUEyIDIgMCAwMDExLjE3MiAzSDguODI4YTIgMiAwIDAwLTEuNDE0LjU4Nkw2LjI5MyA0LjcwN0ExIDEgMCAwMTUuNTg2IDVINHptNiA5YTMgMyAwIDEwMC02IDMgMyAwIDAwMCA2elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVVybElucHV0fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVudGVyIGltYWdlIFVSTFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTIuNTg2IDQuNTg2YTIgMiAwIDExMi44MjggMi44MjhsLTMgM2EyIDIgMCAwMS0yLjgyOCAwIDEgMSAwIDAwLTEuNDE0IDEuNDE0IDQgNCAwIDAwNS42NTYgMGwzLTNhNCA0IDAgMDAtNS42NTYtNS42NTZsLTEuNSAxLjVhMSAxIDAgMTAxLjQxNCAxLjQxNGwxLjUtMS41em0tNSA1YTIgMiAwIDAxMi44MjggMCAxIDEgMCAxMDEuNDE0LTEuNDE0IDQgNCAwIDAwLTUuNjU2IDBsLTMgM2E0IDQgMCAxMDUuNjU2IDUuNjU2bDEuNS0xLjVhMSAxIDAgMTAtMS40MTQtMS40MTRsLTEuNSAxLjVhMiAyIDAgMTEtMi44MjgtMi44MjhsMy0zelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsobG9jYWxJbWFnZVByZXZpZXcgfHwgYXZhdGFyKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctcmVkLTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgey8qIFVSTCBJbnB1dCAodG9nZ2xlYWJsZSkgKi99XG4gICAgICAgICAgICAgIHtzaG93VXJsSW5wdXQgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiYXZhdGFyXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgRW50ZXIgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ1cmxcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cImF2YXRhclwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXthdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldEF2YXRhcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2NhbEltYWdlUHJldmlldyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwczovL2V4YW1wbGUuY29tL2F2YXRhci5qcGdcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIG1iLTRcIj5cbiAgICAgICAgICAgICAgICBGb3IgYmVzdCByZXN1bHRzLCB1c2UgYSBzcXVhcmUgaW1hZ2UuIE1heCBzaXplOiA1TUIuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICBOYW1lXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgRW1haWxcbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBiZy1ncmF5LTEwMCByb3VuZGVkLW1kIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAge3VzZXIuZW1haWx9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgIEVtYWlsIGNhbm5vdCBiZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgbXItMyB0ZXh0LWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gaG92ZXI6YmctZ3JheS01MFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWJsdWUtNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCAke1xuICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nID8gJ29wYWNpdHktNzUgY3Vyc29yLW5vdC1hbGxvd2VkJyA6ICcnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aXNMb2FkaW5nID8gJ1NhdmluZy4uLicgOiAnU2F2ZSBDaGFuZ2VzJ31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7LyogU2VjdXJpdHkgVGFiICovfVxuICAgICAgICB7YWN0aXZlVGFiID09PSAnc2VjdXJpdHknICYmIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlUGFzc3dvcmRVcGRhdGV9IGNsYXNzTmFtZT1cInAtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImN1cnJlbnQtcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIEN1cnJlbnQgUGFzc3dvcmRcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgIGlkPVwiY3VycmVudC1wYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17Y3VycmVudFBhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXQtMSB3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJuZXctcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIE5ldyBQYXNzd29yZFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJuZXctcGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld1Bhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0xIHctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImNvbmZpcm0tcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIENvbmZpcm0gTmV3IFBhc3N3b3JkXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICBpZD1cImNvbmZpcm0tcGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbmZpcm1QYXNzd29yZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q29uZmlybVBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02IGZsZXgganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIG1yLTMgdGV4dC1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLW1kIHNoYWRvdy1zbSBob3ZlcjpiZy1ibHVlLTcwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgJHtcbiAgICAgICAgICAgICAgICAgIGlzTG9hZGluZyA/ICdvcGFjaXR5LTc1IGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzTG9hZGluZyA/ICdVcGRhdGluZy4uLicgOiAnVXBkYXRlIFBhc3N3b3JkJ31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUF1dGgiLCJJbWFnZSIsIlByb2ZpbGVNb2RhbCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJ1c2VyIiwidXBkYXRlUHJvZmlsZSIsIm5hbWUiLCJzZXROYW1lIiwiYXZhdGFyIiwic2V0QXZhdGFyIiwiY3VycmVudFBhc3N3b3JkIiwic2V0Q3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJzZXROZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsInNldENvbmZpcm1QYXNzd29yZCIsImVycm9yIiwic2V0RXJyb3IiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzdWNjZXNzTWVzc2FnZSIsInNldFN1Y2Nlc3NNZXNzYWdlIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwibG9jYWxJbWFnZVByZXZpZXciLCJzZXRMb2NhbEltYWdlUHJldmlldyIsInNob3dVcmxJbnB1dCIsInNldFNob3dVcmxJbnB1dCIsImZpbGVJbnB1dFJlZiIsImhhbmRsZUdlbmVyYWxVcGRhdGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJhdmF0YXJUb1VzZSIsImVyciIsIm1lc3NhZ2UiLCJoYW5kbGVQYXNzd29yZFVwZGF0ZSIsImhhbmRsZUltYWdlVXBsb2FkIiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwic2l6ZSIsInR5cGUiLCJzdGFydHNXaXRoIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImV2ZW50IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImhhbmRsZVJlbW92ZUltYWdlIiwiY3VycmVudCIsInZhbHVlIiwidG9nZ2xlVXJsSW5wdXQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwiZm9ybSIsIm9uU3VibWl0Iiwic3JjIiwiYWx0IiwibGF5b3V0Iiwib2JqZWN0Rml0Iiwic3BhbiIsImNoYXJBdCIsImlucHV0IiwiaWQiLCJyZWYiLCJvbkNoYW5nZSIsImFjY2VwdCIsImNsaWNrIiwidGl0bGUiLCJsYWJlbCIsImh0bWxGb3IiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiZW1haWwiLCJwIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/profile/ProfileModal.tsx\n");

/***/ }),

/***/ "./src/contexts/AuthContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/AuthContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_2__]);\naxios__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    login: async ()=>{},\n    loginWithGoogle: async ()=>{},\n    register: async ()=>{},\n    logout: async ()=>{},\n    updateProfile: async ()=>{}\n});\nconst useAuth = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\nconst AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.useSession)();\n    const API_URL = \"http://localhost:3001\" || 0;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check if user is authenticated in NextAuth session\n        if (status === \"authenticated\" && session?.user) {\n            setUser({\n                id: session.user.id || \"\",\n                name: session.user.name || \"\",\n                email: session.user.email || \"\",\n                avatar: session.user.image || \"\"\n            });\n            // Set authorization header for API requests\n            if (session.accessToken) {\n                // Guardar el token en localStorage para que ChatContext pueda utilizarlo\n                localStorage.setItem(\"token\", session.accessToken);\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${session.accessToken}`;\n            }\n            setIsLoading(false);\n            return;\n        } else if (status === \"unauthenticated\") {\n            // Clear user state if not authenticated with NextAuth\n            setUser(null);\n            setIsLoading(false);\n            return;\n        }\n        // Only check localStorage if NextAuth session status is not determined yet\n        if (status === \"loading\") {\n            return;\n        }\n        // Fallback to legacy token authentication\n        const checkAuthStatus = async ()=>{\n            const token = localStorage.getItem(\"token\");\n            if (!token) {\n                setIsLoading(false);\n                return;\n            }\n            try {\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n                const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`${API_URL}/auth/me`);\n                setUser({\n                    id: data._id,\n                    name: data.name,\n                    email: data.email,\n                    avatar: data.avatar || \"\"\n                });\n            } catch (error) {\n                localStorage.removeItem(\"token\");\n                delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        checkAuthStatus();\n    }, [\n        API_URL,\n        session,\n        status\n    ]);\n    const login = async (email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/login`, {\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error logging in\";\n            throw new Error(message);\n        }\n    };\n    const loginWithGoogle = async ()=>{\n        try {\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signIn)(\"google\", {\n                callbackUrl: \"/\"\n            });\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw new Error(\"Error logging in with Google\");\n        }\n    };\n    const register = async (name, email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/register`, {\n                name,\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error registering\";\n            throw new Error(message);\n        }\n    };\n    const logout = async ()=>{\n        if (status === \"authenticated\") {\n            // For NextAuth logout\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signOut)({\n                callbackUrl: \"/login\"\n            });\n        } else {\n            // For legacy logout\n            if (user) {\n                try {\n                    await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/logout`);\n                } catch (error) {\n                    console.error(\"Error logging out:\", error);\n                }\n            }\n            localStorage.removeItem(\"token\");\n            delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            setUser(null);\n            router.push(\"/login\");\n        }\n    };\n    const updateProfile = async (data)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].patch(`${API_URL}/users/profile`, data);\n            if (response.data) {\n                setUser((prevUser)=>{\n                    if (!prevUser) return null;\n                    return {\n                        ...prevUser,\n                        name: data.name || prevUser.name,\n                        avatar: data.avatar || prevUser.avatar\n                    };\n                });\n            }\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error updating profile\";\n            throw new Error(message);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: {\n            user,\n            isAuthenticated: !!user,\n            isLoading,\n            login,\n            loginWithGoogle,\n            register,\n            logout,\n            updateProfile\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/AuthContext.tsx\",\n        lineNumber: 214,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RTtBQUNwRDtBQUNjO0FBQ3NCO0FBMkI5RCxNQUFNVSw0QkFBY1Qsb0RBQWFBLENBQWtCO0lBQ2pEVSxNQUFNO0lBQ05DLGlCQUFpQjtJQUNqQkMsV0FBVztJQUNYQyxPQUFPLFdBQWE7SUFDcEJDLGlCQUFpQixXQUFhO0lBQzlCQyxVQUFVLFdBQWE7SUFDdkJDLFFBQVEsV0FBYTtJQUNyQkMsZUFBZSxXQUFhO0FBQzlCO0FBRU8sTUFBTUMsVUFBVSxJQUFNakIsaURBQVVBLENBQUNRLGFBQWE7QUFFOUMsTUFBTVUsZUFBd0QsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDaEYsTUFBTSxDQUFDVixNQUFNVyxRQUFRLEdBQUduQiwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNVLFdBQVdVLGFBQWEsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU1xQixTQUFTbEIsc0RBQVNBO0lBQ3hCLE1BQU0sRUFBRW1CLE1BQU1DLE9BQU8sRUFBRUMsTUFBTSxFQUFFLEdBQUdwQiwyREFBVUE7SUFFNUMsTUFBTXFCLFVBQVVDLHVCQUErQixJQUFJO0lBRW5EekIsZ0RBQVNBLENBQUM7UUFDUixxREFBcUQ7UUFDckQsSUFBSXVCLFdBQVcsbUJBQW1CRCxTQUFTZixNQUFNO1lBQy9DVyxRQUFRO2dCQUNOVSxJQUFJTixRQUFRZixJQUFJLENBQUNxQixFQUFFLElBQUk7Z0JBQ3ZCQyxNQUFNUCxRQUFRZixJQUFJLENBQUNzQixJQUFJLElBQUk7Z0JBQzNCQyxPQUFPUixRQUFRZixJQUFJLENBQUN1QixLQUFLLElBQUk7Z0JBQzdCQyxRQUFRVCxRQUFRZixJQUFJLENBQUN5QixLQUFLLElBQUk7WUFDaEM7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSVYsUUFBUVcsV0FBVyxFQUFFO2dCQUN2Qix5RUFBeUU7Z0JBQ3pFQyxhQUFhQyxPQUFPLENBQUMsU0FBU2IsUUFBUVcsV0FBVztnQkFDakRoQyxzREFBYyxDQUFDb0MsT0FBTyxDQUFDQyxNQUFNLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxPQUFPLEVBQUVoQixRQUFRVyxXQUFXLENBQUMsQ0FBQztZQUNsRjtZQUVBZCxhQUFhO1lBQ2I7UUFDRixPQUFPLElBQUlJLFdBQVcsbUJBQW1CO1lBQ3ZDLHNEQUFzRDtZQUN0REwsUUFBUTtZQUNSQyxhQUFhO1lBQ2I7UUFDRjtRQUVBLDJFQUEyRTtRQUMzRSxJQUFJSSxXQUFXLFdBQVc7WUFDeEI7UUFDRjtRQUVBLDBDQUEwQztRQUMxQyxNQUFNZ0Isa0JBQWtCO1lBQ3RCLE1BQU1DLFFBQVFOLGFBQWFPLE9BQU8sQ0FBQztZQUVuQyxJQUFJLENBQUNELE9BQU87Z0JBQ1ZyQixhQUFhO2dCQUNiO1lBQ0Y7WUFFQSxJQUFJO2dCQUNGbEIsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQixHQUFHLENBQUMsT0FBTyxFQUFFRSxNQUFNLENBQUM7Z0JBQ2xFLE1BQU0sRUFBRW5CLElBQUksRUFBRSxHQUFHLE1BQU1wQixpREFBUyxDQUFDLENBQUMsRUFBRXVCLFFBQVEsUUFBUSxDQUFDO2dCQUVyRE4sUUFBUTtvQkFDTlUsSUFBSVAsS0FBS3NCLEdBQUc7b0JBQ1pkLE1BQU1SLEtBQUtRLElBQUk7b0JBQ2ZDLE9BQU9ULEtBQUtTLEtBQUs7b0JBQ2pCQyxRQUFRVixLQUFLVSxNQUFNLElBQUk7Z0JBQ3pCO1lBQ0YsRUFBRSxPQUFPYSxPQUFZO2dCQUNuQlYsYUFBYVcsVUFBVSxDQUFDO2dCQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUN2RCxTQUFVO2dCQUNSbkIsYUFBYTtZQUNmO1FBQ0Y7UUFFQW9CO0lBQ0YsR0FBRztRQUFDZjtRQUFTRjtRQUFTQztLQUFPO0lBRTdCLE1BQU1iLFFBQVEsT0FBT29CLE9BQWVnQjtRQUNsQyxJQUFJO1lBQ0YsTUFBTSxFQUFFekIsSUFBSSxFQUFFLEdBQUcsTUFBTXBCLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxXQUFXLENBQUMsRUFBRTtnQkFDekRNO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdEMsa0JBQWtCO1FBQ3RCLElBQUk7WUFDRixNQUFNUCx1REFBTUEsQ0FBQyxVQUFVO2dCQUFFZ0QsYUFBYTtZQUFJO1FBQzVDLEVBQUUsT0FBT1IsT0FBWTtZQUNuQlMsUUFBUVQsS0FBSyxDQUFDLHVCQUF1QkE7WUFDckMsTUFBTSxJQUFJTyxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdkMsV0FBVyxPQUFPaUIsTUFBY0MsT0FBZWdCO1FBQ25ELElBQUk7WUFDRixNQUFNLEVBQUV6QixJQUFJLEVBQUUsR0FBRyxNQUFNcEIsa0RBQVUsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFO2dCQUM1REs7Z0JBQ0FDO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNcEMsU0FBUztRQUNiLElBQUlVLFdBQVcsaUJBQWlCO1lBQzlCLHNCQUFzQjtZQUN0QixNQUFNbEIsd0RBQU9BLENBQUM7Z0JBQUUrQyxhQUFhO1lBQVM7UUFDeEMsT0FBTztZQUNMLG9CQUFvQjtZQUNwQixJQUFJN0MsTUFBTTtnQkFDUixJQUFJO29CQUNGLE1BQU1OLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxZQUFZLENBQUM7Z0JBQzNDLEVBQUUsT0FBT29CLE9BQU87b0JBQ2RTLFFBQVFULEtBQUssQ0FBQyxzQkFBc0JBO2dCQUN0QztZQUNGO1lBRUFWLGFBQWFXLFVBQVUsQ0FBQztZQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUNyRHBCLFFBQVE7WUFDUkUsT0FBTzRCLElBQUksQ0FBQztRQUNkO0lBQ0Y7SUFFQSxNQUFNbEMsZ0JBQWdCLE9BQU9PO1FBQzNCLElBQUk7WUFDRixNQUFNNkIsV0FBVyxNQUFNakQsbURBQVcsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFSDtZQUUvRCxJQUFJNkIsU0FBUzdCLElBQUksRUFBRTtnQkFDakJILFFBQVFxQyxDQUFBQTtvQkFDTixJQUFJLENBQUNBLFVBQVUsT0FBTztvQkFFdEIsT0FBTzt3QkFDTCxHQUFHQSxRQUFRO3dCQUNYMUIsTUFBTVIsS0FBS1EsSUFBSSxJQUFJMEIsU0FBUzFCLElBQUk7d0JBQ2hDRSxRQUFRVixLQUFLVSxNQUFNLElBQUl3QixTQUFTeEIsTUFBTTtvQkFDeEM7Z0JBQ0Y7WUFDRjtRQUNGLEVBQUUsT0FBT2EsT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzNDLFlBQVlrRCxRQUFRO1FBQ25CQyxPQUFPO1lBQ0xsRDtZQUNBQyxpQkFBaUIsQ0FBQyxDQUFDRDtZQUNuQkU7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtrQkFFQ0c7Ozs7OztBQUdQLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4PzFmYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiwgc2lnbkluLCBzaWduT3V0IH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlUHJvZmlsZURhdGEge1xuICBuYW1lPzogc3RyaW5nO1xuICBhdmF0YXI/OiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZD86IHN0cmluZztcbiAgbmV3UGFzc3dvcmQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBdXRoQ29udGV4dFR5cGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGxvZ2luOiAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9naW5XaXRoR29vZ2xlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWdpc3RlcjogKG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9nb3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVQcm9maWxlOiAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGU+KHtcbiAgdXNlcjogbnVsbCxcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBsb2dpbjogYXN5bmMgKCkgPT4ge30sXG4gIGxvZ2luV2l0aEdvb2dsZTogYXN5bmMgKCkgPT4ge30sXG4gIHJlZ2lzdGVyOiBhc3luYyAoKSA9PiB7fSxcbiAgbG9nb3V0OiBhc3luYyAoKSA9PiB7fSxcbiAgdXBkYXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiwgc3RhdHVzIH0gPSB1c2VTZXNzaW9uKCk7XG5cbiAgY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgaW4gTmV4dEF1dGggc2Vzc2lvblxuICAgIGlmIChzdGF0dXMgPT09ICdhdXRoZW50aWNhdGVkJyAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IHNlc3Npb24udXNlci5pZCB8fCAnJyxcbiAgICAgICAgbmFtZTogc2Vzc2lvbi51c2VyLm5hbWUgfHwgJycsXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfHwgJycsXG4gICAgICAgIGF2YXRhcjogc2Vzc2lvbi51c2VyLmltYWdlIHx8ICcnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3IgQVBJIHJlcXVlc3RzXG4gICAgICBpZiAoc2Vzc2lvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAvLyBHdWFyZGFyIGVsIHRva2VuIGVuIGxvY2FsU3RvcmFnZSBwYXJhIHF1ZSBDaGF0Q29udGV4dCBwdWVkYSB1dGlsaXphcmxvXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHNlc3Npb24uYWNjZXNzVG9rZW4pO1xuICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Nlc3Npb24uYWNjZXNzVG9rZW59YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3VuYXV0aGVudGljYXRlZCcpIHtcbiAgICAgIC8vIENsZWFyIHVzZXIgc3RhdGUgaWYgbm90IGF1dGhlbnRpY2F0ZWQgd2l0aCBOZXh0QXV0aFxuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgY2hlY2sgbG9jYWxTdG9yYWdlIGlmIE5leHRBdXRoIHNlc3Npb24gc3RhdHVzIGlzIG5vdCBkZXRlcm1pbmVkIHlldFxuICAgIGlmIChzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBsZWdhY3kgdG9rZW4gYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBjaGVja0F1dGhTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgXG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfVVJMfS9hdXRoL21lYCk7XG4gICAgICAgIFxuICAgICAgICBzZXRVc2VyKHtcbiAgICAgICAgICBpZDogZGF0YS5faWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfHwgJycsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgICAgZGVsZXRlIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ107XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja0F1dGhTdGF0dXMoKTtcbiAgfSwgW0FQSV9VUkwsIHNlc3Npb24sIHN0YXR1c10pO1xuXG4gIGNvbnN0IGxvZ2luID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9naW5gLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgbG9nZ2luZyBpbic7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvZ2luV2l0aEdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2lnbkluKCdnb29nbGUnLCB7IGNhbGxiYWNrVXJsOiAnLycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIGxvZ2luIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgbG9nZ2luZyBpbiB3aXRoIEdvb2dsZScpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWdpc3RlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvcmVnaXN0ZXJgLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgcmVnaXN0ZXJpbmcnO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2F1dGhlbnRpY2F0ZWQnKSB7XG4gICAgICAvLyBGb3IgTmV4dEF1dGggbG9nb3V0XG4gICAgICBhd2FpdCBzaWduT3V0KHsgY2FsbGJhY2tVcmw6ICcvbG9naW4nIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgbGVnYWN5IGxvZ291dFxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9nb3V0YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTtcbiAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChgJHtBUElfVVJMfS91c2Vycy9wcm9maWxlYCwgZGF0YSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldFVzZXIocHJldlVzZXIgPT4ge1xuICAgICAgICAgIGlmICghcHJldlVzZXIpIHJldHVybiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wcmV2VXNlcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSB8fCBwcmV2VXNlci5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhciB8fCBwcmV2VXNlci5hdmF0YXIsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8ICdFcnJvciB1cGRhdGluZyBwcm9maWxlJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIGxvZ2luLFxuICAgICAgICBsb2dpbldpdGhHb29nbGUsXG4gICAgICAgIHJlZ2lzdGVyLFxuICAgICAgICBsb2dvdXQsXG4gICAgICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJheGlvcyIsInVzZVJvdXRlciIsInVzZVNlc3Npb24iLCJzaWduSW4iLCJzaWduT3V0IiwiQXV0aENvbnRleHQiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNMb2FkaW5nIiwibG9naW4iLCJsb2dpbldpdGhHb29nbGUiLCJyZWdpc3RlciIsImxvZ291dCIsInVwZGF0ZVByb2ZpbGUiLCJ1c2VBdXRoIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzZXRVc2VyIiwic2V0SXNMb2FkaW5nIiwicm91dGVyIiwiZGF0YSIsInNlc3Npb24iLCJzdGF0dXMiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImF2YXRhciIsImltYWdlIiwiYWNjZXNzVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2hlY2tBdXRoU3RhdHVzIiwidG9rZW4iLCJnZXRJdGVtIiwiZ2V0IiwiX2lkIiwiZXJyb3IiLCJyZW1vdmVJdGVtIiwicGFzc3dvcmQiLCJwb3N0IiwicHVzaCIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsIkVycm9yIiwiY2FsbGJhY2tVcmwiLCJjb25zb2xlIiwicGF0Y2giLCJwcmV2VXNlciIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.tsx\n");

/***/ }),

/***/ "./src/contexts/ChatContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/ChatContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatProvider: () => (/* binding */ ChatProvider),\n/* harmony export */   FileType: () => (/* binding */ FileType),\n/* harmony export */   useChat: () => (/* binding */ useChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthContext */ \"./src/contexts/AuthContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nvar FileType;\n(function(FileType) {\n    FileType[\"IMAGE\"] = \"image\";\n    FileType[\"VIDEO\"] = \"video\";\n    FileType[\"DOCUMENT\"] = \"document\";\n    FileType[\"AUDIO\"] = \"audio\";\n})(FileType || (FileType = {}));\nconst ChatContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    activeChat: null,\n    messages: [],\n    rooms: [],\n    onlineUsers: {},\n    users: [],\n    typingUsers: {},\n    isLoading: true,\n    unreadMessages: {},\n    uploadingFiles: {},\n    setActiveChat: ()=>{},\n    sendMessage: async ()=>{},\n    createRoom: async ()=>({\n            _id: \"\",\n            name: \"\",\n            creator: {\n                id: \"\",\n                _id: \"\",\n                name: \"\",\n                email: \"\",\n                avatar: \"\"\n            },\n            members: [],\n            isPrivate: false,\n            createdAt: \"\"\n        }),\n    updateRoom: async ()=>({\n            _id: \"\",\n            name: \"\",\n            creator: {\n                id: \"\",\n                _id: \"\",\n                name: \"\",\n                email: \"\",\n                avatar: \"\"\n            },\n            members: [],\n            isPrivate: false,\n            createdAt: \"\"\n        }),\n    joinRoom: async ()=>{},\n    leaveRoom: async ()=>{},\n    setTyping: ()=>{},\n    clearChatHistory: async ()=>({\n            success: false,\n            message: \"Not implemented\"\n        })\n});\nconst useChat = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatContext);\nconst ChatProvider = ({ children })=>{\n    const { user, isAuthenticated } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [activeChat, setActiveChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rooms, setRooms] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [typingUsers, setTypingUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [socketConnected, setSocketConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadMessages, setUnreadMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploadingFiles, setUploadingFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [selectedFile, setSelectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep the ref in sync with the state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        currentActiveChatRef.current = activeChat;\n    }, [\n        activeChat\n    ]);\n    const API_URL = \"http://localhost:3001\" || 0;\n    // Initialize socket connection when authenticated\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated || !user) {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n            return;\n        }\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n        socketRef.current = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(API_URL, {\n            auth: {\n                token\n            },\n            withCredentials: true,\n            // Aumentar el tiempo de espera para permitir envío de archivos grandes\n            timeout: 60000 // aumentar el tiempo de espera a 60 segundos\n        });\n        // Socket event listeners\n        socketRef.current.on(\"connect\", ()=>{\n            console.log(\"Socket connected\");\n            setSocketConnected(true);\n        });\n        socketRef.current.on(\"new_message\", (message)=>{\n            const activeChat = currentActiveChatRef.current;\n            // Identificar la clave de chat para seguimiento de notificaciones\n            let chatKey = \"\";\n            if (message.room) {\n                chatKey = `room_${message.room}`;\n            } else if (message.sender._id !== user.id) {\n                chatKey = `user_${message.sender._id}`;\n            } else if (message.recipient) {\n                chatKey = `user_${message.recipient}`;\n            }\n            // Solo agregar el mensaje si es relevante para el chat activo\n            if (activeChat?.type === \"private\" && (message.sender._id === activeChat.id && message.recipient === user.id || message.sender._id === user.id && message.recipient === activeChat.id) || activeChat?.type === \"room\" && message.room === activeChat.id) {\n                setMessages((prev)=>[\n                        ...prev,\n                        message\n                    ]);\n            } else if (message.sender._id !== user.id && chatKey) {\n                console.log(\"New message notification:\", chatKey, message);\n                setUnreadMessages((prev)=>({\n                        ...prev,\n                        [chatKey]: (prev[chatKey] || 0) + 1\n                    }));\n            }\n        });\n        socketRef.current.on(\"user_status_change\", ({ userId, isOnline })=>{\n            setOnlineUsers((prev)=>({\n                    ...prev,\n                    [userId]: isOnline\n                }));\n        });\n        socketRef.current.on(\"typing_indicator\", (data)=>{\n            const activeChat = currentActiveChatRef.current;\n            if (activeChat?.type === \"private\" && data.senderId === activeChat.id || activeChat?.type === \"room\" && data.roomId === activeChat.id) {\n                // Almacenar nombre en lugar de solo la bandera booleana\n                setTypingUsers((prev)=>({\n                        ...prev,\n                        [data.userId]: data.isTyping ? data.userName : false\n                    }));\n            }\n        });\n        socketRef.current.on(\"message_read\", ({ messageId })=>{\n            setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                        ...msg,\n                        isRead: true\n                    } : msg));\n        });\n        // Handle new room creations\n        socketRef.current.on(\"new_room\", (room)=>{\n            console.log(\"New room received:\", room);\n            setRooms((prev)=>{\n                // Check if the room already exists\n                const exists = prev.some((r)=>r._id === room._id);\n                if (exists) return prev;\n                return [\n                    ...prev,\n                    room\n                ];\n            });\n        });\n        // Handle room updates (members added/removed)\n        socketRef.current.on(\"room_updated\", (room)=>{\n            console.log(\"Room updated:\", room);\n            if (room.removed) {\n                // If this room was removed for this user, remove it from the list\n                setRooms((prev)=>prev.filter((r)=>r._id !== room._id));\n                // If active chat is this room, clear it\n                const activeChat = currentActiveChatRef.current;\n                if (activeChat?.type === \"room\" && activeChat.id === room._id) {\n                    setActiveChat(null);\n                }\n            } else {\n                // Update the room in the list\n                setRooms((prev)=>prev.map((r)=>r._id === room._id ? room : r));\n            }\n        });\n        socketRef.current.on(\"disconnect\", ()=>{\n            console.log(\"Socket disconnected\");\n            setSocketConnected(false);\n        });\n        return ()=>{\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n        };\n    }, [\n        isAuthenticated,\n        user,\n        API_URL\n    ]);\n    // Load initial data: users and rooms\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated) {\n            setIsLoading(false);\n            return;\n        }\n        const fetchInitialData = async ()=>{\n            try {\n                setIsLoading(true);\n                const [usersResponse, roomsResponse] = await Promise.all([\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/users`),\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/rooms/my`)\n                ]);\n                setUsers(usersResponse.data);\n                setRooms(roomsResponse.data);\n                // Set initial online status\n                const initialOnlineStatus = {};\n                usersResponse.data.forEach((user)=>{\n                    initialOnlineStatus[user._id] = user.isOnline || false;\n                });\n                setOnlineUsers(initialOnlineStatus);\n            } catch (error) {\n                console.error(\"Error fetching initial data:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchInitialData();\n    }, [\n        isAuthenticated,\n        API_URL\n    ]);\n    // Cuando se inicia el socket y se conecta, solicitamos el estado actual de mensajes no leídos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (socketConnected && socketRef.current && user) {\n            // Solicitar mensajes no leídos al servidor\n            socketRef.current.emit(\"get_unread_messages\");\n            // Escuchar la respuesta con el recuento de mensajes no leídos\n            socketRef.current.on(\"unread_messages_count\", (unreadCounts)=>{\n                console.log(\"Received unread counts:\", unreadCounts);\n                setUnreadMessages(unreadCounts);\n            });\n            return ()=>{\n                socketRef.current?.off(\"unread_messages_count\");\n            };\n        }\n    }, [\n        socketConnected,\n        user\n    ]);\n    // Asegurarse de que los mensajes se marquen como leídos cuando se abre un chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeChat && socketRef.current) {\n            // Crear una clave para el chat actual\n            const chatKey = activeChat.type === \"private\" ? `user_${activeChat.id}` : `room_${activeChat.id}`;\n            // Resetear el contador de mensajes no leídos para este chat\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n            // Notificar al servidor que los mensajes se han leído\n            socketRef.current.emit(\"mark_messages_read\", {\n                chatId: activeChat.id,\n                chatType: activeChat.type\n            });\n        }\n    }, [\n        activeChat\n    ]);\n    // Función para manejar el cambio de chat activo\n    const handleActiveChatChange = (chat)=>{\n        // Limpiar las notificaciones no leídas cuando se activa un chat\n        if (chat) {\n            const chatKey = chat.type === \"private\" ? `user_${chat.id}` : `room_${chat.id}`;\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n        }\n        setActiveChat(chat);\n    };\n    // Cargar mensajes cuando se selecciona un chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeChat || !user || !isAuthenticated) {\n            setMessages([]);\n            return;\n        }\n        setIsLoading(true);\n        const fetchMessages = async ()=>{\n            try {\n                let endpoint = \"\";\n                if (activeChat.type === \"private\") {\n                    endpoint = `${API_URL}/chats/direct/${activeChat.id}`;\n                    // Join user room for direct messages\n                    socketRef.current?.emit(\"join_room\", {\n                        userId: activeChat.id\n                    });\n                } else {\n                    endpoint = `${API_URL}/chats/room/${activeChat.id}`;\n                    // Join room\n                    socketRef.current?.emit(\"join_room\", {\n                        roomId: activeChat.id\n                    });\n                }\n                const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n                setMessages(response.data);\n                // Marcar los mensajes como leídos en el servidor\n                if (response.data.length > 0) {\n                    socketRef.current?.emit(\"mark_messages_read\", {\n                        chatType: activeChat.type,\n                        chatId: activeChat.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error fetching messages:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchMessages();\n        return ()=>{\n            // Clean up - leave rooms\n            if (activeChat.type === \"room\") {\n                socketRef.current?.emit(\"leave_room\", {\n                    roomId: activeChat.id\n                });\n            }\n        };\n    }, [\n        activeChat,\n        user,\n        isAuthenticated,\n        API_URL\n    ]);\n    const sendMessage = async (content, attachments = [])=>{\n        if (!activeChat || !isAuthenticated || !socketRef.current) {\n            return;\n        }\n        // Inicializar estado de carga para cada archivo\n        const newUploadingFiles = {\n            ...uploadingFiles\n        };\n        // Para archivos grandes, especialmente videos, los enviamos directamente sin fragmentar\n        let processedAttachments = [];\n        // Asignar IDs temporales para seguimiento\n        const attachmentsWithIds = attachments.map((attachment)=>({\n                ...attachment,\n                tempId: `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`\n            }));\n        // Establecer el estado inicial de carga para cada archivo\n        attachmentsWithIds.forEach((attachment)=>{\n            newUploadingFiles[attachment.tempId] = {\n                progress: 0\n            };\n        });\n        setUploadingFiles(newUploadingFiles);\n        try {\n            for (const attachment of attachmentsWithIds){\n                // Actualizar progreso\n                setUploadingFiles((prev)=>({\n                        ...prev,\n                        [attachment.tempId]: {\n                            progress: 10,\n                            error: undefined\n                        }\n                    }));\n                // Si es un video o archivo grande, lo enviamos como un único archivo\n                if (attachment.fileType === \"video\" || attachment.size && attachment.size > 5 * 1024 * 1024) {\n                    processedAttachments.push({\n                        ...attachment,\n                        // Agregamos una bandera para indicar que debe ser almacenado como archivo grande\n                        isLargeFile: true\n                    });\n                    // Actualizar progreso\n                    setUploadingFiles((prev)=>({\n                            ...prev,\n                            [attachment.tempId]: {\n                                progress: 50,\n                                error: undefined\n                            }\n                        }));\n                } else {\n                    // Para otros archivos pequeños, los enviamos tal como están\n                    processedAttachments.push(attachment);\n                }\n            }\n            const messageData = {\n                content,\n                attachments: processedAttachments,\n                ...activeChat.type === \"private\" ? {\n                    recipientId: activeChat.id\n                } : {\n                    roomId: activeChat.id\n                }\n            };\n            // Actualizar progreso para todos los archivos\n            const updatedProgress = {\n                ...uploadingFiles\n            };\n            attachmentsWithIds.forEach((attachment)=>{\n                updatedProgress[attachment.tempId] = {\n                    progress: 75,\n                    error: undefined\n                };\n            });\n            setUploadingFiles(updatedProgress);\n            // Enviar el mensaje a través del socket\n            socketRef.current.emit(\"send_message\", messageData, (response)=>{\n                if (response.success) {\n                    // Éxito - quitar archivos del estado de carga\n                    const finalProgress = {\n                        ...uploadingFiles\n                    };\n                    attachmentsWithIds.forEach((attachment)=>{\n                        delete finalProgress[attachment.tempId];\n                    });\n                    setUploadingFiles(finalProgress);\n                } else {\n                    // Error - actualizar estado con el error\n                    const errorProgress = {\n                        ...uploadingFiles\n                    };\n                    attachmentsWithIds.forEach((attachment)=>{\n                        errorProgress[attachment.tempId] = {\n                            progress: 0,\n                            error: response.error || \"Error al enviar el mensaje\"\n                        };\n                    });\n                    setUploadingFiles(errorProgress);\n                }\n            });\n            // Limpiar formulario después de enviar\n            if (fileInputRef.current) {\n                fileInputRef.current.value = \"\";\n            }\n            setSelectedFile(null);\n        } catch (error) {\n            console.error(\"Error al procesar archivos:\", error);\n            // Actualizar estado con el error\n            const errorProgress = {\n                ...uploadingFiles\n            };\n            attachmentsWithIds.forEach((attachment)=>{\n                errorProgress[attachment.tempId] = {\n                    progress: 0,\n                    error: error.message || \"Error al procesar archivos\"\n                };\n            });\n            setUploadingFiles(errorProgress);\n        }\n    };\n    const createRoom = async (name, description = \"\", isPrivate = false, members = [])=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms`, {\n                name,\n                description,\n                isPrivate,\n                members\n            });\n            // No need to manually add to rooms array, the socket event will handle it\n            return data;\n        } catch (error) {\n            console.error(\"Error creating room:\", error);\n            throw error;\n        }\n    };\n    const updateRoom = async (roomId, updateData)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].put(`${API_URL}/rooms/${roomId}`, updateData);\n            // Update the room in the local state to immediately reflect changes\n            setRooms((prevRooms)=>prevRooms.map((room)=>room._id === roomId ? {\n                        ...room,\n                        ...data\n                    } : room));\n            return data;\n        } catch (error) {\n            console.error(\"Error updating room:\", error);\n            throw error;\n        }\n    };\n    const joinRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin adding others)\n            // Otherwise use current user's ID (for self-joining)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error joining room:\", error);\n            throw error;\n        }\n    };\n    const leaveRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin removing others)\n            // Otherwise use current user's ID (for self-leaving)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error leaving room:\", error);\n            throw error;\n        }\n    };\n    const setTyping = (isTyping)=>{\n        if (!activeChat || !socketRef.current) return;\n        const typingData = {\n            isTyping,\n            ...activeChat.type === \"private\" ? {\n                recipientId: activeChat.id\n            } : {\n                roomId: activeChat.id\n            }\n        };\n        socketRef.current.emit(\"typing\", typingData);\n    };\n    const clearChatHistory = async (recipientId)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/direct/${recipientId}`);\n            return {\n                success: true,\n                message: \"Chat history cleared successfully\"\n            };\n        } catch (error) {\n            console.error(\"Error clearing chat history:\", error);\n            return {\n                success: false,\n                message: \"Failed to clear chat history\"\n            };\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatContext.Provider, {\n        value: {\n            activeChat,\n            messages,\n            rooms,\n            users,\n            onlineUsers,\n            typingUsers,\n            isLoading,\n            unreadMessages,\n            uploadingFiles,\n            setActiveChat: handleActiveChatChange,\n            sendMessage,\n            createRoom,\n            updateRoom,\n            joinRoom,\n            leaveRoom,\n            setTyping,\n            clearChatHistory\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/ChatContext.tsx\",\n        lineNumber: 604,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvQ2hhdENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNGO0FBQ3hDO0FBQ3BCO0FBQ2M7O1VBVzVCUzs7Ozs7R0FBQUEsYUFBQUE7QUFpRVosTUFBTUMsNEJBQWNULG9EQUFhQSxDQUFrQjtJQUNqRFUsWUFBWTtJQUNaQyxVQUFVLEVBQUU7SUFDWkMsT0FBTyxFQUFFO0lBQ1RDLGFBQWEsQ0FBQztJQUNkQyxPQUFPLEVBQUU7SUFDVEMsYUFBYSxDQUFDO0lBQ2RDLFdBQVc7SUFDWEMsZ0JBQWdCLENBQUM7SUFDakJDLGdCQUFnQixDQUFDO0lBQ2pCQyxlQUFlLEtBQU87SUFDdEJDLGFBQWEsV0FBYTtJQUMxQkMsWUFBWSxVQUFhO1lBQ3ZCQyxLQUFLO1lBQ0xDLE1BQU07WUFDTkMsU0FBUztnQkFBRUMsSUFBSTtnQkFBSUgsS0FBSztnQkFBSUMsTUFBTTtnQkFBSUcsT0FBTztnQkFBSUMsUUFBUTtZQUFHO1lBQzVEQyxTQUFTLEVBQUU7WUFDWEMsV0FBVztZQUNYQyxXQUFXO1FBQ2I7SUFDQUMsWUFBWSxVQUFhO1lBQ3ZCVCxLQUFLO1lBQ0xDLE1BQU07WUFDTkMsU0FBUztnQkFBRUMsSUFBSTtnQkFBSUgsS0FBSztnQkFBSUMsTUFBTTtnQkFBSUcsT0FBTztnQkFBSUMsUUFBUTtZQUFHO1lBQzVEQyxTQUFTLEVBQUU7WUFDWEMsV0FBVztZQUNYQyxXQUFXO1FBQ2I7SUFDQUUsVUFBVSxXQUFhO0lBQ3ZCQyxXQUFXLFdBQWE7SUFDeEJDLFdBQVcsS0FBTztJQUNsQkMsa0JBQWtCLFVBQWE7WUFBRUMsU0FBUztZQUFPQyxTQUFTO1FBQWtCO0FBQzlFO0FBRU8sTUFBTUMsVUFBVSxJQUFNckMsaURBQVVBLENBQUNRLGFBQWE7QUFFOUMsTUFBTThCLGVBQXdELENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQ2hGLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxlQUFlLEVBQUUsR0FBR25DLHFEQUFPQTtJQUN6QyxNQUFNLENBQUNHLFlBQVlTLGNBQWMsR0FBR2pCLCtDQUFRQSxDQUFrRDtJQUM5RixNQUFNLENBQUNTLFVBQVVnQyxZQUFZLEdBQUd6QywrQ0FBUUEsQ0FBWSxFQUFFO0lBQ3RELE1BQU0sQ0FBQ1UsT0FBT2dDLFNBQVMsR0FBRzFDLCtDQUFRQSxDQUFTLEVBQUU7SUFDN0MsTUFBTSxDQUFDWSxPQUFPK0IsU0FBUyxHQUFHM0MsK0NBQVFBLENBQVMsRUFBRTtJQUM3QyxNQUFNLENBQUNXLGFBQWFpQyxlQUFlLEdBQUc1QywrQ0FBUUEsQ0FBMEIsQ0FBQztJQUN6RSxNQUFNLENBQUNhLGFBQWFnQyxlQUFlLEdBQUc3QywrQ0FBUUEsQ0FBbUMsQ0FBQztJQUNsRixNQUFNLENBQUNjLFdBQVdnQyxhQUFhLEdBQUc5QywrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUMrQyxpQkFBaUJDLG1CQUFtQixHQUFHaEQsK0NBQVFBLENBQUM7SUFDdkQsTUFBTSxDQUFDZSxnQkFBZ0JrQyxrQkFBa0IsR0FBR2pELCtDQUFRQSxDQUF5QixDQUFDO0lBQzlFLE1BQU0sQ0FBQ2dCLGdCQUFnQmtDLGtCQUFrQixHQUFHbEQsK0NBQVFBLENBQTBELENBQUM7SUFDL0csTUFBTSxDQUFDbUQsY0FBY0MsZ0JBQWdCLEdBQUdwRCwrQ0FBUUEsQ0FBYztJQUU5RCxNQUFNcUQsWUFBWW5ELDZDQUFNQSxDQUFnQjtJQUN4QyxNQUFNb0QsdUJBQXVCcEQsNkNBQU1BLENBQUNNO0lBQ3BDLE1BQU0rQyxlQUFlckQsNkNBQU1BLENBQW1CO0lBRTlDLHNDQUFzQztJQUN0Q0QsZ0RBQVNBLENBQUM7UUFDUnFELHFCQUFxQkUsT0FBTyxHQUFHaEQ7SUFDakMsR0FBRztRQUFDQTtLQUFXO0lBRWYsTUFBTWlELFVBQVVDLHVCQUErQixJQUFJO0lBRW5ELGtEQUFrRDtJQUNsRHpELGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDdUMsbUJBQW1CLENBQUNELE1BQU07WUFDN0IsSUFBSWMsVUFBVUcsT0FBTyxFQUFFO2dCQUNyQkgsVUFBVUcsT0FBTyxDQUFDSyxVQUFVO2dCQUM1QlIsVUFBVUcsT0FBTyxHQUFHO1lBQ3RCO1lBQ0FSLG1CQUFtQjtZQUNuQjtRQUNGO1FBRUEsTUFBTWMsUUFBUUMsYUFBYUMsT0FBTyxDQUFDO1FBRW5DLElBQUksQ0FBQ0YsT0FBTztRQUVaVCxVQUFVRyxPQUFPLEdBQUdyRCxvREFBRUEsQ0FBQ3NELFNBQVM7WUFDOUJRLE1BQU07Z0JBQUVIO1lBQU07WUFDZEksaUJBQWlCO1lBQ2pCLHVFQUF1RTtZQUN2RUMsU0FBUyxNQUFNLDZDQUE2QztRQUM5RDtRQUVBLHlCQUF5QjtRQUN6QmQsVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMsV0FBVztZQUM5QkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1p0QixtQkFBbUI7UUFDckI7UUFFQUssVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMsZUFBZSxDQUFDakM7WUFDbkMsTUFBTTNCLGFBQWE4QyxxQkFBcUJFLE9BQU87WUFFL0Msa0VBQWtFO1lBQ2xFLElBQUllLFVBQVU7WUFDZCxJQUFJcEMsUUFBUXFDLElBQUksRUFBRTtnQkFDaEJELFVBQVUsQ0FBQyxLQUFLLEVBQUVwQyxRQUFRcUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsT0FBTyxJQUFJckMsUUFBUXNDLE1BQU0sQ0FBQ3JELEdBQUcsS0FBS21CLEtBQUtoQixFQUFFLEVBQUU7Z0JBQ3pDZ0QsVUFBVSxDQUFDLEtBQUssRUFBRXBDLFFBQVFzQyxNQUFNLENBQUNyRCxHQUFHLENBQUMsQ0FBQztZQUN4QyxPQUFPLElBQUllLFFBQVF1QyxTQUFTLEVBQUU7Z0JBQzVCSCxVQUFVLENBQUMsS0FBSyxFQUFFcEMsUUFBUXVDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZDO1lBRUEsOERBQThEO1lBQzlELElBQ0UsWUFBYUMsU0FBUyxhQUNuQixTQUFTRixNQUFNLENBQUNyRCxHQUFHLEtBQUtaLFdBQVdlLEVBQUUsSUFBSVksUUFBUXVDLFNBQVMsS0FBS25DLEtBQUtoQixFQUFFLElBQ3JFWSxRQUFRc0MsTUFBTSxDQUFDckQsR0FBRyxLQUFLbUIsS0FBS2hCLEVBQUUsSUFBSVksUUFBUXVDLFNBQVMsS0FBS2xFLFdBQVdlLEVBQUUsS0FDeEVmLFlBQVltRSxTQUFTLFVBQVV4QyxRQUFRcUMsSUFBSSxLQUFLaEUsV0FBV2UsRUFBRSxFQUM5RDtnQkFDQWtCLFlBQVltQyxDQUFBQSxPQUFROzJCQUFJQTt3QkFBTXpDO3FCQUFRO1lBQ3hDLE9BRUssSUFBSUEsUUFBUXNDLE1BQU0sQ0FBQ3JELEdBQUcsS0FBS21CLEtBQUtoQixFQUFFLElBQUlnRCxTQUFTO2dCQUNsREYsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QkMsU0FBU3BDO2dCQUNsRGMsa0JBQWtCMkIsQ0FBQUEsT0FBUzt3QkFDekIsR0FBR0EsSUFBSTt3QkFDUCxDQUFDTCxRQUFRLEVBQUUsQ0FBQ0ssSUFBSSxDQUFDTCxRQUFRLElBQUksS0FBSztvQkFDcEM7WUFDRjtRQUNGO1FBRUFsQixVQUFVRyxPQUFPLENBQUNZLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFUyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtZQUM5RGxDLGVBQWVnQyxDQUFBQSxPQUFTO29CQUFFLEdBQUdBLElBQUk7b0JBQUUsQ0FBQ0MsT0FBTyxFQUFFQztnQkFBUztRQUN4RDtRQUVBekIsVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMsb0JBQW9CLENBQUNXO1lBQ3hDLE1BQU12RSxhQUFhOEMscUJBQXFCRSxPQUFPO1lBQy9DLElBQ0UsWUFBYW1CLFNBQVMsYUFBYUksS0FBS0MsUUFBUSxLQUFLeEUsV0FBV2UsRUFBRSxJQUNqRWYsWUFBWW1FLFNBQVMsVUFBVUksS0FBS0UsTUFBTSxLQUFLekUsV0FBV2UsRUFBRSxFQUM3RDtnQkFDQSx3REFBd0Q7Z0JBQ3hEc0IsZUFBZStCLENBQUFBLE9BQVM7d0JBQ3RCLEdBQUdBLElBQUk7d0JBQ1AsQ0FBQ0csS0FBS0YsTUFBTSxDQUFDLEVBQUVFLEtBQUtHLFFBQVEsR0FBR0gsS0FBS0ksUUFBUSxHQUFHO29CQUNqRDtZQUNGO1FBQ0Y7UUFFQTlCLFVBQVVHLE9BQU8sQ0FBQ1ksRUFBRSxDQUFDLGdCQUFnQixDQUFDLEVBQUVnQixTQUFTLEVBQUU7WUFDakQzQyxZQUFZbUMsQ0FBQUEsT0FDVkEsS0FBS1MsR0FBRyxDQUFDQyxDQUFBQSxNQUNQQSxJQUFJbEUsR0FBRyxLQUFLZ0UsWUFBWTt3QkFBRSxHQUFHRSxHQUFHO3dCQUFFQyxRQUFRO29CQUFLLElBQUlEO1FBR3pEO1FBRUEsNEJBQTRCO1FBQzVCakMsVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMsWUFBWSxDQUFDSTtZQUNoQ0gsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQkU7WUFDbEM5QixTQUFTa0MsQ0FBQUE7Z0JBQ1AsbUNBQW1DO2dCQUNuQyxNQUFNWSxTQUFTWixLQUFLYSxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUV0RSxHQUFHLEtBQUtvRCxLQUFLcEQsR0FBRztnQkFDaEQsSUFBSW9FLFFBQVEsT0FBT1o7Z0JBQ25CLE9BQU87dUJBQUlBO29CQUFNSjtpQkFBSztZQUN4QjtRQUNGO1FBRUEsOENBQThDO1FBQzlDbkIsVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMsZ0JBQWdCLENBQUNJO1lBQ3BDSCxRQUFRQyxHQUFHLENBQUMsaUJBQWlCRTtZQUM3QixJQUFJQSxLQUFLbUIsT0FBTyxFQUFFO2dCQUNoQixrRUFBa0U7Z0JBQ2xFakQsU0FBU2tDLENBQUFBLE9BQVFBLEtBQUtnQixNQUFNLENBQUNGLENBQUFBLElBQUtBLEVBQUV0RSxHQUFHLEtBQUtvRCxLQUFLcEQsR0FBRztnQkFFcEQsd0NBQXdDO2dCQUN4QyxNQUFNWixhQUFhOEMscUJBQXFCRSxPQUFPO2dCQUMvQyxJQUFJaEQsWUFBWW1FLFNBQVMsVUFBVW5FLFdBQVdlLEVBQUUsS0FBS2lELEtBQUtwRCxHQUFHLEVBQUU7b0JBQzdESCxjQUFjO2dCQUNoQjtZQUNGLE9BQU87Z0JBQ0wsOEJBQThCO2dCQUM5QnlCLFNBQVNrQyxDQUFBQSxPQUFRQSxLQUFLUyxHQUFHLENBQUNLLENBQUFBLElBQUtBLEVBQUV0RSxHQUFHLEtBQUtvRCxLQUFLcEQsR0FBRyxHQUFHb0QsT0FBT2tCO1lBQzdEO1FBQ0Y7UUFFQXJDLFVBQVVHLE9BQU8sQ0FBQ1ksRUFBRSxDQUFDLGNBQWM7WUFDakNDLFFBQVFDLEdBQUcsQ0FBQztZQUNadEIsbUJBQW1CO1FBQ3JCO1FBRUEsT0FBTztZQUNMLElBQUlLLFVBQVVHLE9BQU8sRUFBRTtnQkFDckJILFVBQVVHLE9BQU8sQ0FBQ0ssVUFBVTtnQkFDNUJSLFVBQVVHLE9BQU8sR0FBRztZQUN0QjtZQUNBUixtQkFBbUI7UUFDckI7SUFDRixHQUFHO1FBQUNSO1FBQWlCRDtRQUFNa0I7S0FBUTtJQUVuQyxxQ0FBcUM7SUFDckN4RCxnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQ3VDLGlCQUFpQjtZQUNwQk0sYUFBYTtZQUNiO1FBQ0Y7UUFFQSxNQUFNK0MsbUJBQW1CO1lBQ3ZCLElBQUk7Z0JBQ0YvQyxhQUFhO2dCQUViLE1BQU0sQ0FBQ2dELGVBQWVDLGNBQWMsR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7b0JBQ3ZEN0YsaURBQVMsQ0FBQyxDQUFDLEVBQUVxRCxRQUFRLE1BQU0sQ0FBQztvQkFDNUJyRCxpREFBUyxDQUFDLENBQUMsRUFBRXFELFFBQVEsU0FBUyxDQUFDO2lCQUNoQztnQkFFRGQsU0FBU21ELGNBQWNmLElBQUk7Z0JBQzNCckMsU0FBU3FELGNBQWNoQixJQUFJO2dCQUUzQiw0QkFBNEI7Z0JBQzVCLE1BQU1vQixzQkFBK0MsQ0FBQztnQkFDdERMLGNBQWNmLElBQUksQ0FBQ3FCLE9BQU8sQ0FBQyxDQUFDN0Q7b0JBQzFCNEQsbUJBQW1CLENBQUM1RCxLQUFLbkIsR0FBRyxDQUFFLEdBQUdtQixLQUFLdUMsUUFBUSxJQUFJO2dCQUNwRDtnQkFDQWxDLGVBQWV1RDtZQUVqQixFQUFFLE9BQU9FLE9BQU87Z0JBQ2RoQyxRQUFRZ0MsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDaEQsU0FBVTtnQkFDUnZELGFBQWE7WUFDZjtRQUNGO1FBRUErQztJQUNGLEdBQUc7UUFBQ3JEO1FBQWlCaUI7S0FBUTtJQUU3Qiw4RkFBOEY7SUFDOUZ4RCxnREFBU0EsQ0FBQztRQUNSLElBQUk4QyxtQkFBbUJNLFVBQVVHLE9BQU8sSUFBSWpCLE1BQU07WUFDaEQsMkNBQTJDO1lBQzNDYyxVQUFVRyxPQUFPLENBQUM4QyxJQUFJLENBQUM7WUFFdkIsOERBQThEO1lBQzlEakQsVUFBVUcsT0FBTyxDQUFDWSxFQUFFLENBQUMseUJBQXlCLENBQUNtQztnQkFDN0NsQyxRQUFRQyxHQUFHLENBQUMsMkJBQTJCaUM7Z0JBQ3ZDdEQsa0JBQWtCc0Q7WUFDcEI7WUFFQSxPQUFPO2dCQUNMbEQsVUFBVUcsT0FBTyxFQUFFZ0QsSUFBSTtZQUN6QjtRQUNGO0lBQ0YsR0FBRztRQUFDekQ7UUFBaUJSO0tBQUs7SUFFMUIsK0VBQStFO0lBQy9FdEMsZ0RBQVNBLENBQUM7UUFDUixJQUFJTyxjQUFjNkMsVUFBVUcsT0FBTyxFQUFFO1lBQ25DLHNDQUFzQztZQUN0QyxNQUFNZSxVQUFVL0QsV0FBV21FLElBQUksS0FBSyxZQUNoQyxDQUFDLEtBQUssRUFBRW5FLFdBQVdlLEVBQUUsQ0FBQyxDQUFDLEdBQ3ZCLENBQUMsS0FBSyxFQUFFZixXQUFXZSxFQUFFLENBQUMsQ0FBQztZQUUzQiw0REFBNEQ7WUFDNUQwQixrQkFBa0IyQixDQUFBQSxPQUFTO29CQUN6QixHQUFHQSxJQUFJO29CQUNQLENBQUNMLFFBQVEsRUFBRTtnQkFDYjtZQUVBLHNEQUFzRDtZQUN0RGxCLFVBQVVHLE9BQU8sQ0FBQzhDLElBQUksQ0FBQyxzQkFBc0I7Z0JBQzNDRyxRQUFRakcsV0FBV2UsRUFBRTtnQkFDckJtRixVQUFVbEcsV0FBV21FLElBQUk7WUFDM0I7UUFDRjtJQUNGLEdBQUc7UUFBQ25FO0tBQVc7SUFFZixnREFBZ0Q7SUFDaEQsTUFBTW1HLHlCQUF5QixDQUFDQztRQUM5QixnRUFBZ0U7UUFDaEUsSUFBSUEsTUFBTTtZQUNSLE1BQU1yQyxVQUFVcUMsS0FBS2pDLElBQUksS0FBSyxZQUFZLENBQUMsS0FBSyxFQUFFaUMsS0FBS3JGLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUVxRixLQUFLckYsRUFBRSxDQUFDLENBQUM7WUFDL0UwQixrQkFBa0IyQixDQUFBQSxPQUFTO29CQUN6QixHQUFHQSxJQUFJO29CQUNQLENBQUNMLFFBQVEsRUFBRTtnQkFDYjtRQUNGO1FBRUF0RCxjQUFjMkY7SUFDaEI7SUFFQSwrQ0FBK0M7SUFDL0MzRyxnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQ08sY0FBYyxDQUFDK0IsUUFBUSxDQUFDQyxpQkFBaUI7WUFDNUNDLFlBQVksRUFBRTtZQUNkO1FBQ0Y7UUFFQUssYUFBYTtRQUViLE1BQU0rRCxnQkFBZ0I7WUFDcEIsSUFBSTtnQkFDRixJQUFJQyxXQUFXO2dCQUVmLElBQUl0RyxXQUFXbUUsSUFBSSxLQUFLLFdBQVc7b0JBQ2pDbUMsV0FBVyxDQUFDLEVBQUVyRCxRQUFRLGNBQWMsRUFBRWpELFdBQVdlLEVBQUUsQ0FBQyxDQUFDO29CQUVyRCxxQ0FBcUM7b0JBQ3JDOEIsVUFBVUcsT0FBTyxFQUFFOEMsS0FBSyxhQUFhO3dCQUFFekIsUUFBUXJFLFdBQVdlLEVBQUU7b0JBQUM7Z0JBQy9ELE9BQU87b0JBQ0x1RixXQUFXLENBQUMsRUFBRXJELFFBQVEsWUFBWSxFQUFFakQsV0FBV2UsRUFBRSxDQUFDLENBQUM7b0JBRW5ELFlBQVk7b0JBQ1o4QixVQUFVRyxPQUFPLEVBQUU4QyxLQUFLLGFBQWE7d0JBQUVyQixRQUFRekUsV0FBV2UsRUFBRTtvQkFBQztnQkFDL0Q7Z0JBRUEsTUFBTXdGLFdBQVcsTUFBTTNHLGlEQUFTLENBQUMwRztnQkFDakNyRSxZQUFZc0UsU0FBU2hDLElBQUk7Z0JBRXpCLGlEQUFpRDtnQkFDakQsSUFBSWdDLFNBQVNoQyxJQUFJLENBQUNpQyxNQUFNLEdBQUcsR0FBRztvQkFDNUIzRCxVQUFVRyxPQUFPLEVBQUU4QyxLQUFLLHNCQUFzQjt3QkFDNUNJLFVBQVVsRyxXQUFXbUUsSUFBSTt3QkFDekI4QixRQUFRakcsV0FBV2UsRUFBRTtvQkFDdkI7Z0JBQ0Y7WUFDRixFQUFFLE9BQU84RSxPQUFPO2dCQUNkaEMsUUFBUWdDLEtBQUssQ0FBQyw0QkFBNEJBO1lBQzVDLFNBQVU7Z0JBQ1J2RCxhQUFhO1lBQ2Y7UUFDRjtRQUVBK0Q7UUFFQSxPQUFPO1lBQ0wseUJBQXlCO1lBQ3pCLElBQUlyRyxXQUFXbUUsSUFBSSxLQUFLLFFBQVE7Z0JBQzlCdEIsVUFBVUcsT0FBTyxFQUFFOEMsS0FBSyxjQUFjO29CQUFFckIsUUFBUXpFLFdBQVdlLEVBQUU7Z0JBQUM7WUFDaEU7UUFDRjtJQUNGLEdBQUc7UUFBQ2Y7UUFBWStCO1FBQU1DO1FBQWlCaUI7S0FBUTtJQUUvQyxNQUFNdkMsY0FBYyxPQUFPK0YsU0FBaUJDLGNBQWdDLEVBQUU7UUFDNUUsSUFBSSxDQUFDMUcsY0FBYyxDQUFDZ0MsbUJBQW1CLENBQUNhLFVBQVVHLE9BQU8sRUFBRTtZQUN6RDtRQUNGO1FBRUEsZ0RBQWdEO1FBQ2hELE1BQU0yRCxvQkFBb0I7WUFBRSxHQUFHbkcsY0FBYztRQUFDO1FBRTlDLHdGQUF3RjtRQUN4RixJQUFJb0csdUJBQXlDLEVBQUU7UUFFL0MsMENBQTBDO1FBQzFDLE1BQU1DLHFCQUFxQkgsWUFBWTdCLEdBQUcsQ0FBQ2lDLENBQUFBLGFBQWU7Z0JBQ3hELEdBQUdBLFVBQVU7Z0JBQ2JDLFFBQVEsQ0FBQyxLQUFLLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUM1RTtRQUVBLDBEQUEwRDtRQUMxRFIsbUJBQW1CakIsT0FBTyxDQUFDa0IsQ0FBQUE7WUFDekJILGlCQUFpQixDQUFDRyxXQUFXQyxNQUFNLENBQUMsR0FBRztnQkFBRU8sVUFBVTtZQUFFO1FBQ3ZEO1FBQ0E1RSxrQkFBa0JpRTtRQUVsQixJQUFJO1lBQ0YsS0FBSyxNQUFNRyxjQUFjRCxtQkFBb0I7Z0JBQzNDLHNCQUFzQjtnQkFDdEJuRSxrQkFBa0IwQixDQUFBQSxPQUFTO3dCQUN6QixHQUFHQSxJQUFJO3dCQUNQLENBQUMwQyxXQUFXQyxNQUFNLENBQUMsRUFBRTs0QkFBRU8sVUFBVTs0QkFBSXpCLE9BQU8wQjt3QkFBVTtvQkFDeEQ7Z0JBRUEscUVBQXFFO2dCQUNyRSxJQUFJVCxXQUFXVSxRQUFRLGdCQUNsQlYsV0FBV1csSUFBSSxJQUFJWCxXQUFXVyxJQUFJLEdBQUcsSUFBSSxPQUFPLE1BQU87b0JBQzFEYixxQkFBcUJjLElBQUksQ0FBQzt3QkFDeEIsR0FBR1osVUFBVTt3QkFDYixpRkFBaUY7d0JBQ2pGYSxhQUFhO29CQUNmO29CQUVBLHNCQUFzQjtvQkFDdEJqRixrQkFBa0IwQixDQUFBQSxPQUFTOzRCQUN6QixHQUFHQSxJQUFJOzRCQUNQLENBQUMwQyxXQUFXQyxNQUFNLENBQUMsRUFBRTtnQ0FBRU8sVUFBVTtnQ0FBSXpCLE9BQU8wQjs0QkFBVTt3QkFDeEQ7Z0JBQ0YsT0FBTztvQkFDTCw0REFBNEQ7b0JBQzVEWCxxQkFBcUJjLElBQUksQ0FBQ1o7Z0JBQzVCO1lBQ0Y7WUFFQSxNQUFNYyxjQUFjO2dCQUNsQm5CO2dCQUNBQyxhQUFhRTtnQkFDYixHQUFJNUcsV0FBV21FLElBQUksS0FBSyxZQUFZO29CQUFFMEQsYUFBYTdILFdBQVdlLEVBQUU7Z0JBQUMsSUFBSTtvQkFBRTBELFFBQVF6RSxXQUFXZSxFQUFFO2dCQUFDLENBQUM7WUFDaEc7WUFFQSw4Q0FBOEM7WUFDOUMsTUFBTStHLGtCQUFrQjtnQkFBRSxHQUFHdEgsY0FBYztZQUFDO1lBQzVDcUcsbUJBQW1CakIsT0FBTyxDQUFDa0IsQ0FBQUE7Z0JBQ3pCZ0IsZUFBZSxDQUFDaEIsV0FBV0MsTUFBTSxDQUFDLEdBQUc7b0JBQUVPLFVBQVU7b0JBQUl6QixPQUFPMEI7Z0JBQVU7WUFDeEU7WUFDQTdFLGtCQUFrQm9GO1lBRWxCLHdDQUF3QztZQUN4Q2pGLFVBQVVHLE9BQU8sQ0FBQzhDLElBQUksQ0FBQyxnQkFBZ0I4QixhQUFhLENBQUNyQjtnQkFDbkQsSUFBSUEsU0FBUzdFLE9BQU8sRUFBRTtvQkFDcEIsOENBQThDO29CQUM5QyxNQUFNcUcsZ0JBQWdCO3dCQUFFLEdBQUd2SCxjQUFjO29CQUFDO29CQUMxQ3FHLG1CQUFtQmpCLE9BQU8sQ0FBQ2tCLENBQUFBO3dCQUN6QixPQUFPaUIsYUFBYSxDQUFDakIsV0FBV0MsTUFBTSxDQUFDO29CQUN6QztvQkFDQXJFLGtCQUFrQnFGO2dCQUNwQixPQUFPO29CQUNMLHlDQUF5QztvQkFDekMsTUFBTUMsZ0JBQWdCO3dCQUFFLEdBQUd4SCxjQUFjO29CQUFDO29CQUMxQ3FHLG1CQUFtQmpCLE9BQU8sQ0FBQ2tCLENBQUFBO3dCQUN6QmtCLGFBQWEsQ0FBQ2xCLFdBQVdDLE1BQU0sQ0FBQyxHQUFHOzRCQUNqQ08sVUFBVTs0QkFDVnpCLE9BQU9VLFNBQVNWLEtBQUssSUFBSTt3QkFDM0I7b0JBQ0Y7b0JBQ0FuRCxrQkFBa0JzRjtnQkFDcEI7WUFDRjtZQUVBLHVDQUF1QztZQUN2QyxJQUFJakYsYUFBYUMsT0FBTyxFQUFFO2dCQUN4QkQsYUFBYUMsT0FBTyxDQUFDaUYsS0FBSyxHQUFHO1lBQy9CO1lBQ0FyRixnQkFBZ0I7UUFDbEIsRUFBRSxPQUFPaUQsT0FBWTtZQUNuQmhDLFFBQVFnQyxLQUFLLENBQUMsK0JBQStCQTtZQUM3QyxpQ0FBaUM7WUFDakMsTUFBTW1DLGdCQUFnQjtnQkFBRSxHQUFHeEgsY0FBYztZQUFDO1lBQzFDcUcsbUJBQW1CakIsT0FBTyxDQUFDa0IsQ0FBQUE7Z0JBQ3pCa0IsYUFBYSxDQUFDbEIsV0FBV0MsTUFBTSxDQUFDLEdBQUc7b0JBQ2pDTyxVQUFVO29CQUNWekIsT0FBT0EsTUFBTWxFLE9BQU8sSUFBSTtnQkFDMUI7WUFDRjtZQUNBZSxrQkFBa0JzRjtRQUNwQjtJQUNGO0lBRUEsTUFBTXJILGFBQWEsT0FBT0UsTUFBY3FILGNBQWMsRUFBRSxFQUFFL0csWUFBWSxLQUFLLEVBQUVELFVBQW9CLEVBQUU7UUFDakcsSUFBSTtZQUNGLE1BQU0sRUFBRXFELElBQUksRUFBRSxHQUFHLE1BQU0zRSxrREFBVSxDQUFDLENBQUMsRUFBRXFELFFBQVEsTUFBTSxDQUFDLEVBQUU7Z0JBQ3BEcEM7Z0JBQ0FxSDtnQkFDQS9HO2dCQUNBRDtZQUNGO1lBRUEsMEVBQTBFO1lBQzFFLE9BQU9xRDtRQUNULEVBQUUsT0FBT3NCLE9BQU87WUFDZGhDLFFBQVFnQyxLQUFLLENBQUMsd0JBQXdCQTtZQUN0QyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFNeEUsYUFBYSxPQUFPb0QsUUFBZ0IyRDtRQUN4QyxJQUFJO1lBQ0YsTUFBTSxFQUFFN0QsSUFBSSxFQUFFLEdBQUcsTUFBTTNFLGlEQUFTLENBQUMsQ0FBQyxFQUFFcUQsUUFBUSxPQUFPLEVBQUV3QixPQUFPLENBQUMsRUFBRTJEO1lBRS9ELG9FQUFvRTtZQUNwRWxHLFNBQVNvRyxDQUFBQSxZQUNQQSxVQUFVekQsR0FBRyxDQUFDYixDQUFBQSxPQUNaQSxLQUFLcEQsR0FBRyxLQUFLNkQsU0FBUzt3QkFBRSxHQUFHVCxJQUFJO3dCQUFFLEdBQUdPLElBQUk7b0JBQUMsSUFBSVA7WUFJakQsT0FBT087UUFDVCxFQUFFLE9BQU9zQixPQUFPO1lBQ2RoQyxRQUFRZ0MsS0FBSyxDQUFDLHdCQUF3QkE7WUFDdEMsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTXZFLFdBQVcsT0FBT21ELFFBQWdCSjtRQUN0QyxJQUFJLENBQUN0QyxRQUFRLENBQUNzQyxRQUFRO1FBRXRCLElBQUk7WUFDRiwwREFBMEQ7WUFDMUQscURBQXFEO1lBQ3JELE1BQU1rRSxlQUFlbEUsVUFBVXRDLEtBQU1oQixFQUFFO1lBQ3ZDLE1BQU1uQixrREFBVSxDQUFDLENBQUMsRUFBRXFELFFBQVEsT0FBTyxFQUFFd0IsT0FBTyxTQUFTLEVBQUU4RCxhQUFhLENBQUM7UUFDckUsOENBQThDO1FBQ2hELEVBQUUsT0FBTzFDLE9BQU87WUFDZGhDLFFBQVFnQyxLQUFLLENBQUMsdUJBQXVCQTtZQUNyQyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFNdEUsWUFBWSxPQUFPa0QsUUFBZ0JKO1FBQ3ZDLElBQUksQ0FBQ3RDLFFBQVEsQ0FBQ3NDLFFBQVE7UUFFdEIsSUFBSTtZQUNGLDREQUE0RDtZQUM1RCxxREFBcUQ7WUFDckQsTUFBTWtFLGVBQWVsRSxVQUFVdEMsS0FBTWhCLEVBQUU7WUFDdkMsTUFBTW5CLHVEQUFZLENBQUMsQ0FBQyxFQUFFcUQsUUFBUSxPQUFPLEVBQUV3QixPQUFPLFNBQVMsRUFBRThELGFBQWEsQ0FBQztRQUN2RSw4Q0FBOEM7UUFDaEQsRUFBRSxPQUFPMUMsT0FBTztZQUNkaEMsUUFBUWdDLEtBQUssQ0FBQyx1QkFBdUJBO1lBQ3JDLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQU1yRSxZQUFZLENBQUNrRDtRQUNqQixJQUFJLENBQUMxRSxjQUFjLENBQUM2QyxVQUFVRyxPQUFPLEVBQUU7UUFFdkMsTUFBTXlGLGFBQWE7WUFDakIvRDtZQUNBLEdBQUkxRSxXQUFXbUUsSUFBSSxLQUFLLFlBQVk7Z0JBQUUwRCxhQUFhN0gsV0FBV2UsRUFBRTtZQUFDLElBQUk7Z0JBQUUwRCxRQUFRekUsV0FBV2UsRUFBRTtZQUFDLENBQUM7UUFDaEc7UUFFQThCLFVBQVVHLE9BQU8sQ0FBQzhDLElBQUksQ0FBQyxVQUFVMkM7SUFDbkM7SUFFQSxNQUFNaEgsbUJBQW1CLE9BQU9vRztRQUM5QixJQUFJO1lBQ0YsTUFBTXRCLFdBQVcsTUFBTTNHLHVEQUFZLENBQUMsQ0FBQyxFQUFFcUQsUUFBUSxjQUFjLEVBQUU0RSxZQUFZLENBQUM7WUFDNUUsT0FBTztnQkFBRW5HLFNBQVM7Z0JBQU1DLFNBQVM7WUFBb0M7UUFDdkUsRUFBRSxPQUFPa0UsT0FBTztZQUNkaEMsUUFBUWdDLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDLE9BQU87Z0JBQUVuRSxTQUFTO2dCQUFPQyxTQUFTO1lBQStCO1FBQ25FO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzVCLFlBQVkySSxRQUFRO1FBQUNULE9BQU87WUFDM0JqSTtZQUNBQztZQUNBQztZQUNBRTtZQUNBRDtZQUNBRTtZQUNBQztZQUNBQztZQUNBQztZQUNBQyxlQUFlMEY7WUFDZnpGO1lBQ0FDO1lBQ0FVO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1FBQ0Y7a0JBQ0dLOzs7Ozs7QUFHUCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbnRleHRzL0NoYXRDb250ZXh0LnRzeD8wYjU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpbywgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vQXV0aENvbnRleHQnO1xuXG5pbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIF9pZD86IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBhdmF0YXI6IHN0cmluZztcbiAgaXNPbmxpbmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZW51bSBGaWxlVHlwZSB7XG4gIElNQUdFID0gJ2ltYWdlJyxcbiAgVklERU8gPSAndmlkZW8nLFxuICBET0NVTUVOVCA9ICdkb2N1bWVudCcsXG4gIEFVRElPID0gJ2F1ZGlvJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVBdHRhY2htZW50IHtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgY29udGVudFR5cGU6IHN0cmluZztcbiAgZmlsZVR5cGU6IEZpbGVUeXBlO1xuICBkYXRhPzogc3RyaW5nOyAvLyBCYXNlNjQgZW5jb2RlZCBkYXRhIHBhcmEgYXJjaGl2b3MgcGVxdWXDsW9zXG4gIHNpemU/OiBudW1iZXI7XG4gIGZpbGVJZD86IHN0cmluZzsgLy8gSUQgcGFyYSBhcmNoaXZvcyBncmFuZGVzIGFsbWFjZW5hZG9zIHBvciBzZXBhcmFkb1xuICBpc0xhcmdlRmlsZT86IGJvb2xlYW47IC8vIEluZGljYSBzaSBlbCBhcmNoaXZvIGVzdMOhIGFsbWFjZW5hZG8gcG9yIHNlcGFyYWRvXG4gIGlzQ2h1bms/OiBib29sZWFuO1xuICBvcmlnaW5hbEZpbGVuYW1lPzogc3RyaW5nO1xuICBjaHVua0luZGV4PzogbnVtYmVyO1xuICB0b3RhbENodW5rcz86IG51bWJlcjtcbiAgdGVtcElkPzogc3RyaW5nOyAvLyBJRCB0ZW1wb3JhbCBwYXJhIHNlZ3VpbWllbnRvIGRlIGNhcmdhXG59XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgX2lkOiBzdHJpbmc7XG4gIGNvbnRlbnQ/OiBzdHJpbmc7XG4gIGF0dGFjaG1lbnRzPzogRmlsZUF0dGFjaG1lbnRbXTtcbiAgc2VuZGVyOiBVc2VyO1xuICByZWNpcGllbnQ/OiBzdHJpbmc7XG4gIHJvb20/OiBzdHJpbmc7XG4gIGlzUmVhZDogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBSb29tIHtcbiAgX2lkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGltYWdlPzogc3RyaW5nO1xuICBjcmVhdG9yOiBVc2VyO1xuICBtZW1iZXJzOiBVc2VyW107XG4gIGlzUHJpdmF0ZTogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHJlbW92ZWQ/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgQ2hhdENvbnRleHRUeXBlIHtcbiAgYWN0aXZlQ2hhdDogeyB0eXBlOiAncHJpdmF0ZScgfCAncm9vbScsIGlkOiBzdHJpbmcgfSB8IG51bGw7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlW107XG4gIHJvb21zOiBSb29tW107XG4gIG9ubGluZVVzZXJzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgdXNlcnM6IFVzZXJbXTtcbiAgdHlwaW5nVXNlcnM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4gfCBzdHJpbmc+O1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIHVucmVhZE1lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICB1cGxvYWRpbmdGaWxlczogeyBba2V5OiBzdHJpbmddOiB7IHByb2dyZXNzOiBudW1iZXIsIGVycm9yPzogc3RyaW5nIH0gfTtcbiAgc2V0QWN0aXZlQ2hhdDogKGNoYXQ6IHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsKSA9PiB2b2lkO1xuICBzZW5kTWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgYXR0YWNobWVudHM/OiBGaWxlQXR0YWNobWVudFtdKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBjcmVhdGVSb29tOiAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbj86IHN0cmluZywgaXNQcml2YXRlPzogYm9vbGVhbiwgbWVtYmVycz86IHN0cmluZ1tdKSA9PiBQcm9taXNlPFJvb20+O1xuICB1cGRhdGVSb29tOiAocm9vbUlkOiBzdHJpbmcsIGRhdGE6IHsgbmFtZT86IHN0cmluZzsgZGVzY3JpcHRpb24/OiBzdHJpbmc7IGltYWdlPzogc3RyaW5nOyBpc1ByaXZhdGU/OiBib29sZWFuIH0pID0+IFByb21pc2U8Um9vbT47XG4gIGpvaW5Sb29tOiAocm9vbUlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbGVhdmVSb29tOiAocm9vbUlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc2V0VHlwaW5nOiAoaXNUeXBpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGNsZWFyQ2hhdEhpc3Rvcnk6IChyZWNpcGllbnRJZDogc3RyaW5nKSA9PiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbiwgbWVzc2FnZTogc3RyaW5nIH0+O1xufVxuXG5jb25zdCBDaGF0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8Q2hhdENvbnRleHRUeXBlPih7XG4gIGFjdGl2ZUNoYXQ6IG51bGwsXG4gIG1lc3NhZ2VzOiBbXSxcbiAgcm9vbXM6IFtdLFxuICBvbmxpbmVVc2Vyczoge30sXG4gIHVzZXJzOiBbXSxcbiAgdHlwaW5nVXNlcnM6IHt9LFxuICBpc0xvYWRpbmc6IHRydWUsXG4gIHVucmVhZE1lc3NhZ2VzOiB7fSxcbiAgdXBsb2FkaW5nRmlsZXM6IHt9LFxuICBzZXRBY3RpdmVDaGF0OiAoKSA9PiB7fSxcbiAgc2VuZE1lc3NhZ2U6IGFzeW5jICgpID0+IHt9LFxuICBjcmVhdGVSb29tOiBhc3luYyAoKSA9PiAoeyBcbiAgICBfaWQ6ICcnLCBcbiAgICBuYW1lOiAnJywgXG4gICAgY3JlYXRvcjogeyBpZDogJycsIF9pZDogJycsIG5hbWU6ICcnLCBlbWFpbDogJycsIGF2YXRhcjogJycgfSwgXG4gICAgbWVtYmVyczogW10sIFxuICAgIGlzUHJpdmF0ZTogZmFsc2UsIFxuICAgIGNyZWF0ZWRBdDogJycgXG4gIH0pLFxuICB1cGRhdGVSb29tOiBhc3luYyAoKSA9PiAoeyBcbiAgICBfaWQ6ICcnLCBcbiAgICBuYW1lOiAnJywgXG4gICAgY3JlYXRvcjogeyBpZDogJycsIF9pZDogJycsIG5hbWU6ICcnLCBlbWFpbDogJycsIGF2YXRhcjogJycgfSwgXG4gICAgbWVtYmVyczogW10sIFxuICAgIGlzUHJpdmF0ZTogZmFsc2UsIFxuICAgIGNyZWF0ZWRBdDogJycgXG4gIH0pLFxuICBqb2luUm9vbTogYXN5bmMgKCkgPT4ge30sXG4gIGxlYXZlUm9vbTogYXN5bmMgKCkgPT4ge30sXG4gIHNldFR5cGluZzogKCkgPT4ge30sXG4gIGNsZWFyQ2hhdEhpc3Rvcnk6IGFzeW5jICgpID0+ICh7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTm90IGltcGxlbWVudGVkJyB9KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgdXNlQ2hhdCA9ICgpID0+IHVzZUNvbnRleHQoQ2hhdENvbnRleHQpO1xuXG5leHBvcnQgY29uc3QgQ2hhdFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIGNvbnN0IHsgdXNlciwgaXNBdXRoZW50aWNhdGVkIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IFthY3RpdmVDaGF0LCBzZXRBY3RpdmVDaGF0XSA9IHVzZVN0YXRlPHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW3Jvb21zLCBzZXRSb29tc10gPSB1c2VTdGF0ZTxSb29tW10+KFtdKTtcbiAgY29uc3QgW3VzZXJzLCBzZXRVc2Vyc10gPSB1c2VTdGF0ZTxVc2VyW10+KFtdKTtcbiAgY29uc3QgW29ubGluZVVzZXJzLCBzZXRPbmxpbmVVc2Vyc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuICBjb25zdCBbdHlwaW5nVXNlcnMsIHNldFR5cGluZ1VzZXJzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4gfCBzdHJpbmc+Pih7fSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3NvY2tldENvbm5lY3RlZCwgc2V0U29ja2V0Q29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VucmVhZE1lc3NhZ2VzLCBzZXRVbnJlYWRNZXNzYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pih7fSk7XG4gIGNvbnN0IFt1cGxvYWRpbmdGaWxlcywgc2V0VXBsb2FkaW5nRmlsZXNdID0gdXNlU3RhdGU8eyBba2V5OiBzdHJpbmddOiB7IHByb2dyZXNzOiBudW1iZXIsIGVycm9yPzogc3RyaW5nIH0gfT4oe30pO1xuICBjb25zdCBbc2VsZWN0ZWRGaWxlLCBzZXRTZWxlY3RlZEZpbGVdID0gdXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3Qgc29ja2V0UmVmID0gdXNlUmVmPFNvY2tldCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjdXJyZW50QWN0aXZlQ2hhdFJlZiA9IHVzZVJlZihhY3RpdmVDaGF0KTtcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuICBcbiAgLy8gS2VlcCB0aGUgcmVmIGluIHN5bmMgd2l0aCB0aGUgc3RhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50ID0gYWN0aXZlQ2hhdDtcbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIGNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuICBcbiAgLy8gSW5pdGlhbGl6ZSBzb2NrZXQgY29ubmVjdGlvbiB3aGVuIGF1dGhlbnRpY2F0ZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCB8fCAhdXNlcikge1xuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgc2V0U29ja2V0Q29ubmVjdGVkKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgICBcbiAgICBpZiAoIXRva2VuKSByZXR1cm47XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQgPSBpbyhBUElfVVJMLCB7XG4gICAgICBhdXRoOiB7IHRva2VuIH0sXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAvLyBBdW1lbnRhciBlbCB0aWVtcG8gZGUgZXNwZXJhIHBhcmEgcGVybWl0aXIgZW52w61vIGRlIGFyY2hpdm9zIGdyYW5kZXNcbiAgICAgIHRpbWVvdXQ6IDYwMDAwIC8vIGF1bWVudGFyIGVsIHRpZW1wbyBkZSBlc3BlcmEgYSA2MCBzZWd1bmRvc1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFNvY2tldCBldmVudCBsaXN0ZW5lcnNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICBzZXRTb2NrZXRDb25uZWN0ZWQodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ25ld19tZXNzYWdlJywgKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNoYXQgPSBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50O1xuICAgICAgXG4gICAgICAvLyBJZGVudGlmaWNhciBsYSBjbGF2ZSBkZSBjaGF0IHBhcmEgc2VndWltaWVudG8gZGUgbm90aWZpY2FjaW9uZXNcbiAgICAgIGxldCBjaGF0S2V5ID0gJyc7XG4gICAgICBpZiAobWVzc2FnZS5yb29tKSB7XG4gICAgICAgIGNoYXRLZXkgPSBgcm9vbV8ke21lc3NhZ2Uucm9vbX1gO1xuICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnNlbmRlci5faWQgIT09IHVzZXIuaWQpIHtcbiAgICAgICAgY2hhdEtleSA9IGB1c2VyXyR7bWVzc2FnZS5zZW5kZXIuX2lkfWA7XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UucmVjaXBpZW50KSB7XG4gICAgICAgIGNoYXRLZXkgPSBgdXNlcl8ke21lc3NhZ2UucmVjaXBpZW50fWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNvbG8gYWdyZWdhciBlbCBtZW5zYWplIHNpIGVzIHJlbGV2YW50ZSBwYXJhIGVsIGNoYXQgYWN0aXZvXG4gICAgICBpZiAoXG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncHJpdmF0ZScgJiYgXG4gICAgICAgICAgKChtZXNzYWdlLnNlbmRlci5faWQgPT09IGFjdGl2ZUNoYXQuaWQgJiYgbWVzc2FnZS5yZWNpcGllbnQgPT09IHVzZXIuaWQpIHx8IFxuICAgICAgICAgICAobWVzc2FnZS5zZW5kZXIuX2lkID09PSB1c2VyLmlkICYmIG1lc3NhZ2UucmVjaXBpZW50ID09PSBhY3RpdmVDaGF0LmlkKSkpIHx8XG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncm9vbScgJiYgbWVzc2FnZS5yb29tID09PSBhY3RpdmVDaGF0LmlkKVxuICAgICAgKSB7XG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIG1lc3NhZ2VdKTtcbiAgICAgIH0gXG4gICAgICAvLyBTaSBlbCBtZW5zYWplIG5vIGVzIHBhcmEgZWwgY2hhdCBhY3Rpdm8geSBubyBmdWUgZW52aWFkbyBwb3IgZWwgdXN1YXJpbyBhY3R1YWwsIGluY3JlbWVudGFyIGNvbnRhZG9yXG4gICAgICBlbHNlIGlmIChtZXNzYWdlLnNlbmRlci5faWQgIT09IHVzZXIuaWQgJiYgY2hhdEtleSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTmV3IG1lc3NhZ2Ugbm90aWZpY2F0aW9uOicsIGNoYXRLZXksIG1lc3NhZ2UpO1xuICAgICAgICBzZXRVbnJlYWRNZXNzYWdlcyhwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbY2hhdEtleV06IChwcmV2W2NoYXRLZXldIHx8IDApICsgMVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3VzZXJfc3RhdHVzX2NoYW5nZScsICh7IHVzZXJJZCwgaXNPbmxpbmUgfSkgPT4ge1xuICAgICAgc2V0T25saW5lVXNlcnMocHJldiA9PiAoeyAuLi5wcmV2LCBbdXNlcklkXTogaXNPbmxpbmUgfSkpO1xuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd0eXBpbmdfaW5kaWNhdG9yJywgKGRhdGE6IHsgdXNlcklkOiBzdHJpbmcsIHVzZXJOYW1lOiBzdHJpbmcsIGlzVHlwaW5nOiBib29sZWFuLCByb29tSWQ/OiBzdHJpbmcsIHNlbmRlcklkPzogc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNoYXQgPSBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50O1xuICAgICAgaWYgKFxuICAgICAgICAoYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3ByaXZhdGUnICYmIGRhdGEuc2VuZGVySWQgPT09IGFjdGl2ZUNoYXQuaWQpIHx8XG4gICAgICAgIChhY3RpdmVDaGF0Py50eXBlID09PSAncm9vbScgJiYgZGF0YS5yb29tSWQgPT09IGFjdGl2ZUNoYXQuaWQpXG4gICAgICApIHtcbiAgICAgICAgLy8gQWxtYWNlbmFyIG5vbWJyZSBlbiBsdWdhciBkZSBzb2xvIGxhIGJhbmRlcmEgYm9vbGVhbmFcbiAgICAgICAgc2V0VHlwaW5nVXNlcnMocHJldiA9PiAoeyBcbiAgICAgICAgICAuLi5wcmV2LCBcbiAgICAgICAgICBbZGF0YS51c2VySWRdOiBkYXRhLmlzVHlwaW5nID8gZGF0YS51c2VyTmFtZSA6IGZhbHNlIFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ21lc3NhZ2VfcmVhZCcsICh7IG1lc3NhZ2VJZCB9KSA9PiB7XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFxuICAgICAgICBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgICAgbXNnLl9pZCA9PT0gbWVzc2FnZUlkID8geyAuLi5tc2csIGlzUmVhZDogdHJ1ZSB9IDogbXNnXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIG5ldyByb29tIGNyZWF0aW9uc1xuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCduZXdfcm9vbScsIChyb29tOiBSb29tKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTmV3IHJvb20gcmVjZWl2ZWQ6Jywgcm9vbSk7XG4gICAgICBzZXRSb29tcyhwcmV2ID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJvb20gYWxyZWFkeSBleGlzdHNcbiAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldi5zb21lKHIgPT4gci5faWQgPT09IHJvb20uX2lkKTtcbiAgICAgICAgaWYgKGV4aXN0cykgcmV0dXJuIHByZXY7XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgcm9vbV07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgcm9vbSB1cGRhdGVzIChtZW1iZXJzIGFkZGVkL3JlbW92ZWQpXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ3Jvb21fdXBkYXRlZCcsIChyb29tOiBSb29tKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUm9vbSB1cGRhdGVkOicsIHJvb20pO1xuICAgICAgaWYgKHJvb20ucmVtb3ZlZCkge1xuICAgICAgICAvLyBJZiB0aGlzIHJvb20gd2FzIHJlbW92ZWQgZm9yIHRoaXMgdXNlciwgcmVtb3ZlIGl0IGZyb20gdGhlIGxpc3RcbiAgICAgICAgc2V0Um9vbXMocHJldiA9PiBwcmV2LmZpbHRlcihyID0+IHIuX2lkICE9PSByb29tLl9pZCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgYWN0aXZlIGNoYXQgaXMgdGhpcyByb29tLCBjbGVhciBpdFxuICAgICAgICBjb25zdCBhY3RpdmVDaGF0ID0gY3VycmVudEFjdGl2ZUNoYXRSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdyb29tJyAmJiBhY3RpdmVDaGF0LmlkID09PSByb29tLl9pZCkge1xuICAgICAgICAgIHNldEFjdGl2ZUNoYXQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcm9vbSBpbiB0aGUgbGlzdFxuICAgICAgICBzZXRSb29tcyhwcmV2ID0+IHByZXYubWFwKHIgPT4gci5faWQgPT09IHJvb20uX2lkID8gcm9vbSA6IHIpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgZGlzY29ubmVjdGVkJyk7XG4gICAgICBzZXRTb2NrZXRDb25uZWN0ZWQoZmFsc2UpO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpO1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBzZXRTb2NrZXRDb25uZWN0ZWQoZmFsc2UpO1xuICAgIH07XG4gIH0sIFtpc0F1dGhlbnRpY2F0ZWQsIHVzZXIsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIExvYWQgaW5pdGlhbCBkYXRhOiB1c2VycyBhbmQgcm9vbXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZmV0Y2hJbml0aWFsRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IFt1c2Vyc1Jlc3BvbnNlLCByb29tc1Jlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBheGlvcy5nZXQoYCR7QVBJX1VSTH0vdXNlcnNgKSxcbiAgICAgICAgICBheGlvcy5nZXQoYCR7QVBJX1VSTH0vcm9vbXMvbXlgKVxuICAgICAgICBdKTtcbiAgICAgICAgXG4gICAgICAgIHNldFVzZXJzKHVzZXJzUmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIHNldFJvb21zKHJvb21zUmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBvbmxpbmUgc3RhdHVzXG4gICAgICAgIGNvbnN0IGluaXRpYWxPbmxpbmVTdGF0dXM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0ge307XG4gICAgICAgIHVzZXJzUmVzcG9uc2UuZGF0YS5mb3JFYWNoKCh1c2VyOiBVc2VyKSA9PiB7XG4gICAgICAgICAgaW5pdGlhbE9ubGluZVN0YXR1c1t1c2VyLl9pZCFdID0gdXNlci5pc09ubGluZSB8fCBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldE9ubGluZVVzZXJzKGluaXRpYWxPbmxpbmVTdGF0dXMpO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGluaXRpYWwgZGF0YTonLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgZmV0Y2hJbml0aWFsRGF0YSgpO1xuICB9LCBbaXNBdXRoZW50aWNhdGVkLCBBUElfVVJMXSk7XG4gIFxuICAvLyBDdWFuZG8gc2UgaW5pY2lhIGVsIHNvY2tldCB5IHNlIGNvbmVjdGEsIHNvbGljaXRhbW9zIGVsIGVzdGFkbyBhY3R1YWwgZGUgbWVuc2FqZXMgbm8gbGXDrWRvc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzb2NrZXRDb25uZWN0ZWQgJiYgc29ja2V0UmVmLmN1cnJlbnQgJiYgdXNlcikge1xuICAgICAgLy8gU29saWNpdGFyIG1lbnNhamVzIG5vIGxlw61kb3MgYWwgc2Vydmlkb3JcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ2dldF91bnJlYWRfbWVzc2FnZXMnKTtcbiAgICAgIFxuICAgICAgLy8gRXNjdWNoYXIgbGEgcmVzcHVlc3RhIGNvbiBlbCByZWN1ZW50byBkZSBtZW5zYWplcyBubyBsZcOtZG9zXG4gICAgICBzb2NrZXRSZWYuY3VycmVudC5vbigndW5yZWFkX21lc3NhZ2VzX2NvdW50JywgKHVucmVhZENvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgdW5yZWFkIGNvdW50czonLCB1bnJlYWRDb3VudHMpO1xuICAgICAgICBzZXRVbnJlYWRNZXNzYWdlcyh1bnJlYWRDb3VudHMpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5vZmYoJ3VucmVhZF9tZXNzYWdlc19jb3VudCcpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtzb2NrZXRDb25uZWN0ZWQsIHVzZXJdKTtcblxuICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBsb3MgbWVuc2FqZXMgc2UgbWFycXVlbiBjb21vIGxlw61kb3MgY3VhbmRvIHNlIGFicmUgdW4gY2hhdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVDaGF0ICYmIHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAvLyBDcmVhciB1bmEgY2xhdmUgcGFyYSBlbCBjaGF0IGFjdHVhbFxuICAgICAgY29uc3QgY2hhdEtleSA9IGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnIFxuICAgICAgICA/IGB1c2VyXyR7YWN0aXZlQ2hhdC5pZH1gIFxuICAgICAgICA6IGByb29tXyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgXG4gICAgICAvLyBSZXNldGVhciBlbCBjb250YWRvciBkZSBtZW5zYWplcyBubyBsZcOtZG9zIHBhcmEgZXN0ZSBjaGF0XG4gICAgICBzZXRVbnJlYWRNZXNzYWdlcyhwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIFtjaGF0S2V5XTogMFxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICAvLyBOb3RpZmljYXIgYWwgc2Vydmlkb3IgcXVlIGxvcyBtZW5zYWplcyBzZSBoYW4gbGXDrWRvXG4gICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdtYXJrX21lc3NhZ2VzX3JlYWQnLCB7XG4gICAgICAgIGNoYXRJZDogYWN0aXZlQ2hhdC5pZCxcbiAgICAgICAgY2hhdFR5cGU6IGFjdGl2ZUNoYXQudHlwZVxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbYWN0aXZlQ2hhdF0pO1xuICBcbiAgLy8gRnVuY2nDs24gcGFyYSBtYW5lamFyIGVsIGNhbWJpbyBkZSBjaGF0IGFjdGl2b1xuICBjb25zdCBoYW5kbGVBY3RpdmVDaGF0Q2hhbmdlID0gKGNoYXQ6IHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsKSA9PiB7XG4gICAgLy8gTGltcGlhciBsYXMgbm90aWZpY2FjaW9uZXMgbm8gbGXDrWRhcyBjdWFuZG8gc2UgYWN0aXZhIHVuIGNoYXRcbiAgICBpZiAoY2hhdCkge1xuICAgICAgY29uc3QgY2hhdEtleSA9IGNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnID8gYHVzZXJfJHtjaGF0LmlkfWAgOiBgcm9vbV8ke2NoYXQuaWR9YDtcbiAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgW2NoYXRLZXldOiAwXG4gICAgICB9KSk7XG4gICAgfVxuICAgIFxuICAgIHNldEFjdGl2ZUNoYXQoY2hhdCk7XG4gIH07XG5cbiAgLy8gQ2FyZ2FyIG1lbnNhamVzIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuIGNoYXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNoYXQgfHwgIXVzZXIgfHwgIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgc2V0TWVzc2FnZXMoW10pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgXG4gICAgY29uc3QgZmV0Y2hNZXNzYWdlcyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBlbmRwb2ludCA9ICcnO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnKSB7XG4gICAgICAgICAgZW5kcG9pbnQgPSBgJHtBUElfVVJMfS9jaGF0cy9kaXJlY3QvJHthY3RpdmVDaGF0LmlkfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSm9pbiB1c2VyIHJvb20gZm9yIGRpcmVjdCBtZXNzYWdlc1xuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5lbWl0KCdqb2luX3Jvb20nLCB7IHVzZXJJZDogYWN0aXZlQ2hhdC5pZCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbmRwb2ludCA9IGAke0FQSV9VUkx9L2NoYXRzL3Jvb20vJHthY3RpdmVDaGF0LmlkfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSm9pbiByb29tXG4gICAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQ/LmVtaXQoJ2pvaW5fcm9vbScsIHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChlbmRwb2ludCk7XG4gICAgICAgIHNldE1lc3NhZ2VzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFyY2FyIGxvcyBtZW5zYWplcyBjb21vIGxlw61kb3MgZW4gZWwgc2Vydmlkb3JcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5lbWl0KCdtYXJrX21lc3NhZ2VzX3JlYWQnLCB7XG4gICAgICAgICAgICBjaGF0VHlwZTogYWN0aXZlQ2hhdC50eXBlLFxuICAgICAgICAgICAgY2hhdElkOiBhY3RpdmVDaGF0LmlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1lc3NhZ2VzOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaE1lc3NhZ2VzKCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIENsZWFuIHVwIC0gbGVhdmUgcm9vbXNcbiAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdyb29tJykge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbGVhdmVfcm9vbScsIHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFthY3RpdmVDaGF0LCB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKGNvbnRlbnQ6IHN0cmluZywgYXR0YWNobWVudHM6IEZpbGVBdHRhY2htZW50W10gPSBbXSkgPT4ge1xuICAgIGlmICghYWN0aXZlQ2hhdCB8fCAhaXNBdXRoZW50aWNhdGVkIHx8ICFzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEluaWNpYWxpemFyIGVzdGFkbyBkZSBjYXJnYSBwYXJhIGNhZGEgYXJjaGl2b1xuICAgIGNvbnN0IG5ld1VwbG9hZGluZ0ZpbGVzID0geyAuLi51cGxvYWRpbmdGaWxlcyB9O1xuICAgIFxuICAgIC8vIFBhcmEgYXJjaGl2b3MgZ3JhbmRlcywgZXNwZWNpYWxtZW50ZSB2aWRlb3MsIGxvcyBlbnZpYW1vcyBkaXJlY3RhbWVudGUgc2luIGZyYWdtZW50YXJcbiAgICBsZXQgcHJvY2Vzc2VkQXR0YWNobWVudHM6IEZpbGVBdHRhY2htZW50W10gPSBbXTtcblxuICAgIC8vIEFzaWduYXIgSURzIHRlbXBvcmFsZXMgcGFyYSBzZWd1aW1pZW50b1xuICAgIGNvbnN0IGF0dGFjaG1lbnRzV2l0aElkcyA9IGF0dGFjaG1lbnRzLm1hcChhdHRhY2htZW50ID0+ICh7XG4gICAgICAuLi5hdHRhY2htZW50LFxuICAgICAgdGVtcElkOiBgdGVtcC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWBcbiAgICB9KSk7XG5cbiAgICAvLyBFc3RhYmxlY2VyIGVsIGVzdGFkbyBpbmljaWFsIGRlIGNhcmdhIHBhcmEgY2FkYSBhcmNoaXZvXG4gICAgYXR0YWNobWVudHNXaXRoSWRzLmZvckVhY2goYXR0YWNobWVudCA9PiB7XG4gICAgICBuZXdVcGxvYWRpbmdGaWxlc1thdHRhY2htZW50LnRlbXBJZF0gPSB7IHByb2dyZXNzOiAwIH07XG4gICAgfSk7XG4gICAgc2V0VXBsb2FkaW5nRmlsZXMobmV3VXBsb2FkaW5nRmlsZXMpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgYXR0YWNobWVudCBvZiBhdHRhY2htZW50c1dpdGhJZHMpIHtcbiAgICAgICAgLy8gQWN0dWFsaXphciBwcm9ncmVzb1xuICAgICAgICBzZXRVcGxvYWRpbmdGaWxlcyhwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbYXR0YWNobWVudC50ZW1wSWRdOiB7IHByb2dyZXNzOiAxMCwgZXJyb3I6IHVuZGVmaW5lZCB9XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBTaSBlcyB1biB2aWRlbyBvIGFyY2hpdm8gZ3JhbmRlLCBsbyBlbnZpYW1vcyBjb21vIHVuIMO6bmljbyBhcmNoaXZvXG4gICAgICAgIGlmIChhdHRhY2htZW50LmZpbGVUeXBlID09PSBGaWxlVHlwZS5WSURFTyB8fCBcbiAgICAgICAgICAgIChhdHRhY2htZW50LnNpemUgJiYgYXR0YWNobWVudC5zaXplID4gNSAqIDEwMjQgKiAxMDI0KSkge1xuICAgICAgICAgIHByb2Nlc3NlZEF0dGFjaG1lbnRzLnB1c2goe1xuICAgICAgICAgICAgLi4uYXR0YWNobWVudCxcbiAgICAgICAgICAgIC8vIEFncmVnYW1vcyB1bmEgYmFuZGVyYSBwYXJhIGluZGljYXIgcXVlIGRlYmUgc2VyIGFsbWFjZW5hZG8gY29tbyBhcmNoaXZvIGdyYW5kZVxuICAgICAgICAgICAgaXNMYXJnZUZpbGU6IHRydWVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIEFjdHVhbGl6YXIgcHJvZ3Jlc29cbiAgICAgICAgICBzZXRVcGxvYWRpbmdGaWxlcyhwcmV2ID0+ICh7XG4gICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgW2F0dGFjaG1lbnQudGVtcElkXTogeyBwcm9ncmVzczogNTAsIGVycm9yOiB1bmRlZmluZWQgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBQYXJhIG90cm9zIGFyY2hpdm9zIHBlcXVlw7FvcywgbG9zIGVudmlhbW9zIHRhbCBjb21vIGVzdMOhblxuICAgICAgICAgIHByb2Nlc3NlZEF0dGFjaG1lbnRzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBwcm9jZXNzZWRBdHRhY2htZW50cyxcbiAgICAgICAgLi4uKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnID8geyByZWNpcGllbnRJZDogYWN0aXZlQ2hhdC5pZCB9IDogeyByb29tSWQ6IGFjdGl2ZUNoYXQuaWQgfSksXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3R1YWxpemFyIHByb2dyZXNvIHBhcmEgdG9kb3MgbG9zIGFyY2hpdm9zXG4gICAgICBjb25zdCB1cGRhdGVkUHJvZ3Jlc3MgPSB7IC4uLnVwbG9hZGluZ0ZpbGVzIH07XG4gICAgICBhdHRhY2htZW50c1dpdGhJZHMuZm9yRWFjaChhdHRhY2htZW50ID0+IHtcbiAgICAgICAgdXBkYXRlZFByb2dyZXNzW2F0dGFjaG1lbnQudGVtcElkXSA9IHsgcHJvZ3Jlc3M6IDc1LCBlcnJvcjogdW5kZWZpbmVkIH07XG4gICAgICB9KTtcbiAgICAgIHNldFVwbG9hZGluZ0ZpbGVzKHVwZGF0ZWRQcm9ncmVzcyk7XG5cbiAgICAgIC8vIEVudmlhciBlbCBtZW5zYWplIGEgdHJhdsOpcyBkZWwgc29ja2V0XG4gICAgICBzb2NrZXRSZWYuY3VycmVudC5lbWl0KCdzZW5kX21lc3NhZ2UnLCBtZXNzYWdlRGF0YSwgKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAvLyDDiXhpdG8gLSBxdWl0YXIgYXJjaGl2b3MgZGVsIGVzdGFkbyBkZSBjYXJnYVxuICAgICAgICAgIGNvbnN0IGZpbmFsUHJvZ3Jlc3MgPSB7IC4uLnVwbG9hZGluZ0ZpbGVzIH07XG4gICAgICAgICAgYXR0YWNobWVudHNXaXRoSWRzLmZvckVhY2goYXR0YWNobWVudCA9PiB7XG4gICAgICAgICAgICBkZWxldGUgZmluYWxQcm9ncmVzc1thdHRhY2htZW50LnRlbXBJZF07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0VXBsb2FkaW5nRmlsZXMoZmluYWxQcm9ncmVzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRXJyb3IgLSBhY3R1YWxpemFyIGVzdGFkbyBjb24gZWwgZXJyb3JcbiAgICAgICAgICBjb25zdCBlcnJvclByb2dyZXNzID0geyAuLi51cGxvYWRpbmdGaWxlcyB9O1xuICAgICAgICAgIGF0dGFjaG1lbnRzV2l0aElkcy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICAgICAgZXJyb3JQcm9ncmVzc1thdHRhY2htZW50LnRlbXBJZF0gPSB7IFxuICAgICAgICAgICAgICBwcm9ncmVzczogMCwgXG4gICAgICAgICAgICAgIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnRXJyb3IgYWwgZW52aWFyIGVsIG1lbnNhamUnIFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzZXRVcGxvYWRpbmdGaWxlcyhlcnJvclByb2dyZXNzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIExpbXBpYXIgZm9ybXVsYXJpbyBkZXNwdcOpcyBkZSBlbnZpYXJcbiAgICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgc2V0U2VsZWN0ZWRGaWxlKG51bGwpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHByb2Nlc2FyIGFyY2hpdm9zOicsIGVycm9yKTtcbiAgICAgIC8vIEFjdHVhbGl6YXIgZXN0YWRvIGNvbiBlbCBlcnJvclxuICAgICAgY29uc3QgZXJyb3JQcm9ncmVzcyA9IHsgLi4udXBsb2FkaW5nRmlsZXMgfTtcbiAgICAgIGF0dGFjaG1lbnRzV2l0aElkcy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICBlcnJvclByb2dyZXNzW2F0dGFjaG1lbnQudGVtcElkXSA9IHsgXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsIFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBhbCBwcm9jZXNhciBhcmNoaXZvcycgXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHNldFVwbG9hZGluZ0ZpbGVzKGVycm9yUHJvZ3Jlc3MpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGNyZWF0ZVJvb20gPSBhc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbiA9ICcnLCBpc1ByaXZhdGUgPSBmYWxzZSwgbWVtYmVyczogc3RyaW5nW10gPSBbXSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vcm9vbXNgLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICBpc1ByaXZhdGUsXG4gICAgICAgIG1lbWJlcnMsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTm8gbmVlZCB0byBtYW51YWxseSBhZGQgdG8gcm9vbXMgYXJyYXksIHRoZSBzb2NrZXQgZXZlbnQgd2lsbCBoYW5kbGUgaXRcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByb29tOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IHVwZGF0ZVJvb20gPSBhc3luYyAocm9vbUlkOiBzdHJpbmcsIHVwZGF0ZURhdGE6IHsgbmFtZT86IHN0cmluZzsgZGVzY3JpcHRpb24/OiBzdHJpbmc7IGltYWdlPzogc3RyaW5nOyBpc1ByaXZhdGU/OiBib29sZWFuIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wdXQoYCR7QVBJX1VSTH0vcm9vbXMvJHtyb29tSWR9YCwgdXBkYXRlRGF0YSk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcm9vbSBpbiB0aGUgbG9jYWwgc3RhdGUgdG8gaW1tZWRpYXRlbHkgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICBzZXRSb29tcyhwcmV2Um9vbXMgPT4gXG4gICAgICAgIHByZXZSb29tcy5tYXAocm9vbSA9PiBcbiAgICAgICAgICByb29tLl9pZCA9PT0gcm9vbUlkID8geyAuLi5yb29tLCAuLi5kYXRhIH0gOiByb29tXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyByb29tOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGpvaW5Sb29tID0gYXN5bmMgKHJvb21JZDogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXVzZXIgJiYgIXVzZXJJZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBJZiB1c2VySWQgaXMgcHJvdmlkZWQsIHVzZSBpdCAoZm9yIGFkbWluIGFkZGluZyBvdGhlcnMpXG4gICAgICAvLyBPdGhlcndpc2UgdXNlIGN1cnJlbnQgdXNlcidzIElEIChmb3Igc2VsZi1qb2luaW5nKVxuICAgICAgY29uc3QgdGFyZ2V0VXNlcklkID0gdXNlcklkIHx8IHVzZXIhLmlkO1xuICAgICAgYXdhaXQgYXhpb3MucG9zdChgJHtBUElfVVJMfS9yb29tcy8ke3Jvb21JZH0vbWVtYmVycy8ke3RhcmdldFVzZXJJZH1gKTtcbiAgICAgIC8vIFJvb20gdXBkYXRlIHdpbGwgYmUgaGFuZGxlZCBieSBzb2NrZXQgZXZlbnRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igam9pbmluZyByb29tOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGxlYXZlUm9vbSA9IGFzeW5jIChyb29tSWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VyICYmICF1c2VySWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gSWYgdXNlcklkIGlzIHByb3ZpZGVkLCB1c2UgaXQgKGZvciBhZG1pbiByZW1vdmluZyBvdGhlcnMpXG4gICAgICAvLyBPdGhlcndpc2UgdXNlIGN1cnJlbnQgdXNlcidzIElEIChmb3Igc2VsZi1sZWF2aW5nKVxuICAgICAgY29uc3QgdGFyZ2V0VXNlcklkID0gdXNlcklkIHx8IHVzZXIhLmlkO1xuICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKGAke0FQSV9VUkx9L3Jvb21zLyR7cm9vbUlkfS9tZW1iZXJzLyR7dGFyZ2V0VXNlcklkfWApO1xuICAgICAgLy8gUm9vbSB1cGRhdGUgd2lsbCBiZSBoYW5kbGVkIGJ5IHNvY2tldCBldmVudFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsZWF2aW5nIHJvb206JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3Qgc2V0VHlwaW5nID0gKGlzVHlwaW5nOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0IHx8ICFzb2NrZXRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHR5cGluZ0RhdGEgPSB7XG4gICAgICBpc1R5cGluZyxcbiAgICAgIC4uLihhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJyA/IHsgcmVjaXBpZW50SWQ6IGFjdGl2ZUNoYXQuaWQgfSA6IHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pLFxuICAgIH07XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgndHlwaW5nJywgdHlwaW5nRGF0YSk7XG4gIH07XG4gIFxuICBjb25zdCBjbGVhckNoYXRIaXN0b3J5ID0gYXN5bmMgKHJlY2lwaWVudElkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7cmVjaXBpZW50SWR9YCk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnQ2hhdCBoaXN0b3J5IGNsZWFyZWQgc3VjY2Vzc2Z1bGx5JyB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhcmluZyBjaGF0IGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY2xlYXIgY2hhdCBoaXN0b3J5JyB9O1xuICAgIH1cbiAgfTtcbiAgXG4gIHJldHVybiAoXG4gICAgPENoYXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XG4gICAgICBhY3RpdmVDaGF0LFxuICAgICAgbWVzc2FnZXMsXG4gICAgICByb29tcyxcbiAgICAgIHVzZXJzLFxuICAgICAgb25saW5lVXNlcnMsXG4gICAgICB0eXBpbmdVc2VycyxcbiAgICAgIGlzTG9hZGluZyxcbiAgICAgIHVucmVhZE1lc3NhZ2VzLFxuICAgICAgdXBsb2FkaW5nRmlsZXMsXG4gICAgICBzZXRBY3RpdmVDaGF0OiBoYW5kbGVBY3RpdmVDaGF0Q2hhbmdlLFxuICAgICAgc2VuZE1lc3NhZ2UsXG4gICAgICBjcmVhdGVSb29tLFxuICAgICAgdXBkYXRlUm9vbSxcbiAgICAgIGpvaW5Sb29tLFxuICAgICAgbGVhdmVSb29tLFxuICAgICAgc2V0VHlwaW5nLFxuICAgICAgY2xlYXJDaGF0SGlzdG9yeSxcbiAgICB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0NoYXRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJpbyIsImF4aW9zIiwidXNlQXV0aCIsIkZpbGVUeXBlIiwiQ2hhdENvbnRleHQiLCJhY3RpdmVDaGF0IiwibWVzc2FnZXMiLCJyb29tcyIsIm9ubGluZVVzZXJzIiwidXNlcnMiLCJ0eXBpbmdVc2VycyIsImlzTG9hZGluZyIsInVucmVhZE1lc3NhZ2VzIiwidXBsb2FkaW5nRmlsZXMiLCJzZXRBY3RpdmVDaGF0Iiwic2VuZE1lc3NhZ2UiLCJjcmVhdGVSb29tIiwiX2lkIiwibmFtZSIsImNyZWF0b3IiLCJpZCIsImVtYWlsIiwiYXZhdGFyIiwibWVtYmVycyIsImlzUHJpdmF0ZSIsImNyZWF0ZWRBdCIsInVwZGF0ZVJvb20iLCJqb2luUm9vbSIsImxlYXZlUm9vbSIsInNldFR5cGluZyIsImNsZWFyQ2hhdEhpc3RvcnkiLCJzdWNjZXNzIiwibWVzc2FnZSIsInVzZUNoYXQiLCJDaGF0UHJvdmlkZXIiLCJjaGlsZHJlbiIsInVzZXIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZXRNZXNzYWdlcyIsInNldFJvb21zIiwic2V0VXNlcnMiLCJzZXRPbmxpbmVVc2VycyIsInNldFR5cGluZ1VzZXJzIiwic2V0SXNMb2FkaW5nIiwic29ja2V0Q29ubmVjdGVkIiwic2V0U29ja2V0Q29ubmVjdGVkIiwic2V0VW5yZWFkTWVzc2FnZXMiLCJzZXRVcGxvYWRpbmdGaWxlcyIsInNlbGVjdGVkRmlsZSIsInNldFNlbGVjdGVkRmlsZSIsInNvY2tldFJlZiIsImN1cnJlbnRBY3RpdmVDaGF0UmVmIiwiZmlsZUlucHV0UmVmIiwiY3VycmVudCIsIkFQSV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImRpc2Nvbm5lY3QiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhdXRoIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsIm9uIiwiY29uc29sZSIsImxvZyIsImNoYXRLZXkiLCJyb29tIiwic2VuZGVyIiwicmVjaXBpZW50IiwidHlwZSIsInByZXYiLCJ1c2VySWQiLCJpc09ubGluZSIsImRhdGEiLCJzZW5kZXJJZCIsInJvb21JZCIsImlzVHlwaW5nIiwidXNlck5hbWUiLCJtZXNzYWdlSWQiLCJtYXAiLCJtc2ciLCJpc1JlYWQiLCJleGlzdHMiLCJzb21lIiwiciIsInJlbW92ZWQiLCJmaWx0ZXIiLCJmZXRjaEluaXRpYWxEYXRhIiwidXNlcnNSZXNwb25zZSIsInJvb21zUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZ2V0IiwiaW5pdGlhbE9ubGluZVN0YXR1cyIsImZvckVhY2giLCJlcnJvciIsImVtaXQiLCJ1bnJlYWRDb3VudHMiLCJvZmYiLCJjaGF0SWQiLCJjaGF0VHlwZSIsImhhbmRsZUFjdGl2ZUNoYXRDaGFuZ2UiLCJjaGF0IiwiZmV0Y2hNZXNzYWdlcyIsImVuZHBvaW50IiwicmVzcG9uc2UiLCJsZW5ndGgiLCJjb250ZW50IiwiYXR0YWNobWVudHMiLCJuZXdVcGxvYWRpbmdGaWxlcyIsInByb2Nlc3NlZEF0dGFjaG1lbnRzIiwiYXR0YWNobWVudHNXaXRoSWRzIiwiYXR0YWNobWVudCIsInRlbXBJZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJwcm9ncmVzcyIsInVuZGVmaW5lZCIsImZpbGVUeXBlIiwic2l6ZSIsInB1c2giLCJpc0xhcmdlRmlsZSIsIm1lc3NhZ2VEYXRhIiwicmVjaXBpZW50SWQiLCJ1cGRhdGVkUHJvZ3Jlc3MiLCJmaW5hbFByb2dyZXNzIiwiZXJyb3JQcm9ncmVzcyIsInZhbHVlIiwiZGVzY3JpcHRpb24iLCJwb3N0IiwidXBkYXRlRGF0YSIsInB1dCIsInByZXZSb29tcyIsInRhcmdldFVzZXJJZCIsImRlbGV0ZSIsInR5cGluZ0RhdGEiLCJQcm92aWRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/contexts/ChatContext.tsx\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_auth_react__WEBPACK_IMPORTED_MODULE_2__.SessionProvider, {\n        session: pageProps.session,\n        refetchInterval: 0,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.ChatProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                lineNumber: 14,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n            lineNumber: 13,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2FwcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUVtQjtBQUNLO0FBQ0E7QUFFdkQsU0FBU0csTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBWTtJQUMvQyxxQkFDRSw4REFBQ0wsNERBQWVBO1FBQ2RNLFNBQVNELFVBQVVDLE9BQU87UUFDMUJDLGlCQUFpQjtrQkFFakIsNEVBQUNOLCtEQUFZQTtzQkFDWCw0RUFBQ0MsK0RBQVlBOzBCQUNYLDRFQUFDRTtvQkFBVyxHQUFHQyxTQUFTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbEM7QUFFQSxpRUFBZUYsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9fYXBwLnRzeD9mOWQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyBTZXNzaW9uUHJvdmlkZXIgfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgQ2hhdFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQ2hhdENvbnRleHQnO1xuXG5mdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IEFwcFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Qcm92aWRlciBcbiAgICAgIHNlc3Npb249e3BhZ2VQcm9wcy5zZXNzaW9ufVxuICAgICAgcmVmZXRjaEludGVydmFsPXswfSAvLyBEaXNhYmxlIGF1dG9tYXRpYyByZWZldGNoaW5nXG4gICAgPlxuICAgICAgPEF1dGhQcm92aWRlcj5cbiAgICAgICAgPENoYXRQcm92aWRlcj5cbiAgICAgICAgICA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG4gICAgICAgIDwvQ2hhdFByb3ZpZGVyPlxuICAgICAgPC9BdXRoUHJvdmlkZXI+XG4gICAgPC9TZXNzaW9uUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwO1xuIl0sIm5hbWVzIjpbIlNlc3Npb25Qcm92aWRlciIsIkF1dGhQcm92aWRlciIsIkNoYXRQcm92aWRlciIsIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIiwic2Vzc2lvbiIsInJlZmV0Y2hJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/pages/_document.tsx":
/*!*********************************!*\
  !*** ./src/pages/_document.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"../../node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Document() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n        lang: \"en\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 7,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Real-time chat application\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 8,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 11,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 12,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 10,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFFOUMsU0FBU0k7SUFDdEIscUJBQ0UsOERBQUNKLCtDQUFJQTtRQUFDSyxNQUFLOzswQkFDVCw4REFBQ0osK0NBQUlBOztrQ0FDSCw4REFBQ0s7d0JBQUtDLEtBQUk7d0JBQU9DLE1BQUs7Ozs7OztrQ0FDdEIsOERBQUNDO3dCQUFLQyxNQUFLO3dCQUFjQyxTQUFROzs7Ozs7Ozs7Ozs7MEJBRW5DLDhEQUFDQzs7a0NBQ0MsOERBQUNWLCtDQUFJQTs7Ozs7a0NBQ0wsOERBQUNDLHFEQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeD8xODhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0bWwsIEhlYWQsIE1haW4sIE5leHRTY3JpcHQgfSBmcm9tICduZXh0L2RvY3VtZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRG9jdW1lbnQoKSB7XG4gIHJldHVybiAoXG4gICAgPEh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPGxpbmsgcmVsPVwiaWNvblwiIGhyZWY9XCIvZmF2aWNvbi5pY29cIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiUmVhbC10aW1lIGNoYXQgYXBwbGljYXRpb25cIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgPGJvZHk+XG4gICAgICAgIDxNYWluIC8+XG4gICAgICAgIDxOZXh0U2NyaXB0IC8+XG4gICAgICA8L2JvZHk+XG4gICAgPC9IdG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkh0bWwiLCJIZWFkIiwiTWFpbiIsIk5leHRTY3JpcHQiLCJEb2N1bWVudCIsImxhbmciLCJsaW5rIiwicmVsIiwiaHJlZiIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/_document.tsx\n");

/***/ }),

/***/ "./src/pages/chat/index.tsx":
/*!**********************************!*\
  !*** ./src/pages/chat/index.tsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/chat/ChatSidebar */ \"./src/components/chat/ChatSidebar.tsx\");\n/* harmony import */ var _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/chat/ChatHeader */ \"./src/components/chat/ChatHeader.tsx\");\n/* harmony import */ var _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/chat/MessageList */ \"./src/components/chat/MessageList.tsx\");\n/* harmony import */ var _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/chat/MessageInput */ \"./src/components/chat/MessageInput.tsx\");\n/* harmony import */ var _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/chat/CreateRoomModal */ \"./src/components/chat/CreateRoomModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__, _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__, _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__, _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__, _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__, _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__, _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__, _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__, _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__, _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__, _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nfunction ChatPage() {\n    const { user, isAuthenticated, isLoading: authLoading } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { activeChat, isLoading: chatLoading } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.useChat)();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [isCreateRoomModalOpen, setIsCreateRoomModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!authLoading && !isAuthenticated) {\n            router.push(\"/login\");\n        }\n    }, [\n        isAuthenticated,\n        authLoading,\n        router\n    ]);\n    if (authLoading || !user) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen items-center justify-center bg-gray-100\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500 mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 28,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-4 text-gray-600\",\n                        children: \"Loading...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 29,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 27,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n            lineNumber: 26,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-screen bg-gray-100\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                onCreateRoom: ()=>setIsCreateRoomModalOpen(true)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 38,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col flex-1 h-full overflow-hidden\",\n                children: activeChat ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 46,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 overflow-hidden bg-white shadow-md\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 48,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-4 bg-white border-t\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 53,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 52,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-center justify-center bg-white\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center p-8 max-w-md\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-2xl font-bold text-gray-800 mb-2\",\n                                children: \"Welcome to the Chat App!\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 59,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-gray-600 mb-6\",\n                                children: \"Select a conversation from the sidebar or start a new chat to begin messaging.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 60,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setIsCreateRoomModalOpen(true),\n                                className: \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5 mr-2\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            fillRule: \"evenodd\",\n                                            d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\",\n                                            clipRule: \"evenodd\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                            lineNumber: 68,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                        lineNumber: 67,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Create New Room\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 63,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 58,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                    lineNumber: 57,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 43,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                isOpen: isCreateRoomModalOpen,\n                onClose: ()=>setIsCreateRoomModalOpen(false)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 78,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n        lineNumber: 36,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtDO0FBQ007QUFDUztBQUNBO0FBQ087QUFDRjtBQUNFO0FBQ0U7QUFDTTtBQUMvQjtBQUVsQixTQUFTVTtJQUN0QixNQUFNLEVBQUVDLElBQUksRUFBRUMsZUFBZSxFQUFFQyxXQUFXQyxXQUFXLEVBQUUsR0FBR1osOERBQU9BO0lBQ2pFLE1BQU0sRUFBRWEsVUFBVSxFQUFFRixXQUFXRyxXQUFXLEVBQUUsR0FBR2IsOERBQU9BO0lBQ3RELE1BQU1jLFNBQVNoQixzREFBU0E7SUFDeEIsTUFBTSxDQUFDaUIsdUJBQXVCQyx5QkFBeUIsR0FBR1YsK0NBQVFBLENBQUM7SUFFbkVULGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDYyxlQUFlLENBQUNGLGlCQUFpQjtZQUNwQ0ssT0FBT0csSUFBSSxDQUFDO1FBQ2Q7SUFDRixHQUFHO1FBQUNSO1FBQWlCRTtRQUFhRztLQUFPO0lBRXpDLElBQUlILGVBQWUsQ0FBQ0gsTUFBTTtRQUN4QixxQkFDRSw4REFBQ1U7WUFBSUMsV0FBVTtzQkFDYiw0RUFBQ0Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7Ozs7O2tDQUNmLDhEQUFDQzt3QkFBRUQsV0FBVTtrQ0FBcUI7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSTFDO0lBRUEscUJBQ0UsOERBQUNEO1FBQUlDLFdBQVU7OzBCQUViLDhEQUFDbEIsb0VBQVdBO2dCQUNWb0IsY0FBYyxJQUFNTCx5QkFBeUI7Ozs7OzswQkFJL0MsOERBQUNFO2dCQUFJQyxXQUFVOzBCQUNaUCwyQkFDQzs7c0NBQ0UsOERBQUNWLG1FQUFVQTs7Ozs7c0NBRVgsOERBQUNnQjs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ2hCLG9FQUFXQTs7Ozs7Ozs7OztzQ0FHZCw4REFBQ2U7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUNmLHFFQUFZQTs7Ozs7Ozs7Ozs7aURBSWpCLDhEQUFDYztvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRztnQ0FBR0gsV0FBVTswQ0FBd0M7Ozs7OzswQ0FDdEQsOERBQUNDO2dDQUFFRCxXQUFVOzBDQUFxQjs7Ozs7OzBDQUdsQyw4REFBQ0k7Z0NBQ0NDLFNBQVMsSUFBTVIseUJBQXlCO2dDQUN4Q0csV0FBVTs7a0RBRVYsOERBQUNNO3dDQUFJQyxPQUFNO3dDQUE2QlAsV0FBVTt3Q0FBZVEsU0FBUTt3Q0FBWUMsTUFBSztrREFDeEYsNEVBQUNDOzRDQUFLQyxVQUFTOzRDQUFVQyxHQUFFOzRDQUE2R0MsVUFBUzs7Ozs7Ozs7Ozs7b0NBQzdJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFTaEIsOERBQUMzQix3RUFBZUE7Z0JBQ2Q0QixRQUFRbEI7Z0JBQ1JtQixTQUFTLElBQU1sQix5QkFBeUI7Ozs7Ozs7Ozs7OztBQUloRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9jaGF0L2luZGV4LnRzeD9mZDRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCBDaGF0U2lkZWJhciBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9DaGF0U2lkZWJhcic7XG5pbXBvcnQgQ2hhdEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9DaGF0SGVhZGVyJztcbmltcG9ydCBNZXNzYWdlTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9NZXNzYWdlTGlzdCc7XG5pbXBvcnQgTWVzc2FnZUlucHV0IGZyb20gJ0AvY29tcG9uZW50cy9jaGF0L01lc3NhZ2VJbnB1dCc7XG5pbXBvcnQgQ3JlYXRlUm9vbU1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9jaGF0L0NyZWF0ZVJvb21Nb2RhbCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHsgdXNlciwgaXNBdXRoZW50aWNhdGVkLCBpc0xvYWRpbmc6IGF1dGhMb2FkaW5nIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IHsgYWN0aXZlQ2hhdCwgaXNMb2FkaW5nOiBjaGF0TG9hZGluZyB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzQ3JlYXRlUm9vbU1vZGFsT3Blbiwgc2V0SXNDcmVhdGVSb29tTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXV0aExvYWRpbmcgJiYgIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpO1xuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgYXV0aExvYWRpbmcsIHJvdXRlcl0pO1xuXG4gIGlmIChhdXRoTG9hZGluZyB8fCAhdXNlcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1zY3JlZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktMTAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItcHJpbWFyeS01MDAgbXgtYXV0b1wiPjwvZGl2PlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1ncmF5LTYwMFwiPkxvYWRpbmcuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtc2NyZWVuIGJnLWdyYXktMTAwXCI+XG4gICAgICB7LyogU2lkZWJhciAqL31cbiAgICAgIDxDaGF0U2lkZWJhciBcbiAgICAgICAgb25DcmVhdGVSb29tPXsoKSA9PiBzZXRJc0NyZWF0ZVJvb21Nb2RhbE9wZW4odHJ1ZSl9IFxuICAgICAgLz5cblxuICAgICAgey8qIE1haW4gY2hhdCBhcmVhICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtMSBoLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgIHthY3RpdmVDaGF0ID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8Q2hhdEhlYWRlciAvPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYmctd2hpdGUgc2hhZG93LW1kXCI+XG4gICAgICAgICAgICAgIDxNZXNzYWdlTGlzdCAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJnLXdoaXRlIGJvcmRlci10XCI+XG4gICAgICAgICAgICAgIDxNZXNzYWdlSW5wdXQgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHAtOCBtYXgtdy1tZFwiPlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItMlwiPldlbGNvbWUgdG8gdGhlIENoYXQgQXBwITwvaDM+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgbWItNlwiPlxuICAgICAgICAgICAgICAgIFNlbGVjdCBhIGNvbnZlcnNhdGlvbiBmcm9tIHRoZSBzaWRlYmFyIG9yIHN0YXJ0IGEgbmV3IGNoYXQgdG8gYmVnaW4gbWVzc2FnaW5nLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc0NyZWF0ZVJvb21Nb2RhbE9wZW4odHJ1ZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCB0ZXh0LXdoaXRlIGJnLXByaW1hcnktNjAwIGhvdmVyOmJnLXByaW1hcnktNzAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTUgbXItMlwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6bTEtMTFhMSAxIDAgMTAtMiAwdjJIN2ExIDEgMCAxMDAgMmgydjJhMSAxIDAgMTAyIDB2LTJoMmExIDEgMCAxMDAtMmgtMlY3elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgQ3JlYXRlIE5ldyBSb29tXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIENyZWF0ZSBSb29tIE1vZGFsICovfVxuICAgICAgPENyZWF0ZVJvb21Nb2RhbCBcbiAgICAgICAgaXNPcGVuPXtpc0NyZWF0ZVJvb21Nb2RhbE9wZW59XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHNldElzQ3JlYXRlUm9vbU1vZGFsT3BlbihmYWxzZSl9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJvdXRlciIsInVzZUF1dGgiLCJ1c2VDaGF0IiwiQ2hhdFNpZGViYXIiLCJDaGF0SGVhZGVyIiwiTWVzc2FnZUxpc3QiLCJNZXNzYWdlSW5wdXQiLCJDcmVhdGVSb29tTW9kYWwiLCJ1c2VTdGF0ZSIsIkNoYXRQYWdlIiwidXNlciIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsImF1dGhMb2FkaW5nIiwiYWN0aXZlQ2hhdCIsImNoYXRMb2FkaW5nIiwicm91dGVyIiwiaXNDcmVhdGVSb29tTW9kYWxPcGVuIiwic2V0SXNDcmVhdGVSb29tTW9kYWxPcGVuIiwicHVzaCIsImRpdiIsImNsYXNzTmFtZSIsInAiLCJvbkNyZWF0ZVJvb20iLCJoMyIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwiaXNPcGVuIiwib25DbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/chat/index.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "date-fns/format":
/*!**********************************!*\
  !*** external "date-fns/format" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("date-fns/format");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("axios");;

/***/ }),

/***/ "react-hook-form":
/*!**********************************!*\
  !*** external "react-hook-form" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-hook-form");;

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();