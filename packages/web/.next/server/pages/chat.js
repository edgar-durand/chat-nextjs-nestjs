/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/chat";
exports.ids = ["pages/chat"];
exports.modules = {

/***/ "../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"../../node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"../../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"../../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./src/pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./src/pages/_app.tsx\");\n/* harmony import */ var _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/pages/chat/index.tsx */ \"./src/pages/chat/index.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__]);\n([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/chat\",\n        pathname: \"/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _src_pages_chat_index_tsx__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFUyZwYWdlPSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmNoYXQlMkZpbmRleC50c3gmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ2hDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDVjtBQUMxQztBQUN1RDtBQUN2RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsc0RBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsc0RBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsc0RBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLHNEQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsc0RBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsc0RBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsc0RBQVE7QUFDekQ7QUFDTyx3QkFBd0IseUdBQWdCO0FBQy9DO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvP2E0ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCBBcHAgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fYXBwXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvY2hhdC9pbmRleC50c3hcIjtcbi8vIFJlLWV4cG9ydCB0aGUgY29tcG9uZW50IChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbmV4cG9ydCBjb25zdCByZXBvcnRXZWJWaXRhbHMgPSBob2lzdCh1c2VybGFuZCwgXCJyZXBvcnRXZWJWaXRhbHNcIik7XG4vLyBSZS1leHBvcnQgbGVnYWN5IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhcmFtcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1BhcmFtc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclByb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wc1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICBwYWdlOiBcIi9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9jaGF0XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgQXBwLFxuICAgICAgICBEb2N1bWVudFxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./src/components/chat/ChatHeader.tsx":
/*!********************************************!*\
  !*** ./src/components/chat/ChatHeader.tsx ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatHeader)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EditRoomModal */ \"./src/components/chat/EditRoomModal.tsx\");\n/* harmony import */ var _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RoomMembersModal */ \"./src/components/chat/RoomMembersModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__, _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _EditRoomModal__WEBPACK_IMPORTED_MODULE_5__, _RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\nfunction ChatHeader() {\n    const { activeChat, users, rooms, onlineUsers, clearChatHistory } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const [isEditModalOpen, setIsEditModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isMembersModalOpen, setIsMembersModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isClearing, setIsClearing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clearSuccess, setClearSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    if (!activeChat) return null;\n    // Get chat room from the list of rooms\n    const room = rooms.find((r)=>r._id === activeChat.id);\n    // Is this a group chat?\n    const isGroupChat = activeChat.type === \"room\";\n    // For private chats, get the recipient (the other user)\n    const recipient = !isGroupChat ? users.find((u)=>u._id === activeChat.id) : null;\n    // For group chats, display the room information\n    if (isGroupChat && room) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center p-3 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden mr-3\",\n                                    children: room.image && isValidImageSrc(room.image) && !failedImages[room._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                        src: room.image,\n                                        alt: room.name,\n                                        width: 40,\n                                        height: 40,\n                                        className: \"h-full w-full object-cover\",\n                                        priority: false,\n                                        onError: ()=>room._id && handleImageError(room._id || \"\")\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 74,\n                                        columnNumber: 17\n                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl font-semibold\",\n                                        children: getInitials(room.name)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 84,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 72,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"font-semibold\",\n                                            children: room.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 88,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-sm text-gray-500\",\n                                            children: [\n                                                room.members?.length,\n                                                \" members\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 89,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 87,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 71,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center space-x-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100\",\n                                    title: \"View members\",\n                                    onClick: ()=>setIsMembersModalOpen(true),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 103,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 97,\n                                    columnNumber: 13\n                                }, this),\n                                room.creator && user && room.creator._id === user.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100\",\n                                    title: \"Edit room\",\n                                    onClick: ()=>setIsEditModalOpen(true),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            fillRule: \"evenodd\",\n                                            d: \"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\",\n                                            clipRule: \"evenodd\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 115,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 114,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 109,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 95,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 70,\n                    columnNumber: 9\n                }, this),\n                isEditModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_EditRoomModal__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                    isOpen: isEditModalOpen,\n                    onClose: ()=>setIsEditModalOpen(false),\n                    roomId: activeChat.id\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 124,\n                    columnNumber: 11\n                }, this),\n                isMembersModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_RoomMembersModal__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                    isOpen: isMembersModalOpen,\n                    onClose: ()=>setIsMembersModalOpen(false),\n                    roomId: activeChat.id\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 132,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    // For private chats, display the user information\n    if (recipient) {\n        const handleClearChatHistory = async ()=>{\n            if (!recipient._id) {\n                setClearSuccess({\n                    success: false,\n                    message: \"No se pudo identificar al usuario\"\n                });\n                return;\n            }\n            if (window.confirm(\"\\xbfEst\\xe1s seguro que deseas eliminar todo el historial de mensajes con este usuario? Esta acci\\xf3n no se puede deshacer.\")) {\n                setIsClearing(true);\n                try {\n                    const result = await clearChatHistory(recipient._id);\n                    setClearSuccess(result);\n                    setTimeout(()=>setClearSuccess(null), 3000); // Mostrar el mensaje por 3 segundos\n                } catch (error) {\n                    console.error(\"Error al limpiar historial:\", error);\n                    setClearSuccess({\n                        success: false,\n                        message: \"Error al limpiar el historial\"\n                    });\n                } finally{\n                    setIsClearing(false);\n                }\n            }\n        };\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center p-3 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative mr-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center text-xl font-semibold overflow-hidden\",\n                                            children: recipient.avatar && isValidImageSrc(recipient.avatar) && !failedImages[recipient._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                src: recipient.avatar,\n                                                alt: recipient.name,\n                                                width: 40,\n                                                height: 40,\n                                                className: \"h-full w-full object-cover\",\n                                                onError: ()=>recipient._id && handleImageError(recipient._id || \"\")\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                                lineNumber: 172,\n                                                columnNumber: 19\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: getInitials(recipient.name)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                                lineNumber: 181,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 170,\n                                            columnNumber: 15\n                                        }, this),\n                                        onlineUsers && recipient._id && onlineUsers[recipient._id] && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute bottom-0 right-0 bg-green-500 h-2.5 w-2.5 rounded-full border border-white\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 185,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 169,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"font-semibold\",\n                                            children: recipient.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 189,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: onlineUsers && recipient._id && onlineUsers[recipient._id] ? \"Online\" : \"Offline\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 190,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 188,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `p-2 rounded-full hover:bg-gray-100 ${isClearing ? \"text-gray-400\" : \"text-gray-500 hover:text-red-500\"}`,\n                                title: \"Limpiar historial de chat\",\n                                onClick: handleClearChatHistory,\n                                disabled: isClearing,\n                                children: isClearing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"animate-spin h-5 w-5\",\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                            className: \"opacity-25\",\n                                            cx: \"12\",\n                                            cy: \"12\",\n                                            r: \"10\",\n                                            stroke: \"currentColor\",\n                                            strokeWidth: \"4\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 206,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            className: \"opacity-75\",\n                                            fill: \"currentColor\",\n                                            d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                            lineNumber: 207,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 205,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-5 w-5\",\n                                    viewBox: \"0 0 20 20\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        fillRule: \"evenodd\",\n                                        d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n                                        clipRule: \"evenodd\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                        lineNumber: 211,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                    lineNumber: 210,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                                lineNumber: 198,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                            lineNumber: 197,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 167,\n                    columnNumber: 9\n                }, this),\n                clearSuccess && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: `px-3 py-2 text-sm text-center ${clearSuccess.success ? \"bg-green-100 text-green-700\" : \"bg-red-100 text-red-700\"}`,\n                    children: clearSuccess.message\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatHeader.tsx\",\n                    lineNumber: 220,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    return null;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hJekMsYUFBYTBDLE9BQU87Ozs7Ozs7O0lBSy9CO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DaGF0SGVhZGVyLnRzeD80MGMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCBFZGl0Um9vbU1vZGFsIGZyb20gJy4vRWRpdFJvb21Nb2RhbCc7XG5pbXBvcnQgUm9vbU1lbWJlcnNNb2RhbCBmcm9tICcuL1Jvb21NZW1iZXJzTW9kYWwnO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgaW5pdGlhbHMgZnJvbSBhIG5hbWVcbiAqIFJldHVybnMgdXAgdG8gMiBpbml0aWFscyAoZmlyc3QgYW5kIGxhc3QgbmFtZSBvciBmaXJzdCB0d28gd29yZHMpXG4gKi9cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICBcbiAgY29uc3QgcGFydHMgPSBuYW1lLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAvLyBHZXQgZmlyc3QgbGV0dGVyIG9mIGZpcnN0IGFuZCBsYXN0IG5hbWVcbiAgICByZXR1cm4gYCR7cGFydHNbMF0uY2hhckF0KDApfSR7cGFydHNbMV0uY2hhckF0KDApfWAudG9VcHBlckNhc2UoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgZmlyc3QgdHdvIGxldHRlcnMgb2Ygc2luZ2xlIG5hbWVcbiAgICByZXR1cm4gbmFtZS5zdWJzdHJpbmcoMCwgTWF0aC5taW4oMiwgbmFtZS5sZW5ndGgpKS50b1VwcGVyQ2FzZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiBhIHN0cmluZyBpcyBhIHZhbGlkIGltYWdlIFVSTCBvciBiYXNlNjQgaW1hZ2UgZGF0YVxuICovXG5jb25zdCBpc1ZhbGlkSW1hZ2VTcmMgPSAoc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuID0+IHtcbiAgaWYgKCFzcmMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGlmIGl0J3MgYSB2YWxpZCBVUkwgb3IgYmFzZTY0IGRhdGFcbiAgcmV0dXJuIChcbiAgICBzcmMuc3RhcnRzV2l0aCgnaHR0cDovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwczovLycpIHx8IFxuICAgIHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpXG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGF0SGVhZGVyKCkge1xuICBjb25zdCB7IGFjdGl2ZUNoYXQsIHVzZXJzLCByb29tcywgb25saW5lVXNlcnMsIGNsZWFyQ2hhdEhpc3RvcnkgfSA9IHVzZUNoYXQoKTtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IFtpc0VkaXRNb2RhbE9wZW4sIHNldElzRWRpdE1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc01lbWJlcnNNb2RhbE9wZW4sIHNldElzTWVtYmVyc01vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmYWlsZWRJbWFnZXMsIHNldEZhaWxlZEltYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuICBjb25zdCBbaXNDbGVhcmluZywgc2V0SXNDbGVhcmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjbGVhclN1Y2Nlc3MsIHNldENsZWFyU3VjY2Vzc10gPSB1c2VTdGF0ZTx7IHN1Y2Nlc3M6IGJvb2xlYW4sIG1lc3NhZ2U6IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VFcnJvciA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmFpbGVkSW1hZ2VzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbaWRdOiB0cnVlXG4gICAgfSkpO1xuICB9O1xuXG4gIGlmICghYWN0aXZlQ2hhdCkgcmV0dXJuIG51bGw7XG5cbiAgLy8gR2V0IGNoYXQgcm9vbSBmcm9tIHRoZSBsaXN0IG9mIHJvb21zXG4gIGNvbnN0IHJvb20gPSByb29tcy5maW5kKHIgPT4gci5faWQgPT09IGFjdGl2ZUNoYXQuaWQpO1xuICBcbiAgLy8gSXMgdGhpcyBhIGdyb3VwIGNoYXQ/XG4gIGNvbnN0IGlzR3JvdXBDaGF0ID0gYWN0aXZlQ2hhdC50eXBlID09PSAncm9vbSc7XG4gIFxuICAvLyBGb3IgcHJpdmF0ZSBjaGF0cywgZ2V0IHRoZSByZWNpcGllbnQgKHRoZSBvdGhlciB1c2VyKVxuICBjb25zdCByZWNpcGllbnQgPSAhaXNHcm91cENoYXQgPyB1c2Vycy5maW5kKHUgPT4gdS5faWQgPT09IGFjdGl2ZUNoYXQuaWQpIDogbnVsbDtcbiAgXG4gIC8vIEZvciBncm91cCBjaGF0cywgZGlzcGxheSB0aGUgcm9vbSBpbmZvcm1hdGlvblxuICBpZiAoaXNHcm91cENoYXQgJiYgcm9vbSkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTMgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTAgdy0xMCByb3VuZGVkLWZ1bGwgYmctZ3JheS0zMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIG1yLTNcIj5cbiAgICAgICAgICAgICAge3Jvb20uaW1hZ2UgJiYgaXNWYWxpZEltYWdlU3JjKHJvb20uaW1hZ2UpICYmICFmYWlsZWRJbWFnZXNbcm9vbS5faWQgfHwgJyddID8gKFxuICAgICAgICAgICAgICAgIDxJbWFnZSBcbiAgICAgICAgICAgICAgICAgIHNyYz17cm9vbS5pbWFnZX1cbiAgICAgICAgICAgICAgICAgIGFsdD17cm9vbS5uYW1lfVxuICAgICAgICAgICAgICAgICAgd2lkdGg9ezQwfVxuICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgIHByaW9yaXR5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHJvb20uX2lkICYmIGhhbmRsZUltYWdlRXJyb3Iocm9vbS5faWQgfHwgJycpfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkXCI+e2dldEluaXRpYWxzKHJvb20ubmFtZSl9PC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPntyb29tLm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAge3Jvb20ubWVtYmVycz8ubGVuZ3RofSBtZW1iZXJzXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICB7LyogTWllbWJyb3MgZGVsIGNoYXQgKi99XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTEwMFwiXG4gICAgICAgICAgICAgIHRpdGxlPVwiVmlldyBtZW1iZXJzXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNNZW1iZXJzTW9kYWxPcGVuKHRydWUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEzIDZhMyAzIDAgMTEtNiAwIDMgMyAwIDAxNiAwek0xOCA4YTIgMiAwIDExLTQgMCAyIDIgMCAwMTQgMHpNMTQgMTVhNCA0IDAgMDAtOCAwdjNoOHYtM3pNNiA4YTIgMiAwIDExLTQgMCAyIDIgMCAwMTQgMHpNMTYgMTh2LTNhNS45NzIgNS45NzIgMCAwMC0uNzUtMi45MDZBMy4wMDUgMy4wMDUgMCAwMTE5IDE1djNoLTN6TTQuNzUgMTIuMDk0QTUuOTczIDUuOTczIDAgMDA0IDE1djNIMXYtM2EzIDMgMCAwMTMuNzUtMi45MDZ6XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgey8qIEVkaXRhciBjaGF0IChzb2xvIHBhcmEgZWwgY3JlYWRvcikgKi99XG4gICAgICAgICAgICB7cm9vbS5jcmVhdG9yICYmIHVzZXIgJiYgcm9vbS5jcmVhdG9yLl9pZCA9PT0gdXNlci5pZCAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgICAgIHRpdGxlPVwiRWRpdCByb29tXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc0VkaXRNb2RhbE9wZW4odHJ1ZSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTEuNDkgMy4xN2MtLjM4LTEuNTYtMi42LTEuNTYtMi45OCAwYTEuNTMyIDEuNTMyIDAgMDEtMi4yODYuOTQ4Yy0xLjM3Mi0uODM2LTIuOTQyLjczNC0yLjEwNiAyLjEwNi41NC44ODYuMDYxIDIuMDQyLS45NDcgMi4yODctMS41NjEuMzc5LTEuNTYxIDIuNiAwIDIuOTc4YTEuNTMyIDEuNTMyIDAgMDEuOTQ3IDIuMjg3Yy0uODM2IDEuMzcyLjczNCAyLjk0MiAyLjEwNiAyLjEwNmExLjUzMiAxLjUzMiAwIDAxMi4yODcuOTQ3Yy4zNzkgMS41NjEgMi42IDEuNTYxIDIuOTc4IDBhMS41MzMgMS41MzMgMCAwMTIuMjg3LS45NDdjMS4zNzIuODM2IDIuOTQyLS43MzQgMi4xMDYtMi4xMDZhMS41MzMgMS41MzMgMCAwMS45NDctMi4yODdjMS41NjEtLjM3OSAxLjU2MS0yLjYgMC0yLjk3OGExLjUzMiAxLjUzMiAwIDAxLS45NDctMi4yODdjLjgzNi0xLjM3Mi0uNzM0LTIuOTQyLTIuMTA2LTIuMTA2YTEuNTMyIDEuNTMyIDAgMDEtMi4yODctLjk0N3pNMTAgMTNhMyAzIDAgMTAwLTYgMyAzIDAgMDAwIDZ6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHsvKiBNb2RhbGVzIHBhcmEgY2hhdCBncnVwYWwgKi99XG4gICAgICAgIHtpc0VkaXRNb2RhbE9wZW4gJiYgKFxuICAgICAgICAgIDxFZGl0Um9vbU1vZGFsIFxuICAgICAgICAgICAgaXNPcGVuPXtpc0VkaXRNb2RhbE9wZW59IFxuICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0SXNFZGl0TW9kYWxPcGVuKGZhbHNlKX0gXG4gICAgICAgICAgICByb29tSWQ9e2FjdGl2ZUNoYXQuaWR9IFxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7aXNNZW1iZXJzTW9kYWxPcGVuICYmIChcbiAgICAgICAgICA8Um9vbU1lbWJlcnNNb2RhbFxuICAgICAgICAgICAgaXNPcGVuPXtpc01lbWJlcnNNb2RhbE9wZW59XG4gICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc01lbWJlcnNNb2RhbE9wZW4oZmFsc2UpfVxuICAgICAgICAgICAgcm9vbUlkPXthY3RpdmVDaGF0LmlkfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG4gIFxuICAvLyBGb3IgcHJpdmF0ZSBjaGF0cywgZGlzcGxheSB0aGUgdXNlciBpbmZvcm1hdGlvblxuICBpZiAocmVjaXBpZW50KSB7XG4gICAgY29uc3QgaGFuZGxlQ2xlYXJDaGF0SGlzdG9yeSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghcmVjaXBpZW50Ll9pZCkge1xuICAgICAgICBzZXRDbGVhclN1Y2Nlc3MoeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ05vIHNlIHB1ZG8gaWRlbnRpZmljYXIgYWwgdXN1YXJpbycgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCfCv0VzdMOhcyBzZWd1cm8gcXVlIGRlc2VhcyBlbGltaW5hciB0b2RvIGVsIGhpc3RvcmlhbCBkZSBtZW5zYWplcyBjb24gZXN0ZSB1c3VhcmlvPyBFc3RhIGFjY2nDs24gbm8gc2UgcHVlZGUgZGVzaGFjZXIuJykpIHtcbiAgICAgICAgc2V0SXNDbGVhcmluZyh0cnVlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGVhckNoYXRIaXN0b3J5KHJlY2lwaWVudC5faWQpO1xuICAgICAgICAgIHNldENsZWFyU3VjY2VzcyhyZXN1bHQpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0Q2xlYXJTdWNjZXNzKG51bGwpLCAzMDAwKTsgLy8gTW9zdHJhciBlbCBtZW5zYWplIHBvciAzIHNlZ3VuZG9zXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgbGltcGlhciBoaXN0b3JpYWw6JywgZXJyb3IpO1xuICAgICAgICAgIHNldENsZWFyU3VjY2Vzcyh7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRXJyb3IgYWwgbGltcGlhciBlbCBoaXN0b3JpYWwnIH0pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHNldElzQ2xlYXJpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBwLTMgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIG1yLTNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEwIHctMTAgcm91bmRlZC1mdWxsIGJnLWdyYXktMzAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteGwgZm9udC1zZW1pYm9sZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICB7cmVjaXBpZW50LmF2YXRhciAmJiBpc1ZhbGlkSW1hZ2VTcmMocmVjaXBpZW50LmF2YXRhcikgJiYgIWZhaWxlZEltYWdlc1tyZWNpcGllbnQuX2lkIHx8ICcnXSA/IChcbiAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICBzcmM9e3JlY2lwaWVudC5hdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgIGFsdD17cmVjaXBpZW50Lm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPXs0MH1cbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiByZWNpcGllbnQuX2lkICYmIGhhbmRsZUltYWdlRXJyb3IocmVjaXBpZW50Ll9pZCB8fCAnJyl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8c3Bhbj57Z2V0SW5pdGlhbHMocmVjaXBpZW50Lm5hbWUpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge29ubGluZVVzZXJzICYmIHJlY2lwaWVudC5faWQgJiYgb25saW5lVXNlcnNbcmVjaXBpZW50Ll9pZF0gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBiZy1ncmVlbi01MDAgaC0yLjUgdy0yLjUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItd2hpdGVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGRcIj57cmVjaXBpZW50Lm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAge29ubGluZVVzZXJzICYmIHJlY2lwaWVudC5faWQgJiYgb25saW5lVXNlcnNbcmVjaXBpZW50Ll9pZF0gPyAnT25saW5lJyA6ICdPZmZsaW5lJ31cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIEJvdMOzbiBwYXJhIGxpbXBpYXIgaGlzdG9yaWFsIGRlIGNoYXQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTEwMCAke2lzQ2xlYXJpbmcgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LXJlZC01MDAnfWB9XG4gICAgICAgICAgICAgIHRpdGxlPVwiTGltcGlhciBoaXN0b3JpYWwgZGUgY2hhdFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsZWFyQ2hhdEhpc3Rvcnl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0NsZWFyaW5nfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXNDbGVhcmluZyA/IChcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTUgdy01XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJvcGFjaXR5LTI1XCIgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2VXaWR0aD1cIjRcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzTmFtZT1cIm9wYWNpdHktNzVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNOSAyYTEgMSAwIDAwLS44OTQuNTUzTDcuMzgyIDRINGExIDEgMCAwMDAgMnYxMGEyIDIgMCAwMDIgMmg4YTIgMiAwIDAwMi0yVjZhMSAxIDAgMTAwLTJoLTMuMzgybC0uNzI0LTEuNDQ3QTEgMSAwIDAwMTEgMkg5ek03IDhhMSAxIDAgMDEyIDB2NmExIDEgMCAxMS0yIDBWOHptNS0xYTEgMSAwIDAwLTEgMXY2YTEgMSAwIDEwMiAwVjhhMSAxIDAgMDAtMS0xelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogTWVuc2FqZSBkZSDDqXhpdG8gbyBlcnJvciBhbCBsaW1waWFyIGhpc3RvcmlhbCAqL31cbiAgICAgICAge2NsZWFyU3VjY2VzcyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LWNlbnRlciAke2NsZWFyU3VjY2Vzcy5zdWNjZXNzID8gJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTcwMCcgOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC03MDAnfWB9PlxuICAgICAgICAgICAge2NsZWFyU3VjY2Vzcy5tZXNzYWdlfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDaGF0IiwidXNlQXV0aCIsIkltYWdlIiwiRWRpdFJvb21Nb2RhbCIsIlJvb21NZW1iZXJzTW9kYWwiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiTWF0aCIsIm1pbiIsImlzVmFsaWRJbWFnZVNyYyIsInNyYyIsInN0YXJ0c1dpdGgiLCJDaGF0SGVhZGVyIiwiYWN0aXZlQ2hhdCIsInVzZXJzIiwicm9vbXMiLCJvbmxpbmVVc2VycyIsImNsZWFyQ2hhdEhpc3RvcnkiLCJ1c2VyIiwiaXNFZGl0TW9kYWxPcGVuIiwic2V0SXNFZGl0TW9kYWxPcGVuIiwiaXNNZW1iZXJzTW9kYWxPcGVuIiwic2V0SXNNZW1iZXJzTW9kYWxPcGVuIiwiZmFpbGVkSW1hZ2VzIiwic2V0RmFpbGVkSW1hZ2VzIiwiaXNDbGVhcmluZyIsInNldElzQ2xlYXJpbmciLCJjbGVhclN1Y2Nlc3MiLCJzZXRDbGVhclN1Y2Nlc3MiLCJoYW5kbGVJbWFnZUVycm9yIiwiaWQiLCJwcmV2Iiwicm9vbSIsImZpbmQiLCJyIiwiX2lkIiwiaXNHcm91cENoYXQiLCJ0eXBlIiwicmVjaXBpZW50IiwidSIsImRpdiIsImNsYXNzTmFtZSIsImltYWdlIiwiYWx0Iiwid2lkdGgiLCJoZWlnaHQiLCJwcmlvcml0eSIsIm9uRXJyb3IiLCJzcGFuIiwiaDMiLCJwIiwibWVtYmVycyIsImJ1dHRvbiIsInRpdGxlIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZCIsImNyZWF0b3IiLCJmaWxsUnVsZSIsImNsaXBSdWxlIiwiaXNPcGVuIiwib25DbG9zZSIsInJvb21JZCIsImhhbmRsZUNsZWFyQ2hhdEhpc3RvcnkiLCJzdWNjZXNzIiwibWVzc2FnZSIsIndpbmRvdyIsImNvbmZpcm0iLCJyZXN1bHQiLCJzZXRUaW1lb3V0IiwiZXJyb3IiLCJjb25zb2xlIiwiYXZhdGFyIiwiZGlzYWJsZWQiLCJjaXJjbGUiLCJjeCIsImN5Iiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/ChatHeader.tsx\n");

/***/ }),

/***/ "./src/components/chat/ChatSidebar.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/ChatSidebar.tsx ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatSidebar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../profile/ProfileModal */ \"./src/components/profile/ProfileModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\nfunction ChatSidebar({ onCreateRoom }) {\n    const { user, logout } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { rooms, users, onlineUsers, activeChat, setActiveChat, isLoading, unreadMessages } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chats\");\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isProfileModalOpen, setIsProfileModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const handleImageError = (id)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [id]: true\n            }));\n    };\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"w-64 flex-shrink-0 bg-gray-800 text-white p-4 flex flex-col h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 74,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n            lineNumber: 73,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-64 flex-shrink-0 bg-gray-800 text-white flex flex-col h-full\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b border-gray-700\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-3 relative\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                            children: user?.avatar && isValidImageSrc(user.avatar) && !failedImages[user?.id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                src: user.avatar,\n                                alt: user?.name || \"User avatar\",\n                                width: 40,\n                                height: 40,\n                                className: \"h-full w-full object-cover\",\n                                priority: false,\n                                onError: ()=>handleImageError(user?.id || \"\")\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 88,\n                                columnNumber: 15\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-lg font-medium\",\n                                children: user?.name ? getInitials(user.name) : \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 98,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 86,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 min-w-0\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-white truncate\",\n                                    children: user?.name\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 102,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-400\",\n                                    children: \"Online\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 103,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 101,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                            className: \"text-white p-1 rounded-full hover:bg-gray-700 transition\",\n                            title: \"Profile settings\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    d: \"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 111,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 110,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 105,\n                            columnNumber: 11\n                        }, this),\n                        showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute right-0 top-10 mt-1 w-48 bg-gray-700 rounded-md shadow-lg z-10\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                className: \"py-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>{\n                                                setIsProfileModalOpen(true);\n                                                setShowProfileMenu(false);\n                                            },\n                                            className: \"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600\",\n                                            children: \"Profile Settings\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 120,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 119,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: logout,\n                                            className: \"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600\",\n                                            children: \"Logout\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 131,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 130,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 118,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 117,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 85,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 84,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex border-b border-gray-700\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: `flex-1 py-3 text-center text-sm font-medium relative ${activeTab === \"chats\" ? \"text-white border-b-2 border-blue-500\" : \"text-gray-400 hover:text-white\"}`,\n                        onClick: ()=>setActiveTab(\"chats\"),\n                        children: [\n                            \"Direct Messages\",\n                            Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"user_\")).reduce((total, [_, count])=>total + count, 0) > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute top-2 right-12 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                children: Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"user_\")).reduce((total, [_, count])=>total + count, 0)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 154,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                        lineNumber: 146,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: `flex-1 py-3 text-center text-sm font-medium relative ${activeTab === \"rooms\" ? \"text-white border-b-2 border-blue-500\" : \"text-gray-400 hover:text-white\"}`,\n                        onClick: ()=>setActiveTab(\"rooms\"),\n                        children: [\n                            \"Rooms\",\n                            Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"room_\")).reduce((total, [_, count])=>total + count, 0) > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute top-2 right-12 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                children: Object.entries(unreadMessages).filter(([key])=>key.startsWith(\"room_\")).reduce((total, [_, count])=>total + count, 0)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                lineNumber: 169,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                        lineNumber: 161,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 145,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto\",\n                children: activeTab === \"chats\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xs uppercase text-gray-500 font-semibold px-2 py-1\",\n                            children: \"Direct Messages\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 182,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-1\",\n                            children: users.filter((u)=>u._id !== user?.id) // Don't show the current user\n                            .map((otherUser)=>{\n                                const isActive = activeChat?.id === otherUser._id && activeChat?.type === \"private\";\n                                const isOnline = onlineUsers && otherUser._id ? onlineUsers[otherUser._id] : false;\n                                const unreadCount = otherUser._id ? unreadMessages[`user_${otherUser._id}`] || 0 : 0;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: `w-full text-left flex items-center rounded-md p-2 ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`,\n                                    onClick: ()=>setActiveChat({\n                                            id: otherUser._id || \"\",\n                                            type: \"private\"\n                                        }),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"relative\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                                                    children: otherUser.avatar && isValidImageSrc(otherUser.avatar) && !failedImages[otherUser._id || \"\"] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: otherUser.avatar,\n                                                        alt: otherUser.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\",\n                                                        priority: false,\n                                                        onError: ()=>otherUser._id && handleImageError(otherUser._id || \"\")\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                        lineNumber: 200,\n                                                        columnNumber: 29\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium\",\n                                                        children: getInitials(otherUser.name)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                        lineNumber: 210,\n                                                        columnNumber: 29\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 198,\n                                                    columnNumber: 25\n                                                }, this),\n                                                isOnline && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute bottom-0 right-0 bg-green-500 h-2 w-2 rounded-full\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 214,\n                                                    columnNumber: 27\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 197,\n                                            columnNumber: 23\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-2 flex-1 min-w-0\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium truncate\",\n                                                            children: otherUser.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 219,\n                                                            columnNumber: 27\n                                                        }, this),\n                                                        unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                                            children: unreadCount\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 221,\n                                                            columnNumber: 29\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 218,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-400 truncate\",\n                                                    children: isOnline ? \"Online\" : \"Offline\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 226,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 217,\n                                            columnNumber: 23\n                                        }, this)\n                                    ]\n                                }, otherUser._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 21\n                                }, this);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 183,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 181,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between px-2 py-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-xs uppercase text-gray-500 font-semibold\",\n                                    children: \"Rooms\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 238,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: onCreateRoom,\n                                    className: \"text-gray-400 hover:text-white\",\n                                    title: \"Create a new room\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-4 w-4\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M12 4v16m8-8H4\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 245,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                        lineNumber: 244,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 239,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 237,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-1\",\n                            children: rooms.map((room)=>{\n                                const isActive = activeChat?.id === room._id && activeChat?.type === \"room\";\n                                const unreadCount = unreadMessages[`room_${room._id}`] || 0;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: `w-full text-left flex items-center rounded-md p-2 ${isActive ? \"bg-gray-700\" : \"hover:bg-gray-700\"}`,\n                                    onClick: ()=>setActiveChat({\n                                            id: room._id,\n                                            type: \"room\"\n                                        }),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"h-8 w-8 rounded-full bg-gray-600 flex items-center justify-center overflow-hidden\",\n                                            children: room.image && isValidImageSrc(room.image) && !failedImages[room._id] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                src: room.image,\n                                                alt: room.name,\n                                                width: 32,\n                                                height: 32,\n                                                className: \"h-full w-full object-cover\",\n                                                priority: false,\n                                                onError: ()=>handleImageError(room._id)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                lineNumber: 262,\n                                                columnNumber: 25\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm font-medium\",\n                                                children: getInitials(room.name)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                lineNumber: 272,\n                                                columnNumber: 25\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 260,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-2 flex-1 min-w-0\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium truncate\",\n                                                            children: room.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 277,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\",\n                                                            children: unreadCount\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                            lineNumber: 279,\n                                                            columnNumber: 27\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 276,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-400 truncate\",\n                                                    children: [\n                                                        room.members.length,\n                                                        \" members\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                                    lineNumber: 284,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                            lineNumber: 275,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, room._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                                    lineNumber: 255,\n                                    columnNumber: 19\n                                }, this);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                            lineNumber: 249,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                    lineNumber: 236,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 179,\n                columnNumber: 7\n            }, this),\n            isProfileModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_profile_ProfileModal__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                isOpen: isProfileModalOpen,\n                onClose: ()=>setIsProfileModalOpen(false)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n                lineNumber: 296,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/ChatSidebar.tsx\",\n        lineNumber: 82,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TVYsaUJBQWlCOEMsS0FBS2IsR0FBRzs7Ozs7cUVBRzFDLDhEQUFDdEI7Z0RBQUtQLFdBQVU7MERBQXVCckMsWUFBWStFLEtBQUs5RSxJQUFJOzs7Ozs7Ozs7OztzREFHaEUsOERBQUNtQzs0Q0FBSUMsV0FBVTs7OERBQ2IsOERBQUNEO29EQUFJQyxXQUFVOztzRUFDYiw4REFBQ29DOzREQUFHcEMsV0FBVTtzRUFBZ0MwQyxLQUFLOUUsSUFBSTs7Ozs7O3dEQUN0RHVFLGNBQWMsbUJBQ2IsOERBQUM1Qjs0REFBS1AsV0FBVTtzRUFDYm1DOzs7Ozs7Ozs7Ozs7OERBSVAsOERBQUNFO29EQUFFckMsV0FBVTs7d0RBQWtDMEMsS0FBS0UsT0FBTyxDQUFDNUUsTUFBTTt3REFBQzs7Ozs7Ozs7Ozs7Ozs7bUNBNUJoRTBFLEtBQUtiLEdBQUc7Ozs7OzRCQWdDbkI7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBT1ByQyxvQ0FDQyw4REFBQzlCLDZEQUFZQTtnQkFDWG1GLFFBQVFyRDtnQkFDUnNELFNBQVMsSUFBTXJELHNCQUFzQjs7Ozs7Ozs7Ozs7O0FBSy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DaGF0U2lkZWJhci50c3g/NzAwYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCBQcm9maWxlTW9kYWwgZnJvbSAnLi4vcHJvZmlsZS9Qcm9maWxlTW9kYWwnO1xuXG5pbnRlcmZhY2UgQ2hhdFNpZGViYXJQcm9wcyB7XG4gIG9uQ3JlYXRlUm9vbTogKCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIEFjdGl2ZUNoYXQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncHJpdmF0ZScgfCAncm9vbSc7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBpbml0aWFscyBmcm9tIGEgbmFtZVxuICogUmV0dXJucyB1cCB0byAyIGluaXRpYWxzIChmaXJzdCBhbmQgbGFzdCBuYW1lIG9yIGZpcnN0IHR3byB3b3JkcylcbiAqL1xuY29uc3QgZ2V0SW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIFxuICBjb25zdCBwYXJ0cyA9IG5hbWUudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuICAgIC8vIEdldCBmaXJzdCBsZXR0ZXIgb2YgZmlyc3QgYW5kIGxhc3QgbmFtZVxuICAgIHJldHVybiBgJHtwYXJ0c1swXS5jaGFyQXQoMCl9JHtwYXJ0c1sxXS5jaGFyQXQoMCl9YC50b1VwcGVyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCBmaXJzdCB0d28gbGV0dGVycyBvZiBzaW5nbGUgbmFtZVxuICAgIHJldHVybiBuYW1lLnN1YnN0cmluZygwLCBNYXRoLm1pbigyLCBuYW1lLmxlbmd0aCkpLnRvVXBwZXJDYXNlKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIGEgc3RyaW5nIGlzIGEgdmFsaWQgaW1hZ2UgVVJMIG9yIGJhc2U2NCBpbWFnZSBkYXRhXG4gKi9cbmNvbnN0IGlzVmFsaWRJbWFnZVNyYyA9IChzcmM6IHN0cmluZyB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoIXNyYykgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQ2hlY2sgaWYgaXQncyBhIHZhbGlkIFVSTCBvciBiYXNlNjQgZGF0YVxuICByZXR1cm4gKFxuICAgIHNyYy5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UvJylcbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRTaWRlYmFyKHsgb25DcmVhdGVSb29tIH06IENoYXRTaWRlYmFyUHJvcHMpIHtcbiAgY29uc3QgeyB1c2VyLCBsb2dvdXQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgeyBcbiAgICByb29tcywgXG4gICAgdXNlcnMsIFxuICAgIG9ubGluZVVzZXJzLCBcbiAgICBhY3RpdmVDaGF0LCBcbiAgICBzZXRBY3RpdmVDaGF0LFxuICAgIGlzTG9hZGluZyxcbiAgICB1bnJlYWRNZXNzYWdlc1xuICB9ID0gdXNlQ2hhdCgpO1xuXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTwnY2hhdHMnIHwgJ3Jvb21zJz4oJ2NoYXRzJyk7XG4gIGNvbnN0IFtzaG93UHJvZmlsZU1lbnUsIHNldFNob3dQcm9maWxlTWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1Byb2ZpbGVNb2RhbE9wZW4sIHNldElzUHJvZmlsZU1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmYWlsZWRJbWFnZXMsIHNldEZhaWxlZEltYWdlc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oe30pO1xuXG4gIGNvbnN0IGhhbmRsZUltYWdlRXJyb3IgPSAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldEZhaWxlZEltYWdlcyhwcmV2ID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgW2lkXTogdHJ1ZVxuICAgIH0pKTtcbiAgfTtcblxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy02NCBmbGV4LXNocmluay0wIGJnLWdyYXktODAwIHRleHQtd2hpdGUgcC00IGZsZXggZmxleC1jb2wgaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci13aGl0ZVwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy02NCBmbGV4LXNocmluay0wIGJnLWdyYXktODAwIHRleHQtd2hpdGUgZmxleCBmbGV4LWNvbCBoLWZ1bGxcIj5cbiAgICAgIHsvKiBVc2VyIHByb2ZpbGUgc2VjdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyByZWxhdGl2ZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgIHt1c2VyPy5hdmF0YXIgJiYgaXNWYWxpZEltYWdlU3JjKHVzZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW3VzZXI/LmlkIHx8ICcnXSA/IChcbiAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgc3JjPXt1c2VyLmF2YXRhcn1cbiAgICAgICAgICAgICAgICBhbHQ9e3VzZXI/Lm5hbWUgfHwgJ1VzZXIgYXZhdGFyJ31cbiAgICAgICAgICAgICAgICB3aWR0aD17NDB9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IGhhbmRsZUltYWdlRXJyb3IodXNlcj8uaWQgfHwgJycpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bVwiPnt1c2VyPy5uYW1lID8gZ2V0SW5pdGlhbHModXNlci5uYW1lKSA6ICcnfTwvc3Bhbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdHJ1bmNhdGVcIj57dXNlcj8ubmFtZX08L2gzPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwXCI+T25saW5lPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UHJvZmlsZU1lbnUoIXNob3dQcm9maWxlTWVudSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHAtMSByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS03MDAgdHJhbnNpdGlvblwiXG4gICAgICAgICAgICB0aXRsZT1cIlByb2ZpbGUgc2V0dGluZ3NcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDZhMiAyIDAgMTEwLTQgMiAyIDAgMDEwIDR6TTEwIDEyYTIgMiAwIDExMC00IDIgMiAwIDAxMCA0ek0xMCAxOGEyIDIgMCAxMTAtNCAyIDIgMCAwMTAgNHpcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICB7LyogUHJvZmlsZSBtZW51IGRyb3Bkb3duICovfVxuICAgICAgICAgIHtzaG93UHJvZmlsZU1lbnUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0wIHRvcC0xMCBtdC0xIHctNDggYmctZ3JheS03MDAgcm91bmRlZC1tZCBzaGFkb3ctbGcgei0xMFwiPlxuICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwicHktMVwiPlxuICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRJc1Byb2ZpbGVNb2RhbE9wZW4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgdGV4dC1zbSB0ZXh0LXdoaXRlIGhvdmVyOmJnLWdyYXktNjAwXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgUHJvZmlsZSBTZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtsb2dvdXR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIHRleHQtc20gdGV4dC13aGl0ZSBob3ZlcjpiZy1ncmF5LTYwMFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIExvZ291dFxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBUYWJzIG5hdmlnYXRpb24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktNzAwXCI+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIHB5LTMgdGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LW1lZGl1bSByZWxhdGl2ZSAke2FjdGl2ZVRhYiA9PT0gJ2NoYXRzJyA/ICd0ZXh0LXdoaXRlIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtd2hpdGUnfWB9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdjaGF0cycpfVxuICAgICAgICA+XG4gICAgICAgICAgRGlyZWN0IE1lc3NhZ2VzXG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVucmVhZE1lc3NhZ2VzKVxuICAgICAgICAgICAgLmZpbHRlcigoW2tleV0pID0+IGtleS5zdGFydHNXaXRoKCd1c2VyXycpKVxuICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApID4gMCAmJiAoXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0xMiBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMS41IHB5LTAuNSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1bnJlYWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ3VzZXJfJykpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBweS0zIHRleHQtY2VudGVyIHRleHQtc20gZm9udC1tZWRpdW0gcmVsYXRpdmUgJHthY3RpdmVUYWIgPT09ICdyb29tcycgPyAndGV4dC13aGl0ZSBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCcgOiAndGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlJ31gfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYigncm9vbXMnKX1cbiAgICAgICAgPlxuICAgICAgICAgIFJvb21zXG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVucmVhZE1lc3NhZ2VzKVxuICAgICAgICAgICAgLmZpbHRlcigoW2tleV0pID0+IGtleS5zdGFydHNXaXRoKCdyb29tXycpKVxuICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApID4gMCAmJiAoXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0xMiBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMS41IHB5LTAuNSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1bnJlYWRNZXNzYWdlcylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChba2V5XSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ3Jvb21fJykpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIFtfLCBjb3VudF0pID0+IHRvdGFsICsgY291bnQsIDApfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBDaGF0L1Jvb20gbGlzdCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICB7YWN0aXZlVGFiID09PSAnY2hhdHMnID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14cyB1cHBlcmNhc2UgdGV4dC1ncmF5LTUwMCBmb250LXNlbWlib2xkIHB4LTIgcHktMVwiPkRpcmVjdCBNZXNzYWdlczwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICB7dXNlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHUgPT4gdS5faWQgIT09IHVzZXI/LmlkKSAvLyBEb24ndCBzaG93IHRoZSBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgICAgICAubWFwKG90aGVyVXNlciA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGFjdGl2ZUNoYXQ/LmlkID09PSBvdGhlclVzZXIuX2lkICYmIGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJztcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlzT25saW5lID0gb25saW5lVXNlcnMgJiYgb3RoZXJVc2VyLl9pZCA/IG9ubGluZVVzZXJzW290aGVyVXNlci5faWRdIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICBjb25zdCB1bnJlYWRDb3VudCA9IG90aGVyVXNlci5faWQgPyB1bnJlYWRNZXNzYWdlc1tgdXNlcl8ke290aGVyVXNlci5faWR9YF0gfHwgMCA6IDA7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e290aGVyVXNlci5faWR9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBmbGV4IGl0ZW1zLWNlbnRlciByb3VuZGVkLW1kIHAtMiAke2lzQWN0aXZlID8gJ2JnLWdyYXktNzAwJyA6ICdob3ZlcjpiZy1ncmF5LTcwMCd9YH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVDaGF0KHsgaWQ6IG90aGVyVXNlci5faWQgfHwgJycsIHR5cGU6ICdwcml2YXRlJyB9KX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC04IHctOCByb3VuZGVkLWZ1bGwgYmctZ3JheS02MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtvdGhlclVzZXIuYXZhdGFyICYmIGlzVmFsaWRJbWFnZVNyYyhvdGhlclVzZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW290aGVyVXNlci5faWQgfHwgJyddID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtvdGhlclVzZXIuYXZhdGFyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtvdGhlclVzZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBvdGhlclVzZXIuX2lkICYmIGhhbmRsZUltYWdlRXJyb3Iob3RoZXJVc2VyLl9pZCB8fCAnJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e2dldEluaXRpYWxzKG90aGVyVXNlci5uYW1lKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc09ubGluZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBiZy1ncmVlbi01MDAgaC0yIHctMiByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC0yIGZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRydW5jYXRlXCI+e290aGVyVXNlci5uYW1lfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTEgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB4LTIgcHktMSB0ZXh0LXhzIGZvbnQtYm9sZCBsZWFkaW5nLW5vbmUgdGV4dC1yZWQtMTAwIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dW5yZWFkQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2lzT25saW5lID8gJ09ubGluZScgOiAnT2ZmbGluZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC0yIHB5LTFcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteHMgdXBwZXJjYXNlIHRleHQtZ3JheS01MDAgZm9udC1zZW1pYm9sZFwiPlJvb21zPC9oMz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNyZWF0ZVJvb219XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIkNyZWF0ZSBhIG5ldyByb29tXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMiA0djE2bTgtOEg0XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgIHtyb29tcy5tYXAocm9vbSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVDaGF0Py5pZCA9PT0gcm9vbS5faWQgJiYgYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVucmVhZENvdW50ID0gdW5yZWFkTWVzc2FnZXNbYHJvb21fJHtyb29tLl9pZH1gXSB8fCAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtleT17cm9vbS5faWR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1tZCBwLTIgJHtpc0FjdGl2ZSA/ICdiZy1ncmF5LTcwMCcgOiAnaG92ZXI6YmctZ3JheS03MDAnfWB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZUNoYXQoeyBpZDogcm9vbS5faWQsIHR5cGU6ICdyb29tJyB9KX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTggdy04IHJvdW5kZWQtZnVsbCBiZy1ncmF5LTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7cm9vbS5pbWFnZSAmJiBpc1ZhbGlkSW1hZ2VTcmMocm9vbS5pbWFnZSkgJiYgIWZhaWxlZEltYWdlc1tyb29tLl9pZF0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtyb29tLmltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3Jvb20ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4gaGFuZGxlSW1hZ2VFcnJvcihyb29tLl9pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e2dldEluaXRpYWxzKHJvb20ubmFtZSl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLTIgZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0cnVuY2F0ZVwiPntyb29tLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0xIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC0yIHB5LTEgdGV4dC14cyBmb250LWJvbGQgbGVhZGluZy1ub25lIHRleHQtcmVkLTEwMCBiZy1yZWQtNjAwIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1bnJlYWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj57cm9vbS5tZW1iZXJzLmxlbmd0aH0gbWVtYmVyczwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHsvKiBQcm9maWxlIG1vZGFsICovfVxuICAgICAge2lzUHJvZmlsZU1vZGFsT3BlbiAmJiAoXG4gICAgICAgIDxQcm9maWxlTW9kYWxcbiAgICAgICAgICBpc09wZW49e2lzUHJvZmlsZU1vZGFsT3Blbn1cbiAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc1Byb2ZpbGVNb2RhbE9wZW4oZmFsc2UpfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNoYXQiLCJ1c2VBdXRoIiwiSW1hZ2UiLCJQcm9maWxlTW9kYWwiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiTWF0aCIsIm1pbiIsImlzVmFsaWRJbWFnZVNyYyIsInNyYyIsInN0YXJ0c1dpdGgiLCJDaGF0U2lkZWJhciIsIm9uQ3JlYXRlUm9vbSIsInVzZXIiLCJsb2dvdXQiLCJyb29tcyIsInVzZXJzIiwib25saW5lVXNlcnMiLCJhY3RpdmVDaGF0Iiwic2V0QWN0aXZlQ2hhdCIsImlzTG9hZGluZyIsInVucmVhZE1lc3NhZ2VzIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwic2hvd1Byb2ZpbGVNZW51Iiwic2V0U2hvd1Byb2ZpbGVNZW51IiwiaXNQcm9maWxlTW9kYWxPcGVuIiwic2V0SXNQcm9maWxlTW9kYWxPcGVuIiwiZmFpbGVkSW1hZ2VzIiwic2V0RmFpbGVkSW1hZ2VzIiwiaGFuZGxlSW1hZ2VFcnJvciIsImlkIiwicHJldiIsImRpdiIsImNsYXNzTmFtZSIsImF2YXRhciIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwicHJpb3JpdHkiLCJvbkVycm9yIiwic3BhbiIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInRpdGxlIiwic3ZnIiwieG1sbnMiLCJ2aWV3Qm94IiwiZmlsbCIsInBhdGgiLCJkIiwidWwiLCJsaSIsIk9iamVjdCIsImVudHJpZXMiLCJmaWx0ZXIiLCJrZXkiLCJyZWR1Y2UiLCJ0b3RhbCIsIl8iLCJjb3VudCIsInUiLCJfaWQiLCJtYXAiLCJvdGhlclVzZXIiLCJpc0FjdGl2ZSIsInR5cGUiLCJpc09ubGluZSIsInVucmVhZENvdW50IiwiaDQiLCJwIiwic3Ryb2tlIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJyb29tIiwiaW1hZ2UiLCJtZW1iZXJzIiwiaXNPcGVuIiwib25DbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/ChatSidebar.tsx\n");

/***/ }),

/***/ "./src/components/chat/CreateRoomModal.tsx":
/*!*************************************************!*\
  !*** ./src/components/chat/CreateRoomModal.tsx ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CreateRoomModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-hook-form */ \"react-hook-form\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, react_hook_form__WEBPACK_IMPORTED_MODULE_3__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, react_hook_form__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nfunction CreateRoomModal({ isOpen, onClose }) {\n    const { createRoom, users, setActiveChat } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { register, handleSubmit, reset, watch, formState: { errors } } = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_3__.useForm)({\n        defaultValues: {\n            name: \"\",\n            description: \"\",\n            isPrivate: false,\n            selectedUsers: []\n        }\n    });\n    const isPrivate = watch(\"isPrivate\");\n    const onSubmit = async (data)=>{\n        try {\n            setIsSubmitting(true);\n            setError(null);\n            const newRoom = await createRoom(data.name, data.description, data.isPrivate, data.selectedUsers);\n            // Set the newly created room as active chat\n            setActiveChat({\n                type: \"room\",\n                id: newRoom._id\n            });\n            // Close modal and reset form\n            handleClose();\n        } catch (err) {\n            setError(err.message || \"Failed to create room. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleClose = ()=>{\n        reset();\n        setError(null);\n        onClose();\n    };\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-50 overflow-y-auto\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75\",\n                    onClick: handleClose\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"inline-block w-full max-w-md px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:p-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute top-0 right-0 pt-4 pr-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"button\",\n                                onClick: handleClose,\n                                className: \"text-gray-400 hover:text-gray-500 focus:outline-none\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"sr-only\",\n                                        children: \"Close\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 88,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-6 h-6\",\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                            lineNumber: 90,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 89,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                lineNumber: 83,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                            lineNumber: 82,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"sm:flex sm:items-start\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-3 text-center sm:mt-0 sm:text-left w-full\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-medium leading-6 text-gray-900\",\n                                        children: \"Create a New Room\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 97,\n                                        columnNumber: 15\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 p-2 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                                        onSubmit: handleSubmit(onSubmit),\n                                        className: \"mt-4 space-y-4\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"name\",\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Room Name *\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 109,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"text\",\n                                                        id: \"name\",\n                                                        ...register(\"name\", {\n                                                            required: \"Room name is required\"\n                                                        }),\n                                                        className: \"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 112,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    errors.name && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"mt-1 text-sm text-red-600\",\n                                                        children: errors.name.message\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 119,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 108,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"description\",\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Description\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 124,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        id: \"description\",\n                                                        rows: 3,\n                                                        ...register(\"description\"),\n                                                        className: \"block w-full mt-1 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\",\n                                                        placeholder: \"Describe what this room is about...\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 127,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 123,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"checkbox\",\n                                                        id: \"isPrivate\",\n                                                        ...register(\"isPrivate\"),\n                                                        className: \"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 137,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        htmlFor: \"isPrivate\",\n                                                        className: \"ml-2 block text-sm text-gray-700\",\n                                                        children: \"Private Room (invite only)\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 143,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 136,\n                                                columnNumber: 17\n                                            }, this),\n                                            isPrivate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        className: \"block text-sm font-medium text-gray-700\",\n                                                        children: \"Invite Users\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 150,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-1 max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2\",\n                                                        children: users.map((user)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"flex items-center py-1\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                        type: \"checkbox\",\n                                                                        id: `user-${user._id}`,\n                                                                        value: user._id,\n                                                                        ...register(\"selectedUsers\"),\n                                                                        className: \"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                        lineNumber: 156,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                                        htmlFor: `user-${user._id}`,\n                                                                        className: \"ml-2 block text-sm text-gray-700\",\n                                                                        children: [\n                                                                            user.name,\n                                                                            \" (\",\n                                                                            user.email,\n                                                                            \")\"\n                                                                        ]\n                                                                    }, void 0, true, {\n                                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                        lineNumber: 163,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                ]\n                                                            }, user._id, true, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                                lineNumber: 155,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 153,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 149,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"submit\",\n                                                        disabled: isSubmitting,\n                                                        className: \"inline-flex justify-center w-full px-4 py-2 text-base font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                        children: isSubmitting ? \"Creating...\" : \"Create Room\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 173,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: handleClose,\n                                                        className: \"inline-flex justify-center w-full px-4 py-2 mt-3 text-base font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm\",\n                                                        children: \"Cancel\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                        lineNumber: 180,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                                lineNumber: 172,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                        lineNumber: 107,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                            lineNumber: 95,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n                    lineNumber: 81,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n            lineNumber: 73,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/CreateRoomModal.tsx\",\n        lineNumber: 72,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L0NyZWF0ZVJvb21Nb2RhbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDZ0I7QUFDUDtBQWMzQixTQUFTRyxnQkFBZ0IsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQXdCO0lBQy9FLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxLQUFLLEVBQUVDLGFBQWEsRUFBRSxHQUFHUCw4REFBT0E7SUFDcEQsTUFBTSxDQUFDUSxjQUFjQyxnQkFBZ0IsR0FBR1YsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDVyxPQUFPQyxTQUFTLEdBQUdaLCtDQUFRQSxDQUFnQjtJQUVsRCxNQUFNLEVBQ0phLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxLQUFLLEVBQ0xDLEtBQUssRUFDTEMsV0FBVyxFQUFFQyxNQUFNLEVBQUUsRUFDdEIsR0FBR2hCLHdEQUFPQSxDQUFxQjtRQUM5QmlCLGVBQWU7WUFDYkMsTUFBTTtZQUNOQyxhQUFhO1lBQ2JDLFdBQVc7WUFDWEMsZUFBZSxFQUFFO1FBQ25CO0lBQ0Y7SUFFQSxNQUFNRCxZQUFZTixNQUFNO0lBRXhCLE1BQU1RLFdBQVcsT0FBT0M7UUFDdEIsSUFBSTtZQUNGZixnQkFBZ0I7WUFDaEJFLFNBQVM7WUFFVCxNQUFNYyxVQUFVLE1BQU1wQixXQUNwQm1CLEtBQUtMLElBQUksRUFDVEssS0FBS0osV0FBVyxFQUNoQkksS0FBS0gsU0FBUyxFQUNkRyxLQUFLRixhQUFhO1lBR3BCLDRDQUE0QztZQUM1Q2YsY0FBYztnQkFBRW1CLE1BQU07Z0JBQVFDLElBQUlGLFFBQVFHLEdBQUc7WUFBQztZQUU5Qyw2QkFBNkI7WUFDN0JDO1FBQ0YsRUFBRSxPQUFPQyxLQUFVO1lBQ2pCbkIsU0FBU21CLElBQUlDLE9BQU8sSUFBSTtRQUMxQixTQUFVO1lBQ1J0QixnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLE1BQU1vQixjQUFjO1FBQ2xCZjtRQUNBSCxTQUFTO1FBQ1RQO0lBQ0Y7SUFFQSxJQUFJLENB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O3dEQUNUSSxXQUFVO2tFQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9DcmVhdGVSb29tTW9kYWwudHN4PzNhNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VDaGF0IH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcblxuaW50ZXJmYWNlIENyZWF0ZVJvb21Nb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlUm9vbUZvcm1EYXRhIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpc1ByaXZhdGU6IGJvb2xlYW47XG4gIHNlbGVjdGVkVXNlcnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVSb29tTW9kYWwoeyBpc09wZW4sIG9uQ2xvc2UgfTogQ3JlYXRlUm9vbU1vZGFsUHJvcHMpIHtcbiAgY29uc3QgeyBjcmVhdGVSb29tLCB1c2Vycywgc2V0QWN0aXZlQ2hhdCB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgeyBcbiAgICByZWdpc3RlciwgXG4gICAgaGFuZGxlU3VibWl0LCBcbiAgICByZXNldCxcbiAgICB3YXRjaCxcbiAgICBmb3JtU3RhdGU6IHsgZXJyb3JzIH0gXG4gIH0gPSB1c2VGb3JtPENyZWF0ZVJvb21Gb3JtRGF0YT4oe1xuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgaXNQcml2YXRlOiBmYWxzZSxcbiAgICAgIHNlbGVjdGVkVXNlcnM6IFtdXG4gICAgfVxuICB9KTtcbiAgXG4gIGNvbnN0IGlzUHJpdmF0ZSA9IHdhdGNoKCdpc1ByaXZhdGUnKTtcblxuICBjb25zdCBvblN1Ym1pdCA9IGFzeW5jIChkYXRhOiBDcmVhdGVSb29tRm9ybURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld1Jvb20gPSBhd2FpdCBjcmVhdGVSb29tKFxuICAgICAgICBkYXRhLm5hbWUsXG4gICAgICAgIGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIGRhdGEuaXNQcml2YXRlLFxuICAgICAgICBkYXRhLnNlbGVjdGVkVXNlcnNcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFNldCB0aGUgbmV3bHkgY3JlYXRlZCByb29tIGFzIGFjdGl2ZSBjaGF0XG4gICAgICBzZXRBY3RpdmVDaGF0KHsgdHlwZTogJ3Jvb20nLCBpZDogbmV3Um9vbS5faWQgfSk7XG4gICAgICBcbiAgICAgIC8vIENsb3NlIG1vZGFsIGFuZCByZXNldCBmb3JtXG4gICAgICBoYW5kbGVDbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBzZXRFcnJvcihlcnIubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSByb29tLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIHJlc2V0KCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgb25DbG9zZSgpO1xuICB9O1xuICBcbiAgaWYgKCFpc09wZW4pIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotNTAgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlbiBweC00IHB0LTQgcGItMjAgdGV4dC1jZW50ZXIgc206YmxvY2sgc206cC0wXCI+XG4gICAgICAgIHsvKiBCYWNrZ3JvdW5kIG92ZXJsYXkgKi99XG4gICAgICAgIDxkaXYgXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB0cmFuc2l0aW9uLW9wYWNpdHkgYmctZ3JheS01MDAgYmctb3BhY2l0eS03NVwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgID48L2Rpdj5cblxuICAgICAgICB7LyogTW9kYWwgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5saW5lLWJsb2NrIHctZnVsbCBtYXgtdy1tZCBweC00IHB0LTUgcGItNCBvdmVyZmxvdy1oaWRkZW4gdGV4dC1sZWZ0IGFsaWduLWJvdHRvbSB0cmFuc2l0aW9uLWFsbCB0cmFuc2Zvcm0gYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgc206bXktOCBzbTphbGlnbi1taWRkbGUgc206cC02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMCByaWdodC0wIHB0LTQgcHItNFwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMCBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+Q2xvc2U8L3NwYW4+XG4gICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy02IGgtNlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbTpmbGV4IHNtOml0ZW1zLXN0YXJ0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgdGV4dC1jZW50ZXIgc206bXQtMCBzbTp0ZXh0LWxlZnQgdy1mdWxsXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIGxlYWRpbmctNiB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAgQ3JlYXRlIGEgTmV3IFJvb21cbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHAtMiBiZy1yZWQtNTAgYm9yZGVyLWwtNCBib3JkZXItcmVkLTUwMCB0ZXh0LXJlZC03MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdChvblN1Ym1pdCl9IGNsYXNzTmFtZT1cIm10LTQgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICBSb29tIE5hbWUgKlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignbmFtZScsIHsgcmVxdWlyZWQ6ICdSb29tIG5hbWUgaXMgcmVxdWlyZWQnIH0pfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgbXQtMSBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBmb2N1czpib3JkZXItcHJpbWFyeS01MDAgc206dGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAge2Vycm9ycy5uYW1lICYmIChcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPntlcnJvcnMubmFtZS5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZGVzY3JpcHRpb25cIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5yZWdpc3RlcignZGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIG10LTEgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgZm9jdXM6Ym9yZGVyLXByaW1hcnktNTAwIHNtOnRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkRlc2NyaWJlIHdoYXQgdGhpcyByb29tIGlzIGFib3V0Li4uXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiaXNQcml2YXRlXCJcbiAgICAgICAgICAgICAgICAgICAgey4uLnJlZ2lzdGVyKCdpc1ByaXZhdGUnKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LXByaW1hcnktNjAwIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWRcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiaXNQcml2YXRlXCIgY2xhc3NOYW1lPVwibWwtMiBibG9jayB0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgUHJpdmF0ZSBSb29tIChpbnZpdGUgb25seSlcbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge2lzUHJpdmF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgSW52aXRlIFVzZXJzXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBtYXgtaC00OCBvdmVyZmxvdy15LWF1dG8gYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHt1c2Vycy5tYXAodXNlciA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17dXNlci5faWR9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHB5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YHVzZXItJHt1c2VyLl9pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt1c2VyLl9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4ucmVnaXN0ZXIoJ3NlbGVjdGVkVXNlcnMnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcHJpbWFyeS02MDAgZm9jdXM6cmluZy1wcmltYXJ5LTUwMCBib3JkZXItZ3JheS0zMDAgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXtgdXNlci0ke3VzZXIuX2lkfWB9IGNsYXNzTmFtZT1cIm1sLTIgYmxvY2sgdGV4dC1zbSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIubmFtZX0gKHt1c2VyLmVtYWlsfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC01IHNtOm10LTQgc206ZmxleCBzbTpmbGV4LXJvdy1yZXZlcnNlXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNTdWJtaXR0aW5nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgcHgtNCBweS0yIHRleHQtYmFzZSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIGJnLXByaW1hcnktNjAwIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgcm91bmRlZC1tZCBzaGFkb3ctc20gaG92ZXI6YmctcHJpbWFyeS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgc206bWwtMyBzbTp3LWF1dG8gc206dGV4dC1zbSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc1N1Ym1pdHRpbmcgPyAnQ3JlYXRpbmcuLi4nIDogJ0NyZWF0ZSBSb29tJ31cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGp1c3RpZnktY2VudGVyIHctZnVsbCBweC00IHB5LTIgbXQtMyB0ZXh0LWJhc2UgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgc206bXQtMCBzbTp3LWF1dG8gc206dGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlQ2hhdCIsInVzZUZvcm0iLCJDcmVhdGVSb29tTW9kYWwiLCJpc09wZW4iLCJvbkNsb3NlIiwiY3JlYXRlUm9vbSIsInVzZXJzIiwic2V0QWN0aXZlQ2hhdCIsImlzU3VibWl0dGluZyIsInNldElzU3VibWl0dGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJyZWdpc3RlciIsImhhbmRsZVN1Ym1pdCIsInJlc2V0Iiwid2F0Y2giLCJmb3JtU3RhdGUiLCJlcnJvcnMiLCJkZWZhdWx0VmFsdWVzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiaXNQcml2YXRlIiwic2VsZWN0ZWRVc2VycyIsIm9uU3VibWl0IiwiZGF0YSIsIm5ld1Jvb20iLCJ0eXBlIiwiaWQiLCJfaWQiLCJoYW5kbGVDbG9zZSIsImVyciIsIm1lc3NhZ2UiLCJkaXYiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwiYnV0dG9uIiwic3BhbiIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaDMiLCJmb3JtIiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJyZXF1aXJlZCIsInAiLCJ0ZXh0YXJlYSIsInJvd3MiLCJwbGFjZWhvbGRlciIsIm1hcCIsInVzZXIiLCJ2YWx1ZSIsImVtYWlsIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/CreateRoomModal.tsx\n");

/***/ }),

/***/ "./src/components/chat/EditRoomModal.tsx":
/*!***********************************************!*\
  !*** ./src/components/chat/EditRoomModal.tsx ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EditRoomModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction EditRoomModal({ isOpen, onClose, roomId }) {\n    const { rooms, updateRoom } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const room = rooms.find((r)=>r._id === roomId);\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [description, setDescription] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isPrivate, setIsPrivate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [localImagePreview, setLocalImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUrlInput, setShowUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (room) {\n            setName(room.name || \"\");\n            setDescription(room.description || \"\");\n            setImage(room.image || \"\");\n            setIsPrivate(room.isPrivate || false);\n            setLocalImagePreview(null);\n            setShowUrlInput(false);\n        }\n    }, [\n        room\n    ]);\n    if (!isOpen || !room) return null;\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        try {\n            setIsSubmitting(true);\n            // Use localImagePreview if available, otherwise use image URL\n            const imageToUse = localImagePreview || image;\n            await updateRoom(roomId, {\n                name,\n                description,\n                image: imageToUse,\n                isPrivate\n            });\n            onClose();\n        } catch (err) {\n            console.error(\"Error updating room:\", err);\n            setError(\"Failed to update room. Please try again.\");\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleImageUpload = (e)=>{\n        const file = e.target.files?.[0];\n        if (!file) return;\n        // Check file size (limit to 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n            setError(\"Image size must be less than 5MB\");\n            return;\n        }\n        // Check file type\n        if (!file.type.startsWith(\"image/\")) {\n            setError(\"File must be an image\");\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (event)=>{\n            if (event.target?.result) {\n                setLocalImagePreview(event.target.result);\n                setImage(\"\"); // Clear URL input when local file is selected\n                setShowUrlInput(false); // Hide URL input when file is selected\n            }\n        };\n        reader.readAsDataURL(file);\n    };\n    const handleRemoveImage = ()=>{\n        setLocalImagePreview(null);\n        setImage(\"\");\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n        setShowUrlInput(false);\n    };\n    const toggleUrlInput = ()=>{\n        setShowUrlInput(!showUrlInput);\n        if (showUrlInput && fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-5 border-b\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-medium text-gray-900\",\n                        children: \"Edit Room\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                        lineNumber: 110,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                    lineNumber: 109,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSubmit,\n                    className: \"p-5 space-y-4\",\n                    children: [\n                        error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-red-50 text-red-600 p-3 rounded-md text-sm\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 115,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"name\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Room Name *\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 121,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    id: \"name\",\n                                    value: name,\n                                    onChange: (e)=>setName(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                    required: true\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 124,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 120,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"description\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Description\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 135,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                    id: \"description\",\n                                    value: description,\n                                    onChange: (e)=>setDescription(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                    rows: 3\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 138,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 134,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Room Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 148,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-center mb-3\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"relative\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"relative w-52 h-32 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center\",\n                                                children: localImagePreview || image ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                    src: localImagePreview || image,\n                                                    alt: name,\n                                                    layout: \"fill\",\n                                                    objectFit: \"cover\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                    lineNumber: 158,\n                                                    columnNumber: 21\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-gray-400\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-12 w-12\",\n                                                        fill: \"none\",\n                                                        viewBox: \"0 0 24 24\",\n                                                        stroke: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            strokeLinecap: \"round\",\n                                                            strokeLinejoin: \"round\",\n                                                            strokeWidth: 1,\n                                                            d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 167,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 166,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                    lineNumber: 165,\n                                                    columnNumber: 21\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                lineNumber: 156,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute -bottom-2 right-0 flex space-x-1\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: \"file\",\n                                                        id: \"room-image-upload\",\n                                                        ref: fileInputRef,\n                                                        onChange: handleImageUpload,\n                                                        accept: \"image/*\",\n                                                        className: \"hidden\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 176,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: ()=>fileInputRef.current?.click(),\n                                                        className: \"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-colors\",\n                                                        title: \"Upload image from device\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 193,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 192,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 186,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: toggleUrlInput,\n                                                        className: \"bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors\",\n                                                        title: \"Enter image URL\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 205,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 204,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 198,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    (localImagePreview || image) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        type: \"button\",\n                                                        onClick: handleRemoveImage,\n                                                        className: \"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors\",\n                                                        title: \"Remove image\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-4 w-4\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                                lineNumber: 218,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                            lineNumber: 217,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                        lineNumber: 211,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                                lineNumber: 174,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                        lineNumber: 154,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 153,\n                                    columnNumber: 13\n                                }, this),\n                                showUrlInput && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mb-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"image\",\n                                            className: \"block text-xs font-medium text-gray-700 mb-1\",\n                                            children: \"Enter image URL\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                            lineNumber: 229,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"url\",\n                                            id: \"image\",\n                                            value: image,\n                                            onChange: (e)=>{\n                                                setImage(e.target.value);\n                                                if (e.target.value) {\n                                                    setLocalImagePreview(null);\n                                                    if (fileInputRef.current) {\n                                                        fileInputRef.current.value = \"\";\n                                                    }\n                                                }\n                                            },\n                                            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            placeholder: \"https://example.com/room-image.jpg\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                            lineNumber: 232,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 228,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-center text-gray-500\",\n                                    children: \"For best results, use a rectangular or square image. Max size: 5MB.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 251,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 147,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center mt-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"checkbox\",\n                                    id: \"is-private\",\n                                    checked: isPrivate,\n                                    onChange: (e)=>setIsPrivate(e.target.checked),\n                                    className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 257,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"is-private\",\n                                    className: \"ml-2 block text-sm text-gray-700\",\n                                    children: \"Private Room (Only invited members can join)\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 264,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 256,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end mt-5 pt-4 border-t\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    disabled: isSubmitting,\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 270,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isSubmitting ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    disabled: isSubmitting,\n                                    children: isSubmitting ? \"Saving...\" : \"Save Changes\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                                    lineNumber: 278,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                            lineNumber: 269,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n                    lineNumber: 113,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n            lineNumber: 108,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/EditRoomModal.tsx\",\n        lineNumber: 107,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtvQ0FDVGlELFdBQVU7b0NBQ1ZxQyxVQUFVdEU7OENBQ1g7Ozs7Ozs4Q0FHRCw4REFBQzZEO29DQUNDekMsTUFBSztvQ0FDTGEsV0FBVyxDQUFDLDRIQUE0SCxFQUN0SWpDLGVBQWUsa0NBQWtDLEdBQ2xELENBQUM7b0NBQ0ZzRSxVQUFVdEU7OENBRVRBLGVBQWUsY0FBYzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29tcG9uZW50cy9jaGF0L0VkaXRSb29tTW9kYWwudHN4P2EyODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgRWRpdFJvb21Nb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWRpdFJvb21Nb2RhbCh7IGlzT3Blbiwgb25DbG9zZSwgcm9vbUlkIH06IEVkaXRSb29tTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHJvb21zLCB1cGRhdGVSb29tIH0gPSB1c2VDaGF0KCk7XG4gIGNvbnN0IHJvb20gPSByb29tcy5maW5kKHIgPT4gci5faWQgPT09IHJvb21JZCk7XG5cbiAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZGVzY3JpcHRpb24sIHNldERlc2NyaXB0aW9uXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2ltYWdlLCBzZXRJbWFnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1ByaXZhdGUsIHNldElzUHJpdmF0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbG9jYWxJbWFnZVByZXZpZXcsIHNldExvY2FsSW1hZ2VQcmV2aWV3XSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1VybElucHV0LCBzZXRTaG93VXJsSW5wdXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJvb20pIHtcbiAgICAgIHNldE5hbWUocm9vbS5uYW1lIHx8ICcnKTtcbiAgICAgIHNldERlc2NyaXB0aW9uKHJvb20uZGVzY3JpcHRpb24gfHwgJycpO1xuICAgICAgc2V0SW1hZ2Uocm9vbS5pbWFnZSB8fCAnJyk7XG4gICAgICBzZXRJc1ByaXZhdGUocm9vbS5pc1ByaXZhdGUgfHwgZmFsc2UpO1xuICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3Jvb21dKTtcblxuICBpZiAoIWlzT3BlbiB8fCAhcm9vbSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRFcnJvcignJyk7XG5cbiAgICB0cnkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgLy8gVXNlIGxvY2FsSW1hZ2VQcmV2aWV3IGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBpbWFnZSBVUkxcbiAgICAgIGNvbnN0IGltYWdlVG9Vc2UgPSBsb2NhbEltYWdlUHJldmlldyB8fCBpbWFnZTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXBkYXRlUm9vbShyb29tSWQsIHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGltYWdlOiBpbWFnZVRvVXNlLFxuICAgICAgICBpc1ByaXZhdGVcbiAgICAgIH0pO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcm9vbTonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgcm9vbS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIC8vIENoZWNrIGZpbGUgc2l6ZSAobGltaXQgdG8gNU1CKVxuICAgIGlmIChmaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHtcbiAgICAgIHNldEVycm9yKCdJbWFnZSBzaXplIG11c3QgYmUgbGVzcyB0aGFuIDVNQicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZVxuICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICBzZXRFcnJvcignRmlsZSBtdXN0IGJlIGFuIGltYWdlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Py5yZXN1bHQpIHtcbiAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcoZXZlbnQudGFyZ2V0LnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICBzZXRJbWFnZSgnJyk7IC8vIENsZWFyIFVSTCBpbnB1dCB3aGVuIGxvY2FsIGZpbGUgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2V0U2hvd1VybElucHV0KGZhbHNlKTsgLy8gSGlkZSBVUkwgaW5wdXQgd2hlbiBmaWxlIGlzIHNlbGVjdGVkXG4gICAgICB9XG4gICAgfTtcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZW1vdmVJbWFnZSA9ICgpID0+IHtcbiAgICBzZXRMb2NhbEltYWdlUHJldmlldyhudWxsKTtcbiAgICBzZXRJbWFnZSgnJyk7XG4gICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVVybElucHV0ID0gKCkgPT4ge1xuICAgIHNldFNob3dVcmxJbnB1dCghc2hvd1VybElucHV0KTtcbiAgICBpZiAoc2hvd1VybElucHV0ICYmIGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXhsIG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC01IGJvcmRlci1iXCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPkVkaXQgUm9vbTwvaDM+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cInAtNSBzcGFjZS15LTRcIj5cbiAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyByb3VuZGVkLW1kIHRleHQtc21cIj5cbiAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5hbWVcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICAgICBSb29tIE5hbWUgKlxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImRlc2NyaXB0aW9uXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgRGVzY3JpcHRpb25cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgaWQ9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXREZXNjcmlwdGlvbihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPlxuICAgICAgICAgICAgICBSb29tIEltYWdlXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogSW1hZ2UgcHJldmlldyB3aXRoIGNhbWVyYSBjb250cm9scyAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgey8qIFJvb20gaW1hZ2UgcHJldmlldyAqL31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctNTIgaC0zMiByb3VuZGVkLW1kIG92ZXJmbG93LWhpZGRlbiBiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAge2xvY2FsSW1hZ2VQcmV2aWV3IHx8IGltYWdlID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2xvY2FsSW1hZ2VQcmV2aWV3IHx8IGltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgIGFsdD17bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ9XCJmaWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ9XCJjb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTEyIHctMTJcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17MX0gZD1cIk00IDE2bDQuNTg2LTQuNTg2YTIgMiAwIDAxMi44MjggMEwxNiAxNm0tMi0ybDEuNTg2LTEuNTg2YTIgMiAwIDAxMi44MjggMEwyMCAxNG0tNi02aC4wMU02IDIwaDEyYTIgMiAwIDAwMi0yVjZhMiAyIDAgMDAtMi0ySDZhMiAyIDAgMDAtMiAydjEyYTIgMiAwIDAwMiAyelwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQ2FtZXJhIGNvbnRyb2xzICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLWJvdHRvbS0yIHJpZ2h0LTAgZmxleCBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICAgIHsvKiBIaWRkZW4gZmlsZSBpbnB1dCAqL31cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgICAgICAgIGlkPVwicm9vbS1pbWFnZS11cGxvYWRcIlxuICAgICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUltYWdlVXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBVcGxvYWQgYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZmlsZUlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcC0yIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ibHVlLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiVXBsb2FkIGltYWdlIGZyb20gZGV2aWNlXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk00IDVhMiAyIDAgMDAtMiAydjhhMiAyIDAgMDAyIDJoMTJhMiAyIDAgMDAyLTJWN2EyIDIgMCAwMC0yLTJoLTEuNTg2YTEgMSAwIDAxLS43MDctLjI5M2wtMS4xMjEtMS4xMjFBMiAyIDAgMDAxMS4xNzIgM0g4LjgyOGEyIDIgMCAwMC0xLjQxNC41ODZMNi4yOTMgNC43MDdBMSAxIDAgMDE1LjU4NiA1SDR6bTYgOWEzIDMgMCAxMDAtNiAzIDMgMCAwMDAgNnpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogVVJMIGJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVVybElucHV0fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVudGVyIGltYWdlIFVSTFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTIuNTg2IDQuNTg2YTIgMiAwIDExMi44MjggMi44MjhsLTMgM2EyIDIgMCAwMS0yLjgyOCAwIDEgMSAwIDAwLTEuNDE0IDEuNDE0IDQgNCAwIDAwNS42NTYgMGwzLTNhNCA0IDAgMDAtNS42NTYtNS42NTZsLTEuNSAxLjVhMSAxIDAgMTAxLjQxNCAxLjQxNGwxLjUtMS41em0tNSA1YTIgMiAwIDAxMi44MjggMCAxIDEgMCAxMDEuNDE0LTEuNDE0IDQgNCAwIDAwLTUuNjU2IDBsLTMgM2E0IDQgMCAxMDUuNjU2IDUuNjU2bDEuNS0xLjVhMSAxIDAgMTAtMS40MTQtMS40MTRsLTEuNSAxLjVhMiAyIDAgMTEtMi44MjgtMi44MjhsMy0zelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBSZW1vdmUgYnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgeyhsb2NhbEltYWdlUHJldmlldyB8fCBpbWFnZSkgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlbW92ZUltYWdlfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXJlZC01MDAgdGV4dC13aGl0ZSBwLTIgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXJlZC02MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUmVtb3ZlIGltYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk00LjI5MyA0LjI5M2ExIDEgMCAwMTEuNDE0IDBMMTAgOC41ODZsNC4yOTMtNC4yOTNhMSAxIDAgMTExLjQxNCAxLjQxNEwxMS40MTQgMTBsNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQgMS40MTRMMTAgMTEuNDE0bC00LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNC0xLjQxNEw4LjU4NiAxMCA0LjI5MyA1LjcwN2ExIDEgMCAwMTAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7LyogVVJMIElucHV0ICh0b2dnbGVhYmxlKSAqL31cbiAgICAgICAgICAgIHtzaG93VXJsSW5wdXQgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImltYWdlXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgIEVudGVyIGltYWdlIFVSTFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwidXJsXCJcbiAgICAgICAgICAgICAgICAgIGlkPVwiaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2ltYWdlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEltYWdlKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHBzOi8vZXhhbXBsZS5jb20vcm9vbS1pbWFnZS5qcGdcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIEZvciBiZXN0IHJlc3VsdHMsIHVzZSBhIHJlY3Rhbmd1bGFyIG9yIHNxdWFyZSBpbWFnZS4gTWF4IHNpemU6IDVNQi5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbXQtMlwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgIGlkPVwiaXMtcHJpdmF0ZVwiXG4gICAgICAgICAgICAgIGNoZWNrZWQ9e2lzUHJpdmF0ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJc1ByaXZhdGUoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ibHVlLTYwMCBmb2N1czpyaW5nLWJsdWUtNTAwIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImlzLXByaXZhdGVcIiBjbGFzc05hbWU9XCJtbC0yIGJsb2NrIHRleHQtc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICBQcml2YXRlIFJvb20gKE9ubHkgaW52aXRlZCBtZW1iZXJzIGNhbiBqb2luKVxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBtdC01IHB0LTQgYm9yZGVyLXRcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBtci0zIHRleHQtZ3JheS03MDAgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWJsdWUtNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCAke1xuICAgICAgICAgICAgICAgIGlzU3VibWl0dGluZyA/ICdvcGFjaXR5LTc1IGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdTYXZpbmcuLi4nIDogJ1NhdmUgQ2hhbmdlcyd9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VDaGF0IiwiSW1hZ2UiLCJFZGl0Um9vbU1vZGFsIiwiaXNPcGVuIiwib25DbG9zZSIsInJvb21JZCIsInJvb21zIiwidXBkYXRlUm9vbSIsInJvb20iLCJmaW5kIiwiciIsIl9pZCIsIm5hbWUiLCJzZXROYW1lIiwiZGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsImltYWdlIiwic2V0SW1hZ2UiLCJpc1ByaXZhdGUiLCJzZXRJc1ByaXZhdGUiLCJpc1N1Ym1pdHRpbmciLCJzZXRJc1N1Ym1pdHRpbmciLCJlcnJvciIsInNldEVycm9yIiwibG9jYWxJbWFnZVByZXZpZXciLCJzZXRMb2NhbEltYWdlUHJldmlldyIsInNob3dVcmxJbnB1dCIsInNldFNob3dVcmxJbnB1dCIsImZpbGVJbnB1dFJlZiIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImltYWdlVG9Vc2UiLCJlcnIiLCJjb25zb2xlIiwiaGFuZGxlSW1hZ2VVcGxvYWQiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJzaXplIiwidHlwZSIsInN0YXJ0c1dpdGgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJjdXJyZW50IiwidmFsdWUiLCJ0b2dnbGVVcmxJbnB1dCIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiZm9ybSIsIm9uU3VibWl0IiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJpZCIsIm9uQ2hhbmdlIiwicmVxdWlyZWQiLCJ0ZXh0YXJlYSIsInJvd3MiLCJzcmMiLCJhbHQiLCJsYXlvdXQiLCJvYmplY3RGaXQiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsInJlZiIsImFjY2VwdCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJjbGljayIsInRpdGxlIiwiZmlsbFJ1bGUiLCJjbGlwUnVsZSIsInBsYWNlaG9sZGVyIiwicCIsImNoZWNrZWQiLCJkaXNhYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/EditRoomModal.tsx\n");

/***/ }),

/***/ "./src/components/chat/MessageInput.tsx":
/*!**********************************************!*\
  !*** ./src/components/chat/MessageInput.tsx ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MessageInput)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nfunction MessageInput() {\n    const { sendMessage, activeChat, startTyping, stopTyping, uploadingFiles } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isSubmitting, setIsSubmitting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedFiles, setSelectedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [previewUrls, setPreviewUrls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep track of the previous active chat to prevent unnecessary resets\n    const prevActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    // Store activeChat ID for comparisons\n    const activeChatId = activeChat ? `${activeChat.type}-${activeChat.id}` : null;\n    const prevActiveChatId = prevActiveChatRef.current ? `${prevActiveChatRef.current.type}-${prevActiveChatRef.current.id}` : null;\n    // Handle typing indicator with debounce\n    const typingTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const handleTypingIndicator = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((isTyping)=>{\n        if (typingTimeoutRef.current) {\n            clearTimeout(typingTimeoutRef.current);\n            typingTimeoutRef.current = null;\n        }\n        if (isTyping) {\n            startTyping();\n        } else {\n            stopTyping();\n        }\n        if (isTyping) {\n            typingTimeoutRef.current = setTimeout(()=>{\n                stopTyping();\n                typingTimeoutRef.current = null;\n            }, 2000); // Stop typing indicator after 2 seconds of inactivity\n        }\n    }, [\n        startTyping,\n        stopTyping\n    ]);\n    const handleChange = (e)=>{\n        const newValue = e.target.value;\n        setMessage(newValue);\n        if (newValue.length > 0) {\n            handleTypingIndicator(true);\n        } else {\n            handleTypingIndicator(false);\n        }\n    };\n    const handleKeyDown = (e)=>{\n        // Send message on Enter key (without Shift)\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleSubmit();\n        }\n    };\n    const handleSubmit = async ()=>{\n        if (!message.trim() && selectedFiles.length === 0 || !activeChat || isSubmitting) return;\n        try {\n            setIsSubmitting(true);\n            handleTypingIndicator(false);\n            // Si hay archivos seleccionados, enviar solo el primero por ahora\n            const selectedFile = selectedFiles.length > 0 ? selectedFiles[0] : null;\n            await sendMessage(message.trim(), selectedFile);\n            setMessage(\"\");\n            setSelectedFiles([]);\n            setPreviewUrls([]);\n        } catch (error) {\n            console.error(\"Failed to send message:\", error);\n        } finally{\n            setIsSubmitting(false);\n        }\n    };\n    const handleFileSelect = async (event)=>{\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n        // Reducir el tamao mximo a 15MB para evitar el lmite de BSON de MongoDB (16MB)\n        const maxSize = 15 * 1024 * 1024; // 15MB mximo para evitar lmites de MongoDB\n        let newFiles = [];\n        let newPreviewUrls = [];\n        let processedCount = 0;\n        const totalFiles = Array.from(files).length;\n        // Procesar cada archivo seleccionado\n        Array.from(files).forEach(async (file)=>{\n            try {\n                // Verificar tamao\n                if (file.size > maxSize) {\n                    alert(`El archivo ${file.name} excede el lmite de 15MB. Los archivos deben ser menores a 15MB debido a limitaciones de la base de datos.`);\n                    processedCount++;\n                    return;\n                }\n                // Crear URL para vista previa\n                const previewUrl = URL.createObjectURL(file);\n                newPreviewUrls.push(previewUrl);\n                newFiles.push(file);\n                // Actualizar arrays temporales\n                processedCount++;\n                // Actualizar estado solo cuando todos los archivos han sido procesados\n                if (processedCount === totalFiles) {\n                    setSelectedFiles((prev)=>[\n                            ...prev,\n                            ...newFiles\n                        ]);\n                    setPreviewUrls((prev)=>[\n                            ...prev,\n                            ...newPreviewUrls\n                        ]);\n                }\n            } catch (error) {\n                console.error(\"Error processing file:\", error);\n                processedCount++;\n            }\n        });\n        // Reset file input\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    const removeFile = (index)=>{\n        setSelectedFiles((prev)=>prev.filter((_, i)=>i !== index));\n        setPreviewUrls((prev)=>prev.filter((_, i)=>i !== index));\n    };\n    // Reset message input only when actually changing chats\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Only reset if the active chat ID actually changed\n        if (activeChatId !== prevActiveChatId) {\n            setMessage(\"\");\n            setSelectedFiles([]);\n            setPreviewUrls([]);\n            handleTypingIndicator(false);\n            prevActiveChatRef.current = activeChat;\n        }\n    }, [\n        activeChatId,\n        prevActiveChatId,\n        activeChat,\n        handleTypingIndicator\n    ]);\n    // Cleanup typing timeout on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            if (typingTimeoutRef.current) {\n                clearTimeout(typingTimeoutRef.current);\n            }\n            // Cleanup URLs\n            previewUrls.forEach((url)=>URL.revokeObjectURL(url));\n        };\n    }, [\n        previewUrls\n    ]);\n    if (!activeChat) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col p-4 border-t border-gray-200\",\n        children: [\n            selectedFiles.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-wrap gap-2 mb-2\",\n                children: selectedFiles.map((file, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative group\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-20 w-20 flex items-center justify-center bg-gray-100 rounded border border-gray-300\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-8 w-8 text-gray-500\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 171,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 170,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 169,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>removeFile(index),\n                                className: \"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\",\n                                children: \"\\xd7\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 174,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs truncate px-1\",\n                                children: file.name.length > 10 ? `${file.name.substring(0, 10)}...` : file.name\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 180,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, index, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 168,\n                        columnNumber: 13\n                    }, this))\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 166,\n                columnNumber: 9\n            }, this),\n            Object.entries(uploadingFiles).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col gap-2 mb-3 bg-gray-50 p-3 rounded-lg border border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center mb-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-4 w-4 mr-1 text-blue-500\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 193,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 192,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"text-sm font-medium text-gray-700\",\n                                children: \"Archivos en proceso\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 195,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 191,\n                        columnNumber: 11\n                    }, this),\n                    Object.entries(uploadingFiles).filter(([_, { progress }])=>progress < 100).map(([id, { progress, error }])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-center mb-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: error ? \"Error al procesar\" : progress === 100 ? \"Completado\" : \"Procesando...\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 200,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs font-medium text-gray-700\",\n                                            children: [\n                                                progress,\n                                                \"%\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 203,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 199,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full bg-gray-200 rounded-full h-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: `h-2 rounded-full ${error ? \"bg-red-500\" : \"bg-primary-500\"}`,\n                                        style: {\n                                            width: `${progress}%`\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 206,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 205,\n                                    columnNumber: 15\n                                }, this),\n                                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-1 flex flex-col\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-xs text-red-500\",\n                                            children: error\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 213,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            className: \"self-start text-xs text-primary-500 hover:text-primary-600 mt-1\",\n                                            onClick: ()=>{\n                                                const matchingFile = selectedFiles.find((f)=>f.name === id);\n                                                if (matchingFile) {\n                                                    // Reintentar enviando este archivo\n                                                    sendMessage(\"\", matchingFile);\n                                                }\n                                            },\n                                            children: \"Reintentar\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                            lineNumber: 214,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 212,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, id, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 198,\n                            columnNumber: 13\n                        }, this))\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 190,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>fileInputRef.current?.click(),\n                        className: \"mr-2 text-gray-500 hover:text-primary-500 focus:outline-none\",\n                        title: \"Attach file\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            className: \"h-6 w-6\",\n                            fill: \"none\",\n                            viewBox: \"0 0 24 24\",\n                            stroke: \"currentColor\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                strokeWidth: 2,\n                                d: \"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 241,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 240,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 235,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"file\",\n                        ref: fileInputRef,\n                        onChange: handleFileSelect,\n                        className: \"hidden\",\n                        multiple: true,\n                        accept: \"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 244,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 mr-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"text\",\n                            value: message,\n                            onChange: handleChange,\n                            onKeyDown: handleKeyDown,\n                            className: \"w-full h-10 px-4 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\",\n                            placeholder: \"Type a message...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 253,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 252,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleSubmit,\n                            disabled: message.trim().length === 0 && selectedFiles.length === 0 || isSubmitting,\n                            className: \"h-10 w-10 rounded-full bg-primary-500 hover:bg-primary-600 text-white flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: isSubmitting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: \"animate-spin h-5 w-5 text-white\",\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                        className: \"opacity-25\",\n                                        cx: \"12\",\n                                        cy: \"12\",\n                                        r: \"10\",\n                                        stroke: \"currentColor\",\n                                        strokeWidth: \"4\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 270,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        className: \"opacity-75\",\n                                        fill: \"currentColor\",\n                                        d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                        lineNumber: 271,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 269,\n                                columnNumber: 15\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    d: \"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                    lineNumber: 275,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                                lineNumber: 274,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                            lineNumber: 263,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n                lineNumber: 234,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageInput.tsx\",\n        lineNumber: 163,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFTbkUsSUFBSSxHQUFHTixNQUFNLEtBQUssS0FBS3JCLGNBQWNxQixNQUFNLEtBQUssS0FBTXZCOzRCQUN6RTZELFdBQVU7c0NBRVQ3RCw2QkFDQyw4REFBQytEO2dDQUFJRixXQUFVO2dDQUFrQ0csT0FBTTtnQ0FBNkJDLE1BQUs7Z0NBQU9DLFNBQVE7O2tEQUN0Ryw4REFBQytCO3dDQUFPcEMsV0FBVTt3Q0FBYXFDLElBQUc7d0NBQUtDLElBQUc7d0NBQUtDLEdBQUU7d0NBQUtqQyxRQUFPO3dDQUFlSSxhQUFZOzs7Ozs7a0RBQ3hGLDhEQUFDSDt3Q0FBS1AsV0FBVTt3Q0FBYUksTUFBSzt3Q0FBZU8sR0FBRTs7Ozs7Ozs7Ozs7cURBR3JELDhEQUFDVDtnQ0FBSUMsT0FBTTtnQ0FBNkJILFdBQVU7Z0NBQVVLLFNBQVE7Z0NBQVlELE1BQUs7MENBQ25GLDRFQUFDRztvQ0FBS0ksR0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUXhCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9NZXNzYWdlSW5wdXQudHN4P2U5ODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQsIEZpbGVUeXBlLCBGaWxlQXR0YWNobWVudCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZXNzYWdlSW5wdXQoKSB7XG4gIGNvbnN0IHsgc2VuZE1lc3NhZ2UsIGFjdGl2ZUNoYXQsIHN0YXJ0VHlwaW5nLCBzdG9wVHlwaW5nLCB1cGxvYWRpbmdGaWxlcyB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGVzLCBzZXRTZWxlY3RlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pO1xuICBjb25zdCBbcHJldmlld1VybHMsIHNldFByZXZpZXdVcmxzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKTtcbiAgXG4gIC8vIEtlZXAgdHJhY2sgb2YgdGhlIHByZXZpb3VzIGFjdGl2ZSBjaGF0IHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcmVzZXRzXG4gIGNvbnN0IHByZXZBY3RpdmVDaGF0UmVmID0gdXNlUmVmKGFjdGl2ZUNoYXQpO1xuICBcbiAgLy8gU3RvcmUgYWN0aXZlQ2hhdCBJRCBmb3IgY29tcGFyaXNvbnNcbiAgY29uc3QgYWN0aXZlQ2hhdElkID0gYWN0aXZlQ2hhdCA/IGAke2FjdGl2ZUNoYXQudHlwZX0tJHthY3RpdmVDaGF0LmlkfWAgOiBudWxsO1xuICBjb25zdCBwcmV2QWN0aXZlQ2hhdElkID0gcHJldkFjdGl2ZUNoYXRSZWYuY3VycmVudCBcbiAgICA/IGAke3ByZXZBY3RpdmVDaGF0UmVmLmN1cnJlbnQudHlwZX0tJHtwcmV2QWN0aXZlQ2hhdFJlZi5jdXJyZW50LmlkfWAgXG4gICAgOiBudWxsO1xuXG4gIC8vIEhhbmRsZSB0eXBpbmcgaW5kaWNhdG9yIHdpdGggZGVib3VuY2VcbiAgY29uc3QgdHlwaW5nVGltZW91dFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgaGFuZGxlVHlwaW5nSW5kaWNhdG9yID0gdXNlQ2FsbGJhY2soKGlzVHlwaW5nOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaXNUeXBpbmcpIHtcbiAgICAgIHN0YXJ0VHlwaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3BUeXBpbmcoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGlzVHlwaW5nKSB7XG4gICAgICB0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc3RvcFR5cGluZygpO1xuICAgICAgICB0eXBpbmdUaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSwgMjAwMCk7IC8vIFN0b3AgdHlwaW5nIGluZGljYXRvciBhZnRlciAyIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICAgIH1cbiAgfSwgW3N0YXJ0VHlwaW5nLCBzdG9wVHlwaW5nXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICBzZXRNZXNzYWdlKG5ld1ZhbHVlKTtcbiAgICBcbiAgICBpZiAobmV3VmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgaGFuZGxlVHlwaW5nSW5kaWNhdG9yKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVUeXBpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAvLyBTZW5kIG1lc3NhZ2Ugb24gRW50ZXIga2V5ICh3aXRob3V0IFNoaWZ0KVxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGFuZGxlU3VibWl0KCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoKCFtZXNzYWdlLnRyaW0oKSAmJiBzZWxlY3RlZEZpbGVzLmxlbmd0aCA9PT0gMCkgfHwgIWFjdGl2ZUNoYXQgfHwgaXNTdWJtaXR0aW5nKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgaGFuZGxlVHlwaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gU2kgaGF5IGFyY2hpdm9zIHNlbGVjY2lvbmFkb3MsIGVudmlhciBzb2xvIGVsIHByaW1lcm8gcG9yIGFob3JhXG4gICAgICBjb25zdCBzZWxlY3RlZEZpbGUgPSBzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDAgPyBzZWxlY3RlZEZpbGVzWzBdIDogbnVsbDtcbiAgICAgIGF3YWl0IHNlbmRNZXNzYWdlKG1lc3NhZ2UudHJpbSgpLCBzZWxlY3RlZEZpbGUpO1xuICAgICAgXG4gICAgICBzZXRNZXNzYWdlKCcnKTtcbiAgICAgIHNldFNlbGVjdGVkRmlsZXMoW10pO1xuICAgICAgc2V0UHJldmlld1VybHMoW10pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdCA9IGFzeW5jIChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlcztcbiAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gUmVkdWNpciBlbCB0YW1hw7FvIG3DoXhpbW8gYSAxNU1CIHBhcmEgZXZpdGFyIGVsIGzDrW1pdGUgZGUgQlNPTiBkZSBNb25nb0RCICgxNk1CKVxuICAgIGNvbnN0IG1heFNpemUgPSAxNSAqIDEwMjQgKiAxMDI0OyAvLyAxNU1CIG3DoXhpbW8gcGFyYSBldml0YXIgbMOtbWl0ZXMgZGUgTW9uZ29EQlxuICAgIGxldCBuZXdGaWxlczogRmlsZVtdID0gW107XG4gICAgbGV0IG5ld1ByZXZpZXdVcmxzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBwcm9jZXNzZWRDb3VudCA9IDA7XG4gICAgY29uc3QgdG90YWxGaWxlcyA9IEFycmF5LmZyb20oZmlsZXMpLmxlbmd0aDtcbiAgICBcbiAgICAvLyBQcm9jZXNhciBjYWRhIGFyY2hpdm8gc2VsZWNjaW9uYWRvXG4gICAgQXJyYXkuZnJvbShmaWxlcykuZm9yRWFjaChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHRhbWHDsW9cbiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IG1heFNpemUpIHtcbiAgICAgICAgICBhbGVydChgRWwgYXJjaGl2byAke2ZpbGUubmFtZX0gZXhjZWRlIGVsIGzDrW1pdGUgZGUgMTVNQi4gTG9zIGFyY2hpdm9zIGRlYmVuIHNlciBtZW5vcmVzIGEgMTVNQiBkZWJpZG8gYSBsaW1pdGFjaW9uZXMgZGUgbGEgYmFzZSBkZSBkYXRvcy5gKTtcbiAgICAgICAgICBwcm9jZXNzZWRDb3VudCsrO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgVVJMIHBhcmEgdmlzdGEgcHJldmlhXG4gICAgICAgIGNvbnN0IHByZXZpZXdVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICBuZXdQcmV2aWV3VXJscy5wdXNoKHByZXZpZXdVcmwpO1xuICAgICAgICBcbiAgICAgICAgbmV3RmlsZXMucHVzaChmaWxlKTtcblxuICAgICAgICAvLyBBY3R1YWxpemFyIGFycmF5cyB0ZW1wb3JhbGVzXG4gICAgICAgIHByb2Nlc3NlZENvdW50Kys7XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGVzdGFkbyBzb2xvIGN1YW5kbyB0b2RvcyBsb3MgYXJjaGl2b3MgaGFuIHNpZG8gcHJvY2VzYWRvc1xuICAgICAgICBpZiAocHJvY2Vzc2VkQ291bnQgPT09IHRvdGFsRmlsZXMpIHtcbiAgICAgICAgICBzZXRTZWxlY3RlZEZpbGVzKHByZXYgPT4gWy4uLnByZXYsIC4uLm5ld0ZpbGVzXSk7XG4gICAgICAgICAgc2V0UHJldmlld1VybHMocHJldiA9PiBbLi4ucHJldiwgLi4ubmV3UHJldmlld1VybHNdKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKTtcbiAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlc2V0IGZpbGUgaW5wdXRcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUZpbGUgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFNlbGVjdGVkRmlsZXMocHJldiA9PiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpKTtcbiAgICBzZXRQcmV2aWV3VXJscyhwcmV2ID0+IHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCkpO1xuICB9O1xuXG4gIC8vIFJlc2V0IG1lc3NhZ2UgaW5wdXQgb25seSB3aGVuIGFjdHVhbGx5IGNoYW5naW5nIGNoYXRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSByZXNldCBpZiB0aGUgYWN0aXZlIGNoYXQgSUQgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmIChhY3RpdmVDaGF0SWQgIT09IHByZXZBY3RpdmVDaGF0SWQpIHtcbiAgICAgIHNldE1lc3NhZ2UoJycpO1xuICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhbXSk7XG4gICAgICBzZXRQcmV2aWV3VXJscyhbXSk7XG4gICAgICBoYW5kbGVUeXBpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgcHJldkFjdGl2ZUNoYXRSZWYuY3VycmVudCA9IGFjdGl2ZUNoYXQ7XG4gICAgfVxuICB9LCBbYWN0aXZlQ2hhdElkLCBwcmV2QWN0aXZlQ2hhdElkLCBhY3RpdmVDaGF0LCBoYW5kbGVUeXBpbmdJbmRpY2F0b3JdKTtcblxuICAvLyBDbGVhbnVwIHR5cGluZyB0aW1lb3V0IG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHR5cGluZ1RpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodHlwaW5nVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW51cCBVUkxzXG4gICAgICBwcmV2aWV3VXJscy5mb3JFYWNoKHVybCA9PiBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCkpO1xuICAgIH07XG4gIH0sIFtwcmV2aWV3VXJsc10pO1xuXG4gIGlmICghYWN0aXZlQ2hhdCkgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgcC00IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgey8qIEZpbGUgcHJldmlld3MgKi99XG4gICAgICB7c2VsZWN0ZWRGaWxlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMiBtYi0yXCI+XG4gICAgICAgICAge3NlbGVjdGVkRmlsZXMubWFwKChmaWxlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9XCJyZWxhdGl2ZSBncm91cFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMjAgdy0yMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTEwMCByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTggdy04IHRleHQtZ3JheS01MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk05IDEyaDZtLTYgNGg2bTIgNUg3YTIgMiAwIDAxLTItMlY1YTIgMiAwIDAxMi0yaDUuNTg2YTEgMSAwIDAxLjcwNy4yOTNsNS40MTQgNS40MTRhMSAxIDAgMDEuMjkzLjcwN1YxOWEyIDIgMCAwMS0yIDJ6XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmVtb3ZlRmlsZShpbmRleCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXRvcC0yIC1yaWdodC0yIGJnLXJlZC01MDAgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgaC01IHctNSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICZ0aW1lcztcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHRydW5jYXRlIHB4LTFcIj5cbiAgICAgICAgICAgICAgICB7ZmlsZS5uYW1lLmxlbmd0aCA+IDEwID8gYCR7ZmlsZS5uYW1lLnN1YnN0cmluZygwLCAxMCl9Li4uYCA6IGZpbGUubmFtZX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIFVwbG9hZGluZyBmaWxlcyBwcm9ncmVzcyAqL31cbiAgICAgIHtPYmplY3QuZW50cmllcyh1cGxvYWRpbmdGaWxlcykubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMiBtYi0zIGJnLWdyYXktNTAgcC0zIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNCBtci0xIHRleHQtYmx1ZS01MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTcgMTZhNCA0IDAgMDEtLjg4LTcuOTAzQTUgNSAwIDExMTUuOSA2TDE2IDZhNSA1IDAgMDExIDkuOU05IDE5bDMgM20wIDBsMy0zbS0zIDNWMTBcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+QXJjaGl2b3MgZW4gcHJvY2VzbzwvaDQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge09iamVjdC5lbnRyaWVzKHVwbG9hZGluZ0ZpbGVzKS5maWx0ZXIoKFtfLCB7IHByb2dyZXNzIH1dKSA9PiBwcm9ncmVzcyA8IDEwMCkubWFwKChbaWQsIHsgcHJvZ3Jlc3MsIGVycm9yIH1dKSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17aWR9IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAge2Vycm9yID8gJ0Vycm9yIGFsIHByb2Nlc2FyJyA6IHByb2dyZXNzID09PSAxMDAgPyAnQ29tcGxldGFkbycgOiAnUHJvY2VzYW5kby4uLid9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPntwcm9ncmVzc30lPC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BoLTIgcm91bmRlZC1mdWxsICR7ZXJyb3IgPyAnYmctcmVkLTUwMCcgOiAnYmctcHJpbWFyeS01MDAnfWB9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7cHJvZ3Jlc3N9JWAgfX1cbiAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcmVkLTUwMFwiPntlcnJvcn08L3A+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzZWxmLXN0YXJ0IHRleHQteHMgdGV4dC1wcmltYXJ5LTUwMCBob3Zlcjp0ZXh0LXByaW1hcnktNjAwIG10LTFcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdGaWxlID0gc2VsZWN0ZWRGaWxlcy5maW5kKGYgPT4gZi5uYW1lID09PSBpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVpbnRlbnRhciBlbnZpYW5kbyBlc3RlIGFyY2hpdm9cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlKCcnLCBtYXRjaGluZ0ZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgUmVpbnRlbnRhclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICB7LyogTWVzc2FnZSBpbnB1dCBhbmQgYWN0aW9ucyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJtci0yIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1wcmltYXJ5LTUwMCBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgIHRpdGxlPVwiQXR0YWNoIGZpbGVcIlxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE1LjE3MiA3bC02LjU4NiA2LjU4NmEyIDIgMCAxMDIuODI4IDIuODI4bDYuNDE0LTYuNTg2YTQgNCAwIDAwLTUuNjU2LTUuNjU2bC02LjQxNSA2LjU4NWE2IDYgMCAxMDguNDg2IDguNDg2TDIwLjUgMTNcIiAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgIHJlZj17ZmlsZUlucHV0UmVmfVxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlU2VsZWN0fVxuICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXG4gICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qLHZpZGVvLyosYXVkaW8vKiwucGRmLC5kb2MsLmRvY3gsLnhscywueGxzeCwudHh0XCJcbiAgICAgICAgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbXItMlwiPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgdmFsdWU9e21lc3NhZ2V9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVLZXlEb3dufVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtMTAgcHgtNCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtZnVsbCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgZm9jdXM6Ym9yZGVyLXByaW1hcnktNTAwXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSBhIG1lc3NhZ2UuLi5cIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Ym1pdH1cbiAgICAgICAgICAgIGRpc2FibGVkPXsobWVzc2FnZS50cmltKCkubGVuZ3RoID09PSAwICYmIHNlbGVjdGVkRmlsZXMubGVuZ3RoID09PSAwKSB8fCBpc1N1Ym1pdHRpbmd9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLTEwIHctMTAgcm91bmRlZC1mdWxsIGJnLXByaW1hcnktNTAwIGhvdmVyOmJnLXByaW1hcnktNjAwIHRleHQtd2hpdGUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpc1N1Ym1pdHRpbmcgPyAoXG4gICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIGgtNSB3LTUgdGV4dC13aGl0ZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIiBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxMFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZVdpZHRoPVwiNFwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzTmFtZT1cIm9wYWNpdHktNzVcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEwLjg5NCAyLjU1M2ExIDEgMCAwMC0xLjc4OCAwbC03IDE0YTEgMSAwIDAwMS4xNjkgMS40MDlsNS0xLjQyOUExIDEgMCAwMDkgMTUuNTcxVjExYTEgMSAwIDExMiAwdjQuNTcxYTEgMSAwIDAwLjcyNS45NjJsNSAxLjQyOGExIDEgMCAwMDEuMTctMS40MDhsLTctMTR6XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ1c2VDaGF0IiwiTWVzc2FnZUlucHV0Iiwic2VuZE1lc3NhZ2UiLCJhY3RpdmVDaGF0Iiwic3RhcnRUeXBpbmciLCJzdG9wVHlwaW5nIiwidXBsb2FkaW5nRmlsZXMiLCJtZXNzYWdlIiwic2V0TWVzc2FnZSIsImlzU3VibWl0dGluZyIsInNldElzU3VibWl0dGluZyIsInNlbGVjdGVkRmlsZXMiLCJzZXRTZWxlY3RlZEZpbGVzIiwicHJldmlld1VybHMiLCJzZXRQcmV2aWV3VXJscyIsImZpbGVJbnB1dFJlZiIsInByZXZBY3RpdmVDaGF0UmVmIiwiYWN0aXZlQ2hhdElkIiwidHlwZSIsImlkIiwicHJldkFjdGl2ZUNoYXRJZCIsImN1cnJlbnQiLCJ0eXBpbmdUaW1lb3V0UmVmIiwiaGFuZGxlVHlwaW5nSW5kaWNhdG9yIiwiaXNUeXBpbmciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaGFuZGxlQ2hhbmdlIiwiZSIsIm5ld1ZhbHVlIiwidGFyZ2V0IiwidmFsdWUiLCJsZW5ndGgiLCJoYW5kbGVLZXlEb3duIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImhhbmRsZVN1Ym1pdCIsInRyaW0iLCJzZWxlY3RlZEZpbGUiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVGaWxlU2VsZWN0IiwiZXZlbnQiLCJmaWxlcyIsIm1heFNpemUiLCJuZXdGaWxlcyIsIm5ld1ByZXZpZXdVcmxzIiwicHJvY2Vzc2VkQ291bnQiLCJ0b3RhbEZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsImZpbGUiLCJzaXplIiwiYWxlcnQiLCJuYW1lIiwicHJldmlld1VybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInB1c2giLCJwcmV2IiwicmVtb3ZlRmlsZSIsImluZGV4IiwiZmlsdGVyIiwiXyIsImkiLCJ1cmwiLCJyZXZva2VPYmplY3RVUkwiLCJkaXYiLCJjbGFzc05hbWUiLCJtYXAiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzcGFuIiwic3Vic3RyaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsImg0IiwicHJvZ3Jlc3MiLCJzdHlsZSIsIndpZHRoIiwicCIsIm1hdGNoaW5nRmlsZSIsImZpbmQiLCJmIiwiY2xpY2siLCJ0aXRsZSIsImlucHV0IiwicmVmIiwib25DaGFuZ2UiLCJtdWx0aXBsZSIsImFjY2VwdCIsIm9uS2V5RG93biIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJjaXJjbGUiLCJjeCIsImN5IiwiciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/MessageInput.tsx\n");

/***/ }),

/***/ "./src/components/chat/MessageList.tsx":
/*!*********************************************!*\
  !*** ./src/components/chat/MessageList.tsx ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MessageList)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns/format */ \"date-fns/format\");\n/* harmony import */ var date_fns_format__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(date_fns_format__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./UploadingFileItem */ \"./src/components/chat/UploadingFileItem.tsx\");\n/* harmony import */ var _common_DeleteMessageModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/DeleteMessageModal */ \"./src/components/common/DeleteMessageModal.tsx\");\n/* harmony import */ var _common_ForwardMessageModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/ForwardMessageModal */ \"./src/components/common/ForwardMessageModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__, _common_ForwardMessageModal__WEBPACK_IMPORTED_MODULE_8__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__, _common_ForwardMessageModal__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n/**\n * Helper function to get initials from a name\n * Returns up to 2 initials (first and last name or first two words)\n */ const getInitials = (name)=>{\n    if (!name) return \"\";\n    const parts = name.trim().split(/\\s+/);\n    if (parts.length >= 2) {\n        // Get first letter of first and last name\n        return `${parts[0].charAt(0)}${parts[1].charAt(0)}`.toUpperCase();\n    } else {\n        // Get first two letters of single name\n        return name.substring(0, Math.min(2, name.length)).toUpperCase();\n    }\n};\n/**\n * Validates if a string is a valid image URL or base64 image data\n */ const isValidImageSrc = (src)=>{\n    if (!src) return false;\n    // Check if it's a valid URL or base64 data\n    return src.startsWith(\"http://\") || src.startsWith(\"https://\") || src.startsWith(\"data:image/\");\n};\n/**\n * Renders a file attachment based on its type\n */ const AttachmentPreview = ({ attachment })=>{\n    const [loadState, setLoadState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"initial\");\n    const [previewAvailable, setPreviewAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const apiBaseUrl = \"http://localhost:3001\" || 0;\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [showFullscreen, setShowFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [videoError, setVideoError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isBuffering, setIsBuffering] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Si es un video grande, verificar si est disponible\n        if (attachment.isLargeFile && attachment.fileId && attachment.contentType.startsWith(\"video/\")) {\n            checkVideoAvailability();\n        } else {\n            setLoadState(\"loaded\");\n        }\n    }, [\n        attachment.fileId,\n        retryCount\n    ]);\n    // Verificar si el video est disponible\n    const checkVideoAvailability = async ()=>{\n        try {\n            setLoadState(\"loading\");\n            const response = await fetch(`${apiBaseUrl}/chats/file/${attachment.fileId}?preview=true`);\n            if (!response.ok) {\n                if (retryCount < 10) {\n                    // Reintentamos despus de un tiempo\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000); // Reintento cada 2 segundos\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"No se pudo acceder al video\");\n                }\n                return;\n            }\n            const metadata = await response.json();\n            if (metadata.complete) {\n                setLoadState(\"loaded\");\n                setPreviewAvailable(true);\n            } else {\n                // Archivo todava no est completo, reintentamos\n                if (retryCount < 10) {\n                    setTimeout(()=>{\n                        setRetryCount((prev)=>prev + 1);\n                    }, 2000);\n                } else {\n                    setLoadState(\"error\");\n                    setVideoError(\"El video no se complet\\xf3 correctamente\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error verificando disponibilidad del video:\", error);\n            setLoadState(\"error\");\n            setVideoError(\"Error al cargar el video\");\n        }\n    };\n    // Manejo de eventos de video\n    const handleVideoPlay = ()=>{\n        console.log(\"Video iniciado correctamente\");\n    };\n    const handleVideoError = (event)=>{\n        console.error(\"Error en la reproducci\\xf3n del video:\", event);\n        setVideoError(\"Error al reproducir el video\");\n        setLoadState(\"error\");\n    };\n    const handleVideoBuffering = ()=>{\n        setIsBuffering(true);\n    };\n    const handleVideoCanPlay = ()=>{\n        setIsBuffering(false);\n    };\n    // Obtener la fuente del archivo\n    const getAttachmentSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return `${apiBaseUrl}/chats/file/${attachment.fileId}`;\n        }\n        return `data:${attachment.contentType};base64,${attachment.data}`;\n    };\n    // Obtener la miniatura para videos\n    const getThumbnailSource = ()=>{\n        if (attachment.isLargeFile && attachment.fileId) {\n            return `${apiBaseUrl}/chats/file/${attachment.fileId}/thumbnail`;\n        }\n        return \"/video-placeholder.png\";\n    };\n    // Descargar el archivo\n    const handleDownload = ()=>{\n        if (loadState !== \"loaded\") return;\n        const a = document.createElement(\"a\");\n        a.href = getAttachmentSource();\n        a.download = attachment.filename || \"download\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    };\n    // Determinar el tipo de archivo\n    const getFileType = ()=>{\n        if (attachment.contentType.startsWith(\"image/\")) return \"image\";\n        if (attachment.contentType.startsWith(\"video/\")) return \"video\";\n        if (attachment.contentType.startsWith(\"audio/\")) return \"audio\";\n        return \"document\";\n    };\n    // Manejar fullscreen para videos\n    const toggleFullscreen = ()=>{\n        if (loadState !== \"loaded\") return;\n        setShowFullscreen(!showFullscreen);\n    };\n    const handleLoadedData = ()=>{\n        setLoadState(\"loaded\");\n    };\n    const handleRetry = ()=>{\n        setRetryCount(0);\n        setLoadState(\"initial\");\n    };\n    const fileType = getFileType();\n    const source = getAttachmentSource();\n    // Render segn el tipo de archivo\n    switch(fileType){\n        case \"image\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview image-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: source,\n                        alt: attachment.filename || \"Image\",\n                        className: \"attachment-image\",\n                        onLoad: ()=>setLoadState(\"loaded\"),\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 182,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar la imagen\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 191,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 192,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 190,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 201,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 196,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 208,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 203,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 195,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: source,\n                                    alt: attachment.filename || \"Image\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 214,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 215,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 213,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 212,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 181,\n                columnNumber: 9\n            }, undefined);\n        case \"video\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview video-preview\",\n                children: [\n                    loadState === \"initial\" || loadState === \"loading\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-placeholder\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 227,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-indicator\",\n                                children: [\n                                    loadState === \"initial\" ? \"Preparando video...\" : \"Cargando video...\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-spinner\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 230,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loading-progress\",\n                                        children: [\n                                            Math.min(retryCount * 10, 90),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 231,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 228,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 226,\n                        columnNumber: 13\n                    }, undefined) : loadState === \"error\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"video-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: getThumbnailSource(),\n                                alt: \"Video thumbnail\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 236,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"error-message\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: videoError\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 238,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleRetry,\n                                        className: \"retry-button\",\n                                        children: \"Reintentar\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 239,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 237,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 235,\n                        columnNumber: 13\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                        ref: videoRef,\n                        src: source,\n                        controls: true,\n                        className: \"attachment-video loaded\",\n                        onPlay: handleVideoPlay,\n                        onError: handleVideoError,\n                        onWaiting: handleVideoBuffering,\n                        onCanPlay: handleVideoCanPlay,\n                        poster: getThumbnailSource(),\n                        preload: \"metadata\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 243,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownload,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 262,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 257,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: toggleFullscreen,\n                                className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                                disabled: loadState !== \"loaded\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"\\uD83D\\uDD0D\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 269,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 264,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 256,\n                        columnNumber: 11\n                    }, undefined),\n                    showFullscreen && loadState === \"loaded\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fullscreen-overlay\",\n                        onClick: toggleFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fullscreen-content\",\n                            onClick: (e)=>e.stopPropagation(),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: source,\n                                    controls: true,\n                                    autoPlay: true,\n                                    className: \"fullscreen-video\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 275,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: toggleFullscreen,\n                                    className: \"close-button\",\n                                    children: \"\\xd7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 281,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 274,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 273,\n                        columnNumber: 13\n                    }, undefined),\n                    isBuffering && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"buffering-indicator\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loading-spinner\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 287,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Cargando...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 288,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 286,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 224,\n                columnNumber: 9\n            }, undefined);\n        case \"audio\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview audio-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                        src: source,\n                        controls: true,\n                        className: \"attachment-audio\",\n                        onError: ()=>setLoadState(\"error\")\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 297,\n                        columnNumber: 11\n                    }, undefined),\n                    loadState === \"error\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-error\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Error al cargar el audio\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 305,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRetry,\n                                children: \"Reintentar\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 306,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 304,\n                        columnNumber: 13\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: `attachment-button ${loadState !== \"loaded\" ? \"disabled\" : \"\"}`,\n                            disabled: loadState !== \"loaded\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 315,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 310,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 309,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 296,\n                columnNumber: 9\n            }, undefined);\n        case \"document\":\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview document-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDCC4\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 325,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 326,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 324,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 330,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 329,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 328,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 323,\n                columnNumber: 9\n            }, undefined);\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"attachment-preview\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"document-icon\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\\uD83D\\uDD17\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 340,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"document-name\",\n                                children: attachment.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 341,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 339,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"attachment-controls\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleDownload,\n                            className: \"attachment-button\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 345,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 344,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 343,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 338,\n                columnNumber: 9\n            }, undefined);\n    }\n};\n/**\n * Utilidad para reconstruir archivos fragmentados\n */ const reconstructFileFromChunks = (chunks)=>{\n    // Ordenar los chunks por ndice (por si acaso)\n    const sortedChunks = [\n        ...chunks\n    ].sort((a, b)=>(a.chunkIndex || 0) - (b.chunkIndex || 0));\n    // Concatenar todos los datos base64\n    const fullBase64 = sortedChunks.map((chunk)=>chunk.data).join(\"\");\n    return fullBase64;\n};\n/**\n * Componente para mostrar archivos reconstruidos de fragmentos\n */ const ReconstructedAttachment = ({ originalFile, fileInfo })=>{\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fullscreenView, setFullscreenView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const toggleExpand = ()=>{\n        setExpanded(!expanded);\n    };\n    const toggleFullscreen = (e)=>{\n        e.stopPropagation();\n        setFullscreenView(!fullscreenView);\n    };\n    const closeFullscreen = ()=>{\n        setFullscreenView(false);\n    };\n    const { fileType, contentType, chunks } = fileInfo;\n    const fullData = reconstructFileFromChunks(chunks);\n    const base64Src = `data:${contentType};base64,${fullData}`;\n    const totalSize = chunks.reduce((total, chunk)=>total + (chunk.size || 0), 0);\n    const formatFileSize = (bytes)=>{\n        if (!bytes) return \"Unknown size\";\n        if (bytes < 1024) return `${bytes} B`;\n        if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n        return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    };\n    switch(fileType){\n        case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 relative\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `bg-gray-100 rounded-lg overflow-hidden ${expanded ? \"w-full max-w-2xl\" : \"w-72\"}`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                            src: base64Src,\n                                            controls: true,\n                                            className: \"w-full h-full max-h-96 object-contain\",\n                                            controlsList: \"nodownload\",\n                                            onError: (e)=>console.error(\"Video error:\", e),\n                                            children: \"Your browser does not support the video tag.\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 420,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute top-2 right-2 flex space-x-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: toggleExpand,\n                                                    title: \"Expand/Collapse\",\n                                                    children: expanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 437,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 436,\n                                                        columnNumber: 23\n                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 01-1 1h-3a1 1 0 110-2h3V9a1 1 0 011-1z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 441,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 430,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                    href: base64Src,\n                                                    download: originalFile,\n                                                    className: \"bg-black bg-opacity-50 text-white p-1.5 rounded-full hover:bg-opacity-70 transition-all\",\n                                                    onClick: (e)=>e.stopPropagation(),\n                                                    title: \"Download video\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 453,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 452,\n                                                        columnNumber: 21\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 445,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 429,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 419,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"px-3 py-2 text-sm text-gray-700\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"font-medium truncate max-w-xs\",\n                                            children: originalFile\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 459,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: formatFileSize(totalSize)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 460,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 458,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 418,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 417,\n                        columnNumber: 11\n                    }, undefined),\n                    fullscreenView && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center\",\n                        onClick: closeFullscreen,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative w-full max-w-6xl max-h-screen p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                                    src: base64Src,\n                                    controls: true,\n                                    className: \"w-full h-full max-h-[90vh] object-contain\",\n                                    children: \"Your browser does not support the video tag.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 468,\n                                    columnNumber: 17\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"absolute top-4 right-4 bg-white text-black p-2 rounded-full\",\n                                    onClick: closeFullscreen,\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-6 w-6\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M6 18L18 6M6 6l12 12\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 480,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 479,\n                                        columnNumber: 19\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 475,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 467,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 466,\n                        columnNumber: 13\n                    }, undefined)\n                ]\n            }, void 0, true);\n        // Para otros tipos de archivos, implementar manejo similar...\n        default:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 bg-gray-100 rounded-lg p-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-shrink-0 mr-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-8 w-8 text-gray-400\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 496,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 495,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 494,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-grow\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm font-medium\",\n                                    children: originalFile\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 500,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        formatFileSize(totalSize),\n                                        \"  Reconstruido de \",\n                                        chunks.length,\n                                        \" fragmentos\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 501,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 499,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                            href: base64Src,\n                            download: originalFile,\n                            className: \"ml-3 bg-blue-100 text-blue-800 p-1.5 rounded-full hover:bg-blue-200 transition-all\",\n                            title: \"Download file\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 512,\n                                    columnNumber: 17\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 511,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 505,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 493,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 492,\n                columnNumber: 9\n            }, undefined);\n    }\n};\nfunction MessageList() {\n    const { messages, typingUsers, uploadingFiles, retryFileUpload, cancelFileUpload, deleteMessage } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [failedImages, setFailedImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [fileChunks, setFileChunks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [deleteModalOpen, setDeleteModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [messageToDelete, setMessageToDelete] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [forwardModalOpen, setForwardModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedMessageForForward, setSelectedMessageForForward] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Scroll to bottom when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        messagesEndRef.current?.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    }, [\n        messages\n    ]);\n    // Handle failed image loads\n    const handleImageError = (senderId)=>{\n        setFailedImages((prev)=>({\n                ...prev,\n                [senderId]: true\n            }));\n    };\n    // Reconstruir archivos fragmentados\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Buscar todos los chunks en los mensajes\n        const chunks = {};\n        messages.forEach((message)=>{\n            if (!message.attachments) return;\n            message.attachments.forEach((attachment)=>{\n                if (attachment.isChunk && attachment.originalFilename) {\n                    if (!chunks[attachment.originalFilename]) {\n                        chunks[attachment.originalFilename] = {\n                            chunks: [],\n                            complete: false,\n                            contentType: attachment.contentType,\n                            fileType: attachment.fileType\n                        };\n                    }\n                    chunks[attachment.originalFilename].chunks.push(attachment);\n                }\n            });\n        });\n        // Verificar si los archivos estn completos\n        Object.keys(chunks).forEach((filename)=>{\n            const info = chunks[filename];\n            if (info.chunks.length > 0) {\n                const lastChunk = info.chunks[info.chunks.length - 1];\n                if (lastChunk.chunkIndex !== undefined && lastChunk.totalChunks && lastChunk.chunkIndex === lastChunk.totalChunks - 1) {\n                    info.complete = true;\n                }\n            }\n        });\n        setFileChunks(chunks);\n    }, [\n        messages\n    ]);\n    // Pending uploads section\n    const hasUploadingFiles = Object.keys(uploadingFiles).length > 0;\n    // Render uploading files\n    const renderUploadingFiles = ()=>{\n        if (!hasUploadingFiles) return null;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"uploading-files-container my-4 p-3 bg-gray-100 rounded-lg\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                    className: \"text-sm font-medium text-gray-700 mb-2\",\n                    children: \"Archivos subiendo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 605,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"uploading-files-list space-y-2\",\n                    children: Object.entries(uploadingFiles).filter(([_, status])=>status.progress < 100).map(([tempId, progress])=>{\n                        // Buscamos el archivo correspondiente en los mensajes\n                        let file;\n                        for (const message of messages){\n                            if (message.attachments) {\n                                file = message.attachments.find((att)=>att.tempId === tempId);\n                                if (file) break;\n                            }\n                        }\n                        if (!file) return null;\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            file: file,\n                            progress: progress.progress,\n                            error: progress.error,\n                            onRetry: ()=>retryFileUpload(file),\n                            onCancel: ()=>cancelFileUpload(file)\n                        }, tempId, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 620,\n                            columnNumber: 15\n                        }, this);\n                    })\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 606,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 604,\n            columnNumber: 7\n        }, this);\n    };\n    if (Object.keys(uploadingFiles).length > 0 && !messages.length) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"uploading-files-container p-3 bg-gray-100 rounded-lg\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-sm font-medium text-gray-700 mb-2\",\n                                children: \"Archivos subiendo...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 640,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"uploading-files-list space-y-2\",\n                                children: Object.entries(uploadingFiles).filter(([_, status])=>status.progress < 100).map(([tempId, status])=>{\n                                    // Como no hay mensajes todava, creamos un objeto temporal\n                                    // solo para la visualizacin\n                                    const tempFile = {\n                                        tempId,\n                                        filename: `Archivo ${tempId}`,\n                                        contentType: \"application/octet-stream\",\n                                        fileType: _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.DOCUMENT\n                                    };\n                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                        file: tempFile,\n                                        progress: status.progress,\n                                        error: status.error,\n                                        onRetry: ()=>retryFileUpload(tempFile),\n                                        onCancel: ()=>cancelFileUpload(tempFile)\n                                    }, tempId, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                        lineNumber: 653,\n                                        columnNumber: 19\n                                    }, this);\n                                })\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 641,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 639,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 638,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: messagesEndRef\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 666,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 637,\n            columnNumber: 7\n        }, this);\n    }\n    if (messages.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col h-full justify-center items-center p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-gray-100 p-3 rounded-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-10 w-10 text-gray-400\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 1.5,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 676,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 675,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 674,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-gray-500 text-center\",\n                    children: \"No messages yet. Send a message to start the conversation!\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 679,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n            lineNumber: 673,\n            columnNumber: 7\n        }, this);\n    }\n    // Group messages by date\n    const messagesByDate = messages.reduce((groups, message)=>{\n        const date = new Date(message.createdAt).toLocaleDateString();\n        if (!groups[date]) {\n            groups[date] = [];\n        }\n        groups[date].push(message);\n        return groups;\n    }, {});\n    // Get array of typing users (excluding current user)\n    const typingUsersList = Object.entries(typingUsers).filter(([userId, isTyping])=>isTyping && userId !== user?.id).map(([userId, value])=>typeof value === \"string\" ? value : userId);\n    // Funcin para manejar la eliminacin de mensajes\n    const handleDeleteClick = (messageId)=>{\n        setMessageToDelete(messageId);\n        setDeleteModalOpen(true);\n    };\n    const handleForwardClick = (message)=>{\n        setSelectedMessageForForward({\n            id: message._id,\n            content: message.content || \"\",\n            sender: {\n                _id: message.sender._id,\n                name: message.sender.name,\n                avatar: message.sender.avatar\n            },\n            date: message.createdAt\n        });\n        setForwardModalOpen(true);\n    };\n    // Funcin para eliminar mensaje solo para m\n    const handleDeleteForMe = async ()=>{\n        if (messageToDelete) {\n            const success = await deleteMessage(messageToDelete, false);\n            if (success) {\n                console.log(\"Mensaje eliminado para m\\xed\");\n            } else {\n                console.error(\"Error al eliminar mensaje\");\n            }\n        }\n        setDeleteModalOpen(false);\n        setMessageToDelete(null);\n    };\n    // Funcin para eliminar mensaje para todos\n    const handleDeleteForEveryone = async ()=>{\n        if (messageToDelete) {\n            const success = await deleteMessage(messageToDelete, true);\n            if (success) {\n                console.log(\"Mensaje eliminado para todos\");\n            } else {\n                console.error(\"Error al eliminar mensaje para todos\");\n            }\n        }\n        setDeleteModalOpen(false);\n        setMessageToDelete(null);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full overflow-y-auto p-4 space-y-4\",\n        children: [\n            renderUploadingFiles(),\n            Object.entries(messagesByDate).map(([date, dateMessages])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"bg-gray-100 px-3 py-1 rounded-full\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: date_fns_format__WEBPACK_IMPORTED_MODULE_5___default()(new Date(date), \"MMMM d, yyyy\")\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 756,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 755,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 754,\n                            columnNumber: 11\n                        }, this),\n                        dateMessages.map((message)=>{\n                            // Corregir la deteccin de mensajes propios considerando tanto _id como id\n                            const isOwnMessage = message.sender._id === user?.id || message.sender.id === user?.id;\n                            const senderId = message.sender._id || message.sender.id || \"\";\n                            const hasAttachments = message.attachments && message.attachments.length > 0;\n                            const nonChunkAttachments = message.attachments?.filter((att)=>!att.isChunk) || [];\n                            // Filtrar mensajes que son solo chunks para evitar duplicados en la UI\n                            if ((!message.attachments || message.attachments.length === 0 || message.attachments.length > 0 && message.attachments.every((att)=>att.isChunk)) && (!message.content || message.content.includes(\"Parte \") || message.content.includes(\"Enviando \") || message.content === \"Enviando archivos grandes...\")) {\n                                return null;\n                            }\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `flex ${isOwnMessage ? \"justify-end\" : \"justify-start\"} group relative`,\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `flex max-w-xs md:max-w-md lg:max-w-lg ${isOwnMessage ? \"flex-row-reverse\" : \"\"}`,\n                                    children: [\n                                        !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-shrink-0 mr-3\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center overflow-hidden\",\n                                                children: message.sender.avatar && isValidImageSrc(message.sender.avatar) && !failedImages[senderId] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                    src: message.sender.avatar,\n                                                    alt: message.sender.name,\n                                                    width: 32,\n                                                    height: 32,\n                                                    className: \"h-full w-full object-cover\",\n                                                    onError: ()=>handleImageError(senderId)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 792,\n                                                    columnNumber: 27\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-sm font-medium text-gray-700\",\n                                                    children: getInitials(message.sender.name)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 801,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                lineNumber: 790,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 789,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `\n                    ${isOwnMessage ? \"bg-primary-500 text-white rounded-tl-lg rounded-tr-none\" : \"bg-gray-200 text-gray-800 rounded-tr-lg rounded-tl-none\"}\n                    rounded-bl-lg rounded-br-lg p-3 shadow-sm\n                    relative\n                  `,\n                                            children: [\n                                                !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"font-medium text-xs mb-1\",\n                                                    children: message.sender.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 818,\n                                                    columnNumber: 23\n                                                }, this),\n                                                message.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: message.content\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 823,\n                                                    columnNumber: 23\n                                                }, this),\n                                                hasAttachments && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: `${message.content ? \"mt-2\" : \"\"}`,\n                                                    children: nonChunkAttachments?.map((attachment, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AttachmentPreview, {\n                                                            attachment: attachment\n                                                        }, `${message._id}-attachment-${index}`, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 832,\n                                                            columnNumber: 27\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 830,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-xs mt-1 opacity-80\",\n                                                    children: date_fns_format__WEBPACK_IMPORTED_MODULE_5___default()(new Date(message.createdAt), \"h:mm a\")\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 840,\n                                                    columnNumber: 21\n                                                }, this),\n                                                isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute bottom-1 right-1 flex space-x-1\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            className: \"text-xs text-white bg-gray-500 hover:bg-red-500 p-1 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\",\n                                                            onClick: ()=>handleDeleteClick(message._id),\n                                                            \"aria-label\": \"Delete message\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                className: \"h-3.5 w-3.5\",\n                                                                viewBox: \"0 0 20 20\",\n                                                                fill: \"currentColor\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                    fillRule: \"evenodd\",\n                                                                    d: \"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\",\n                                                                    clipRule: \"evenodd\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                                    lineNumber: 851,\n                                                                    columnNumber: 29\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                                lineNumber: 850,\n                                                                columnNumber: 27\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 845,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            className: \"text-xs text-white bg-gray-500 hover:bg-primary-500 p-1 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\",\n                                                            onClick: ()=>handleForwardClick(message),\n                                                            \"aria-label\": \"Forward message\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                                className: \"h-3.5 w-3.5\",\n                                                                viewBox: \"0 0 20 20\",\n                                                                fill: \"currentColor\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                    fillRule: \"evenodd\",\n                                                                    d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z\",\n                                                                    clipRule: \"evenodd\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                                    lineNumber: 860,\n                                                                    columnNumber: 29\n                                                                }, this)\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                                lineNumber: 859,\n                                                                columnNumber: 27\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 854,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 844,\n                                                    columnNumber: 23\n                                                }, this),\n                                                !isOwnMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute bottom-1 left-1 flex space-x-1\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"text-xs text-white bg-gray-500 hover:bg-primary-500 p-1 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\",\n                                                        onClick: ()=>handleForwardClick(message),\n                                                        \"aria-label\": \"Forward message\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                                            className: \"h-3.5 w-3.5\",\n                                                            viewBox: \"0 0 20 20\",\n                                                            fill: \"currentColor\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                                fillRule: \"evenodd\",\n                                                                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z\",\n                                                                clipRule: \"evenodd\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                                lineNumber: 873,\n                                                                columnNumber: 29\n                                                            }, this)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                            lineNumber: 872,\n                                                            columnNumber: 27\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                        lineNumber: 867,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                                    lineNumber: 866,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                            lineNumber: 809,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 787,\n                                    columnNumber: 17\n                                }, this)\n                            }, message._id, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 783,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    ]\n                }, date, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 753,\n                    columnNumber: 9\n                }, this)),\n            Object.keys(uploadingFiles).length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-4 p-3 rounded-lg bg-white shadow border border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-sm font-medium mb-3 text-gray-700 flex items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-4 w-4 mr-1 text-blue-500\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                    lineNumber: 891,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 890,\n                                columnNumber: 13\n                            }, this),\n                            \"Archivos en proceso\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 889,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-2 mt-2\",\n                        children: Object.entries(uploadingFiles).filter(([_, status])=>status.progress < 100).map(([tempId, status])=>{\n                            // Buscar el archivo correspondiente en el contexto\n                            const file = messages.flatMap((msg)=>msg.attachments?.filter((att)=>att.tempId === tempId) || [])[0];\n                            if (!file) return null;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UploadingFileItem__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                file: file,\n                                progress: status.progress,\n                                error: status.error,\n                                onRetry: ()=>retryFileUpload(file),\n                                onCancel: ()=>cancelFileUpload(file)\n                            }, tempId, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 905,\n                                columnNumber: 17\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 895,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 888,\n                columnNumber: 9\n            }, this),\n            Object.entries(fileChunks).filter(([_, info])=>info.complete).map(([filename, info])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 border border-gray-200 p-3 rounded-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-medium mb-2 text-gray-700\",\n                            children: \"Archivo reconstruido:\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 924,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReconstructedAttachment, {\n                            originalFile: filename,\n                            fileInfo: info\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                            lineNumber: 927,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, `reconstructed-${filename}`, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                    lineNumber: 923,\n                    columnNumber: 11\n                }, this)),\n            typingUsersList.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center space-x-2 text-gray-500 text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex space-x-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"0ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 939,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"200ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 940,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-2 h-2 rounded-full bg-gray-400 animate-bounce\",\n                                style: {\n                                    animationDelay: \"400ms\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                                lineNumber: 941,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 938,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: typingUsersList.length === 1 ? `${typingUsersList[0]} is typing...` : `${typingUsersList.length} people are typing...`\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                        lineNumber: 943,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 937,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesEndRef\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 952,\n                columnNumber: 7\n            }, this),\n            deleteModalOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_common_DeleteMessageModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                isOpen: deleteModalOpen,\n                onClose: ()=>setDeleteModalOpen(false),\n                onDeleteForMe: handleDeleteForMe,\n                onDeleteForEveryone: handleDeleteForEveryone,\n                canDeleteForEveryone: true\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 954,\n                columnNumber: 9\n            }, this),\n            forwardModalOpen && selectedMessageForForward && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_common_ForwardMessageModal__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                isOpen: forwardModalOpen,\n                onClose: ()=>{\n                    setForwardModalOpen(false);\n                    setSelectedMessageForForward(null);\n                },\n                messageId: selectedMessageForForward.id,\n                messageContent: selectedMessageForForward.content,\n                messageSender: selectedMessageForForward.sender,\n                messageDate: selectedMessageForForward.date\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n                lineNumber: 963,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/MessageList.tsx\",\n        lineNumber: 750,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVO2dDQUFrRHdKLE9BQU87b0NBQUVDLGdCQUFnQjtnQ0FBTTs7Ozs7OzBDQUNoRyw4REFBQzFKO2dDQUFJQyxXQUFVO2dDQUFrRHdKLE9BQU87b0NBQUVDLGdCQUFnQjtnQ0FBUTs7Ozs7OzBDQUNsRyw4REFBQzFKO2dDQUFJQyxXQUFVO2dDQUFrRHdKLE9BQU87b0NBQUVDLGdCQUFnQjtnQ0FBUTs7Ozs7Ozs7Ozs7O2tDQUVwRyw4REFBQ2hKO2tDQUNFb0gsZ0JBQWdCbE0sTUFBTSxLQUFLLElBQ3hCLENBQUMsRUFBRWtNLGVBQWUsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQ3BDLENBQUMsRUFBRUEsZ0JBQWdCbE0sTUFBTSxDQUFDLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7MEJBTTFELDhEQUFDb0U7Z0JBQUljLEtBQUs0RDs7Ozs7O1lBQ1RLLGlDQUNDLDhEQUFDMUosa0VBQWtCQTtnQkFDakJzTyxRQUFRNUU7Z0JBQ1I2RSxTQUFTLElBQU01RSxtQkFBbUI7Z0JBQ2xDNkUsZUFBZW5CO2dCQUNmb0IscUJBQXFCbEI7Z0JBQ3JCbUIsc0JBQXNCOzs7Ozs7WUFHekI1RSxvQkFBb0JFLDJDQUNuQiw4REFBQy9KLG1FQUFtQkE7Z0JBQ2xCcU8sUUFBUXhFO2dCQUNSeUUsU0FBUztvQkFDUHhFLG9CQUFvQjtvQkFDcEJFLDZCQUE2QjtnQkFDL0I7Z0JBQ0E4QyxXQUFXL0MsMEJBQTBCNEMsRUFBRTtnQkFDdkMrQixnQkFBZ0IzRSwwQkFBMEJrRCxPQUFPO2dCQUNqRDBCLGVBQWU1RSwwQkFBMEJtRCxNQUFNO2dCQUMvQzBCLGFBQWE3RSwwQkFBMEJxQyxJQUFJOzs7Ozs7Ozs7Ozs7QUFLckQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29tcG9uZW50cy9jaGF0L01lc3NhZ2VMaXN0LnRzeD81N2Y2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUNoYXQsIEZpbGVUeXBlLCBGaWxlQXR0YWNobWVudCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IFVwbG9hZGluZ0ZpbGVJdGVtIGZyb20gJy4vVXBsb2FkaW5nRmlsZUl0ZW0nO1xuaW1wb3J0IERlbGV0ZU1lc3NhZ2VNb2RhbCBmcm9tICcuLi9jb21tb24vRGVsZXRlTWVzc2FnZU1vZGFsJztcbmltcG9ydCBGb3J3YXJkTWVzc2FnZU1vZGFsIGZyb20gJy4uL2NvbW1vbi9Gb3J3YXJkTWVzc2FnZU1vZGFsJztcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGluaXRpYWxzIGZyb20gYSBuYW1lXG4gKiBSZXR1cm5zIHVwIHRvIDIgaW5pdGlhbHMgKGZpcnN0IGFuZCBsYXN0IG5hbWUgb3IgZmlyc3QgdHdvIHdvcmRzKVxuICovXG5jb25zdCBnZXRJbml0aWFscyA9IChuYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgXG4gIGNvbnN0IHBhcnRzID0gbmFtZS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgLy8gR2V0IGZpcnN0IGxldHRlciBvZiBmaXJzdCBhbmQgbGFzdCBuYW1lXG4gICAgcmV0dXJuIGAke3BhcnRzWzBdLmNoYXJBdCgwKX0ke3BhcnRzWzFdLmNoYXJBdCgwKX1gLnRvVXBwZXJDYXNlKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gR2V0IGZpcnN0IHR3byBsZXR0ZXJzIG9mIHNpbmdsZSBuYW1lXG4gICAgcmV0dXJuIG5hbWUuc3Vic3RyaW5nKDAsIE1hdGgubWluKDIsIG5hbWUubGVuZ3RoKSkudG9VcHBlckNhc2UoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgYSBzdHJpbmcgaXMgYSB2YWxpZCBpbWFnZSBVUkwgb3IgYmFzZTY0IGltYWdlIGRhdGFcbiAqL1xuY29uc3QgaXNWYWxpZEltYWdlU3JjID0gKHNyYzogc3RyaW5nIHwgdW5kZWZpbmVkKTogYm9vbGVhbiA9PiB7XG4gIGlmICghc3JjKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBpZiBpdCdzIGEgdmFsaWQgVVJMIG9yIGJhc2U2NCBkYXRhXG4gIHJldHVybiAoXG4gICAgc3JjLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCBcbiAgICBzcmMuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSB8fCBcbiAgICBzcmMuc3RhcnRzV2l0aCgnZGF0YTppbWFnZS8nKVxuICApO1xufTtcblxuLyoqXG4gKiBSZW5kZXJzIGEgZmlsZSBhdHRhY2htZW50IGJhc2VkIG9uIGl0cyB0eXBlXG4gKi9cbmNvbnN0IEF0dGFjaG1lbnRQcmV2aWV3ID0gKHsgYXR0YWNobWVudCB9OiB7IGF0dGFjaG1lbnQ6IEZpbGVBdHRhY2htZW50IH0pID0+IHtcbiAgY29uc3QgW2xvYWRTdGF0ZSwgc2V0TG9hZFN0YXRlXSA9IHVzZVN0YXRlPCdpbml0aWFsJyB8ICdsb2FkaW5nJyB8ICdsb2FkZWQnIHwgJ2Vycm9yJz4oJ2luaXRpYWwnKTtcbiAgY29uc3QgW3ByZXZpZXdBdmFpbGFibGUsIHNldFByZXZpZXdBdmFpbGFibGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBhcGlCYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJztcbiAgY29uc3QgdmlkZW9SZWYgPSB1c2VSZWY8SFRNTFZpZGVvRWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IFtzaG93RnVsbHNjcmVlbiwgc2V0U2hvd0Z1bGxzY3JlZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmV0cnlDb3VudCwgc2V0UmV0cnlDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3ZpZGVvRXJyb3IsIHNldFZpZGVvRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0J1ZmZlcmluZywgc2V0SXNCdWZmZXJpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2kgZXMgdW4gdmlkZW8gZ3JhbmRlLCB2ZXJpZmljYXIgc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgIGlmIChhdHRhY2htZW50LmlzTGFyZ2VGaWxlICYmIGF0dGFjaG1lbnQuZmlsZUlkICYmIGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgndmlkZW8vJykpIHtcbiAgICAgIGNoZWNrVmlkZW9BdmFpbGFiaWxpdHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG9hZFN0YXRlKCdsb2FkZWQnKTtcbiAgICB9XG4gIH0sIFthdHRhY2htZW50LmZpbGVJZCwgcmV0cnlDb3VudF0pO1xuXG4gIC8vIFZlcmlmaWNhciBzaSBlbCB2aWRlbyBlc3TDoSBkaXNwb25pYmxlXG4gIGNvbnN0IGNoZWNrVmlkZW9BdmFpbGFiaWxpdHkgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldExvYWRTdGF0ZSgnbG9hZGluZycpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlVXJsfS9jaGF0cy9maWxlLyR7YXR0YWNobWVudC5maWxlSWR9P3ByZXZpZXc9dHJ1ZWApO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGlmIChyZXRyeUNvdW50IDwgMTApIHtcbiAgICAgICAgICAvLyBSZWludGVudGFtb3MgZGVzcHXDqXMgZGUgdW4gdGllbXBvXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRSZXRyeUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgIH0sIDIwMDApOyAvLyBSZWludGVudG8gY2FkYSAyIHNlZ3VuZG9zXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG9hZFN0YXRlKCdlcnJvcicpO1xuICAgICAgICAgIHNldFZpZGVvRXJyb3IoJ05vIHNlIHB1ZG8gYWNjZWRlciBhbCB2aWRlbycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAobWV0YWRhdGEuY29tcGxldGUpIHtcbiAgICAgICAgc2V0TG9hZFN0YXRlKCdsb2FkZWQnKTtcbiAgICAgICAgc2V0UHJldmlld0F2YWlsYWJsZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFyY2hpdm8gdG9kYXbDrWEgbm8gZXN0w6EgY29tcGxldG8sIHJlaW50ZW50YW1vc1xuICAgICAgICBpZiAocmV0cnlDb3VudCA8IDEwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRSZXRyeUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvYWRTdGF0ZSgnZXJyb3InKTtcbiAgICAgICAgICBzZXRWaWRlb0Vycm9yKCdFbCB2aWRlbyBubyBzZSBjb21wbGV0w7MgY29ycmVjdGFtZW50ZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB2ZXJpZmljYW5kbyBkaXNwb25pYmlsaWRhZCBkZWwgdmlkZW86XCIsIGVycm9yKTtcbiAgICAgIHNldExvYWRTdGF0ZSgnZXJyb3InKTtcbiAgICAgIHNldFZpZGVvRXJyb3IoJ0Vycm9yIGFsIGNhcmdhciBlbCB2aWRlbycpO1xuICAgIH1cbiAgfTtcblxuICAvLyBNYW5lam8gZGUgZXZlbnRvcyBkZSB2aWRlb1xuICBjb25zdCBoYW5kbGVWaWRlb1BsYXkgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1ZpZGVvIGluaWNpYWRvIGNvcnJlY3RhbWVudGUnKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVWaWRlb0Vycm9yID0gKGV2ZW50OiBSZWFjdC5TeW50aGV0aWNFdmVudDxIVE1MVmlkZW9FbGVtZW50LCBFdmVudD4pID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBsYSByZXByb2R1Y2Npw7NuIGRlbCB2aWRlbzonLCBldmVudCk7XG4gICAgc2V0VmlkZW9FcnJvcignRXJyb3IgYWwgcmVwcm9kdWNpciBlbCB2aWRlbycpO1xuICAgIHNldExvYWRTdGF0ZSgnZXJyb3InKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVWaWRlb0J1ZmZlcmluZyA9ICgpID0+IHtcbiAgICBzZXRJc0J1ZmZlcmluZyh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVWaWRlb0NhblBsYXkgPSAoKSA9PiB7XG4gICAgc2V0SXNCdWZmZXJpbmcoZmFsc2UpO1xuICB9O1xuXG4gIC8vIE9idGVuZXIgbGEgZnVlbnRlIGRlbCBhcmNoaXZvXG4gIGNvbnN0IGdldEF0dGFjaG1lbnRTb3VyY2UgPSAoKSA9PiB7XG4gICAgaWYgKGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgJiYgYXR0YWNobWVudC5maWxlSWQpIHtcbiAgICAgIHJldHVybiBgJHthcGlCYXNlVXJsfS9jaGF0cy9maWxlLyR7YXR0YWNobWVudC5maWxlSWR9YDtcbiAgICB9XG4gICAgcmV0dXJuIGBkYXRhOiR7YXR0YWNobWVudC5jb250ZW50VHlwZX07YmFzZTY0LCR7YXR0YWNobWVudC5kYXRhfWA7XG4gIH07XG5cbiAgLy8gT2J0ZW5lciBsYSBtaW5pYXR1cmEgcGFyYSB2aWRlb3NcbiAgY29uc3QgZ2V0VGh1bWJuYWlsU291cmNlID0gKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50LmlzTGFyZ2VGaWxlICYmIGF0dGFjaG1lbnQuZmlsZUlkKSB7XG4gICAgICByZXR1cm4gYCR7YXBpQmFzZVVybH0vY2hhdHMvZmlsZS8ke2F0dGFjaG1lbnQuZmlsZUlkfS90aHVtYm5haWxgO1xuICAgIH1cbiAgICByZXR1cm4gJy92aWRlby1wbGFjZWhvbGRlci5wbmcnO1xuICB9O1xuXG4gIC8vIERlc2NhcmdhciBlbCBhcmNoaXZvXG4gIGNvbnN0IGhhbmRsZURvd25sb2FkID0gKCkgPT4ge1xuICAgIGlmIChsb2FkU3RhdGUgIT09ICdsb2FkZWQnKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmhyZWYgPSBnZXRBdHRhY2htZW50U291cmNlKCk7XG4gICAgYS5kb3dubG9hZCA9IGF0dGFjaG1lbnQuZmlsZW5hbWUgfHwgJ2Rvd25sb2FkJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgIGEuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xuICB9O1xuXG4gIC8vIERldGVybWluYXIgZWwgdGlwbyBkZSBhcmNoaXZvXG4gIGNvbnN0IGdldEZpbGVUeXBlID0gKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gJ2ltYWdlJztcbiAgICBpZiAoYXR0YWNobWVudC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCd2aWRlby8nKSkgcmV0dXJuICd2aWRlbyc7XG4gICAgaWYgKGF0dGFjaG1lbnQuY29udGVudFR5cGUuc3RhcnRzV2l0aCgnYXVkaW8vJykpIHJldHVybiAnYXVkaW8nO1xuICAgIHJldHVybiAnZG9jdW1lbnQnO1xuICB9O1xuXG4gIC8vIE1hbmVqYXIgZnVsbHNjcmVlbiBwYXJhIHZpZGVvc1xuICBjb25zdCB0b2dnbGVGdWxsc2NyZWVuID0gKCkgPT4ge1xuICAgIGlmIChsb2FkU3RhdGUgIT09ICdsb2FkZWQnKSByZXR1cm47XG4gICAgc2V0U2hvd0Z1bGxzY3JlZW4oIXNob3dGdWxsc2NyZWVuKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVMb2FkZWREYXRhID0gKCkgPT4ge1xuICAgIHNldExvYWRTdGF0ZSgnbG9hZGVkJyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmV0cnkgPSAoKSA9PiB7XG4gICAgc2V0UmV0cnlDb3VudCgwKTtcbiAgICBzZXRMb2FkU3RhdGUoJ2luaXRpYWwnKTtcbiAgfTtcblxuICBjb25zdCBmaWxlVHlwZSA9IGdldEZpbGVUeXBlKCk7XG4gIGNvbnN0IHNvdXJjZSA9IGdldEF0dGFjaG1lbnRTb3VyY2UoKTtcbiAgXG4gIC8vIFJlbmRlciBzZWfDum4gZWwgdGlwbyBkZSBhcmNoaXZvXG4gIHN3aXRjaCAoZmlsZVR5cGUpIHtcbiAgICBjYXNlICdpbWFnZSc6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtcHJldmlldyBpbWFnZS1wcmV2aWV3XCI+XG4gICAgICAgICAgPGltZyBcbiAgICAgICAgICAgIHNyYz17c291cmNlfSBcbiAgICAgICAgICAgIGFsdD17YXR0YWNobWVudC5maWxlbmFtZSB8fCAnSW1hZ2UnfSBcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtaW1hZ2VcIlxuICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiBzZXRMb2FkU3RhdGUoJ2xvYWRlZCcpfVxuICAgICAgICAgICAgb25FcnJvcj17KCkgPT4gc2V0TG9hZFN0YXRlKCdlcnJvcicpfVxuICAgICAgICAgIC8+XG4gICAgICAgICAge2xvYWRTdGF0ZSA9PT0gJ2Vycm9yJyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtZXJyb3JcIj5cbiAgICAgICAgICAgICAgPHA+RXJyb3IgYWwgY2FyZ2FyIGxhIGltYWdlbjwvcD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVSZXRyeX0+UmVpbnRlbnRhcjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZUZ1bGxzY3JlZW59IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhdHRhY2htZW50LWJ1dHRvbiAke2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcgPyAnZGlzYWJsZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuPvCflI08L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7c2hvd0Z1bGxzY3JlZW4gJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLW92ZXJsYXlcIiBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLWNvbnRlbnRcIiBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtzb3VyY2V9IGFsdD17YXR0YWNobWVudC5maWxlbmFtZSB8fCAnSW1hZ2UnfSAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn0gY2xhc3NOYW1lPVwiY2xvc2UtYnV0dG9uXCI+w5c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgXG4gICAgY2FzZSAndmlkZW8nOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgdmlkZW8tcHJldmlld1wiPlxuICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdpbml0aWFsJyB8fCBsb2FkU3RhdGUgPT09ICdsb2FkaW5nJyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tcGxhY2Vob2xkZXJcIj5cbiAgICAgICAgICAgICAgPGltZyBzcmM9e2dldFRodW1ibmFpbFNvdXJjZSgpfSBhbHQ9XCJWaWRlbyB0aHVtYm5haWxcIiAvPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctaW5kaWNhdG9yXCI+XG4gICAgICAgICAgICAgICAge2xvYWRTdGF0ZSA9PT0gJ2luaXRpYWwnID8gJ1ByZXBhcmFuZG8gdmlkZW8uLi4nIDogJ0NhcmdhbmRvIHZpZGVvLi4uJ31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1wcm9ncmVzc1wiPntNYXRoLm1pbihyZXRyeUNvdW50ICogMTAsIDkwKX0lPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IGxvYWRTdGF0ZSA9PT0gJ2Vycm9yJyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tZXJyb3JcIj5cbiAgICAgICAgICAgICAgPGltZyBzcmM9e2dldFRodW1ibmFpbFNvdXJjZSgpfSBhbHQ9XCJWaWRlbyB0aHVtYm5haWxcIiAvPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICA8cD57dmlkZW9FcnJvcn08L3A+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVSZXRyeX0gY2xhc3NOYW1lPVwicmV0cnktYnV0dG9uXCI+UmVpbnRlbnRhcjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgIHJlZj17dmlkZW9SZWZ9XG4gICAgICAgICAgICAgIHNyYz17c291cmNlfSBcbiAgICAgICAgICAgICAgY29udHJvbHMgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtdmlkZW8gbG9hZGVkXCJcbiAgICAgICAgICAgICAgb25QbGF5PXtoYW5kbGVWaWRlb1BsYXl9XG4gICAgICAgICAgICAgIG9uRXJyb3I9e2hhbmRsZVZpZGVvRXJyb3J9XG4gICAgICAgICAgICAgIG9uV2FpdGluZz17aGFuZGxlVmlkZW9CdWZmZXJpbmd9XG4gICAgICAgICAgICAgIG9uQ2FuUGxheT17aGFuZGxlVmlkZW9DYW5QbGF5fVxuICAgICAgICAgICAgICBwb3N0ZXI9e2dldFRodW1ibmFpbFNvdXJjZSgpfVxuICAgICAgICAgICAgICBwcmVsb2FkPVwibWV0YWRhdGFcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0YWNobWVudC1jb250cm9sc1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRG93bmxvYWR9IFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhdHRhY2htZW50LWJ1dHRvbiAke2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcgPyAnZGlzYWJsZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuPuKsh++4jzwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlRnVsbHNjcmVlbn1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgYXR0YWNobWVudC1idXR0b24gJHtsb2FkU3RhdGUgIT09ICdsb2FkZWQnID8gJ2Rpc2FibGVkJyA6ICcnfWB9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkU3RhdGUgIT09ICdsb2FkZWQnfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3Bhbj7wn5SNPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3Nob3dGdWxsc2NyZWVuICYmIGxvYWRTdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLW92ZXJsYXlcIiBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsc2NyZWVuLWNvbnRlbnRcIiBvbkNsaWNrPXtlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9PlxuICAgICAgICAgICAgICAgIDx2aWRlbyBcbiAgICAgICAgICAgICAgICAgIHNyYz17c291cmNlfSBcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICAgICAgYXV0b1BsYXlcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZ1bGxzY3JlZW4tdmlkZW9cIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0b2dnbGVGdWxsc2NyZWVufSBjbGFzc05hbWU9XCJjbG9zZS1idXR0b25cIj7DlzwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge2lzQnVmZmVyaW5nICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnVmZmVyaW5nLWluZGljYXRvclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICA8cD5DYXJnYW5kby4uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICBcbiAgICBjYXNlICdhdWRpbyc6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtcHJldmlldyBhdWRpby1wcmV2aWV3XCI+XG4gICAgICAgICAgPGF1ZGlvIFxuICAgICAgICAgICAgc3JjPXtzb3VyY2V9IFxuICAgICAgICAgICAgY29udHJvbHMgXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJhdHRhY2htZW50LWF1ZGlvXCJcbiAgICAgICAgICAgIG9uRXJyb3I9eygpID0+IHNldExvYWRTdGF0ZSgnZXJyb3InKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtsb2FkU3RhdGUgPT09ICdlcnJvcicgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWVycm9yXCI+XG4gICAgICAgICAgICAgIDxwPkVycm9yIGFsIGNhcmdhciBlbCBhdWRpbzwvcD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVSZXRyeX0+UmVpbnRlbnRhcjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtY29udHJvbHNcIj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BhdHRhY2htZW50LWJ1dHRvbiAke2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCcgPyAnZGlzYWJsZWQnIDogJyd9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRTdGF0ZSAhPT0gJ2xvYWRlZCd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzcGFuPuKsh++4jzwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgXG4gICAgY2FzZSAnZG9jdW1lbnQnOlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LXByZXZpZXcgZG9jdW1lbnQtcHJldmlld1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZG9jdW1lbnQtaWNvblwiPlxuICAgICAgICAgICAgPHNwYW4+8J+ThDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRvY3VtZW50LW5hbWVcIj57YXR0YWNobWVudC5maWxlbmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfSBjbGFzc05hbWU9XCJhdHRhY2htZW50LWJ1dHRvblwiPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF0dGFjaG1lbnQtcHJldmlld1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZG9jdW1lbnQtaWNvblwiPlxuICAgICAgICAgICAgPHNwYW4+8J+Ulzwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRvY3VtZW50LW5hbWVcIj57YXR0YWNobWVudC5maWxlbmFtZX08L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhdHRhY2htZW50LWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkfSBjbGFzc05hbWU9XCJhdHRhY2htZW50LWJ1dHRvblwiPlxuICAgICAgICAgICAgICA8c3Bhbj7irIfvuI88L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgcmVjb25zdHJ1Y3RlZCBmaWxlIGNodW5rc1xuICovXG5pbnRlcmZhY2UgRmlsZUNodW5rSW5mbyB7XG4gIGNodW5rczogRmlsZUF0dGFjaG1lbnRbXTtcbiAgY29tcGxldGU6IGJvb2xlYW47XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gIGZpbGVUeXBlOiBGaWxlVHlwZTtcbn1cblxuLyoqXG4gKiBVdGlsaWRhZCBwYXJhIHJlY29uc3RydWlyIGFyY2hpdm9zIGZyYWdtZW50YWRvc1xuICovXG5jb25zdCByZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzID0gKGNodW5rczogRmlsZUF0dGFjaG1lbnRbXSk6IHN0cmluZyA9PiB7XG4gIC8vIE9yZGVuYXIgbG9zIGNodW5rcyBwb3Igw61uZGljZSAocG9yIHNpIGFjYXNvKVxuICBjb25zdCBzb3J0ZWRDaHVua3MgPSBbLi4uY2h1bmtzXS5zb3J0KChhLCBiKSA9PiBcbiAgICAoYS5jaHVua0luZGV4IHx8IDApIC0gKGIuY2h1bmtJbmRleCB8fCAwKSk7XG4gIFxuICAvLyBDb25jYXRlbmFyIHRvZG9zIGxvcyBkYXRvcyBiYXNlNjRcbiAgY29uc3QgZnVsbEJhc2U2NCA9IHNvcnRlZENodW5rcy5tYXAoY2h1bmsgPT4gY2h1bmsuZGF0YSkuam9pbignJyk7XG4gIFxuICByZXR1cm4gZnVsbEJhc2U2NDtcbn07XG5cbi8qKlxuICogQ29tcG9uZW50ZSBwYXJhIG1vc3RyYXIgYXJjaGl2b3MgcmVjb25zdHJ1aWRvcyBkZSBmcmFnbWVudG9zXG4gKi9cbmNvbnN0IFJlY29uc3RydWN0ZWRBdHRhY2htZW50ID0gKHsgb3JpZ2luYWxGaWxlLCBmaWxlSW5mbyB9OiB7IFxuICBvcmlnaW5hbEZpbGU6IHN0cmluZywgXG4gIGZpbGVJbmZvOiBGaWxlQ2h1bmtJbmZvIFxufSkgPT4ge1xuICBjb25zdCBbZXhwYW5kZWQsIHNldEV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Z1bGxzY3JlZW5WaWV3LCBzZXRGdWxsc2NyZWVuVmlld10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCB0b2dnbGVFeHBhbmQgPSAoKSA9PiB7XG4gICAgc2V0RXhwYW5kZWQoIWV4cGFuZGVkKTtcbiAgfTtcbiAgXG4gIGNvbnN0IHRvZ2dsZUZ1bGxzY3JlZW4gPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgc2V0RnVsbHNjcmVlblZpZXcoIWZ1bGxzY3JlZW5WaWV3KTtcbiAgfTtcbiAgXG4gIGNvbnN0IGNsb3NlRnVsbHNjcmVlbiA9ICgpID0+IHtcbiAgICBzZXRGdWxsc2NyZWVuVmlldyhmYWxzZSk7XG4gIH07XG4gIFxuICBjb25zdCB7IGZpbGVUeXBlLCBjb250ZW50VHlwZSwgY2h1bmtzIH0gPSBmaWxlSW5mbztcbiAgY29uc3QgZnVsbERhdGEgPSByZWNvbnN0cnVjdEZpbGVGcm9tQ2h1bmtzKGNodW5rcyk7XG4gIGNvbnN0IGJhc2U2NFNyYyA9IGBkYXRhOiR7Y29udGVudFR5cGV9O2Jhc2U2NCwke2Z1bGxEYXRhfWA7XG4gIFxuICBjb25zdCB0b3RhbFNpemUgPSBjaHVua3MucmVkdWNlKCh0b3RhbCwgY2h1bmspID0+IHRvdGFsICsgKGNodW5rLnNpemUgfHwgMCksIDApO1xuICBcbiAgY29uc3QgZm9ybWF0RmlsZVNpemUgPSAoYnl0ZXM/OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIGlmICghYnl0ZXMpIHJldHVybiAnVW5rbm93biBzaXplJztcbiAgICBpZiAoYnl0ZXMgPCAxMDI0KSByZXR1cm4gYCR7Ynl0ZXN9IEJgO1xuICAgIGlmIChieXRlcyA8IDEwMjQgKiAxMDI0KSByZXR1cm4gYCR7KGJ5dGVzIC8gMTAyNCkudG9GaXhlZCgxKX0gS0JgO1xuICAgIHJldHVybiBgJHsoYnl0ZXMgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDEpfSBNQmA7XG4gIH07XG4gIFxuICBzd2l0Y2ggKGZpbGVUeXBlKSB7XG4gICAgY2FzZSBGaWxlVHlwZS5WSURFTzpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuICR7ZXhwYW5kZWQgPyAndy1mdWxsIG1heC13LTJ4bCcgOiAndy03Mid9YH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICA8dmlkZW8gXG4gICAgICAgICAgICAgICAgICBzcmM9e2Jhc2U2NFNyY30gXG4gICAgICAgICAgICAgICAgICBjb250cm9scyBcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgbWF4LWgtOTYgb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgICAgICAgICAgY29udHJvbHNMaXN0PVwibm9kb3dubG9hZFwiXG4gICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4gY29uc29sZS5lcnJvcihcIlZpZGVvIGVycm9yOlwiLCBlKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLlxuICAgICAgICAgICAgICAgIDwvdmlkZW8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGZsZXggc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgcC0xLjUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLW9wYWNpdHktNzAgdHJhbnNpdGlvbi1hbGxcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVFeHBhbmR9XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRXhwYW5kL0NvbGxhcHNlXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk01IDEwYTEgMSAwIDAxMS0xaDhhMSAxIDAgMTEwIDJINmExIDEgMCAwMS0xLTF6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTAgNWExIDEgMCAwMTEgMXYzaDNhMSAxIDAgMTEwIDJoLTN2M2ExIDEgMCAwMS0xIDFoLTNhMSAxIDAgMTEwLTJoM1Y5YTEgMSAwIDAxMS0xelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxhIFxuICAgICAgICAgICAgICAgICAgICBocmVmPXtiYXNlNjRTcmN9XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkPXtvcmlnaW5hbEZpbGV9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSBwLTEuNSByb3VuZGVkLWZ1bGwgaG92ZXI6Ymctb3BhY2l0eS03MCB0cmFuc2l0aW9uLWFsbFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkRvd25sb2FkIHZpZGVvXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0zIDE3YTEgMSAwIDAxMS0xaDEyYTEgMSAwIDExMCAySDRhMSAxIDAgMDEtMS0xem0zLjI5My03LjcwN2ExIDEgMCAwMTEuNDE0IDBMOSAxMC41ODZWM2ExIDEgMCAxMTIgMHY3LjU4NmwxLjI5My0xLjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0bC0zIDNhMSAxIDAgMDEtMS40MTQgMGwtMy0zYTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS0yIHRleHQtc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdHJ1bmNhdGUgbWF4LXcteHNcIj57b3JpZ2luYWxGaWxlfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e2Zvcm1hdEZpbGVTaXplKHRvdGFsU2l6ZSl9PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAge2Z1bGxzY3JlZW5WaWV3ICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTkwIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIiBvbkNsaWNrPXtjbG9zZUZ1bGxzY3JlZW59PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBtYXgtdy02eGwgbWF4LWgtc2NyZWVuIHAtNFwiPlxuICAgICAgICAgICAgICAgIDx2aWRlbyBcbiAgICAgICAgICAgICAgICAgIHNyYz17YmFzZTY0U3JjfSBcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xzIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBtYXgtaC1bOTB2aF0gb2JqZWN0LWNvbnRhaW5cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSB2aWRlbyB0YWcuXG4gICAgICAgICAgICAgICAgPC92aWRlbz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTQgcmlnaHQtNCBiZy13aGl0ZSB0ZXh0LWJsYWNrIHAtMiByb3VuZGVkLWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17Y2xvc2VGdWxsc2NyZWVufVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNiB3LTZcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgICAgXG4gICAgLy8gUGFyYSBvdHJvcyB0aXBvcyBkZSBhcmNoaXZvcywgaW1wbGVtZW50YXIgbWFuZWpvIHNpbWlsYXIuLi5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIG1yLTNcIj5cbiAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC04IHctOCB0ZXh0LWdyYXktNDAwXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTcgMjFoMTBhMiAyIDAgMDAyLTJWOS40MTRhMSAxIDAgMDAtLjI5My0uNzA3bC01LjQxNC01LjQxNEExIDEgMCAwMDEyLjU4NiAzSDdhMiAyIDAgMDAtMiAydjE0YTIgMiAwIDAwMiAyelwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtZ3Jvd1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj57b3JpZ2luYWxGaWxlfTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgIHtmb3JtYXRGaWxlU2l6ZSh0b3RhbFNpemUpfSDigKIgUmVjb25zdHJ1aWRvIGRlIHtjaHVua3MubGVuZ3RofSBmcmFnbWVudG9zXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YSBcbiAgICAgICAgICAgICAgaHJlZj17YmFzZTY0U3JjfVxuICAgICAgICAgICAgICBkb3dubG9hZD17b3JpZ2luYWxGaWxlfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtbC0zIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgcC0xLjUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWJsdWUtMjAwIHRyYW5zaXRpb24tYWxsXCJcbiAgICAgICAgICAgICAgdGl0bGU9XCJEb3dubG9hZCBmaWxlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC01IHctNVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0zIDE3YTEgMSAwIDAxMS0xaDEyYTEgMSAwIDExMCAySDRhMSAxIDAgMDEtMS0xem0zLjI5My03LjcwN2ExIDEgMCAwMTEuNDE0IDBMOSAxMC41ODZWM2ExIDEgMCAxMTIgMHY3LjU4NmwxLjI5My0xLjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0bC0zIDNhMSAxIDAgMDEtMS40MTQgMGwtMy0zYTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICB9XG59O1xuXG5pbnRlcmZhY2UgRmlsZUNodW5rTWFwIHtcbiAgW2ZpbGVuYW1lOiBzdHJpbmddOiBGaWxlQ2h1bmtJbmZvO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZXNzYWdlTGlzdCgpIHtcbiAgY29uc3QgeyBtZXNzYWdlcywgdHlwaW5nVXNlcnMsIHVwbG9hZGluZ0ZpbGVzLCByZXRyeUZpbGVVcGxvYWQsIGNhbmNlbEZpbGVVcGxvYWQsIGRlbGV0ZU1lc3NhZ2UgfSA9IHVzZUNoYXQoKTtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2ZhaWxlZEltYWdlcywgc2V0RmFpbGVkSW1hZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+Pih7fSk7XG4gIGNvbnN0IFtmaWxlQ2h1bmtzLCBzZXRGaWxlQ2h1bmtzXSA9IHVzZVN0YXRlPEZpbGVDaHVua01hcD4oe30pO1xuICBjb25zdCBbZGVsZXRlTW9kYWxPcGVuLCBzZXREZWxldGVNb2RhbE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbWVzc2FnZVRvRGVsZXRlLCBzZXRNZXNzYWdlVG9EZWxldGVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtmb3J3YXJkTW9kYWxPcGVuLCBzZXRGb3J3YXJkTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkTWVzc2FnZUZvckZvcndhcmQsIHNldFNlbGVjdGVkTWVzc2FnZUZvckZvcndhcmRdID0gdXNlU3RhdGU8e1xuICAgIGlkOiBzdHJpbmc7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIHNlbmRlcjoge1xuICAgICAgX2lkOiBzdHJpbmc7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICBhdmF0YXI/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBkYXRlOiBzdHJpbmc7XG4gIH0gfCBudWxsPihudWxsKTtcblxuICAvLyBTY3JvbGwgdG8gYm90dG9tIHdoZW4gbWVzc2FnZXMgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIEhhbmRsZSBmYWlsZWQgaW1hZ2UgbG9hZHNcbiAgY29uc3QgaGFuZGxlSW1hZ2VFcnJvciA9IChzZW5kZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmFpbGVkSW1hZ2VzKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbc2VuZGVySWRdOiB0cnVlXG4gICAgfSkpO1xuICB9O1xuXG4gIC8vIFJlY29uc3RydWlyIGFyY2hpdm9zIGZyYWdtZW50YWRvc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEJ1c2NhciB0b2RvcyBsb3MgY2h1bmtzIGVuIGxvcyBtZW5zYWplc1xuICAgIGNvbnN0IGNodW5rczogRmlsZUNodW5rTWFwID0ge307XG4gICAgXG4gICAgbWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgIGlmICghbWVzc2FnZS5hdHRhY2htZW50cykgcmV0dXJuO1xuICAgICAgXG4gICAgICBtZXNzYWdlLmF0dGFjaG1lbnRzLmZvckVhY2goYXR0YWNobWVudCA9PiB7XG4gICAgICAgIGlmIChhdHRhY2htZW50LmlzQ2h1bmsgJiYgYXR0YWNobWVudC5vcmlnaW5hbEZpbGVuYW1lKSB7XG4gICAgICAgICAgaWYgKCFjaHVua3NbYXR0YWNobWVudC5vcmlnaW5hbEZpbGVuYW1lXSkge1xuICAgICAgICAgICAgY2h1bmtzW2F0dGFjaG1lbnQub3JpZ2luYWxGaWxlbmFtZV0gPSB7XG4gICAgICAgICAgICAgIGNodW5rczogW10sXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgY29udGVudFR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgIGZpbGVUeXBlOiBhdHRhY2htZW50LmZpbGVUeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaHVua3NbYXR0YWNobWVudC5vcmlnaW5hbEZpbGVuYW1lXS5jaHVua3MucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVmVyaWZpY2FyIHNpIGxvcyBhcmNoaXZvcyBlc3TDoW4gY29tcGxldG9zXG4gICAgT2JqZWN0LmtleXMoY2h1bmtzKS5mb3JFYWNoKGZpbGVuYW1lID0+IHtcbiAgICAgIGNvbnN0IGluZm8gPSBjaHVua3NbZmlsZW5hbWVdO1xuICAgICAgaWYgKGluZm8uY2h1bmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbGFzdENodW5rID0gaW5mby5jaHVua3NbaW5mby5jaHVua3MubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0Q2h1bmsuY2h1bmtJbmRleCAhPT0gdW5kZWZpbmVkICYmIGxhc3RDaHVuay50b3RhbENodW5rcyAmJiBcbiAgICAgICAgICAgIGxhc3RDaHVuay5jaHVua0luZGV4ID09PSBsYXN0Q2h1bmsudG90YWxDaHVua3MgLSAxKSB7XG4gICAgICAgICAgaW5mby5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBzZXRGaWxlQ2h1bmtzKGNodW5rcyk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIFBlbmRpbmcgdXBsb2FkcyBzZWN0aW9uXG4gIGNvbnN0IGhhc1VwbG9hZGluZ0ZpbGVzID0gT2JqZWN0LmtleXModXBsb2FkaW5nRmlsZXMpLmxlbmd0aCA+IDA7XG5cbiAgLy8gUmVuZGVyIHVwbG9hZGluZyBmaWxlc1xuICBjb25zdCByZW5kZXJVcGxvYWRpbmdGaWxlcyA9ICgpID0+IHtcbiAgICBpZiAoIWhhc1VwbG9hZGluZ0ZpbGVzKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1cGxvYWRpbmctZmlsZXMtY29udGFpbmVyIG15LTQgcC0zIGJnLWdyYXktMTAwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+QXJjaGl2b3Mgc3ViaWVuZG8uLi48L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVwbG9hZGluZy1maWxlcy1saXN0IHNwYWNlLXktMlwiPlxuICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1cGxvYWRpbmdGaWxlcykuZmlsdGVyKChbXywgc3RhdHVzXSkgPT4gc3RhdHVzLnByb2dyZXNzIDwgMTAwKS5tYXAoKFt0ZW1wSWQsIHByb2dyZXNzXSkgPT4ge1xuICAgICAgICAgICAgLy8gQnVzY2Ftb3MgZWwgYXJjaGl2byBjb3JyZXNwb25kaWVudGUgZW4gbG9zIG1lbnNhamVzXG4gICAgICAgICAgICBsZXQgZmlsZTogRmlsZUF0dGFjaG1lbnQgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYXR0YWNobWVudHMpIHtcbiAgICAgICAgICAgICAgICBmaWxlID0gbWVzc2FnZS5hdHRhY2htZW50cy5maW5kKGF0dCA9PiBhdHQudGVtcElkID09PSB0ZW1wSWQpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlKSBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWZpbGUpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8VXBsb2FkaW5nRmlsZUl0ZW0gXG4gICAgICAgICAgICAgICAga2V5PXt0ZW1wSWR9XG4gICAgICAgICAgICAgICAgZmlsZT17ZmlsZX1cbiAgICAgICAgICAgICAgICBwcm9ncmVzcz17cHJvZ3Jlc3MucHJvZ3Jlc3N9XG4gICAgICAgICAgICAgICAgZXJyb3I9e3Byb2dyZXNzLmVycm9yfVxuICAgICAgICAgICAgICAgIG9uUmV0cnk9eygpID0+IHJldHJ5RmlsZVVwbG9hZChmaWxlISl9XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IGNhbmNlbEZpbGVVcGxvYWQoZmlsZSEpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGlmIChPYmplY3Qua2V5cyh1cGxvYWRpbmdGaWxlcykubGVuZ3RoID4gMCAmJiAhbWVzc2FnZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGxcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVwbG9hZGluZy1maWxlcy1jb250YWluZXIgcC0zIGJnLWdyYXktMTAwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMlwiPkFyY2hpdm9zIHN1YmllbmRvLi4uPC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXBsb2FkaW5nLWZpbGVzLWxpc3Qgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIHtPYmplY3QuZW50cmllcyh1cGxvYWRpbmdGaWxlcykuZmlsdGVyKChbXywgc3RhdHVzXSkgPT4gc3RhdHVzLnByb2dyZXNzIDwgMTAwKS5tYXAoKFt0ZW1wSWQsIHN0YXR1c10pID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDb21vIG5vIGhheSBtZW5zYWplcyB0b2RhdsOtYSwgY3JlYW1vcyB1biBvYmpldG8gdGVtcG9yYWxcbiAgICAgICAgICAgICAgICAvLyBzb2xvIHBhcmEgbGEgdmlzdWFsaXphY2nDs25cbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wRmlsZTogRmlsZUF0dGFjaG1lbnQgPSB7XG4gICAgICAgICAgICAgICAgICB0ZW1wSWQsXG4gICAgICAgICAgICAgICAgICBmaWxlbmFtZTogYEFyY2hpdm8gJHt0ZW1wSWR9YCxcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcbiAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBGaWxlVHlwZS5ET0NVTUVOVFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxVcGxvYWRpbmdGaWxlSXRlbVxuICAgICAgICAgICAgICAgICAgICBrZXk9e3RlbXBJZH1cbiAgICAgICAgICAgICAgICAgICAgZmlsZT17dGVtcEZpbGV9XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzPXtzdGF0dXMucHJvZ3Jlc3N9XG4gICAgICAgICAgICAgICAgICAgIGVycm9yPXtzdGF0dXMuZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIG9uUmV0cnk9eygpID0+IHJldHJ5RmlsZVVwbG9hZCh0ZW1wRmlsZSl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBjYW5jZWxGaWxlVXBsb2FkKHRlbXBGaWxlKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMTAwIHAtMyByb3VuZGVkLWZ1bGxcIj5cbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTEwIHctMTAgdGV4dC1ncmF5LTQwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsxLjV9IGQ9XCJNOCAxMmguMDFNMTIgMTJoLjAxTTE2IDEyaC4wMU0yMSAxMmMwIDQuNDE4LTQuMDMgOC05IDhhOS44NjMgOS44NjMgMCAwMS00LjI1NS0uOTQ5TDMgMjBsMS4zOTUtMy43MkMzLjUxMiAxNS4wNDIgMyAxMy41NzQgMyAxMmMwLTQuNDE4IDQuMDMtOCA5LThzOSAzLjU4MiA5IDh6XCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIE5vIG1lc3NhZ2VzIHlldC4gU2VuZCBhIG1lc3NhZ2UgdG8gc3RhcnQgdGhlIGNvbnZlcnNhdGlvbiFcbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIEdyb3VwIG1lc3NhZ2VzIGJ5IGRhdGVcbiAgY29uc3QgbWVzc2FnZXNCeURhdGUgPSBtZXNzYWdlcy5yZWR1Y2UoKGdyb3VwcywgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgaWYgKCFncm91cHNbZGF0ZV0pIHtcbiAgICAgIGdyb3Vwc1tkYXRlXSA9IFtdO1xuICAgIH1cbiAgICBncm91cHNbZGF0ZV0ucHVzaChtZXNzYWdlKTtcbiAgICByZXR1cm4gZ3JvdXBzO1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB0eXBlb2YgbWVzc2FnZXM+KTtcblxuICAvLyBHZXQgYXJyYXkgb2YgdHlwaW5nIHVzZXJzIChleGNsdWRpbmcgY3VycmVudCB1c2VyKVxuICBjb25zdCB0eXBpbmdVc2Vyc0xpc3QgPSBPYmplY3QuZW50cmllcyh0eXBpbmdVc2VycylcbiAgICAuZmlsdGVyKChbdXNlcklkLCBpc1R5cGluZ10pID0+IGlzVHlwaW5nICYmIHVzZXJJZCAhPT0gdXNlcj8uaWQpXG4gICAgLm1hcCgoW3VzZXJJZCwgdmFsdWVdKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB1c2VySWQpO1xuXG4gIC8vIEZ1bmNpw7NuIHBhcmEgbWFuZWphciBsYSBlbGltaW5hY2nDs24gZGUgbWVuc2FqZXNcbiAgY29uc3QgaGFuZGxlRGVsZXRlQ2xpY2sgPSAobWVzc2FnZUlkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRNZXNzYWdlVG9EZWxldGUobWVzc2FnZUlkKTtcbiAgICBzZXREZWxldGVNb2RhbE9wZW4odHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRm9yd2FyZENsaWNrID0gKG1lc3NhZ2U6IGFueSkgPT4ge1xuICAgIHNldFNlbGVjdGVkTWVzc2FnZUZvckZvcndhcmQoe1xuICAgICAgaWQ6IG1lc3NhZ2UuX2lkLFxuICAgICAgY29udGVudDogbWVzc2FnZS5jb250ZW50IHx8ICcnLFxuICAgICAgc2VuZGVyOiB7XG4gICAgICAgIF9pZDogbWVzc2FnZS5zZW5kZXIuX2lkLFxuICAgICAgICBuYW1lOiBtZXNzYWdlLnNlbmRlci5uYW1lLFxuICAgICAgICBhdmF0YXI6IG1lc3NhZ2Uuc2VuZGVyLmF2YXRhclxuICAgICAgfSxcbiAgICAgIGRhdGU6IG1lc3NhZ2UuY3JlYXRlZEF0XG4gICAgfSk7XG4gICAgc2V0Rm9yd2FyZE1vZGFsT3Blbih0cnVlKTtcbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGVsaW1pbmFyIG1lbnNhamUgc29sbyBwYXJhIG3DrVxuICBjb25zdCBoYW5kbGVEZWxldGVGb3JNZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAobWVzc2FnZVRvRGVsZXRlKSB7XG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgZGVsZXRlTWVzc2FnZShtZXNzYWdlVG9EZWxldGUsIGZhbHNlKTtcbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNZW5zYWplIGVsaW1pbmFkbyBwYXJhIG3DrScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgbWVuc2FqZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXREZWxldGVNb2RhbE9wZW4oZmFsc2UpO1xuICAgIHNldE1lc3NhZ2VUb0RlbGV0ZShudWxsKTtcbiAgfTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGVsaW1pbmFyIG1lbnNhamUgcGFyYSB0b2Rvc1xuICBjb25zdCBoYW5kbGVEZWxldGVGb3JFdmVyeW9uZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAobWVzc2FnZVRvRGVsZXRlKSB7XG4gICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgZGVsZXRlTWVzc2FnZShtZXNzYWdlVG9EZWxldGUsIHRydWUpO1xuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01lbnNhamUgZWxpbWluYWRvIHBhcmEgdG9kb3MnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGVsaW1pbmFyIG1lbnNhamUgcGFyYSB0b2RvcycpO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXREZWxldGVNb2RhbE9wZW4oZmFsc2UpO1xuICAgIHNldE1lc3NhZ2VUb0RlbGV0ZShudWxsKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgb3ZlcmZsb3cteS1hdXRvIHAtNCBzcGFjZS15LTRcIj5cbiAgICAgIHtyZW5kZXJVcGxvYWRpbmdGaWxlcygpfVxuICAgICAge09iamVjdC5lbnRyaWVzKG1lc3NhZ2VzQnlEYXRlKS5tYXAoKFtkYXRlLCBkYXRlTWVzc2FnZXNdKSA9PiAoXG4gICAgICAgIDxkaXYga2V5PXtkYXRlfSBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcHgtMyBweS0xIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0KG5ldyBEYXRlKGRhdGUpLCAnTU1NTSBkLCB5eXl5Jyl9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAge2RhdGVNZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIC8vIENvcnJlZ2lyIGxhIGRldGVjY2nDs24gZGUgbWVuc2FqZXMgcHJvcGlvcyBjb25zaWRlcmFuZG8gdGFudG8gX2lkIGNvbW8gaWRcbiAgICAgICAgICAgIGNvbnN0IGlzT3duTWVzc2FnZSA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gdXNlcj8uaWQgfHwgbWVzc2FnZS5zZW5kZXIuaWQgPT09IHVzZXI/LmlkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzZW5kZXJJZCA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCB8fCBtZXNzYWdlLnNlbmRlci5pZCB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IGhhc0F0dGFjaG1lbnRzID0gbWVzc2FnZS5hdHRhY2htZW50cyAmJiBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vbkNodW5rQXR0YWNobWVudHMgPSBtZXNzYWdlLmF0dGFjaG1lbnRzPy5maWx0ZXIoYXR0ID0+ICFhdHQuaXNDaHVuaykgfHwgW107XG5cbiAgICAgICAgICAgIC8vIEZpbHRyYXIgbWVuc2FqZXMgcXVlIHNvbiBzb2xvIGNodW5rcyBwYXJhIGV2aXRhciBkdXBsaWNhZG9zIGVuIGxhIFVJXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICghbWVzc2FnZS5hdHRhY2htZW50cyB8fCBtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA9PT0gMCB8fCBcbiAgICAgICAgICAgICAgIChtZXNzYWdlLmF0dGFjaG1lbnRzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZS5hdHRhY2htZW50cy5ldmVyeShhdHQgPT4gYXR0LmlzQ2h1bmspKSkgJiYgXG4gICAgICAgICAgICAgICghbWVzc2FnZS5jb250ZW50IHx8IG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIlBhcnRlIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudC5pbmNsdWRlcyhcIkVudmlhbmRvIFwiKSB8fCBcbiAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudCA9PT0gXCJFbnZpYW5kbyBhcmNoaXZvcyBncmFuZGVzLi4uXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21lc3NhZ2UuX2lkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHtpc093bk1lc3NhZ2UgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfSBncm91cCByZWxhdGl2ZWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZsZXggbWF4LXcteHMgbWQ6bWF4LXctbWQgbGc6bWF4LXctbGcgJHtpc093bk1lc3NhZ2UgPyAnZmxleC1yb3ctcmV2ZXJzZScgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgIHshaXNPd25NZXNzYWdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMzAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyLmF2YXRhciAmJiBpc1ZhbGlkSW1hZ2VTcmMobWVzc2FnZS5zZW5kZXIuYXZhdGFyKSAmJiAhZmFpbGVkSW1hZ2VzW3NlbmRlcklkXSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXttZXNzYWdlLnNlbmRlci5hdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXttZXNzYWdlLnNlbmRlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiBoYW5kbGVJbWFnZUVycm9yKHNlbmRlcklkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJbml0aWFscyhtZXNzYWdlLnNlbmRlci5uYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAke2lzT3duTWVzc2FnZSBcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1wcmltYXJ5LTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtdGwtbGcgcm91bmRlZC10ci1ub25lJyBcbiAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQtdHItbGcgcm91bmRlZC10bC1ub25lJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvdW5kZWQtYmwtbGcgcm91bmRlZC1ici1sZyBwLTMgc2hhZG93LXNtXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlXG4gICAgICAgICAgICAgICAgICBgfT5cbiAgICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC14cyBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UuY29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogRGlzcGxheSBhdHRhY2htZW50cyAqL31cbiAgICAgICAgICAgICAgICAgICAge2hhc0F0dGFjaG1lbnRzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7bWVzc2FnZS5jb250ZW50ID8gJ210LTInIDogJyd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bm9uQ2h1bmtBdHRhY2htZW50cz8ubWFwKChhdHRhY2htZW50LCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QXR0YWNobWVudFByZXZpZXcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHttZXNzYWdlLl9pZH0tYXR0YWNobWVudC0ke2luZGV4fWB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ9e2F0dGFjaG1lbnR9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgbXQtMSBvcGFjaXR5LTgwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChuZXcgRGF0ZShtZXNzYWdlLmNyZWF0ZWRBdCksICdoOm1tIGEnKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHtpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTEgcmlnaHQtMSBmbGV4IHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlIGJnLWdyYXktNTAwIGhvdmVyOmJnLXJlZC01MDAgcC0xIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgei0xMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZURlbGV0ZUNsaWNrKG1lc3NhZ2UuX2lkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkRlbGV0ZSBtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNOSAyYTEgMSAwIDAwLS44OTQuNTUzTDcuMzgyIDRINGExIDEgMCAwMDAgMnYxMGEyIDIgMCAwMDIgMmg4YTIgMiAwIDAwMi0yVjZhMSAxIDAgMTAwLTJoLTMuMzgybC0uNzI0LTEuNDQ3QTEgMSAwIDAwMTEgMkg5ek03IDhhMSAxIDAgMDEyIDB2NmExIDEgMCAxMS0yIDBWOHptNS0xYTEgMSAwIDAwLTEgMXY2YTEgMSAwIDEwMiAwVjhhMSAxIDAgMDAtMS0xelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSBiZy1ncmF5LTUwMCBob3ZlcjpiZy1wcmltYXJ5LTUwMCBwLTEgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB6LTEwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRm9yd2FyZENsaWNrKG1lc3NhZ2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiRm9yd2FyZCBtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTAgMThhOCA4IDAgMTAwLTE2IDggOCAwIDAwMCAxNnptMy43MDctOC43MDdsLTMtM2ExIDEgMCAwMC0xLjQxNCAxLjQxNEwxMC41ODYgOUg3YTEgMSAwIDEwMCAyaDMuNTg2bC0xLjI5MyAxLjI5M2ExIDEgMCAxMDEuNDE0IDEuNDE0bDMtM2ExIDEgMCAwMDAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgeyFpc093bk1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTEgbGVmdC0xIGZsZXggc3BhY2UteC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSBiZy1ncmF5LTUwMCBob3ZlcjpiZy1wcmltYXJ5LTUwMCBwLTEgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB6LTEwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRm9yd2FyZENsaWNrKG1lc3NhZ2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiRm9yd2FyZCBtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC0zLjUgdy0zLjVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTAgMThhOCA4IDAgMTAwLTE2IDggOCAwIDAwMCAxNnptMy43MDctOC43MDdsLTMtM2ExIDEgMCAwMC0xLjQxNCAxLjQxNEwxMC41ODYgOUg3YTEgMSAwIDEwMCAyaDMuNTg2bC0xLjI5MyAxLjI5M2ExIDEgMCAxMDEuNDE0IDEuNDE0bDMtM2ExIDEgMCAwMDAtMS40MTR6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSl9XG4gICAgICBcbiAgICAgIHsvKiBNb3N0cmFyIGFyY2hpdm9zIHF1ZSBzZSBlc3TDoW4gY2FyZ2FuZG8gYWN0dWFsbWVudGUgKi99XG4gICAgICB7T2JqZWN0LmtleXModXBsb2FkaW5nRmlsZXMpLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC0zIHJvdW5kZWQtbGcgYmctd2hpdGUgc2hhZG93IGJvcmRlciBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbWItMyB0ZXh0LWdyYXktNzAwIGZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00IG1yLTEgdGV4dC1ibHVlLTUwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNyAxNmE0IDQgMCAwMS0uODgtNy45MDNBNSA1IDAgMTExNS45IDZMMTYgNmE1IDUgMCAwMTEgOS45TTkgMTlsMyAzbTAgMGwzLTNtLTMgM1YxMFwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIEFyY2hpdm9zIGVuIHByb2Nlc29cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtdC0yXCI+XG4gICAgICAgICAgICB7T2JqZWN0LmVudHJpZXModXBsb2FkaW5nRmlsZXMpLmZpbHRlcigoW18sIHN0YXR1c10pID0+IHN0YXR1cy5wcm9ncmVzcyA8IDEwMCkubWFwKChbdGVtcElkLCBzdGF0dXNdKSA9PiB7XG4gICAgICAgICAgICAgIC8vIEJ1c2NhciBlbCBhcmNoaXZvIGNvcnJlc3BvbmRpZW50ZSBlbiBlbCBjb250ZXh0b1xuICAgICAgICAgICAgICBjb25zdCBmaWxlID0gbWVzc2FnZXMuZmxhdE1hcChtc2cgPT4gXG4gICAgICAgICAgICAgICAgbXNnLmF0dGFjaG1lbnRzPy5maWx0ZXIoYXR0ID0+IGF0dC50ZW1wSWQgPT09IHRlbXBJZCkgfHwgW11cbiAgICAgICAgICAgICAgKVswXTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxVcGxvYWRpbmdGaWxlSXRlbVxuICAgICAgICAgICAgICAgICAga2V5PXt0ZW1wSWR9XG4gICAgICAgICAgICAgICAgICBmaWxlPXtmaWxlfVxuICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M9e3N0YXR1cy5wcm9ncmVzc31cbiAgICAgICAgICAgICAgICAgIGVycm9yPXtzdGF0dXMuZXJyb3J9XG4gICAgICAgICAgICAgICAgICBvblJldHJ5PXsoKSA9PiByZXRyeUZpbGVVcGxvYWQoZmlsZSl9XG4gICAgICAgICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gY2FuY2VsRmlsZVVwbG9hZChmaWxlKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgey8qIE1vc3RyYW1vcyBsb3MgYXJjaGl2b3MgcmVjb25zdHJ1aWRvcyAoc29sbyBzaSBlc3TDoW4gY29tcGxldG9zKSAqL31cbiAgICAgIHtPYmplY3QuZW50cmllcyhmaWxlQ2h1bmtzKVxuICAgICAgICAuZmlsdGVyKChbXywgaW5mb10pID0+IGluZm8uY29tcGxldGUpXG4gICAgICAgIC5tYXAoKFtmaWxlbmFtZSwgaW5mb10pID0+IChcbiAgICAgICAgICA8ZGl2IGtleT17YHJlY29uc3RydWN0ZWQtJHtmaWxlbmFtZX1gfSBjbGFzc05hbWU9XCJtYi00IGJvcmRlciBib3JkZXItZ3JheS0yMDAgcC0zIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBtYi0yIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgQXJjaGl2byByZWNvbnN0cnVpZG86XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxSZWNvbnN0cnVjdGVkQXR0YWNobWVudCBcbiAgICAgICAgICAgICAgb3JpZ2luYWxGaWxlPXtmaWxlbmFtZX0gXG4gICAgICAgICAgICAgIGZpbGVJbmZvPXtpbmZvfSBcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHsvKiBTaG93IHR5cGluZyBpbmRpY2F0b3IgKi99XG4gICAgICB7dHlwaW5nVXNlcnNMaXN0Lmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiB0ZXh0LWdyYXktNTAwIHRleHQtc21cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0xXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgcm91bmRlZC1mdWxsIGJnLWdyYXktNDAwIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwbXMnIH19PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMjAwbXMnIH19PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTQwMCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnNDAwbXMnIH19PjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAge3R5cGluZ1VzZXJzTGlzdC5sZW5ndGggPT09IDEgXG4gICAgICAgICAgICAgID8gYCR7dHlwaW5nVXNlcnNMaXN0WzBdfSBpcyB0eXBpbmcuLi5gIFxuICAgICAgICAgICAgICA6IGAke3R5cGluZ1VzZXJzTGlzdC5sZW5ndGh9IHBlb3BsZSBhcmUgdHlwaW5nLi4uYH1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVtcHR5IGRpdiB0byBhbGxvdyBzY3JvbGxpbmcgdG8gYm90dG9tIG9mIG1lc3NhZ2VzICovfVxuICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAge2RlbGV0ZU1vZGFsT3BlbiAmJiAoXG4gICAgICAgIDxEZWxldGVNZXNzYWdlTW9kYWwgXG4gICAgICAgICAgaXNPcGVuPXtkZWxldGVNb2RhbE9wZW59XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0RGVsZXRlTW9kYWxPcGVuKGZhbHNlKX1cbiAgICAgICAgICBvbkRlbGV0ZUZvck1lPXtoYW5kbGVEZWxldGVGb3JNZX1cbiAgICAgICAgICBvbkRlbGV0ZUZvckV2ZXJ5b25lPXtoYW5kbGVEZWxldGVGb3JFdmVyeW9uZX1cbiAgICAgICAgICBjYW5EZWxldGVGb3JFdmVyeW9uZT17dHJ1ZX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgICB7Zm9yd2FyZE1vZGFsT3BlbiAmJiBzZWxlY3RlZE1lc3NhZ2VGb3JGb3J3YXJkICYmIChcbiAgICAgICAgPEZvcndhcmRNZXNzYWdlTW9kYWxcbiAgICAgICAgICBpc09wZW49e2ZvcndhcmRNb2RhbE9wZW59XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgICAgc2V0Rm9yd2FyZE1vZGFsT3BlbihmYWxzZSk7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZE1lc3NhZ2VGb3JGb3J3YXJkKG51bGwpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgbWVzc2FnZUlkPXtzZWxlY3RlZE1lc3NhZ2VGb3JGb3J3YXJkLmlkfVxuICAgICAgICAgIG1lc3NhZ2VDb250ZW50PXtzZWxlY3RlZE1lc3NhZ2VGb3JGb3J3YXJkLmNvbnRlbnR9XG4gICAgICAgICAgbWVzc2FnZVNlbmRlcj17c2VsZWN0ZWRNZXNzYWdlRm9yRm9yd2FyZC5zZW5kZXJ9XG4gICAgICAgICAgbWVzc2FnZURhdGU9e3NlbGVjdGVkTWVzc2FnZUZvckZvcndhcmQuZGF0ZX1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VDaGF0IiwiRmlsZVR5cGUiLCJ1c2VBdXRoIiwiSW1hZ2UiLCJmb3JtYXQiLCJVcGxvYWRpbmdGaWxlSXRlbSIsIkRlbGV0ZU1lc3NhZ2VNb2RhbCIsIkZvcndhcmRNZXNzYWdlTW9kYWwiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyaW5nIiwiTWF0aCIsIm1pbiIsImlzVmFsaWRJbWFnZVNyYyIsInNyYyIsInN0YXJ0c1dpdGgiLCJBdHRhY2htZW50UHJldmlldyIsImF0dGFjaG1lbnQiLCJsb2FkU3RhdGUiLCJzZXRMb2FkU3RhdGUiLCJwcmV2aWV3QXZhaWxhYmxlIiwic2V0UHJldmlld0F2YWlsYWJsZSIsImFwaUJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInZpZGVvUmVmIiwic2hvd0Z1bGxzY3JlZW4iLCJzZXRTaG93RnVsbHNjcmVlbiIsInJldHJ5Q291bnQiLCJzZXRSZXRyeUNvdW50IiwidmlkZW9FcnJvciIsInNldFZpZGVvRXJyb3IiLCJpc0J1ZmZlcmluZyIsInNldElzQnVmZmVyaW5nIiwiaXNMYXJnZUZpbGUiLCJmaWxlSWQiLCJjb250ZW50VHlwZSIsImNoZWNrVmlkZW9BdmFpbGFiaWxpdHkiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzZXRUaW1lb3V0IiwicHJldiIsIm1ldGFkYXRhIiwianNvbiIsImNvbXBsZXRlIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFuZGxlVmlkZW9QbGF5IiwibG9nIiwiaGFuZGxlVmlkZW9FcnJvciIsImV2ZW50IiwiaGFuZGxlVmlkZW9CdWZmZXJpbmciLCJoYW5kbGVWaWRlb0NhblBsYXkiLCJnZXRBdHRhY2htZW50U291cmNlIiwiZGF0YSIsImdldFRodW1ibmFpbFNvdXJjZSIsImhhbmRsZURvd25sb2FkIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImZpbGVuYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsImdldEZpbGVUeXBlIiwidG9nZ2xlRnVsbHNjcmVlbiIsImhhbmRsZUxvYWRlZERhdGEiLCJoYW5kbGVSZXRyeSIsImZpbGVUeXBlIiwic291cmNlIiwiZGl2IiwiY2xhc3NOYW1lIiwiaW1nIiwiYWx0Iiwib25Mb2FkIiwib25FcnJvciIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJzcGFuIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInZpZGVvIiwicmVmIiwiY29udHJvbHMiLCJvblBsYXkiLCJvbldhaXRpbmciLCJvbkNhblBsYXkiLCJwb3N0ZXIiLCJwcmVsb2FkIiwiYXV0b1BsYXkiLCJhdWRpbyIsInJlY29uc3RydWN0RmlsZUZyb21DaHVua3MiLCJjaHVua3MiLCJzb3J0ZWRDaHVua3MiLCJzb3J0IiwiYiIsImNodW5rSW5kZXgiLCJmdWxsQmFzZTY0IiwibWFwIiwiY2h1bmsiLCJqb2luIiwiUmVjb25zdHJ1Y3RlZEF0dGFjaG1lbnQiLCJvcmlnaW5hbEZpbGUiLCJmaWxlSW5mbyIsImV4cGFuZGVkIiwic2V0RXhwYW5kZWQiLCJmdWxsc2NyZWVuVmlldyIsInNldEZ1bGxzY3JlZW5WaWV3IiwidG9nZ2xlRXhwYW5kIiwiY2xvc2VGdWxsc2NyZWVuIiwiZnVsbERhdGEiLCJiYXNlNjRTcmMiLCJ0b3RhbFNpemUiLCJyZWR1Y2UiLCJ0b3RhbCIsInNpemUiLCJmb3JtYXRGaWxlU2l6ZSIsImJ5dGVzIiwidG9GaXhlZCIsIlZJREVPIiwiY29udHJvbHNMaXN0IiwidGl0bGUiLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwic3Ryb2tlIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJNZXNzYWdlTGlzdCIsIm1lc3NhZ2VzIiwidHlwaW5nVXNlcnMiLCJ1cGxvYWRpbmdGaWxlcyIsInJldHJ5RmlsZVVwbG9hZCIsImNhbmNlbEZpbGVVcGxvYWQiLCJkZWxldGVNZXNzYWdlIiwidXNlciIsIm1lc3NhZ2VzRW5kUmVmIiwiZmFpbGVkSW1hZ2VzIiwic2V0RmFpbGVkSW1hZ2VzIiwiZmlsZUNodW5rcyIsInNldEZpbGVDaHVua3MiLCJkZWxldGVNb2RhbE9wZW4iLCJzZXREZWxldGVNb2RhbE9wZW4iLCJtZXNzYWdlVG9EZWxldGUiLCJzZXRNZXNzYWdlVG9EZWxldGUiLCJmb3J3YXJkTW9kYWxPcGVuIiwic2V0Rm9yd2FyZE1vZGFsT3BlbiIsInNlbGVjdGVkTWVzc2FnZUZvckZvcndhcmQiLCJzZXRTZWxlY3RlZE1lc3NhZ2VGb3JGb3J3YXJkIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJoYW5kbGVJbWFnZUVycm9yIiwic2VuZGVySWQiLCJmb3JFYWNoIiwibWVzc2FnZSIsImF0dGFjaG1lbnRzIiwiaXNDaHVuayIsIm9yaWdpbmFsRmlsZW5hbWUiLCJwdXNoIiwiT2JqZWN0Iiwia2V5cyIsImluZm8iLCJsYXN0Q2h1bmsiLCJ1bmRlZmluZWQiLCJ0b3RhbENodW5rcyIsImhhc1VwbG9hZGluZ0ZpbGVzIiwicmVuZGVyVXBsb2FkaW5nRmlsZXMiLCJoMyIsImVudHJpZXMiLCJmaWx0ZXIiLCJfIiwic3RhdHVzIiwicHJvZ3Jlc3MiLCJ0ZW1wSWQiLCJmaWxlIiwiZmluZCIsImF0dCIsIm9uUmV0cnkiLCJvbkNhbmNlbCIsInRlbXBGaWxlIiwiRE9DVU1FTlQiLCJtZXNzYWdlc0J5RGF0ZSIsImdyb3VwcyIsImRhdGUiLCJEYXRlIiwiY3JlYXRlZEF0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwidHlwaW5nVXNlcnNMaXN0IiwidXNlcklkIiwiaXNUeXBpbmciLCJpZCIsInZhbHVlIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJtZXNzYWdlSWQiLCJoYW5kbGVGb3J3YXJkQ2xpY2siLCJfaWQiLCJjb250ZW50Iiwic2VuZGVyIiwiYXZhdGFyIiwiaGFuZGxlRGVsZXRlRm9yTWUiLCJzdWNjZXNzIiwiaGFuZGxlRGVsZXRlRm9yRXZlcnlvbmUiLCJkYXRlTWVzc2FnZXMiLCJpc093bk1lc3NhZ2UiLCJoYXNBdHRhY2htZW50cyIsIm5vbkNodW5rQXR0YWNobWVudHMiLCJldmVyeSIsImluY2x1ZGVzIiwid2lkdGgiLCJoZWlnaHQiLCJpbmRleCIsImFyaWEtbGFiZWwiLCJmbGF0TWFwIiwibXNnIiwic3R5bGUiLCJhbmltYXRpb25EZWxheSIsImlzT3BlbiIsIm9uQ2xvc2UiLCJvbkRlbGV0ZUZvck1lIiwib25EZWxldGVGb3JFdmVyeW9uZSIsImNhbkRlbGV0ZUZvckV2ZXJ5b25lIiwibWVzc2FnZUNvbnRlbnQiLCJtZXNzYWdlU2VuZGVyIiwibWVzc2FnZURhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chat/MessageList.tsx\n");

/***/ }),

/***/ "./src/components/chat/RoomMembersModal.tsx":
/*!**************************************************!*\
  !*** ./src/components/chat/RoomMembersModal.tsx ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RoomMembersModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__]);\n([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction RoomMembersModal({ isOpen, onClose, roomId }) {\n    const { rooms, users, joinRoom, leaveRoom } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    const { user } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const room = rooms.find((r)=>r._id === roomId);\n    const [selectedUsers, setSelectedUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isAdding, setIsAdding] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRemoving, setIsRemoving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Reset state when modal opens/closes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isOpen) {\n            setSelectedUsers([]);\n            setSearchTerm(\"\");\n            setIsAdding(false);\n            setIsRemoving(false);\n            setError(\"\");\n        }\n    }, [\n        isOpen\n    ]);\n    if (!isOpen || !room) return null;\n    // Check if current user is the creator\n    const isCreator = user && room.creator && room.creator._id === user.id;\n    // Get non-member users for adding\n    const nonMemberUsers = users.filter((u)=>!room.members.some((m)=>m._id === u._id) && u._id !== user?.id);\n    // Filter users by search term\n    const filteredNonMembers = searchTerm ? nonMemberUsers.filter((u)=>u.name.toLowerCase().includes(searchTerm.toLowerCase()) || u.email.toLowerCase().includes(searchTerm.toLowerCase())) : nonMemberUsers;\n    const handleAddMembers = async ()=>{\n        if (selectedUsers.length === 0) return;\n        setError(\"\");\n        setIsAdding(true);\n        try {\n            // Add each selected user to the room\n            for (const userId of selectedUsers){\n                if (userId) {\n                    await joinRoom(roomId, userId);\n                }\n            }\n            // Clear selection after successful addition\n            setSelectedUsers([]);\n        } catch (err) {\n            console.error(\"Error adding members:\", err);\n            setError(\"Failed to add members. Please try again.\");\n        } finally{\n            setIsAdding(false);\n        }\n    };\n    const handleRemoveMember = async (userId)=>{\n        if (!userId) return; // Skip if userId is undefined\n        setError(\"\");\n        setIsRemoving(true);\n        try {\n            await leaveRoom(roomId, userId);\n        } catch (err) {\n            console.error(\"Error removing member:\", err);\n            setError(\"Failed to remove member. Please try again.\");\n        } finally{\n            setIsRemoving(false);\n        }\n    };\n    const toggleUserSelection = (userId)=>{\n        if (!userId) return; // Skip if userId is undefined\n        setSelectedUsers((prev)=>prev.includes(userId) ? prev.filter((id)=>id !== userId) : [\n                ...prev,\n                userId\n            ]);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-medium text-gray-900\",\n                            children: \"Room Members\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 106,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 112,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 111,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 107,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 105,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-red-50 text-red-600 p-3 m-4 rounded-md text-sm\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 118,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                            className: \"font-medium text-gray-700 mb-2\",\n                            children: [\n                                \"Current Members (\",\n                                room.members.length,\n                                \")\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 124,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2 max-h-60 overflow-y-auto\",\n                            children: room.members.map((member)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-between p-2 hover:bg-gray-50 rounded-md\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\",\n                                                    children: member.avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: member.avatar,\n                                                        alt: member.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 131,\n                                                        columnNumber: 23\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium text-gray-700\",\n                                                        children: member.name.charAt(0)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 139,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 129,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-medium text-gray-800\",\n                                                            children: member.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 143,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-gray-500\",\n                                                            children: member.email\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 144,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 142,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 128,\n                                            columnNumber: 17\n                                        }, this),\n                                        isCreator && member._id && room.creator._id && member._id !== room.creator._id && member._id !== user?.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: isRemoving,\n                                            onClick: ()=>handleRemoveMember(member._id),\n                                            className: \"text-red-500 hover:text-red-700 text-xs\",\n                                            children: isRemoving ? \"Removing...\" : \"Remove\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 149,\n                                            columnNumber: 19\n                                        }, this),\n                                        member._id && room.creator._id && member._id === room.creator._id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-gray-500 px-2 py-0.5 bg-gray-100 rounded-full\",\n                                            children: \"Creator\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 159,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, member._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 127,\n                                    columnNumber: 15\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 125,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 123,\n                    columnNumber: 9\n                }, this),\n                isCreator && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                            className: \"font-medium text-gray-700 mb-2\",\n                            children: \"Add Members\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-3\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"text\",\n                                placeholder: \"Search users...\",\n                                value: searchTerm,\n                                onChange: (e)=>setSearchTerm(e.target.value),\n                                className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 170,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 169,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2 max-h-60 overflow-y-auto mb-4\",\n                            children: filteredNonMembers.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm text-gray-500 p-2\",\n                                children: \"No users found\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 181,\n                                columnNumber: 17\n                            }, this) : filteredNonMembers.map((user)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `flex items-center justify-between p-2 hover:bg-gray-50 rounded-md cursor-pointer ${user._id && selectedUsers.includes(user._id) ? \"bg-blue-50\" : \"\"}`,\n                                    onClick: ()=>toggleUserSelection(user._id),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\",\n                                                    children: user.avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                                        src: user.avatar,\n                                                        alt: user.name,\n                                                        width: 32,\n                                                        height: 32,\n                                                        className: \"h-full w-full object-cover\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 194,\n                                                        columnNumber: 27\n                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm font-medium text-gray-700\",\n                                                        children: user.name.charAt(0)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                        lineNumber: 202,\n                                                        columnNumber: 27\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 192,\n                                                    columnNumber: 23\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-medium text-gray-800\",\n                                                            children: user.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 206,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-gray-500\",\n                                                            children: user.email\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                            lineNumber: 207,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                    lineNumber: 205,\n                                                    columnNumber: 23\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 191,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: user._id ? selectedUsers.includes(user._id) : false,\n                                                onChange: ()=>{},\n                                                className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\",\n                                                onClick: (e)=>e.stopPropagation()\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                                lineNumber: 212,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                            lineNumber: 211,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, user._id, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                    lineNumber: 184,\n                                    columnNumber: 19\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 179,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                disabled: selectedUsers.length === 0 || isAdding,\n                                onClick: handleAddMembers,\n                                className: \"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\",\n                                children: isAdding ? \"Adding...\" : `Add Selected (${selectedUsers.length})`\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                                lineNumber: 226,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                            lineNumber: 225,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n                    lineNumber: 167,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n            lineNumber: 104,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/RoomMembersModal.tsx\",\n        lineNumber: 103,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L1Jvb21NZW1iZXJzTW9kYWwudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDSztBQUNBO0FBQ2xCO0FBUWhCLFNBQVNLLGlCQUFpQixFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUF5QjtJQUN6RixNQUFNLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLFNBQVMsRUFBRSxHQUFHViw4REFBT0E7SUFDckQsTUFBTSxFQUFFVyxJQUFJLEVBQUUsR0FBR1YsOERBQU9BO0lBQ3hCLE1BQU1XLE9BQU9MLE1BQU1NLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsR0FBRyxLQUFLVDtJQUV2QyxNQUFNLENBQUNVLGVBQWVDLGlCQUFpQixHQUFHbkIsK0NBQVFBLENBQVcsRUFBRTtJQUMvRCxNQUFNLENBQUNvQixZQUFZQyxjQUFjLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNzQixVQUFVQyxZQUFZLEdBQUd2QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUN3QixZQUFZQyxjQUFjLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUMwQixPQUFPQyxTQUFTLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUVuQyxzQ0FBc0M7SUFDdENDLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSUssUUFBUTtZQUNWYSxpQkFBaUIsRUFBRTtZQUNuQkUsY0FBYztZQUNkRSxZQUFZO1lBQ1pFLGNBQWM7WUFDZEUsU0FBUztRQUNYO0lBQ0YsR0FBRztRQUFDckI7S0FBTztJQUVYLElBQUksQ0FBQ0EsVUFBVSxDQUFDUSxNQUFNLE9BQU87SUFFN0IsdUNBQXVDO0lBQ3ZDLE1BQU1jLFlBQVlmLFFBQVFDLEtBQUtlLE9BQU8sSUFBSWYsS0FBS2UsT0FBTyxDQUFDWixHQUFHLEtBQUtKLEtBQUtpQixFQUFFO0lBRXRFLGtDQUFrQztJQUNsQyxNQUFNQyxpQkFBaUJyQixNQUFNc0IsTUFBTSxDQUNqQ0MsQ0FBQUEsSUFBSyxDQUFDbkIsS0FBS29CLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFbkIsR0FBRyxLQUFLZ0IsRUFBRWhCLEdBQUcsS0FBS2dCLEVBQUVoQixHQUFHLEtBQUtKLE1BQU1pQjtJQUduRSw4QkFBOEI7SUFDOUIsTUFBTU8scUJBQXFCakIsYUFDdkJXLGVBQWVDLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFDcEJBLEVBQUVLLElBQUksQ0FBQ0MsV0FBVyxHQUFHQyxRQUFRLENBQUNwQixXQUFXbUIsV0FBVyxPQUNwRE4sRUFBRVEsS0FBSyxDQUFDRixXQUFXLEdBQUdDLFFBQVEsQ0FBQ3BCLFdBQVdtQixXQUFXLE9BRXZEUjtJQUVKLE1BQU1XLG1CQUFtQjtRQUN2QixJQUFJeEIsY0FBY3lCLE1BQU0sS0FBSyxHQUFHO1FBRWhDaEIsU0FBUztRQUNUSixZQUFZO1FBRVosSUFBSTtZQUNGLHFDQUFxQztZQUNyQyxLQUFLLE1BQU1xQixVQUFVMUIsY0FBZTtnQkFDbEMsSUFBSTBCLFFBQVE7b0JBQ1YsTUFBTWpDLFNBQVNILFFBQVFvQztnQkFDekI7WUFDRjtZQUVBLDRDQUE0QztZQUM1Q3pCLGlCQUFpQixFQUFFO1FBQ3JCLEVBQUUsT0FBTzBCLEtBQUs7WUFDWkMsUUFBUXBCLEtBQUssQ0FBQyx5QkFBeUJtQjtZQUN2Q2xCLFNBQVM7UUFDWCxTQUFVO1lBQ1JKLFlBQVk7UUFDZDtJQUNGO0lBRUEsTUFBTXdCLHFCQUFxQixPQUFPSDtRQUNoQyxJQUFJLENBQUNBLFFBQVEsUUFBUSw4QkFBOEI7UUFFbkRqQixTQUFTO1FBQ1RGLGNBQWM7UUFFZCxJQUFJO1lBQ0YsTUFBTWIsVUFBVUosUUFBUW9DO1FBQzFCLEVBQUUsT0FBT0MsS0FBSztZQUNaQyxRQUFRcEIsS0FBSyxDQUFDLDBCQUEwQm1CO1lBQ3hDbEIsU0FBUztRQUNYLFNBQVU7WUFDUkYsY0FBYztRQUNoQjtJQUNGO0lBRUEsTUFBTXVCLHNCQUFzQixDQUFDSjtRQUMzQixJQUFJLENBQUNBLFFBQVEsUUFBUSw4QkFBOEI7UUFFbkR6QixpQkFBaUI4QixDQUFBQSxPQUNmQSxLQUFLVCxRQUFRLENBQUNJLFVBQ1ZLLEtBQUtqQixNQUFNLENBQUNGLENBQUFBLEtBQU1BLE9BQU9jLFVBQ3pCO21CQUFJSztnQkFBTUw7YUFBTztJQUV6QjtJQUVBLHFCQUNFLDhEQUFDTTtRQUFJQyxXQUFVO2tCQUNiLDRFQUFDRDtZQUFJQyxXQUFVOzs4QkFDYiw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDQzs0QkFBR0QsV0FBVTtzQ0FBb0M7Ozs7OztzQ0FDbEQsOERBQUNFOzRCQUNDQyxTQUFTL0M7NEJBQ1Q0QyxXQUFVO3NDQUVWLDRFQUFDSTtnQ0FBSUMsT0FBTTtnQ0FBNkJMLFdBQVU7Z0NBQVVNLFNBQVE7Z0NBQVlDLE1BQUs7MENBQ25GLDRFQUFDQztvQ0FBS0MsVUFBUztvQ0FBVUMsR0FBRTtvQ0FBcU1DLFVBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBSzlPcEMsdUJBQ0MsOERBQUN3QjtvQkFBSUMsV0FBVTs4QkFDWnpCOzs7Ozs7OEJBSUwsOERBQUN3QjtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNZOzRCQUFHWixXQUFVOztnQ0FBaUM7Z0NBQWtCckMsS0FBS29CLE9BQU8sQ0FBQ1MsTUFBTTtnQ0FBQzs7Ozs7OztzQ0FDckYsOERBQUNPOzRCQUFJQyxXQUFVO3NDQUNackMsS0FBS29CLE9BQU8sQ0FBQzhCLEdBQUcsQ0FBQ0MsQ0FBQUEsdUJBQ2hCLDhEQUFDZjtvQ0FBcUJDLFdBQVU7O3NEQUM5Qiw4REFBQ0Q7NENBQUlDLFdBQVU7OzhEQUNiLDhEQUFDRDtvREFBSUMsV0FBVTs4REFDWmMsT0FBT0MsTUFBTSxpQkFDWiw4REFBQzlELG1EQUFLQTt3REFDSitELEtBQUtGLE9BQU9DLE1BQU07d0RBQ2xCRSxLQUFLSCxPQUFPM0IsSUFBSTt3REFDaEIrQixPQUFPO3dEQUNQQyxRQUFRO3dEQUNSbkIsV0FBVTs7Ozs7NkVBR1osOERBQUNvQjt3REFBS3BCLFdBQVU7a0VBQXFDYyxPQUFPM0IsSUFBSSxDQUFDa0MsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs4REFHNUUsOERBQUN0Qjs7c0VBQ0MsOERBQUN1Qjs0REFBRXRCLFdBQVU7c0VBQXFDYyxPQUFPM0IsSUFBSTs7Ozs7O3NFQUM3RCw4REFBQ21DOzREQUFFdEIsV0FBVTtzRUFBeUJjLE9BQU94QixLQUFLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBSXJEYixhQUFhcUMsT0FBT2hELEdBQUcsSUFBSUgsS0FBS2UsT0FBTyxDQUFDWixHQUFHLElBQUlnRCxPQUFPaEQsR0FBRyxLQUFLSCxLQUFLZSxPQUFPLENBQUNaLEdBQUcsSUFBSWdELE9BQU9oRCxHQUFHLEtBQUtKLE1BQU1pQixvQkFDdEcsOERBQUN1Qjs0Q0FDQ3FCLFVBQVVsRDs0Q0FDVjhCLFNBQVMsSUFBTVAsbUJBQW1Ca0IsT0FBT2hELEdBQUc7NENBQzVDa0MsV0FBVTtzREFFVDNCLGFBQWEsZ0JBQWdCOzs7Ozs7d0NBSWpDeUMsT0FBT2hELEdBQUcsSUFBSUgsS0FBS2UsT0FBTyxDQUFDWixHQUFHLElBQUlnRCxPQUFPaEQsR0FBRyxLQUFLSCxLQUFLZSxPQUFPLENBQUNaLEdBQUcsa0JBQ2hFLDhEQUFDc0Q7NENBQUtwQixXQUFVO3NEQUE2RDs7Ozs7OzttQ0FoQ3ZFYyxPQUFPaEQsR0FBRzs7Ozs7Ozs7Ozs7Ozs7OztnQkF1Q3pCVywyQkFDQyw4REFBQ3NCO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ1k7NEJBQUdaLFdBQVU7c0NBQWlDOzs7Ozs7c0NBQy9DLDhEQUFDRDs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ3dCO2dDQUNDQyxNQUFLO2dDQUNMQyxhQUFZO2dDQUNaQyxPQUFPMUQ7Z0NBQ1AyRCxVQUFVLENBQUNDLElBQU0zRCxjQUFjMkQsRUFBRUMsTUFBTSxDQUFDSCxLQUFLO2dDQUM3QzNCLFdBQVU7Ozs7Ozs7Ozs7O3NDQUlkLDhEQUFDRDs0QkFBSUMsV0FBVTtzQ0FDWmQsbUJBQW1CTSxNQUFNLEtBQUssa0JBQzdCLDhEQUFDOEI7Z0NBQUV0QixXQUFVOzBDQUE0Qjs7Ozs7dUNBRXpDZCxtQkFBbUIyQixHQUFHLENBQUNuRCxDQUFBQSxxQkFDckIsOERBQUNxQztvQ0FFQ0MsV0FBVyxDQUFDLGlGQUFpRixFQUMzRnRDLEtBQUtJLEdBQUcsSUFBSUMsY0FBY3NCLFFBQVEsQ0FBQzNCLEtBQUtJLEdBQUcsSUFBSSxlQUFlLEdBQy9ELENBQUM7b0NBQ0ZxQyxTQUFTLElBQU1OLG9CQUFvQm5DLEtBQUtJLEdBQUc7O3NEQUUzQyw4REFBQ2lDOzRDQUFJQyxXQUFVOzs4REFDYiw4REFBQ0Q7b0RBQUlDLFdBQVU7OERBQ1p0QyxLQUFLcUQsTUFBTSxpQkFDViw4REFBQzlELG1EQUFLQTt3REFDSitELEtBQUt0RCxLQUFLcUQsTUFBTTt3REFDaEJFLEtBQUt2RCxLQUFLeUIsSUFBSTt3REFDZCtCLE9BQU87d0RBQ1BDLFFBQVE7d0RBQ1JuQixXQUFVOzs7Ozs2RUFHWiw4REFBQ29CO3dEQUFLcEIsV0FBVTtrRUFBcUN0QyxLQUFLeUIsSUFBSSxDQUFDa0MsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs4REFHMUUsOERBQUN0Qjs7c0VBQ0MsOERBQUN1Qjs0REFBRXRCLFdBQVU7c0VBQXFDdEMsS0FBS3lCLElBQUk7Ozs7OztzRUFDM0QsOERBQUNtQzs0REFBRXRCLFdBQVU7c0VBQXlCdEMsS0FBSzRCLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzREFJcEQsOERBQUNTOzRDQUFJQyxXQUFVO3NEQUNiLDRFQUFDd0I7Z0RBQ0NDLE1BQUs7Z0RBQ0xNLFNBQVNyRSxLQUFLSSxHQUFHLEdBQUdDLGNBQWNzQixRQUFRLENBQUMzQixLQUFLSSxHQUFHLElBQUk7Z0RBQ3ZEOEQsVUFBVSxLQUFPO2dEQUNqQjVCLFdBQVU7Z0RBQ1ZHLFNBQVMsQ0FBQzBCLElBQU1BLEVBQUVHLGVBQWU7Ozs7Ozs7Ozs7OzttQ0FoQ2hDdEUsS0FBS0ksR0FBRzs7Ozs7Ozs7OztzQ0F3Q3JCLDhEQUFDaUM7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUNFO2dDQUNDcUIsVUFBVXhELGNBQWN5QixNQUFNLEtBQUssS0FBS3JCO2dDQUN4Q2dDLFNBQVNaO2dDQUNUUyxXQUFVOzBDQUVUN0IsV0FBVyxjQUFjLENBQUMsY0FBYyxFQUFFSixjQUFjeUIsTUFBTSxDQUFDLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFsRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9jb21wb25lbnRzL2NoYXQvUm9vbU1lbWJlcnNNb2RhbC50c3g/YzIyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQ2hhdCB9IGZyb20gJ0AvY29udGV4dHMvQ2hhdENvbnRleHQnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgUm9vbU1lbWJlcnNNb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vbU1lbWJlcnNNb2RhbCh7IGlzT3Blbiwgb25DbG9zZSwgcm9vbUlkIH06IFJvb21NZW1iZXJzTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHJvb21zLCB1c2Vycywgam9pblJvb20sIGxlYXZlUm9vbSB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3Qgcm9vbSA9IHJvb21zLmZpbmQociA9PiByLl9pZCA9PT0gcm9vbUlkKTtcbiAgXG4gIGNvbnN0IFtzZWxlY3RlZFVzZXJzLCBzZXRTZWxlY3RlZFVzZXJzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFtzZWFyY2hUZXJtLCBzZXRTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2lzQWRkaW5nLCBzZXRJc0FkZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1JlbW92aW5nLCBzZXRJc1JlbW92aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgLy8gUmVzZXQgc3RhdGUgd2hlbiBtb2RhbCBvcGVucy9jbG9zZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuKSB7XG4gICAgICBzZXRTZWxlY3RlZFVzZXJzKFtdKTtcbiAgICAgIHNldFNlYXJjaFRlcm0oJycpO1xuICAgICAgc2V0SXNBZGRpbmcoZmFsc2UpO1xuICAgICAgc2V0SXNSZW1vdmluZyhmYWxzZSk7XG4gICAgICBzZXRFcnJvcignJyk7XG4gICAgfVxuICB9LCBbaXNPcGVuXSk7XG5cbiAgaWYgKCFpc09wZW4gfHwgIXJvb20pIHJldHVybiBudWxsO1xuXG4gIC8vIENoZWNrIGlmIGN1cnJlbnQgdXNlciBpcyB0aGUgY3JlYXRvclxuICBjb25zdCBpc0NyZWF0b3IgPSB1c2VyICYmIHJvb20uY3JlYXRvciAmJiByb29tLmNyZWF0b3IuX2lkID09PSB1c2VyLmlkO1xuXG4gIC8vIEdldCBub24tbWVtYmVyIHVzZXJzIGZvciBhZGRpbmdcbiAgY29uc3Qgbm9uTWVtYmVyVXNlcnMgPSB1c2Vycy5maWx0ZXIoXG4gICAgdSA9PiAhcm9vbS5tZW1iZXJzLnNvbWUobSA9PiBtLl9pZCA9PT0gdS5faWQpICYmIHUuX2lkICE9PSB1c2VyPy5pZFxuICApO1xuXG4gIC8vIEZpbHRlciB1c2VycyBieSBzZWFyY2ggdGVybVxuICBjb25zdCBmaWx0ZXJlZE5vbk1lbWJlcnMgPSBzZWFyY2hUZXJtIFxuICAgID8gbm9uTWVtYmVyVXNlcnMuZmlsdGVyKHUgPT4gXG4gICAgICAgIHUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHwgXG4gICAgICAgIHUuZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpXG4gICAgICApXG4gICAgOiBub25NZW1iZXJVc2VycztcblxuICBjb25zdCBoYW5kbGVBZGRNZW1iZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZFVzZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIHNldEVycm9yKCcnKTtcbiAgICBzZXRJc0FkZGluZyh0cnVlKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQWRkIGVhY2ggc2VsZWN0ZWQgdXNlciB0byB0aGUgcm9vbVxuICAgICAgZm9yIChjb25zdCB1c2VySWQgb2Ygc2VsZWN0ZWRVc2Vycykge1xuICAgICAgICBpZiAodXNlcklkKSB7IC8vIEVuc3VyZSB1c2VySWQgaXMgZGVmaW5lZFxuICAgICAgICAgIGF3YWl0IGpvaW5Sb29tKHJvb21JZCwgdXNlcklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzZWxlY3Rpb24gYWZ0ZXIgc3VjY2Vzc2Z1bCBhZGRpdGlvblxuICAgICAgc2V0U2VsZWN0ZWRVc2VycyhbXSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgbWVtYmVyczonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBhZGQgbWVtYmVycy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBZGRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZW1vdmVNZW1iZXIgPSBhc3luYyAodXNlcklkOiBzdHJpbmcgfCB1bmRlZmluZWQpID0+IHtcbiAgICBpZiAoIXVzZXJJZCkgcmV0dXJuOyAvLyBTa2lwIGlmIHVzZXJJZCBpcyB1bmRlZmluZWRcbiAgICBcbiAgICBzZXRFcnJvcignJyk7XG4gICAgc2V0SXNSZW1vdmluZyh0cnVlKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbGVhdmVSb29tKHJvb21JZCwgdXNlcklkKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIG1lbWJlcjonLCBlcnIpO1xuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byByZW1vdmUgbWVtYmVyLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1JlbW92aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVXNlclNlbGVjdGlvbiA9ICh1c2VySWQ6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIGlmICghdXNlcklkKSByZXR1cm47IC8vIFNraXAgaWYgdXNlcklkIGlzIHVuZGVmaW5lZFxuICAgIFxuICAgIHNldFNlbGVjdGVkVXNlcnMocHJldiA9PiBcbiAgICAgIHByZXYuaW5jbHVkZXModXNlcklkKVxuICAgICAgICA/IHByZXYuZmlsdGVyKGlkID0+IGlkICE9PSB1c2VySWQpXG4gICAgICAgIDogWy4uLnByZXYsIHVzZXJJZF1cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgbWF4LXctbWQgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlJvb20gTWVtYmVyczwvaDM+XG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS01MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTVcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyBtLTQgcm91bmRlZC1tZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWJcIj5cbiAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0yXCI+Q3VycmVudCBNZW1iZXJzICh7cm9vbS5tZW1iZXJzLmxlbmd0aH0pPC9oND5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtYXgtaC02MCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgIHtyb29tLm1lbWJlcnMubWFwKG1lbWJlciA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXttZW1iZXIuX2lkfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGhvdmVyOmJnLWdyYXktNTAgcm91bmRlZC1tZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICB7bWVtYmVyLmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17bWVtYmVyLmF2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17bWVtYmVyLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+e21lbWJlci5uYW1lLmNoYXJBdCgwKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPnttZW1iZXIubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnttZW1iZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge2lzQ3JlYXRvciAmJiBtZW1iZXIuX2lkICYmIHJvb20uY3JlYXRvci5faWQgJiYgbWVtYmVyLl9pZCAhPT0gcm9vbS5jcmVhdG9yLl9pZCAmJiBtZW1iZXIuX2lkICE9PSB1c2VyPy5pZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1JlbW92aW5nfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVSZW1vdmVNZW1iZXIobWVtYmVyLl9pZCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCBob3Zlcjp0ZXh0LXJlZC03MDAgdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc1JlbW92aW5nID8gJ1JlbW92aW5nLi4uJyA6ICdSZW1vdmUnfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7bWVtYmVyLl9pZCAmJiByb29tLmNyZWF0b3IuX2lkICYmIG1lbWJlci5faWQgPT09IHJvb20uY3JlYXRvci5faWQgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIHB4LTIgcHktMC41IGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbFwiPkNyZWF0b3I8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge2lzQ3JlYXRvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTRcIj5cbiAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTJcIj5BZGQgTWVtYmVyczwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTNcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoIHVzZXJzLi4uXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaFRlcm0oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTIgbWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIG1iLTRcIj5cbiAgICAgICAgICAgICAge2ZpbHRlcmVkTm9uTWVtYmVycy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwIHAtMlwiPk5vIHVzZXJzIGZvdW5kPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGZpbHRlcmVkTm9uTWVtYmVycy5tYXAodXNlciA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICBrZXk9e3VzZXIuX2lkfSBcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBob3ZlcjpiZy1ncmF5LTUwIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXIgJHtcbiAgICAgICAgICAgICAgICAgICAgICB1c2VyLl9pZCAmJiBzZWxlY3RlZFVzZXJzLmluY2x1ZGVzKHVzZXIuX2lkKSA/ICdiZy1ibHVlLTUwJyA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVVc2VyU2VsZWN0aW9uKHVzZXIuX2lkKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXIuYXZhdGFyID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3VzZXIuYXZhdGFyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17dXNlci5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtZnVsbCB3LWZ1bGwgb2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPnt1c2VyLm5hbWUuY2hhckF0KDApfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiPnt1c2VyLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e3VzZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt1c2VyLl9pZCA/IHNlbGVjdGVkVXNlcnMuaW5jbHVkZXModXNlci5faWQpIDogZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4ge319IC8vIEhhbmRsZWQgYnkgZGl2IGNsaWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtYmx1ZS02MDAgZm9jdXM6cmluZy1ibHVlLTUwMCBib3JkZXItZ3JheS0zMDAgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2VsZWN0ZWRVc2Vycy5sZW5ndGggPT09IDAgfHwgaXNBZGRpbmd9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQWRkTWVtYmVyc31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIGJnLWJsdWUtNjAwIHJvdW5kZWQtbWQgaG92ZXI6YmctYmx1ZS03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzQWRkaW5nID8gJ0FkZGluZy4uLicgOiBgQWRkIFNlbGVjdGVkICgke3NlbGVjdGVkVXNlcnMubGVuZ3RofSlgfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDaGF0IiwidXNlQXV0aCIsIkltYWdlIiwiUm9vbU1lbWJlcnNNb2RhbCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJyb29tSWQiLCJyb29tcyIsInVzZXJzIiwiam9pblJvb20iLCJsZWF2ZVJvb20iLCJ1c2VyIiwicm9vbSIsImZpbmQiLCJyIiwiX2lkIiwic2VsZWN0ZWRVc2VycyIsInNldFNlbGVjdGVkVXNlcnMiLCJzZWFyY2hUZXJtIiwic2V0U2VhcmNoVGVybSIsImlzQWRkaW5nIiwic2V0SXNBZGRpbmciLCJpc1JlbW92aW5nIiwic2V0SXNSZW1vdmluZyIsImVycm9yIiwic2V0RXJyb3IiLCJpc0NyZWF0b3IiLCJjcmVhdG9yIiwiaWQiLCJub25NZW1iZXJVc2VycyIsImZpbHRlciIsInUiLCJtZW1iZXJzIiwic29tZSIsIm0iLCJmaWx0ZXJlZE5vbk1lbWJlcnMiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImVtYWlsIiwiaGFuZGxlQWRkTWVtYmVycyIsImxlbmd0aCIsInVzZXJJZCIsImVyciIsImNvbnNvbGUiLCJoYW5kbGVSZW1vdmVNZW1iZXIiLCJ0b2dnbGVVc2VyU2VsZWN0aW9uIiwicHJldiIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZmlsbFJ1bGUiLCJkIiwiY2xpcFJ1bGUiLCJoNCIsIm1hcCIsIm1lbWJlciIsImF2YXRhciIsInNyYyIsImFsdCIsIndpZHRoIiwiaGVpZ2h0Iiwic3BhbiIsImNoYXJBdCIsInAiLCJkaXNhYmxlZCIsImlucHV0IiwidHlwZSIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJjaGVja2VkIiwic3RvcFByb3BhZ2F0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/chat/RoomMembersModal.tsx\n");

/***/ }),

/***/ "./src/components/chat/UploadingFileItem.tsx":
/*!***************************************************!*\
  !*** ./src/components/chat/UploadingFileItem.tsx ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst UploadingFileItem = ({ file, progress, error, onRetry, onCancel })=>{\n    // Funcin para obtener el cono adecuado segn el tipo de archivo\n    const getFileIcon = ()=>{\n        switch(file.fileType){\n            case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.IMAGE:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-6 w-6 text-blue-500\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 19,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                    lineNumber: 18,\n                    columnNumber: 11\n                }, undefined);\n            case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.VIDEO:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-6 w-6 text-red-500\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 25,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                    lineNumber: 24,\n                    columnNumber: 11\n                }, undefined);\n            case _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.FileType.AUDIO:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-6 w-6 text-purple-500\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 31,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                    lineNumber: 30,\n                    columnNumber: 11\n                }, undefined);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-6 w-6 text-gray-500\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 37,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                    lineNumber: 36,\n                    columnNumber: 11\n                }, undefined);\n        }\n    };\n    const formatSize = (bytes)=>{\n        if (!bytes) return \"Desconocido\";\n        if (bytes < 1024) return `${bytes} B`;\n        if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n        return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center p-3 bg-white rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-shrink-0 mr-3\",\n                children: getFileIcon()\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                lineNumber: 52,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between mb-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"font-medium text-sm text-gray-800 truncate\",\n                                children: file.filename\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                lineNumber: 58,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs text-gray-500 ml-2\",\n                                children: formatSize(file.size)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                lineNumber: 59,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 57,\n                        columnNumber: 9\n                    }, undefined),\n                    error ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-red-500 text-xs mb-1\",\n                                children: error\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                lineNumber: 64,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex space-x-2 mt-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>onRetry(file),\n                                        className: \"text-xs px-3 py-1 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors flex items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                className: \"h-3 w-3 mr-1\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                                    lineNumber: 71,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                                lineNumber: 70,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            \"Reintentar\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                        lineNumber: 66,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>onCancel(file),\n                                        className: \"text-xs px-3 py-1 bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition-colors flex items-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                className: \"h-3 w-3 mr-1\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M6 18L18 6M6 6l12 12\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                                    lineNumber: 80,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                                lineNumber: 79,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            \"Cancelar\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                        lineNumber: 75,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                lineNumber: 65,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 63,\n                        columnNumber: 11\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-1\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full bg-gray-200 rounded-full h-2 mr-2 overflow-hidden\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-blue-500 h-2 rounded-full transition-all duration-300 ease-out\",\n                                        style: {\n                                            width: `${progress}%`\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                        lineNumber: 90,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                    lineNumber: 89,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-700 font-medium whitespace-nowrap\",\n                                    children: [\n                                        progress,\n                                        \"%\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                                    lineNumber: 95,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                            lineNumber: 88,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                        lineNumber: 87,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n                lineNumber: 56,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/chat/UploadingFileItem.tsx\",\n        lineNumber: 51,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UploadingFileItem);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGF0L1VwbG9hZGluZ0ZpbGVJdGVtLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQ3dDO0FBVWxFLE1BQU1FLG9CQUFzRCxDQUFDLEVBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFO0lBQ3ZHLGtFQUFrRTtJQUNsRSxNQUFNQyxjQUFjO1FBQ2xCLE9BQVFMLEtBQUtNLFFBQVE7WUFDbkIsS0FBS1IsMkRBQVFBLENBQUNTLEtBQUs7Z0JBQ2pCLHFCQUNFLDhEQUFDQztvQkFBSUMsT0FBTTtvQkFBNkJDLFdBQVU7b0JBQXdCQyxNQUFLO29CQUFPQyxTQUFRO29CQUFZQyxRQUFPOzhCQUMvRyw0RUFBQ0M7d0JBQUtDLGVBQWM7d0JBQVFDLGdCQUFlO3dCQUFRQyxhQUFhO3dCQUFHQyxHQUFFOzs7Ozs7Ozs7OztZQUczRSxLQUFLcEIsMkRBQVFBLENBQUNxQixLQUFLO2dCQUNqQixxQkFDRSw4REFBQ1g7b0JBQUlDLE9BQU07b0JBQTZCQyxXQUFVO29CQUF1QkMsTUFBSztvQkFBT0MsU0FBUTtvQkFBWUMsUUFBTzs4QkFDOUcsNEVBQUNDO3dCQUFLQyxlQUFjO3dCQUFRQyxnQkFBZTt3QkFBUUMsYUFBYTt3QkFBR0MsR0FBRTs7Ozs7Ozs7Ozs7WUFHM0UsS0FBS3BCLDJEQUFRQSxDQUFDc0IsS0FBSztnQkFDakIscUJBQ0UsOERBQUNaO29CQUFJQyxPQUFNO29CQUE2QkMsV0FBVTtvQkFBMEJDLE1BQUs7b0JBQU9DLFNBQVE7b0JBQVlDLFFBQU87OEJBQ2pILDRFQUFDQzt3QkFBS0MsZUFBYzt3QkFBUUMsZ0JBQWU7d0JBQVFDLGFBQWE7d0JBQUdDLEdBQUU7Ozs7Ozs7Ozs7O1lBRzNFO2dCQUNFLHFCQUNFLDhEQUFDVjtvQkFBSUMsT0FBTTtvQkFBNkJDLFdBQVU7b0JBQXdCQyxNQUFLO29CQUFPQyxTQUFRO29CQUFZQyxRQUFPOzhCQUMvRyw0RUFBQ0M7d0JBQUtDLGVBQWM7d0JBQVFDLGdCQUFlO3dCQUFRQyxhQUFhO3dCQUFHQyxHQUFFOzs7Ozs7Ozs7OztRQUc3RTtJQUNGO0lBRUEsTUFBTUcsYUFBYSxDQUFDQztRQUNsQixJQUFJLENBQUNBLE9BQU8sT0FBTztRQUNuQixJQUFJQSxRQUFRLE1BQU0sT0FBTyxDQUFDLEVBQUVBLE1BQU0sRUFBRSxDQUFDO1FBQ3JDLElBQUlBLFFBQVEsT0FBTyxNQUFNLE9BQU8sQ0FBQyxFQUFFLENBQUNBLFFBQVEsSUFBRyxFQUFHQyxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDakUsT0FBTyxDQUFDLEVBQUUsQ0FBQ0QsUUFBUyxRQUFPLElBQUcsQ0FBQyxFQUFHQyxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDbkQ7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSWQsV0FBVTs7MEJBQ2IsOERBQUNjO2dCQUFJZCxXQUFVOzBCQUNaTDs7Ozs7OzBCQUdILDhEQUFDbUI7Z0JBQUlkLFdBQVU7O2tDQUNiLDhEQUFDYzt3QkFBSWQsV0FBVTs7MENBQ2IsOERBQUNlO2dDQUFFZixXQUFVOzBDQUE4Q1YsS0FBSzBCLFFBQVE7Ozs7OzswQ0FDeEUsOERBQUNDO2dDQUFLakIsV0FBVTswQ0FBOEJXLFdBQVdyQixLQUFLNEIsSUFBSTs7Ozs7Ozs7Ozs7O29CQUduRTFCLHNCQUNDLDhEQUFDc0I7d0JBQUlkLFdBQVU7OzBDQUNiLDhEQUFDZTtnQ0FBRWYsV0FBVTswQ0FBNkJSOzs7Ozs7MENBQzFDLDhEQUFDc0I7Z0NBQUlkLFdBQVU7O2tEQUNiLDhEQUFDbUI7d0NBQ0NDLFNBQVMsSUFBTTNCLFFBQVFIO3dDQUN2QlUsV0FBVTs7MERBRVYsOERBQUNGO2dEQUFJQyxPQUFNO2dEQUE2QkMsV0FBVTtnREFBZUMsTUFBSztnREFBT0MsU0FBUTtnREFBWUMsUUFBTzswREFDdEcsNEVBQUNDO29EQUFLQyxlQUFjO29EQUFRQyxnQkFBZTtvREFBUUMsYUFBYTtvREFBR0MsR0FBRTs7Ozs7Ozs7Ozs7NENBQ2pFOzs7Ozs7O2tEQUdSLDhEQUFDVzt3Q0FDQ0MsU0FBUyxJQUFNMUIsU0FBU0o7d0NBQ3hCVSxXQUFVOzswREFFViw4REFBQ0Y7Z0RBQUlDLE9BQU07Z0RBQTZCQyxXQUFVO2dEQUFlQyxNQUFLO2dEQUFPQyxTQUFRO2dEQUFZQyxRQUFPOzBEQUN0Ryw0RUFBQ0M7b0RBQUtDLGVBQWM7b0RBQVFDLGdCQUFlO29EQUFRQyxhQUFhO29EQUFHQyxHQUFFOzs7Ozs7Ozs7Ozs0Q0FDakU7Ozs7Ozs7Ozs7Ozs7Ozs7OztrREFNWiw4REFBQ007d0JBQUlkLFdBQVU7a0NBQ2IsNEVBQUNjOzRCQUFJZCxXQUFVOzs4Q0FDYiw4REFBQ2M7b0NBQUlkLFdBQVU7OENBQ2IsNEVBQUNjO3dDQUNDZCxXQUFVO3dDQUNWcUIsT0FBTzs0Q0FBRUMsT0FBTyxDQUFDLEVBQUUvQixTQUFTLENBQUMsQ0FBQzt3Q0FBQzs7Ozs7Ozs7Ozs7OENBR25DLDhEQUFDMEI7b0NBQUtqQixXQUFVOzt3Q0FBdURUO3dDQUFTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPOUY7QUFFQSxpRUFBZUYsaUJBQWlCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY2hhdC9VcGxvYWRpbmdGaWxlSXRlbS50c3g/YmY1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRmlsZUF0dGFjaG1lbnQsIEZpbGVUeXBlIH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5cbmludGVyZmFjZSBVcGxvYWRpbmdGaWxlSXRlbVByb3BzIHtcbiAgZmlsZTogRmlsZUF0dGFjaG1lbnQ7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIGVycm9yPzogc3RyaW5nO1xuICBvblJldHJ5OiAoZmlsZTogRmlsZUF0dGFjaG1lbnQpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsOiAoZmlsZTogRmlsZUF0dGFjaG1lbnQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFVwbG9hZGluZ0ZpbGVJdGVtOiBSZWFjdC5GQzxVcGxvYWRpbmdGaWxlSXRlbVByb3BzPiA9ICh7IGZpbGUsIHByb2dyZXNzLCBlcnJvciwgb25SZXRyeSwgb25DYW5jZWwgfSkgPT4ge1xuICAvLyBGdW5jacOzbiBwYXJhIG9idGVuZXIgZWwgw61jb25vIGFkZWN1YWRvIHNlZ8O6biBlbCB0aXBvIGRlIGFyY2hpdm9cbiAgY29uc3QgZ2V0RmlsZUljb24gPSAoKSA9PiB7XG4gICAgc3dpdGNoIChmaWxlLmZpbGVUeXBlKSB7XG4gICAgICBjYXNlIEZpbGVUeXBlLklNQUdFOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1ibHVlLTUwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTQgMTZsNC41ODYtNC41ODZhMiAyIDAgMDEyLjgyOCAwTDE2IDE2bS0yLTJsMS41ODYtMS41ODZhMiAyIDAgMDEyLjgyOCAwTDIwIDE0bS02LTZoLjAxTTYgMjBoMTJhMiAyIDAgMDAyLTJWNmEyIDIgMCAwMC0yLTJINmEyIDIgMCAwMC0yIDJ2MTJhMiAyIDAgMDAyIDJ6XCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgKTtcbiAgICAgIGNhc2UgRmlsZVR5cGUuVklERU86XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNiB0ZXh0LXJlZC01MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xNSAxMGw0LjU1My0yLjI3NkExIDEgMCAwMTIxIDguNjE4djYuNzY0YTEgMSAwIDAxLTEuNDQ3Ljg5NEwxNSAxNE01IDE4aDhhMiAyIDAgMDAyLTJWOGEyIDIgMCAwMC0yLTJINWEyIDIgMCAwMC0yIDJ2OGEyIDIgMCAwMDIgMnpcIiAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICApO1xuICAgICAgY2FzZSBGaWxlVHlwZS5BVURJTzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTYgdy02IHRleHQtcHVycGxlLTUwMFwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTkgMTlWNmwxMi0zdjEzTTkgMTljMCAxLjEwNS0xLjM0MyAyLTMgMnMtMy0uODk1LTMtMiAxLjM0My0yIDMtMiAzIC44OTUgMyAyem0xMi0zYzAgMS4xMDUtMS4zNDMgMi0zIDJzLTMtLjg5NS0zLTIgMS4zNDMtMiAzLTIgMyAuODk1IDMgMnpNOSAxMGwxMi0zXCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNiB0ZXh0LWdyYXktNTAwXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNOSAxMmg2bS02IDRoNm0yIDVIN2EyIDIgMCAwMS0yLTJWNWEyIDIgMCAwMTItMmg1LjU4NmExIDEgMCAwMS43MDcuMjkzbDUuNDE0IDUuNDE0YTEgMSAwIDAxLjI5My43MDdWMTlhMiAyIDAgMDEtMiAyelwiIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGZvcm1hdFNpemUgPSAoYnl0ZXM6IG51bWJlciB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIGlmICghYnl0ZXMpIHJldHVybiAnRGVzY29ub2NpZG8nO1xuICAgIGlmIChieXRlcyA8IDEwMjQpIHJldHVybiBgJHtieXRlc30gQmA7XG4gICAgaWYgKGJ5dGVzIDwgMTAyNCAqIDEwMjQpIHJldHVybiBgJHsoYnl0ZXMgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQmA7XG4gICAgcmV0dXJuIGAkeyhieXRlcyAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMSl9IE1CYDtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgcC0zIGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciBib3JkZXItZ3JheS0xMDAgaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgbXItM1wiPlxuICAgICAgICB7Z2V0RmlsZUljb24oKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTFcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXNtIHRleHQtZ3JheS04MDAgdHJ1bmNhdGVcIj57ZmlsZS5maWxlbmFtZX08L3A+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG1sLTJcIj57Zm9ybWF0U2l6ZShmaWxlLnNpemUpfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7ZXJyb3IgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgdGV4dC14cyBtYi0xXCI+e2Vycm9yfTwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTIgbXQtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUmV0cnkoZmlsZSl9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMyBweS0xIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWJsdWUtNjAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtMyB3LTMgbXItMVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTQgNHY1aC41ODJtMTUuMzU2IDJBOC4wMDEgOC4wMDEgMCAwMDQuNTgyIDltMCAwSDltMTEgMTF2LTVoLS41ODFtMCAwYTguMDAzIDguMDAzIDAgMDEtMTUuMzU3LTJtMTUuMzU3IDJIMTVcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIFJlaW50ZW50YXJcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25DYW5jZWwoZmlsZSl9IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMyBweS0xIGJnLWdyYXktMjAwIHRleHQtZ3JheS03MDAgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWdyYXktMzAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtMyB3LTMgbXItMVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIENhbmNlbGFyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyYXktMjAwIHJvdW5kZWQtZnVsbCBoLTIgbXItMiBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS01MDAgaC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgZWFzZS1vdXRcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke3Byb2dyZXNzfSVgIH19XG4gICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNzAwIGZvbnQtbWVkaXVtIHdoaXRlc3BhY2Utbm93cmFwXCI+e3Byb2dyZXNzfSU8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkaW5nRmlsZUl0ZW07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJGaWxlVHlwZSIsIlVwbG9hZGluZ0ZpbGVJdGVtIiwiZmlsZSIsInByb2dyZXNzIiwiZXJyb3IiLCJvblJldHJ5Iiwib25DYW5jZWwiLCJnZXRGaWxlSWNvbiIsImZpbGVUeXBlIiwiSU1BR0UiLCJzdmciLCJ4bWxucyIsImNsYXNzTmFtZSIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsIlZJREVPIiwiQVVESU8iLCJmb3JtYXRTaXplIiwiYnl0ZXMiLCJ0b0ZpeGVkIiwiZGl2IiwicCIsImZpbGVuYW1lIiwic3BhbiIsInNpemUiLCJidXR0b24iLCJvbkNsaWNrIiwic3R5bGUiLCJ3aWR0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chat/UploadingFileItem.tsx\n");

/***/ }),

/***/ "./src/components/common/DeleteMessageModal.tsx":
/*!******************************************************!*\
  !*** ./src/components/common/DeleteMessageModal.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst DeleteMessageModal = ({ isOpen, onClose, onDeleteForMe, onDeleteForEveryone, canDeleteForEveryone })=>{\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-xl shadow-xl max-w-md w-full p-6 transform transition-all duration-300 scale-100\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between mb-5\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-semibold text-gray-900\",\n                            children: \"Eliminar mensaje\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                            lineNumber: 24,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500 transition-colors\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-6 w-6\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M6 18L18 6M6 6l12 12\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                    lineNumber: 30,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                lineNumber: 29,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                            lineNumber: 25,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                    lineNumber: 23,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-gray-600 mb-6\",\n                    children: \"\\xbfC\\xf3mo deseas eliminar este mensaje?\"\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                    lineNumber: 35,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col space-y-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onDeleteForMe,\n                            className: \"w-full flex justify-center items-center px-4 py-3 border border-gray-200 text-base font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 transition-colors shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-5 w-5 mr-2 text-gray-500\",\n                                    viewBox: \"0 0 20 20\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        fillRule: \"evenodd\",\n                                        d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n                                        clipRule: \"evenodd\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                        lineNumber: 45,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                    lineNumber: 44,\n                                    columnNumber: 13\n                                }, undefined),\n                                \"Eliminar para m\\xed\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                            lineNumber: 40,\n                            columnNumber: 11\n                        }, undefined),\n                        canDeleteForEveryone && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onDeleteForEveryone,\n                            className: \"w-full flex justify-center items-center px-4 py-3 text-base font-medium rounded-xl text-white bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    className: \"h-5 w-5 mr-2\",\n                                    viewBox: \"0 0 20 20\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        fillRule: \"evenodd\",\n                                        d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\",\n                                        clipRule: \"evenodd\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                        lineNumber: 56,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                                    lineNumber: 55,\n                                    columnNumber: 15\n                                }, undefined),\n                                \"Eliminar para todos\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                            lineNumber: 51,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"w-full flex justify-center items-center px-4 py-3 mt-2 text-base font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-colors focus:outline-none\",\n                            children: \"Cancelar\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                            lineNumber: 62,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n                    lineNumber: 39,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n            lineNumber: 22,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/DeleteMessageModal.tsx\",\n        lineNumber: 21,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeleteMessageModal);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb21tb24vRGVsZXRlTWVzc2FnZU1vZGFsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEI7QUFVMUIsTUFBTUMscUJBQXdELENBQUMsRUFDN0RDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxhQUFhLEVBQ2JDLG1CQUFtQixFQUNuQkMsb0JBQW9CLEVBQ3JCO0lBQ0MsSUFBSSxDQUFDSixRQUFRLE9BQU87SUFFcEIscUJBQ0UsOERBQUNLO1FBQUlDLFdBQVU7a0JBQ2IsNEVBQUNEO1lBQUlDLFdBQVU7OzhCQUNiLDhEQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNDOzRCQUFHRCxXQUFVO3NDQUFzQzs7Ozs7O3NDQUNwRCw4REFBQ0U7NEJBQ0NDLFNBQVNSOzRCQUNUSyxXQUFVO3NDQUVWLDRFQUFDSTtnQ0FBSUMsT0FBTTtnQ0FBNkJMLFdBQVU7Z0NBQVVNLE1BQUs7Z0NBQU9DLFNBQVE7Z0NBQVlDLFFBQU87MENBQ2pHLDRFQUFDQztvQ0FBS0MsZUFBYztvQ0FBUUMsZ0JBQWU7b0NBQVFDLGFBQWE7b0NBQUdDLEdBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBSzNFLDhEQUFDQztvQkFBRWQsV0FBVTs4QkFBcUI7Ozs7Ozs4QkFJbEMsOERBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0U7NEJBQ0NDLFNBQVNQOzRCQUNUSSxXQUFVOzs4Q0FFViw4REFBQ0k7b0NBQUlDLE9BQU07b0NBQTZCTCxXQUFVO29DQUE2Qk8sU0FBUTtvQ0FBWUQsTUFBSzs4Q0FDdEcsNEVBQUNHO3dDQUFLTSxVQUFTO3dDQUFVRixHQUFFO3dDQUEwTkcsVUFBUzs7Ozs7Ozs7Ozs7Z0NBQzFQOzs7Ozs7O3dCQUlQbEIsc0NBQ0MsOERBQUNJOzRCQUNDQyxTQUFTTjs0QkFDVEcsV0FBVTs7OENBRVYsOERBQUNJO29DQUFJQyxPQUFNO29DQUE2QkwsV0FBVTtvQ0FBZU8sU0FBUTtvQ0FBWUQsTUFBSzs4Q0FDeEYsNEVBQUNHO3dDQUFLTSxVQUFTO3dDQUFVRixHQUFFO3dDQUFxRUcsVUFBUzs7Ozs7Ozs7Ozs7Z0NBQ3JHOzs7Ozs7O3NDQUtWLDhEQUFDZDs0QkFDQ0MsU0FBU1I7NEJBQ1RLLFdBQVU7c0NBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT1g7QUFFQSxpRUFBZVAsa0JBQWtCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL0RlbGV0ZU1lc3NhZ2VNb2RhbC50c3g/MGExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgRGVsZXRlTWVzc2FnZU1vZGFsUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIG9uRGVsZXRlRm9yTWU6ICgpID0+IHZvaWQ7XG4gIG9uRGVsZXRlRm9yRXZlcnlvbmU6ICgpID0+IHZvaWQ7XG4gIGNhbkRlbGV0ZUZvckV2ZXJ5b25lOiBib29sZWFuO1xufVxuXG5jb25zdCBEZWxldGVNZXNzYWdlTW9kYWw6IFJlYWN0LkZDPERlbGV0ZU1lc3NhZ2VNb2RhbFByb3BzPiA9ICh7XG4gIGlzT3BlbixcbiAgb25DbG9zZSxcbiAgb25EZWxldGVGb3JNZSxcbiAgb25EZWxldGVGb3JFdmVyeW9uZSxcbiAgY2FuRGVsZXRlRm9yRXZlcnlvbmVcbn0pID0+IHtcbiAgaWYgKCFpc09wZW4pIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCBwLTQgYmFja2Ryb3AtYmx1ci1zbVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy14bCBtYXgtdy1tZCB3LWZ1bGwgcC02IHRyYW5zZm9ybSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgc2NhbGUtMTAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTVcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj5FbGltaW5hciBtZW5zYWplPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwIG1iLTZcIj5cbiAgICAgICAgICDCv0PDs21vIGRlc2VhcyBlbGltaW5hciBlc3RlIG1lbnNhamU/XG4gICAgICAgIDwvcD5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzcGFjZS15LTNcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkRlbGV0ZUZvck1lfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHB4LTQgcHktMyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHRleHQtYmFzZSBmb250LW1lZGl1bSByb3VuZGVkLXhsIHRleHQtZ3JheS03MDAgYmctd2hpdGUgaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTUgbXItMiB0ZXh0LWdyYXktNTAwXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMCAxOGE4IDggMCAxMDAtMTYgOCA4IDAgMDAwIDE2ek04LjcwNyA3LjI5M2ExIDEgMCAwMC0xLjQxNCAxLjQxNEw4LjU4NiAxMGwtMS4yOTMgMS4yOTNhMSAxIDAgMTAxLjQxNCAxLjQxNEwxMCAxMS40MTRsMS4yOTMgMS4yOTNhMSAxIDAgMDAxLjQxNC0xLjQxNEwxMS40MTQgMTBsMS4yOTMtMS4yOTNhMSAxIDAgMDAtMS40MTQtMS40MTRMMTAgOC41ODYgOC43MDcgNy4yOTN6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgRWxpbWluYXIgcGFyYSBtw61cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICBcbiAgICAgICAgICB7Y2FuRGVsZXRlRm9yRXZlcnlvbmUgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkRlbGV0ZUZvckV2ZXJ5b25lfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHgtNCBweS0zIHRleHQtYmFzZSBmb250LW1lZGl1bSByb3VuZGVkLXhsIHRleHQtd2hpdGUgYmctZ3JhZGllbnQtdG8tciBmcm9tLXJlZC01MDAgdG8tcmVkLTYwMCBob3Zlcjpmcm9tLXJlZC02MDAgaG92ZXI6dG8tcmVkLTcwMCBzaGFkb3ctbWQgdHJhbnNpdGlvbi1hbGwgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcmVkLTUwMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTUgbXItMlwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbFJ1bGU9XCJldmVub2RkXCIgZD1cIk0xMCAxOGE4IDggMCAxMDAtMTYgOCA4IDAgMDAwIDE2ek03IDlhMSAxIDAgMDAwIDJoNmExIDEgMCAxMDAtMkg3elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICBFbGltaW5hciBwYXJhIHRvZG9zXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICAgIFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgcHgtNCBweS0zIG10LTIgdGV4dC1iYXNlIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTEwMCByb3VuZGVkLXhsIHRyYW5zaXRpb24tY29sb3JzIGZvY3VzOm91dGxpbmUtbm9uZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ2FuY2VsYXJcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERlbGV0ZU1lc3NhZ2VNb2RhbDtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkRlbGV0ZU1lc3NhZ2VNb2RhbCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJvbkRlbGV0ZUZvck1lIiwib25EZWxldGVGb3JFdmVyeW9uZSIsImNhbkRlbGV0ZUZvckV2ZXJ5b25lIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDMiLCJidXR0b24iLCJvbkNsaWNrIiwic3ZnIiwieG1sbnMiLCJmaWxsIiwidmlld0JveCIsInN0cm9rZSIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJwIiwiZmlsbFJ1bGUiLCJjbGlwUnVsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/common/DeleteMessageModal.tsx\n");

/***/ }),

/***/ "./src/components/common/ForwardMessageModal.tsx":
/*!*******************************************************!*\
  !*** ./src/components/common/ForwardMessageModal.tsx ***!
  \*******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var date_fns_formatDistance__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns/formatDistance */ \"date-fns/formatDistance\");\n/* harmony import */ var date_fns_formatDistance__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(date_fns_formatDistance__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns/locale */ \"date-fns/locale\");\n/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(date_fns_locale__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__]);\n_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst ForwardMessageModal = ({ isOpen, onClose, messageId, messageContent, messageSender, messageDate })=>{\n    const { rooms, users, forwardMessage } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.useChat)();\n    const [selectedTarget, setSelectedTarget] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Combine rooms and users for the forward list\n    const combinedTargets = [\n        ...rooms.map((room)=>({\n                id: room._id,\n                name: room.name,\n                imageUrl: room.imageUrl,\n                type: \"room\"\n            })),\n        ...users.map((user)=>({\n                id: user._id,\n                name: user.name,\n                imageUrl: user.avatar,\n                type: \"private\"\n            }))\n    ];\n    // Filter targets based on search term\n    const filteredTargets = searchTerm ? combinedTargets.filter((target)=>target.name.toLowerCase().includes(searchTerm.toLowerCase())) : combinedTargets;\n    const handleForward = async ()=>{\n        if (!selectedTarget) return;\n        try {\n            await forwardMessage(messageId, selectedTarget.type, selectedTarget.id);\n            onClose();\n        } catch (error) {\n            console.error(\"Error al reenviar mensaje:\", error);\n        }\n    };\n    // Reset selected target when modal closes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isOpen) {\n            setSelectedTarget(null);\n            setSearchTerm(\"\");\n        }\n    }, [\n        isOpen\n    ]);\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-xl shadow-xl max-w-md w-full p-6 transform transition-all duration-300 scale-100\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between mb-5\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-semibold text-gray-900\",\n                            children: \"Reenviar mensaje\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 87,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500 transition-colors\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-6 w-6\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M6 18L18 6M6 6l12 12\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                    lineNumber: 93,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                lineNumber: 92,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 88,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                    lineNumber: 86,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center mb-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-semibold\",\n                                    children: messageSender.avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: messageSender.avatar,\n                                        alt: messageSender.name,\n                                        className: \"w-8 h-8 rounded-full object-cover\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                        lineNumber: 103,\n                                        columnNumber: 17\n                                    }, undefined) : messageSender.name.charAt(0)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                    lineNumber: 101,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"ml-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-sm font-medium text-gray-900\",\n                                            children: messageSender.name\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                            lineNumber: 109,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500\",\n                                            children: date_fns_formatDistance__WEBPACK_IMPORTED_MODULE_2___default()(new Date(messageDate), new Date(), {\n                                                addSuffix: true,\n                                                locale: date_fns_locale__WEBPACK_IMPORTED_MODULE_3__.es\n                                            })\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                            lineNumber: 110,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                    lineNumber: 108,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 100,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-700\",\n                            children: messageContent\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 115,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                    lineNumber: 99,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"h-5 w-5 text-gray-400\",\n                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                    viewBox: \"0 0 20 20\",\n                                    fill: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        fillRule: \"evenodd\",\n                                        d: \"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\",\n                                        clipRule: \"evenodd\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                        lineNumber: 123,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                    lineNumber: 122,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                lineNumber: 121,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"text\",\n                                className: \"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-primary-500 focus:border-primary-500\",\n                                placeholder: \"Buscar chats y salas...\",\n                                value: searchTerm,\n                                onChange: (e)=>setSearchTerm(e.target.value)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                lineNumber: 126,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                        lineNumber: 120,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                    lineNumber: 119,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-h-60 overflow-y-auto mb-4\",\n                    children: filteredTargets.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                        className: \"divide-y divide-gray-200\",\n                        children: filteredTargets.map((target)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setSelectedTarget({\n                                            type: target.type,\n                                            id: target.id\n                                        }),\n                                    className: `w-full flex items-center px-3 py-2 hover:bg-gray-50 transition-colors ${selectedTarget?.id === target.id ? \"bg-primary-50\" : \"\"}`,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-shrink-0 w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-semibold overflow-hidden\",\n                                            children: target.imageUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: target.imageUrl,\n                                                alt: target.name,\n                                                className: \"w-10 h-10 object-cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                                lineNumber: 150,\n                                                columnNumber: 25\n                                            }, undefined) : target.name.charAt(0)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                            lineNumber: 148,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm font-medium text-gray-900\",\n                                                    children: target.name\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                                    lineNumber: 156,\n                                                    columnNumber: 23\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-gray-500\",\n                                                    children: target.type === \"room\" ? \"Sala\" : \"Chat privado\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                                    lineNumber: 159,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                            lineNumber: 155,\n                                            columnNumber: 21\n                                        }, undefined),\n                                        selectedTarget?.id === target.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"ml-auto\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-5 h-5 text-primary-500\",\n                                                xmlns: \"http://www.w3.org/2000/svg\",\n                                                viewBox: \"0 0 20 20\",\n                                                fill: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    fillRule: \"evenodd\",\n                                                    d: \"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\",\n                                                    clipRule: \"evenodd\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                                    lineNumber: 166,\n                                                    columnNumber: 27\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                                lineNumber: 165,\n                                                columnNumber: 25\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                            lineNumber: 164,\n                                            columnNumber: 23\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                    lineNumber: 142,\n                                    columnNumber: 19\n                                }, undefined)\n                            }, `${target.type}-${target.id}`, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                                lineNumber: 141,\n                                columnNumber: 17\n                            }, undefined))\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                        lineNumber: 139,\n                        columnNumber: 13\n                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"py-4 text-center text-gray-500\",\n                        children: \"No se encontraron resultados\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                        lineNumber: 175,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                    lineNumber: 137,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex space-x-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n                            children: \"Cancelar\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 183,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleForward,\n                            disabled: !selectedTarget,\n                            className: `flex-1 py-2 px-4 rounded-lg text-sm font-medium text-white ${selectedTarget ? \"bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\" : \"bg-gray-300 cursor-not-allowed\"}`,\n                            children: \"Reenviar\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                            lineNumber: 189,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n                    lineNumber: 182,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n            lineNumber: 85,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/common/ForwardMessageModal.tsx\",\n        lineNumber: 84,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ForwardMessageModal);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb21tb24vRm9yd2FyZE1lc3NhZ2VNb2RhbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUQ7QUFDVDtBQUNMO0FBQ2dCO0FBdUJyRCxNQUFNTSxzQkFBMEQsQ0FBQyxFQUMvREMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLFNBQVMsRUFDVEMsY0FBYyxFQUNkQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWjtJQUNDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLGNBQWMsRUFBRSxHQUFHViw4REFBT0E7SUFDaEQsTUFBTSxDQUFDVyxnQkFBZ0JDLGtCQUFrQixHQUFHaEIsK0NBQVFBLENBQWdEO0lBQ3BHLE1BQU0sQ0FBQ2lCLFlBQVlDLGNBQWMsR0FBR2xCLCtDQUFRQSxDQUFDO0lBRTdDLCtDQUErQztJQUMvQyxNQUFNbUIsa0JBQW1DO1dBQ3BDUCxNQUFNUSxHQUFHLENBQUMsQ0FBQ0MsT0FBZ0I7Z0JBQzVCQyxJQUFJRCxLQUFLRSxHQUFHO2dCQUNaQyxNQUFNSCxLQUFLRyxJQUFJO2dCQUNmQyxVQUFVSixLQUFLSSxRQUFRO2dCQUN2QkMsTUFBTTtZQUNSO1dBQ0diLE1BQU1PLEdBQUcsQ0FBQyxDQUFDTyxPQUFnQjtnQkFDNUJMLElBQUlLLEtBQUtKLEdBQUc7Z0JBQ1pDLE1BQU1HLEtBQUtILElBQUk7Z0JBQ2ZDLFVBQVVFLEtBQUtDLE1BQU07Z0JBQ3JCRixNQUFNO1lBQ1I7S0FDRDtJQUVELHNDQUFzQztJQUN0QyxNQUFNRyxrQkFBa0JaLGFBQ3BCRSxnQkFBZ0JXLE1BQU0sQ0FBQ0MsQ0FBQUEsU0FDckJBLE9BQU9QLElBQUksQ0FBQ1EsV0FBVyxHQUFHQyxRQUFRLENBQUNoQixXQUFXZSxXQUFXLE9BRTNEYjtJQUVKLE1BQU1lLGdCQUFnQjtRQUNwQixJQUFJLENBQUNuQixnQkFBZ0I7UUFFckIsSUFBSTtZQUNGLE1BQU1ELGVBQWVOLFdBQVdPLGVBQWVXLElBQUksRUFBRVgsZUFBZU8sRUFB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QixNQUFNLENBQUM7Ozs7OztzREFHdkIsOERBQUNsQjs0Q0FBSUMsV0FBVTs7OERBQ2IsOERBQUNxQjtvREFBRXJCLFdBQVU7OERBQ1ZQLE9BQU9QLElBQUk7Ozs7Ozs4REFFZCw4REFBQ21DO29EQUFFckIsV0FBVTs4REFDVlAsT0FBT0wsSUFBSSxLQUFLLFNBQVMsU0FBUzs7Ozs7Ozs7Ozs7O3dDQUd0Q1gsZ0JBQWdCTyxPQUFPUyxPQUFPVCxFQUFFLGtCQUMvQiw4REFBQ2U7NENBQUlDLFdBQVU7c0RBQ2IsNEVBQUNJO2dEQUFJSixXQUFVO2dEQUEyQkssT0FBTTtnREFBNkJFLFNBQVE7Z0RBQVlELE1BQUs7MERBQ3BHLDRFQUFDRztvREFBS2EsVUFBUztvREFBVVQsR0FBRTtvREFBcUhVLFVBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0JBekIxSixDQUFDLEVBQUU5QixPQUFPTCxJQUFJLENBQUMsQ0FBQyxFQUFFSyxPQUFPVCxFQUFFLENBQUMsQ0FBQzs7Ozs7Ozs7O2tEQWtDMUMsOERBQUNlO3dCQUFJQyxXQUFVO2tDQUFpQzs7Ozs7Ozs7Ozs7OEJBT3BELDhEQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNFOzRCQUNDQyxTQUFTbEM7NEJBQ1QrQixXQUFVO3NDQUNYOzs7Ozs7c0NBR0QsOERBQUNFOzRCQUNDQyxTQUFTUDs0QkFDVG9DLFVBQVUsQ0FBQ3ZEOzRCQUNYdUIsV0FBVyxDQUFDLDJEQUEyRCxFQUNyRXZCLGlCQUNJLG1IQUNBLGlDQUNMLENBQUM7c0NBQ0g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT1g7QUFFQSxpRUFBZVYsbUJBQW1CQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL0ZvcndhcmRNZXNzYWdlTW9kYWwudHN4PzZjNmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBmb3JtYXREaXN0YW5jZSB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCB7IGVzIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICcuLi8uLi9jb250ZXh0cy9DaGF0Q29udGV4dCc7XG5pbXBvcnQgeyBSb29tLCBVc2VyIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgRm9yd2FyZE1lc3NhZ2VNb2RhbFByb3BzIHtcbiAgaXNPcGVuOiBib29sZWFuO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICBtZXNzYWdlSWQ6IHN0cmluZztcbiAgbWVzc2FnZUNvbnRlbnQ6IHN0cmluZztcbiAgbWVzc2FnZVNlbmRlcjoge1xuICAgIF9pZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhdmF0YXI/OiBzdHJpbmc7XG4gIH07XG4gIG1lc3NhZ2VEYXRlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBGb3J3YXJkVGFyZ2V0IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nO1xufVxuXG5jb25zdCBGb3J3YXJkTWVzc2FnZU1vZGFsOiBSZWFjdC5GQzxGb3J3YXJkTWVzc2FnZU1vZGFsUHJvcHM+ID0gKHtcbiAgaXNPcGVuLFxuICBvbkNsb3NlLFxuICBtZXNzYWdlSWQsXG4gIG1lc3NhZ2VDb250ZW50LFxuICBtZXNzYWdlU2VuZGVyLFxuICBtZXNzYWdlRGF0ZVxufSkgPT4ge1xuICBjb25zdCB7IHJvb21zLCB1c2VycywgZm9yd2FyZE1lc3NhZ2UgfSA9IHVzZUNoYXQoKTtcbiAgY29uc3QgW3NlbGVjdGVkVGFyZ2V0LCBzZXRTZWxlY3RlZFRhcmdldF0gPSB1c2VTdGF0ZTx7dHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nfSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2VhcmNoVGVybSwgc2V0U2VhcmNoVGVybV0gPSB1c2VTdGF0ZSgnJyk7XG4gIFxuICAvLyBDb21iaW5lIHJvb21zIGFuZCB1c2VycyBmb3IgdGhlIGZvcndhcmQgbGlzdFxuICBjb25zdCBjb21iaW5lZFRhcmdldHM6IEZvcndhcmRUYXJnZXRbXSA9IFtcbiAgICAuLi5yb29tcy5tYXAoKHJvb206IFJvb20pID0+ICh7IFxuICAgICAgaWQ6IHJvb20uX2lkLCBcbiAgICAgIG5hbWU6IHJvb20ubmFtZSwgXG4gICAgICBpbWFnZVVybDogcm9vbS5pbWFnZVVybCwgXG4gICAgICB0eXBlOiAncm9vbScgYXMgY29uc3QgXG4gICAgfSkpLFxuICAgIC4uLnVzZXJzLm1hcCgodXNlcjogVXNlcikgPT4gKHsgXG4gICAgICBpZDogdXNlci5faWQsIFxuICAgICAgbmFtZTogdXNlci5uYW1lLCBcbiAgICAgIGltYWdlVXJsOiB1c2VyLmF2YXRhciwgXG4gICAgICB0eXBlOiAncHJpdmF0ZScgYXMgY29uc3QgXG4gICAgfSkpXG4gIF07XG4gIFxuICAvLyBGaWx0ZXIgdGFyZ2V0cyBiYXNlZCBvbiBzZWFyY2ggdGVybVxuICBjb25zdCBmaWx0ZXJlZFRhcmdldHMgPSBzZWFyY2hUZXJtIFxuICAgID8gY29tYmluZWRUYXJnZXRzLmZpbHRlcih0YXJnZXQgPT4gXG4gICAgICAgIHRhcmdldC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgKVxuICAgIDogY29tYmluZWRUYXJnZXRzO1xuICBcbiAgY29uc3QgaGFuZGxlRm9yd2FyZCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkVGFyZ2V0KSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZvcndhcmRNZXNzYWdlKG1lc3NhZ2VJZCwgc2VsZWN0ZWRUYXJnZXQudHlwZSwgc2VsZWN0ZWRUYXJnZXQuaWQpO1xuICAgICAgb25DbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCByZWVudmlhciBtZW5zYWplOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBSZXNldCBzZWxlY3RlZCB0YXJnZXQgd2hlbiBtb2RhbCBjbG9zZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzT3Blbikge1xuICAgICAgc2V0U2VsZWN0ZWRUYXJnZXQobnVsbCk7XG4gICAgICBzZXRTZWFyY2hUZXJtKCcnKTtcbiAgICB9XG4gIH0sIFtpc09wZW5dKTtcbiAgXG4gIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCBwLTQgYmFja2Ryb3AtYmx1ci1zbVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy14bCBtYXgtdy1tZCB3LWZ1bGwgcC02IHRyYW5zZm9ybSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgc2NhbGUtMTAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTVcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj5SZWVudmlhciBtZW5zYWplPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNiAxOEwxOCA2TTYgNmwxMiAxMlwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogUHJldmlldyBkZWwgbWVuc2FqZSBhIHJlZW52aWFyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBtYi0yXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgdy04IGgtOCByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1wcmltYXJ5LTcwMCBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgIHttZXNzYWdlU2VuZGVyLmF2YXRhciA/IChcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17bWVzc2FnZVNlbmRlci5hdmF0YXJ9IGFsdD17bWVzc2FnZVNlbmRlci5uYW1lfSBjbGFzc05hbWU9XCJ3LTggaC04IHJvdW5kZWQtZnVsbCBvYmplY3QtY292ZXJcIiAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VTZW5kZXIubmFtZS5jaGFyQXQoMClcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC0yXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+e21lc3NhZ2VTZW5kZXIubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICB7Zm9ybWF0RGlzdGFuY2UobmV3IERhdGUobWVzc2FnZURhdGUpLCBuZXcgRGF0ZSgpLCB7IGFkZFN1ZmZpeDogdHJ1ZSwgbG9jYWxlOiBlcyB9KX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj57bWVzc2FnZUNvbnRlbnR9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHsvKiBCdXNjYWRvciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC15LTAgbGVmdC0wIHBsLTMgZmxleCBpdGVtcy1jZW50ZXIgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1ncmF5LTQwMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNOCA0YTQgNCAwIDEwMCA4IDQgNCAwIDAwMC04ek0yIDhhNiA2IDAgMTExMC44OSAzLjQ3Nmw0LjgxNyA0LjgxN2ExIDEgMCAwMS0xLjQxNCAxLjQxNGwtNC44MTYtNC44MTZBNiA2IDAgMDEyIDh6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJsb2NrIHctZnVsbCBwbC0xMCBwci0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLXByaW1hcnktNTAwIGZvY3VzOmJvcmRlci1wcmltYXJ5LTUwMFwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQnVzY2FyIGNoYXRzIHkgc2FsYXMuLi5cIlxuICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWFyY2hUZXJtKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgey8qIExpc3RhIGRlIGNoYXRzL3NhbGFzIHBhcmEgcmVlbnZpYXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIG1iLTRcIj5cbiAgICAgICAgICB7ZmlsdGVyZWRUYXJnZXRzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwiZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIHtmaWx0ZXJlZFRhcmdldHMubWFwKCh0YXJnZXQpID0+IChcbiAgICAgICAgICAgICAgICA8bGkga2V5PXtgJHt0YXJnZXQudHlwZX0tJHt0YXJnZXQuaWR9YH0+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkVGFyZ2V0KHsgdHlwZTogdGFyZ2V0LnR5cGUsIGlkOiB0YXJnZXQuaWQgfSl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBweC0zIHB5LTIgaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVGFyZ2V0Py5pZCA9PT0gdGFyZ2V0LmlkID8gJ2JnLXByaW1hcnktNTAnIDogJydcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCB3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJnLXByaW1hcnktMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtcHJpbWFyeS03MDAgZm9udC1zZW1pYm9sZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7dGFyZ2V0LmltYWdlVXJsID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e3RhcmdldC5pbWFnZVVybH0gYWx0PXt0YXJnZXQubmFtZX0gY2xhc3NOYW1lPVwidy0xMCBoLTEwIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5uYW1lLmNoYXJBdCgwKVxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1sLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0YXJnZXQubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFyZ2V0LnR5cGUgPT09ICdyb29tJyA/ICdTYWxhJyA6ICdDaGF0IHByaXZhZG8nfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFRhcmdldD8uaWQgPT09IHRhcmdldC5pZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNSBoLTUgdGV4dC1wcmltYXJ5LTUwMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTE2LjcwNyA1LjI5M2ExIDEgMCAwMTAgMS40MTRsLTggOGExIDEgMCAwMS0xLjQxNCAwbC00LTRhMSAxIDAgMDExLjQxNC0xLjQxNEw4IDEyLjU4Nmw3LjI5My03LjI5M2ExIDEgMCAwMTEuNDE0IDB6XCIgY2xpcFJ1bGU9XCJldmVub2RkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB5LTQgdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICBObyBzZSBlbmNvbnRyYXJvbiByZXN1bHRhZG9zXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHsvKiBCb3RvbmVzIGRlIGFjY2nDs24gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTNcIj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIHB5LTIgcHgtNCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbGcgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLWdyYXktNTAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmctcHJpbWFyeS01MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIENhbmNlbGFyXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRm9yd2FyZH1cbiAgICAgICAgICAgIGRpc2FibGVkPXshc2VsZWN0ZWRUYXJnZXR9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4LTEgcHktMiBweC00IHJvdW5kZWQtbGcgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlICR7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVGFyZ2V0IFxuICAgICAgICAgICAgICAgID8gJ2JnLXByaW1hcnktNjAwIGhvdmVyOmJnLXByaW1hcnktNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1vZmZzZXQtMiBmb2N1czpyaW5nLXByaW1hcnktNTAwJyBcbiAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTMwMCBjdXJzb3Itbm90LWFsbG93ZWQnXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBSZWVudmlhclxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9yd2FyZE1lc3NhZ2VNb2RhbDtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiZm9ybWF0RGlzdGFuY2UiLCJlcyIsInVzZUNoYXQiLCJGb3J3YXJkTWVzc2FnZU1vZGFsIiwiaXNPcGVuIiwib25DbG9zZSIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VDb250ZW50IiwibWVzc2FnZVNlbmRlciIsIm1lc3NhZ2VEYXRlIiwicm9vbXMiLCJ1c2VycyIsImZvcndhcmRNZXNzYWdlIiwic2VsZWN0ZWRUYXJnZXQiLCJzZXRTZWxlY3RlZFRhcmdldCIsInNlYXJjaFRlcm0iLCJzZXRTZWFyY2hUZXJtIiwiY29tYmluZWRUYXJnZXRzIiwibWFwIiwicm9vbSIsImlkIiwiX2lkIiwibmFtZSIsImltYWdlVXJsIiwidHlwZSIsInVzZXIiLCJhdmF0YXIiLCJmaWx0ZXJlZFRhcmdldHMiLCJmaWx0ZXIiLCJ0YXJnZXQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiaGFuZGxlRm9yd2FyZCIsImVycm9yIiwiY29uc29sZSIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaW1nIiwic3JjIiwiYWx0IiwiY2hhckF0IiwiRGF0ZSIsImFkZFN1ZmZpeCIsImxvY2FsZSIsInAiLCJmaWxsUnVsZSIsImNsaXBSdWxlIiwiaW5wdXQiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwibGVuZ3RoIiwidWwiLCJsaSIsImRpc2FibGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/common/ForwardMessageModal.tsx\n");

/***/ }),

/***/ "./src/components/profile/ProfileModal.tsx":
/*!*************************************************!*\
  !*** ./src/components/profile/ProfileModal.tsx ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProfileModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/image */ \"../../node_modules/next/image.js\");\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__]);\n_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction ProfileModal({ isOpen, onClose }) {\n    const { user, updateProfile } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [avatar, setAvatar] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [currentPassword, setCurrentPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [newPassword, setNewPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [confirmPassword, setConfirmPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [successMessage, setSuccessMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"general\"); // 'general' or 'security'\n    const [localImagePreview, setLocalImagePreview] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUrlInput, setShowUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (user) {\n            setName(user.name);\n            setAvatar(user.avatar);\n        }\n        // Reset form state when modal opens/closes\n        if (isOpen) {\n            setCurrentPassword(\"\");\n            setNewPassword(\"\");\n            setConfirmPassword(\"\");\n            setError(\"\");\n            setSuccessMessage(\"\");\n            setLocalImagePreview(null);\n            setShowUrlInput(false);\n        }\n    }, [\n        user,\n        isOpen\n    ]);\n    if (!isOpen || !user) return null;\n    const handleGeneralUpdate = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        setSuccessMessage(\"\");\n        try {\n            setIsLoading(true);\n            // Use localImagePreview if available, otherwise use avatar URL\n            const avatarToUse = localImagePreview || avatar;\n            await updateProfile({\n                name,\n                avatar: avatarToUse\n            });\n            setSuccessMessage(\"Profile updated successfully\");\n        } catch (err) {\n            setError(err.message || \"Failed to update profile\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handlePasswordUpdate = async (e)=>{\n        e.preventDefault();\n        setError(\"\");\n        setSuccessMessage(\"\");\n        if (newPassword !== confirmPassword) {\n            setError(\"New passwords do not match\");\n            return;\n        }\n        try {\n            setIsLoading(true);\n            await updateProfile({\n                currentPassword,\n                newPassword\n            });\n            // Reset password fields\n            setCurrentPassword(\"\");\n            setNewPassword(\"\");\n            setConfirmPassword(\"\");\n            setSuccessMessage(\"Password updated successfully\");\n        } catch (err) {\n            setError(err.message || \"Failed to update password\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleImageUpload = (e)=>{\n        const file = e.target.files?.[0];\n        if (!file) return;\n        // Check file size (limit to 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n            setError(\"Image size must be less than 5MB\");\n            return;\n        }\n        // Check file type\n        if (!file.type.startsWith(\"image/\")) {\n            setError(\"File must be an image\");\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = (event)=>{\n            if (event.target?.result) {\n                setLocalImagePreview(event.target.result);\n                setAvatar(\"\"); // Clear URL input when local file is selected\n                setShowUrlInput(false); // Hide URL input when file is selected\n            }\n        };\n        reader.readAsDataURL(file);\n    };\n    const handleRemoveImage = ()=>{\n        setLocalImagePreview(null);\n        setAvatar(\"\");\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n        setShowUrlInput(false);\n    };\n    const toggleUrlInput = ()=>{\n        setShowUrlInput(!showUrlInput);\n        if (showUrlInput && fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-b flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-medium text-gray-900\",\n                            children: \"Profile Settings\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 149,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-gray-400 hover:text-gray-500\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5\",\n                                viewBox: \"0 0 20 20\",\n                                fill: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    fillRule: \"evenodd\",\n                                    d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                    clipRule: \"evenodd\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 155,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                lineNumber: 154,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 150,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 148,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex border-b\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: `flex-1 p-3 text-center ${activeTab === \"general\" ? \"text-blue-600 border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`,\n                            onClick: ()=>setActiveTab(\"general\"),\n                            children: \"General\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 162,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            className: `flex-1 p-3 text-center ${activeTab === \"security\" ? \"text-blue-600 border-b-2 border-blue-600 font-medium\" : \"text-gray-500\"}`,\n                            onClick: ()=>setActiveTab(\"security\"),\n                            children: \"Security\"\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 161,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-red-50 text-red-600 p-3 m-4 rounded-md text-sm\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 177,\n                    columnNumber: 11\n                }, this),\n                successMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-green-50 text-green-600 p-3 m-4 rounded-md text-sm\",\n                    children: successMessage\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 183,\n                    columnNumber: 11\n                }, this),\n                activeTab === \"general\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleGeneralUpdate,\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col items-center mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative h-24 w-24 mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"relative h-24 w-24 rounded-full overflow-hidden bg-gray-200\",\n                                            children: localImagePreview ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                src: localImagePreview,\n                                                alt: name,\n                                                layout: \"fill\",\n                                                objectFit: \"cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 196,\n                                                columnNumber: 21\n                                            }, this) : avatar ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_image__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                                src: avatar,\n                                                alt: name,\n                                                layout: \"fill\",\n                                                objectFit: \"cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 203,\n                                                columnNumber: 21\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"h-full w-full flex items-center justify-center\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-2xl font-medium text-gray-700\",\n                                                    children: name.charAt(0)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 211,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                lineNumber: 210,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 194,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute bottom-0 right-0 flex space-x-1\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"file\",\n                                                    id: \"image-upload\",\n                                                    ref: fileInputRef,\n                                                    onChange: handleImageUpload,\n                                                    accept: \"image/*\",\n                                                    className: \"hidden\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 218,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: ()=>fileInputRef.current?.click(),\n                                                    className: \"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-colors\",\n                                                    title: \"Upload image from device\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 233,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 232,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 226,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: toggleUrlInput,\n                                                    className: \"bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors\",\n                                                    title: \"Enter image URL\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 244,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 243,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 237,\n                                                    columnNumber: 19\n                                                }, this),\n                                                (localImagePreview || avatar) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: handleRemoveImage,\n                                                    className: \"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors\",\n                                                    title: \"Remove image\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                                        className: \"h-4 w-4\",\n                                                        viewBox: \"0 0 20 20\",\n                                                        fill: \"currentColor\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                            fillRule: \"evenodd\",\n                                                            d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                                            clipRule: \"evenodd\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                            lineNumber: 256,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                        lineNumber: 255,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 249,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 217,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 192,\n                                    columnNumber: 15\n                                }, this),\n                                showUrlInput && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"avatar\",\n                                            className: \"block text-xs font-medium text-gray-700 mb-1\",\n                                            children: \"Enter image URL\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 266,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"url\",\n                                            id: \"avatar\",\n                                            value: avatar,\n                                            onChange: (e)=>{\n                                                setAvatar(e.target.value);\n                                                if (e.target.value) {\n                                                    setLocalImagePreview(null);\n                                                    if (fileInputRef.current) {\n                                                        fileInputRef.current.value = \"\";\n                                                    }\n                                                }\n                                            },\n                                            className: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            placeholder: \"https://example.com/avatar.jpg\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 269,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 265,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-center text-gray-500 mb-4\",\n                                    children: \"For best results, use a square image. Max size: 5MB.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 288,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full space-y-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    htmlFor: \"name\",\n                                                    className: \"block text-sm font-medium text-gray-700\",\n                                                    children: \"Name\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 294,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    type: \"text\",\n                                                    id: \"name\",\n                                                    value: name,\n                                                    onChange: (e)=>setName(e.target.value),\n                                                    className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                                    required: true\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 297,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 293,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    className: \"block text-sm font-medium text-gray-700\",\n                                                    children: \"Email\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 308,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-1 w-full px-3 py-2 bg-gray-100 rounded-md text-gray-700\",\n                                                    children: user.email\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 311,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"mt-1 text-xs text-gray-500\",\n                                                    children: \"Email cannot be changed\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                                    lineNumber: 314,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 307,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 292,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 191,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 322,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    disabled: isLoading,\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isLoading ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    children: isLoading ? \"Saving...\" : \"Save Changes\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 329,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 321,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 190,\n                    columnNumber: 11\n                }, this),\n                activeTab === \"security\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handlePasswordUpdate,\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"current-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"Current Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 347,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"current-password\",\n                                            value: currentPassword,\n                                            onChange: (e)=>setCurrentPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 350,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 346,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"new-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"New Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 361,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"new-password\",\n                                            value: newPassword,\n                                            onChange: (e)=>setNewPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 364,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 360,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"confirm-password\",\n                                            className: \"block text-sm font-medium text-gray-700\",\n                                            children: \"Confirm New Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 375,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"password\",\n                                            id: \"confirm-password\",\n                                            value: confirmPassword,\n                                            onChange: (e)=>setConfirmPassword(e.target.value),\n                                            className: \"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                                            required: true\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                            lineNumber: 378,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 374,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 345,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-6 flex justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: onClose,\n                                    className: \"px-4 py-2 mr-3 text-gray-700 border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 390,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    disabled: isLoading,\n                                    className: `px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 ${isLoading ? \"opacity-75 cursor-not-allowed\" : \"\"}`,\n                                    children: isLoading ? \"Updating...\" : \"Update Password\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                                    lineNumber: 397,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                            lineNumber: 389,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n                    lineNumber: 344,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n            lineNumber: 147,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/components/profile/ProfileModal.tsx\",\n        lineNumber: 146,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZS9Qcm9maWxlTW9kYWwudHN4PzQxN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuXG5pbnRlcmZhY2UgUHJvZmlsZU1vZGFsUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2ZpbGVNb2RhbCh7IGlzT3Blbiwgb25DbG9zZSB9OiBQcm9maWxlTW9kYWxQcm9wcykge1xuICBjb25zdCB7IHVzZXIsIHVwZGF0ZVByb2ZpbGUgfSA9IHVzZUF1dGgoKTtcbiAgXG4gIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2F2YXRhciwgc2V0QXZhdGFyXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2N1cnJlbnRQYXNzd29yZCwgc2V0Q3VycmVudFBhc3N3b3JkXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW25ld1Bhc3N3b3JkLCBzZXROZXdQYXNzd29yZF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtjb25maXJtUGFzc3dvcmQsIHNldENvbmZpcm1QYXNzd29yZF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VjY2Vzc01lc3NhZ2UsIHNldFN1Y2Nlc3NNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdnZW5lcmFsJyk7IC8vICdnZW5lcmFsJyBvciAnc2VjdXJpdHknXG4gIGNvbnN0IFtsb2NhbEltYWdlUHJldmlldywgc2V0TG9jYWxJbWFnZVByZXZpZXddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93VXJsSW5wdXQsIHNldFNob3dVcmxJbnB1dF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodXNlcikge1xuICAgICAgc2V0TmFtZSh1c2VyLm5hbWUpO1xuICAgICAgc2V0QXZhdGFyKHVzZXIuYXZhdGFyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgZm9ybSBzdGF0ZSB3aGVuIG1vZGFsIG9wZW5zL2Nsb3Nlc1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHNldEN1cnJlbnRQYXNzd29yZCgnJyk7XG4gICAgICBzZXROZXdQYXNzd29yZCgnJyk7XG4gICAgICBzZXRDb25maXJtUGFzc3dvcmQoJycpO1xuICAgICAgc2V0RXJyb3IoJycpO1xuICAgICAgc2V0U3VjY2Vzc01lc3NhZ2UoJycpO1xuICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgICBzZXRTaG93VXJsSW5wdXQoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3VzZXIsIGlzT3Blbl0pO1xuXG4gIGlmICghaXNPcGVuIHx8ICF1c2VyKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBoYW5kbGVHZW5lcmFsVXBkYXRlID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRFcnJvcignJyk7XG4gICAgc2V0U3VjY2Vzc01lc3NhZ2UoJycpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFVzZSBsb2NhbEltYWdlUHJldmlldyBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgYXZhdGFyIFVSTFxuICAgICAgY29uc3QgYXZhdGFyVG9Vc2UgPSBsb2NhbEltYWdlUHJldmlldyB8fCBhdmF0YXI7XG4gICAgICBcbiAgICAgIGF3YWl0IHVwZGF0ZVByb2ZpbGUoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhdmF0YXI6IGF2YXRhclRvVXNlLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHNldFN1Y2Nlc3NNZXNzYWdlKCdQcm9maWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUGFzc3dvcmRVcGRhdGUgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldEVycm9yKCcnKTtcbiAgICBzZXRTdWNjZXNzTWVzc2FnZSgnJyk7XG4gICAgXG4gICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcbiAgICAgIHNldEVycm9yKCdOZXcgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgXG4gICAgICBhd2FpdCB1cGRhdGVQcm9maWxlKHtcbiAgICAgICAgY3VycmVudFBhc3N3b3JkLFxuICAgICAgICBuZXdQYXNzd29yZCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBSZXNldCBwYXNzd29yZCBmaWVsZHNcbiAgICAgIHNldEN1cnJlbnRQYXNzd29yZCgnJyk7XG4gICAgICBzZXROZXdQYXNzd29yZCgnJyk7XG4gICAgICBzZXRDb25maXJtUGFzc3dvcmQoJycpO1xuICAgICAgXG4gICAgICBzZXRTdWNjZXNzTWVzc2FnZSgnUGFzc3dvcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byB1cGRhdGUgcGFzc3dvcmQnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW1hZ2VVcGxvYWQgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIC8vIENoZWNrIGZpbGUgc2l6ZSAobGltaXQgdG8gNU1CKVxuICAgIGlmIChmaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHtcbiAgICAgIHNldEVycm9yKCdJbWFnZSBzaXplIG11c3QgYmUgbGVzcyB0aGFuIDVNQicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZVxuICAgIGlmICghZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICBzZXRFcnJvcignRmlsZSBtdXN0IGJlIGFuIGltYWdlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0Py5yZXN1bHQpIHtcbiAgICAgICAgc2V0TG9jYWxJbWFnZVByZXZpZXcoZXZlbnQudGFyZ2V0LnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICBzZXRBdmF0YXIoJycpOyAvLyBDbGVhciBVUkwgaW5wdXQgd2hlbiBsb2NhbCBmaWxlIGlzIHNlbGVjdGVkXG4gICAgICAgIHNldFNob3dVcmxJbnB1dChmYWxzZSk7IC8vIEhpZGUgVVJMIGlucHV0IHdoZW4gZmlsZSBpcyBzZWxlY3RlZFxuICAgICAgfVxuICAgIH07XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVtb3ZlSW1hZ2UgPSAoKSA9PiB7XG4gICAgc2V0TG9jYWxJbWFnZVByZXZpZXcobnVsbCk7XG4gICAgc2V0QXZhdGFyKCcnKTtcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICAgIHNldFNob3dVcmxJbnB1dChmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVXJsSW5wdXQgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1VybElucHV0KCFzaG93VXJsSW5wdXQpO1xuICAgIGlmIChzaG93VXJsSW5wdXQgJiYgZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgbWF4LXctbWQgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5Qcm9maWxlIFNldHRpbmdzPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTUwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC01IHctNVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNNC4yOTMgNC4yOTNhMSAxIDAgMDExLjQxNCAwTDEwIDguNTg2bDQuMjkzLTQuMjkzYTEgMSAwIDExMS40MTQgMS40MTRMMTEuNDE0IDEwbDQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0IDEuNDE0TDEwIDExLjQxNGwtNC4yOTMgNC4yOTNhMSAxIDAgMDEtMS40MTQtMS40MTRMOC41ODYgMTAgNC4yOTMgNS43MDdhMSAxIDAgMDEwLTEuNDE0elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogVGFiIE5hdmlnYXRpb24gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBib3JkZXItYlwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBwLTMgdGV4dC1jZW50ZXIgJHthY3RpdmVUYWIgPT09ICdnZW5lcmFsJyA/ICd0ZXh0LWJsdWUtNjAwIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNjAwIGZvbnQtbWVkaXVtJyA6ICd0ZXh0LWdyYXktNTAwJ31gfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdnZW5lcmFsJyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgR2VuZXJhbFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBwLTMgdGV4dC1jZW50ZXIgJHthY3RpdmVUYWIgPT09ICdzZWN1cml0eScgPyAndGV4dC1ibHVlLTYwMCBib3JkZXItYi0yIGJvcmRlci1ibHVlLTYwMCBmb250LW1lZGl1bScgOiAndGV4dC1ncmF5LTUwMCd9YH1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignc2VjdXJpdHknKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBTZWN1cml0eVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgdGV4dC1yZWQtNjAwIHAtMyBtLTQgcm91bmRlZC1tZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7c3VjY2Vzc01lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAgdGV4dC1ncmVlbi02MDAgcC0zIG0tNCByb3VuZGVkLW1kIHRleHQtc21cIj5cbiAgICAgICAgICAgIHtzdWNjZXNzTWVzc2FnZX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgXG4gICAgICAgIHsvKiBHZW5lcmFsIFRhYiAqL31cbiAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ2dlbmVyYWwnICYmIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlR2VuZXJhbFVwZGF0ZX0gY2xhc3NOYW1lPVwicC00XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIG1iLTZcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLTI0IHctMjQgbWItNFwiPlxuICAgICAgICAgICAgICAgIHsvKiBBdmF0YXIgQ2lyY2xlIHdpdGggSW1hZ2UgKi99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBoLTI0IHctMjQgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbiBiZy1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICAgICAge2xvY2FsSW1hZ2VQcmV2aWV3ID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2xvY2FsSW1hZ2VQcmV2aWV3fVxuICAgICAgICAgICAgICAgICAgICAgIGFsdD17bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQ9XCJmaWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RGaXQ9XCJjb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApIDogYXZhdGFyID8gKFxuICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e2F2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICBhbHQ9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgbGF5b3V0PVwiZmlsbFwiXG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Rml0PVwiY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPntuYW1lLmNoYXJBdCgwKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7LyogQ2FtZXJhIEljb24gQnV0dG9uICovfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCBmbGV4IHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJpbWFnZS11cGxvYWRcIlxuICAgICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUltYWdlVXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmaWxlSW5wdXRSZWYuY3VycmVudD8uY2xpY2soKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBwLTIgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWJsdWUtNzAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJVcGxvYWQgaW1hZ2UgZnJvbSBkZXZpY2VcIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTQgdy00XCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQgNWEyIDIgMCAwMC0yIDJ2OGEyIDIgMCAwMDIgMmgxMmEyIDIgMCAwMDItMlY3YTIgMiAwIDAwLTItMmgtMS41ODZhMSAxIDAgMDEtLjcwNy0uMjkzbC0xLjEyMS0xLjEyMUEyIDIgMCAwMDExLjE3MiAzSDguODI4YTIgMiAwIDAwLTEuNDE0LjU4Nkw2LjI5MyA0LjcwN0ExIDEgMCAwMTUuNTg2IDVINHptNiA5YTMgMyAwIDEwMC02IDMgMyAwIDAwMCA2elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVVybElucHV0fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0zMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVudGVyIGltYWdlIFVSTFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTRcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGxSdWxlPVwiZXZlbm9kZFwiIGQ9XCJNMTIuNTg2IDQuNTg2YTIgMiAwIDExMi44MjggMi44MjhsLTMgM2EyIDIgMCAwMS0yLjgyOCAwIDEgMSAwIDAwLTEuNDE0IDEuNDE0IDQgNCAwIDAwNS42NTYgMGwzLTNhNCA0IDAgMDAtNS42NTYtNS42NTZsLTEuNSAxLjVhMSAxIDAgMTAxLjQxNCAxLjQxNGwxLjUtMS41em0tNSA1YTIgMiAwIDAxMi44MjggMCAxIDEgMCAxMDEuNDE0LTEuNDE0IDQgNCAwIDAwLTUuNjU2IDBsLTMgM2E0IDQgMCAxMDUuNjU2IDUuNjU2bDEuNS0xLjVhMSAxIDAgMTAtMS40MTQtMS40MTRsLTEuNSAxLjVhMiAyIDAgMTEtMi44MjgtMi44MjhsMy0zelwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsobG9jYWxJbWFnZVByZXZpZXcgfHwgYXZhdGFyKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVtb3ZlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHAtMiByb3VuZGVkLWZ1bGwgaG92ZXI6YmctcmVkLTYwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZW1vdmUgaW1hZ2VcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC00IHctNFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgey8qIFVSTCBJbnB1dCAodG9nZ2xlYWJsZSkgKi99XG4gICAgICAgICAgICAgIHtzaG93VXJsSW5wdXQgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiYXZhdGFyXCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgRW50ZXIgaW1hZ2UgVVJMXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ1cmxcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cImF2YXRhclwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXthdmF0YXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldEF2YXRhcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2NhbEltYWdlUHJldmlldyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwczovL2V4YW1wbGUuY29tL2F2YXRhci5qcGdcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIG1iLTRcIj5cbiAgICAgICAgICAgICAgICBGb3IgYmVzdCByZXN1bHRzLCB1c2UgYSBzcXVhcmUgaW1hZ2UuIE1heCBzaXplOiA1TUIuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAgICBOYW1lXG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgRW1haWxcbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBiZy1ncmF5LTEwMCByb3VuZGVkLW1kIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgICAge3VzZXIuZW1haWx9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTEgdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgIEVtYWlsIGNhbm5vdCBiZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgbXItMyB0ZXh0LWdyYXktNzAwIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gaG92ZXI6YmctZ3JheS01MFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWJsdWUtNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCAke1xuICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nID8gJ29wYWNpdHktNzUgY3Vyc29yLW5vdC1hbGxvd2VkJyA6ICcnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aXNMb2FkaW5nID8gJ1NhdmluZy4uLicgOiAnU2F2ZSBDaGFuZ2VzJ31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7LyogU2VjdXJpdHkgVGFiICovfVxuICAgICAgICB7YWN0aXZlVGFiID09PSAnc2VjdXJpdHknICYmIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlUGFzc3dvcmRVcGRhdGV9IGNsYXNzTmFtZT1cInAtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImN1cnJlbnQtcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIEN1cnJlbnQgUGFzc3dvcmRcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgIGlkPVwiY3VycmVudC1wYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17Y3VycmVudFBhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXQtMSB3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJuZXctcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIE5ldyBQYXNzd29yZFxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgaWQ9XCJuZXctcGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld1Bhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0xIHctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImNvbmZpcm0tcGFzc3dvcmRcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIENvbmZpcm0gTmV3IFBhc3N3b3JkXG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICBpZD1cImNvbmZpcm0tcGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbmZpcm1QYXNzd29yZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q29uZmlybVBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTEgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02IGZsZXgganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIG1yLTMgdGV4dC1ncmF5LTcwMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLW1kIHNoYWRvdy1zbSBob3ZlcjpiZy1ibHVlLTcwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgJHtcbiAgICAgICAgICAgICAgICAgIGlzTG9hZGluZyA/ICdvcGFjaXR5LTc1IGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzTG9hZGluZyA/ICdVcGRhdGluZy4uLicgOiAnVXBkYXRlIFBhc3N3b3JkJ31cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZUF1dGgiLCJJbWFnZSIsIlByb2ZpbGVNb2RhbCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJ1c2VyIiwidXBkYXRlUHJvZmlsZSIsIm5hbWUiLCJzZXROYW1lIiwiYXZhdGFyIiwic2V0QXZhdGFyIiwiY3VycmVudFBhc3N3b3JkIiwic2V0Q3VycmVudFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJzZXROZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsInNldENvbmZpcm1QYXNzd29yZCIsImVycm9yIiwic2V0RXJyb3IiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzdWNjZXNzTWVzc2FnZSIsInNldFN1Y2Nlc3NNZXNzYWdlIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwibG9jYWxJbWFnZVByZXZpZXciLCJzZXRMb2NhbEltYWdlUHJldmlldyIsInNob3dVcmxJbnB1dCIsInNldFNob3dVcmxJbnB1dCIsImZpbGVJbnB1dFJlZiIsImhhbmRsZUdlbmVyYWxVcGRhdGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJhdmF0YXJUb1VzZSIsImVyciIsIm1lc3NhZ2UiLCJoYW5kbGVQYXNzd29yZFVwZGF0ZSIsImhhbmRsZUltYWdlVXBsb2FkIiwiZmlsZSIsInRhcmdldCIsImZpbGVzIiwic2l6ZSIsInR5cGUiLCJzdGFydHNXaXRoIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImV2ZW50IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImhhbmRsZVJlbW92ZUltYWdlIiwiY3VycmVudCIsInZhbHVlIiwidG9nZ2xlVXJsSW5wdXQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwiZm9ybSIsIm9uU3VibWl0Iiwic3JjIiwiYWx0IiwibGF5b3V0Iiwib2JqZWN0Rml0Iiwic3BhbiIsImNoYXJBdCIsImlucHV0IiwiaWQiLCJyZWYiLCJvbkNoYW5nZSIsImFjY2VwdCIsImNsaWNrIiwidGl0bGUiLCJsYWJlbCIsImh0bWxGb3IiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiZW1haWwiLCJwIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/profile/ProfileModal.tsx\n");

/***/ }),

/***/ "./src/contexts/AuthContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/AuthContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_2__]);\naxios__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    login: async ()=>{},\n    loginWithGoogle: async ()=>{},\n    register: async ()=>{},\n    logout: async ()=>{},\n    updateProfile: async ()=>{}\n});\nconst useAuth = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\nconst AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.useSession)();\n    const API_URL = \"http://localhost:3001\" || 0;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check if user is authenticated in NextAuth session\n        if (status === \"authenticated\" && session?.user) {\n            setUser({\n                id: session.user.id || \"\",\n                name: session.user.name || \"\",\n                email: session.user.email || \"\",\n                avatar: session.user.image || \"\"\n            });\n            // Set authorization header for API requests\n            if (session.accessToken) {\n                // Guardar el token en localStorage para que ChatContext pueda utilizarlo\n                localStorage.setItem(\"token\", session.accessToken);\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${session.accessToken}`;\n            }\n            setIsLoading(false);\n            return;\n        } else if (status === \"unauthenticated\") {\n            // Clear user state if not authenticated with NextAuth\n            setUser(null);\n            setIsLoading(false);\n            return;\n        }\n        // Only check localStorage if NextAuth session status is not determined yet\n        if (status === \"loading\") {\n            return;\n        }\n        // Fallback to legacy token authentication\n        const checkAuthStatus = async ()=>{\n            const token = localStorage.getItem(\"token\");\n            if (!token) {\n                setIsLoading(false);\n                return;\n            }\n            try {\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n                const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`${API_URL}/auth/me`);\n                setUser({\n                    id: data._id,\n                    name: data.name,\n                    email: data.email,\n                    avatar: data.avatar || \"\"\n                });\n            } catch (error) {\n                localStorage.removeItem(\"token\");\n                delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        checkAuthStatus();\n    }, [\n        API_URL,\n        session,\n        status\n    ]);\n    const login = async (email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/login`, {\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error logging in\";\n            throw new Error(message);\n        }\n    };\n    const loginWithGoogle = async ()=>{\n        try {\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signIn)(\"google\", {\n                callbackUrl: \"/\"\n            });\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw new Error(\"Error logging in with Google\");\n        }\n    };\n    const register = async (name, email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/register`, {\n                name,\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error registering\";\n            throw new Error(message);\n        }\n    };\n    const logout = async ()=>{\n        if (status === \"authenticated\") {\n            // For NextAuth logout\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signOut)({\n                callbackUrl: \"/login\"\n            });\n        } else {\n            // For legacy logout\n            if (user) {\n                try {\n                    await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/logout`);\n                } catch (error) {\n                    console.error(\"Error logging out:\", error);\n                }\n            }\n            localStorage.removeItem(\"token\");\n            delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            setUser(null);\n            router.push(\"/login\");\n        }\n    };\n    const updateProfile = async (data)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].patch(`${API_URL}/users/profile`, data);\n            if (response.data) {\n                setUser((prevUser)=>{\n                    if (!prevUser) return null;\n                    return {\n                        ...prevUser,\n                        name: data.name || prevUser.name,\n                        avatar: data.avatar || prevUser.avatar\n                    };\n                });\n            }\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error updating profile\";\n            throw new Error(message);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: {\n            user,\n            isAuthenticated: !!user,\n            isLoading,\n            login,\n            loginWithGoogle,\n            register,\n            logout,\n            updateProfile\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/AuthContext.tsx\",\n        lineNumber: 214,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RTtBQUNwRDtBQUNjO0FBQ3NCO0FBMkI5RCxNQUFNVSw0QkFBY1Qsb0RBQWFBLENBQWtCO0lBQ2pEVSxNQUFNO0lBQ05DLGlCQUFpQjtJQUNqQkMsV0FBVztJQUNYQyxPQUFPLFdBQWE7SUFDcEJDLGlCQUFpQixXQUFhO0lBQzlCQyxVQUFVLFdBQWE7SUFDdkJDLFFBQVEsV0FBYTtJQUNyQkMsZUFBZSxXQUFhO0FBQzlCO0FBRU8sTUFBTUMsVUFBVSxJQUFNakIsaURBQVVBLENBQUNRLGFBQWE7QUFFOUMsTUFBTVUsZUFBd0QsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDaEYsTUFBTSxDQUFDVixNQUFNVyxRQUFRLEdBQUduQiwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNVLFdBQVdVLGFBQWEsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU1xQixTQUFTbEIsc0RBQVNBO0lBQ3hCLE1BQU0sRUFBRW1CLE1BQU1DLE9BQU8sRUFBRUMsTUFBTSxFQUFFLEdBQUdwQiwyREFBVUE7SUFFNUMsTUFBTXFCLFVBQVVDLHVCQUErQixJQUFJO0lBRW5EekIsZ0RBQVNBLENBQUM7UUFDUixxREFBcUQ7UUFDckQsSUFBSXVCLFdBQVcsbUJBQW1CRCxTQUFTZixNQUFNO1lBQy9DVyxRQUFRO2dCQUNOVSxJQUFJTixRQUFRZixJQUFJLENBQUNxQixFQUFFLElBQUk7Z0JBQ3ZCQyxNQUFNUCxRQUFRZixJQUFJLENBQUNzQixJQUFJLElBQUk7Z0JBQzNCQyxPQUFPUixRQUFRZixJQUFJLENBQUN1QixLQUFLLElBQUk7Z0JBQzdCQyxRQUFRVCxRQUFRZixJQUFJLENBQUN5QixLQUFLLElBQUk7WUFDaEM7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSVYsUUFBUVcsV0FBVyxFQUFFO2dCQUN2Qix5RUFBeUU7Z0JBQ3pFQyxhQUFhQyxPQUFPLENBQUMsU0FBU2IsUUFBUVcsV0FBVztnQkFDakRoQyxzREFBYyxDQUFDb0MsT0FBTyxDQUFDQyxNQUFNLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxPQUFPLEVBQUVoQixRQUFRVyxXQUFXLENBQUMsQ0FBQztZQUNsRjtZQUVBZCxhQUFhO1lBQ2I7UUFDRixPQUFPLElBQUlJLFdBQVcsbUJBQW1CO1lBQ3ZDLHNEQUFzRDtZQUN0REwsUUFBUTtZQUNSQyxhQUFhO1lBQ2I7UUFDRjtRQUVBLDJFQUEyRTtRQUMzRSxJQUFJSSxXQUFXLFdBQVc7WUFDeEI7UUFDRjtRQUVBLDBDQUEwQztRQUMxQyxNQUFNZ0Isa0JBQWtCO1lBQ3RCLE1BQU1DLFFBQVFOLGFBQWFPLE9BQU8sQ0FBQztZQUVuQyxJQUFJLENBQUNELE9BQU87Z0JBQ1ZyQixhQUFhO2dCQUNiO1lBQ0Y7WUFFQSxJQUFJO2dCQUNGbEIsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQixHQUFHLENBQUMsT0FBTyxFQUFFRSxNQUFNLENBQUM7Z0JBQ2xFLE1BQU0sRUFBRW5CLElBQUksRUFBRSxHQUFHLE1BQU1wQixpREFBUyxDQUFDLENBQUMsRUFBRXVCLFFBQVEsUUFBUSxDQUFDO2dCQUVyRE4sUUFBUTtvQkFDTlUsSUFBSVAsS0FBS3NCLEdBQUc7b0JBQ1pkLE1BQU1SLEtBQUtRLElBQUk7b0JBQ2ZDLE9BQU9ULEtBQUtTLEtBQUs7b0JBQ2pCQyxRQUFRVixLQUFLVSxNQUFNLElBQUk7Z0JBQ3pCO1lBQ0YsRUFBRSxPQUFPYSxPQUFZO2dCQUNuQlYsYUFBYVcsVUFBVSxDQUFDO2dCQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUN2RCxTQUFVO2dCQUNSbkIsYUFBYTtZQUNmO1FBQ0Y7UUFFQW9CO0lBQ0YsR0FBRztRQUFDZjtRQUFTRjtRQUFTQztLQUFPO0lBRTdCLE1BQU1iLFFBQVEsT0FBT29CLE9BQWVnQjtRQUNsQyxJQUFJO1lBQ0YsTUFBTSxFQUFFekIsSUFBSSxFQUFFLEdBQUcsTUFBTXBCLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxXQUFXLENBQUMsRUFBRTtnQkFDekRNO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdEMsa0JBQWtCO1FBQ3RCLElBQUk7WUFDRixNQUFNUCx1REFBTUEsQ0FBQyxVQUFVO2dCQUFFZ0QsYUFBYTtZQUFJO1FBQzVDLEVBQUUsT0FBT1IsT0FBWTtZQUNuQlMsUUFBUVQsS0FBSyxDQUFDLHVCQUF1QkE7WUFDckMsTUFBTSxJQUFJTyxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdkMsV0FBVyxPQUFPaUIsTUFBY0MsT0FBZWdCO1FBQ25ELElBQUk7WUFDRixNQUFNLEVBQUV6QixJQUFJLEVBQUUsR0FBRyxNQUFNcEIsa0RBQVUsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFO2dCQUM1REs7Z0JBQ0FDO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNcEMsU0FBUztRQUNiLElBQUlVLFdBQVcsaUJBQWlCO1lBQzlCLHNCQUFzQjtZQUN0QixNQUFNbEIsd0RBQU9BLENBQUM7Z0JBQUUrQyxhQUFhO1lBQVM7UUFDeEMsT0FBTztZQUNMLG9CQUFvQjtZQUNwQixJQUFJN0MsTUFBTTtnQkFDUixJQUFJO29CQUNGLE1BQU1OLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxZQUFZLENBQUM7Z0JBQzNDLEVBQUUsT0FBT29CLE9BQU87b0JBQ2RTLFFBQVFULEtBQUssQ0FBQyxzQkFBc0JBO2dCQUN0QztZQUNGO1lBRUFWLGFBQWFXLFVBQVUsQ0FBQztZQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUNyRHBCLFFBQVE7WUFDUkUsT0FBTzRCLElBQUksQ0FBQztRQUNkO0lBQ0Y7SUFFQSxNQUFNbEMsZ0JBQWdCLE9BQU9PO1FBQzNCLElBQUk7WUFDRixNQUFNNkIsV0FBVyxNQUFNakQsbURBQVcsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFSDtZQUUvRCxJQUFJNkIsU0FBUzdCLElBQUksRUFBRTtnQkFDakJILFFBQVFxQyxDQUFBQTtvQkFDTixJQUFJLENBQUNBLFVBQVUsT0FBTztvQkFFdEIsT0FBTzt3QkFDTCxHQUFHQSxRQUFRO3dCQUNYMUIsTUFBTVIsS0FBS1EsSUFBSSxJQUFJMEIsU0FBUzFCLElBQUk7d0JBQ2hDRSxRQUFRVixLQUFLVSxNQUFNLElBQUl3QixTQUFTeEIsTUFBTTtvQkFDeEM7Z0JBQ0Y7WUFDRjtRQUNGLEVBQUUsT0FBT2EsT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzNDLFlBQVlrRCxRQUFRO1FBQ25CQyxPQUFPO1lBQ0xsRDtZQUNBQyxpQkFBaUIsQ0FBQyxDQUFDRDtZQUNuQkU7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtrQkFFQ0c7Ozs7OztBQUdQLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4PzFmYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiwgc2lnbkluLCBzaWduT3V0IH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlUHJvZmlsZURhdGEge1xuICBuYW1lPzogc3RyaW5nO1xuICBhdmF0YXI/OiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZD86IHN0cmluZztcbiAgbmV3UGFzc3dvcmQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBdXRoQ29udGV4dFR5cGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGxvZ2luOiAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9naW5XaXRoR29vZ2xlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWdpc3RlcjogKG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9nb3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVQcm9maWxlOiAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGU+KHtcbiAgdXNlcjogbnVsbCxcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBsb2dpbjogYXN5bmMgKCkgPT4ge30sXG4gIGxvZ2luV2l0aEdvb2dsZTogYXN5bmMgKCkgPT4ge30sXG4gIHJlZ2lzdGVyOiBhc3luYyAoKSA9PiB7fSxcbiAgbG9nb3V0OiBhc3luYyAoKSA9PiB7fSxcbiAgdXBkYXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiwgc3RhdHVzIH0gPSB1c2VTZXNzaW9uKCk7XG5cbiAgY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgaW4gTmV4dEF1dGggc2Vzc2lvblxuICAgIGlmIChzdGF0dXMgPT09ICdhdXRoZW50aWNhdGVkJyAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IHNlc3Npb24udXNlci5pZCB8fCAnJyxcbiAgICAgICAgbmFtZTogc2Vzc2lvbi51c2VyLm5hbWUgfHwgJycsXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfHwgJycsXG4gICAgICAgIGF2YXRhcjogc2Vzc2lvbi51c2VyLmltYWdlIHx8ICcnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3IgQVBJIHJlcXVlc3RzXG4gICAgICBpZiAoc2Vzc2lvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAvLyBHdWFyZGFyIGVsIHRva2VuIGVuIGxvY2FsU3RvcmFnZSBwYXJhIHF1ZSBDaGF0Q29udGV4dCBwdWVkYSB1dGlsaXphcmxvXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHNlc3Npb24uYWNjZXNzVG9rZW4pO1xuICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Nlc3Npb24uYWNjZXNzVG9rZW59YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3VuYXV0aGVudGljYXRlZCcpIHtcbiAgICAgIC8vIENsZWFyIHVzZXIgc3RhdGUgaWYgbm90IGF1dGhlbnRpY2F0ZWQgd2l0aCBOZXh0QXV0aFxuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgY2hlY2sgbG9jYWxTdG9yYWdlIGlmIE5leHRBdXRoIHNlc3Npb24gc3RhdHVzIGlzIG5vdCBkZXRlcm1pbmVkIHlldFxuICAgIGlmIChzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBsZWdhY3kgdG9rZW4gYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBjaGVja0F1dGhTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgXG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfVVJMfS9hdXRoL21lYCk7XG4gICAgICAgIFxuICAgICAgICBzZXRVc2VyKHtcbiAgICAgICAgICBpZDogZGF0YS5faWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfHwgJycsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgICAgZGVsZXRlIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ107XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja0F1dGhTdGF0dXMoKTtcbiAgfSwgW0FQSV9VUkwsIHNlc3Npb24sIHN0YXR1c10pO1xuXG4gIGNvbnN0IGxvZ2luID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9naW5gLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgbG9nZ2luZyBpbic7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvZ2luV2l0aEdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2lnbkluKCdnb29nbGUnLCB7IGNhbGxiYWNrVXJsOiAnLycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIGxvZ2luIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgbG9nZ2luZyBpbiB3aXRoIEdvb2dsZScpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWdpc3RlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvcmVnaXN0ZXJgLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgcmVnaXN0ZXJpbmcnO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2F1dGhlbnRpY2F0ZWQnKSB7XG4gICAgICAvLyBGb3IgTmV4dEF1dGggbG9nb3V0XG4gICAgICBhd2FpdCBzaWduT3V0KHsgY2FsbGJhY2tVcmw6ICcvbG9naW4nIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgbGVnYWN5IGxvZ291dFxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9nb3V0YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTtcbiAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChgJHtBUElfVVJMfS91c2Vycy9wcm9maWxlYCwgZGF0YSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldFVzZXIocHJldlVzZXIgPT4ge1xuICAgICAgICAgIGlmICghcHJldlVzZXIpIHJldHVybiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wcmV2VXNlcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSB8fCBwcmV2VXNlci5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhciB8fCBwcmV2VXNlci5hdmF0YXIsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8ICdFcnJvciB1cGRhdGluZyBwcm9maWxlJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIGxvZ2luLFxuICAgICAgICBsb2dpbldpdGhHb29nbGUsXG4gICAgICAgIHJlZ2lzdGVyLFxuICAgICAgICBsb2dvdXQsXG4gICAgICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJheGlvcyIsInVzZVJvdXRlciIsInVzZVNlc3Npb24iLCJzaWduSW4iLCJzaWduT3V0IiwiQXV0aENvbnRleHQiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNMb2FkaW5nIiwibG9naW4iLCJsb2dpbldpdGhHb29nbGUiLCJyZWdpc3RlciIsImxvZ291dCIsInVwZGF0ZVByb2ZpbGUiLCJ1c2VBdXRoIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzZXRVc2VyIiwic2V0SXNMb2FkaW5nIiwicm91dGVyIiwiZGF0YSIsInNlc3Npb24iLCJzdGF0dXMiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImF2YXRhciIsImltYWdlIiwiYWNjZXNzVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2hlY2tBdXRoU3RhdHVzIiwidG9rZW4iLCJnZXRJdGVtIiwiZ2V0IiwiX2lkIiwiZXJyb3IiLCJyZW1vdmVJdGVtIiwicGFzc3dvcmQiLCJwb3N0IiwicHVzaCIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsIkVycm9yIiwiY2FsbGJhY2tVcmwiLCJjb25zb2xlIiwicGF0Y2giLCJwcmV2VXNlciIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.tsx\n");

/***/ }),

/***/ "./src/contexts/ChatContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/ChatContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatProvider: () => (/* binding */ ChatProvider),\n/* harmony export */   FileType: () => (/* binding */ FileType),\n/* harmony export */   useChat: () => (/* binding */ useChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthContext */ \"./src/contexts/AuthContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nvar FileType;\n(function(FileType) {\n    FileType[\"IMAGE\"] = \"image\";\n    FileType[\"VIDEO\"] = \"video\";\n    FileType[\"DOCUMENT\"] = \"document\";\n    FileType[\"AUDIO\"] = \"audio\";\n})(FileType || (FileType = {}));\nconst ChatContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    activeChat: null,\n    messages: [],\n    rooms: [],\n    onlineUsers: {},\n    users: [],\n    typingUsers: {},\n    isLoading: true,\n    isLoadingMessages: false,\n    unreadMessages: {},\n    uploadingFiles: {},\n    setActiveChat: ()=>{},\n    sendMessage: async ()=>{},\n    markAsRead: ()=>{},\n    startTyping: ()=>{},\n    stopTyping: ()=>{},\n    loadMoreMessages: async ()=>0,\n    retryFileUpload: ()=>{},\n    cancelFileUpload: ()=>{},\n    deleteMessage: async ()=>false,\n    forwardMessage: async ()=>{}\n});\nconst useChat = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatContext);\nconst ChatProvider = ({ children })=>{\n    const { user, isAuthenticated } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [activeChat, setActiveChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rooms, setRooms] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [typingUsers, setTypingUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isLoadingMessages, setIsLoadingMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socketConnected, setSocketConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadMessages, setUnreadMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploadingFilesByChat, setUploadingFilesByChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [selectedFile, setSelectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const uploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!activeChat) return {};\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        return uploadingFilesByChat[chatId] || {};\n    }, [\n        activeChat,\n        uploadingFilesByChat\n    ]);\n    const updateUploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((chatId, fileId, data)=>{\n        console.log(`Actualizando estado de archivo ${fileId} en chat ${chatId}:`, data);\n        setUploadingFilesByChat((prev)=>{\n            const newState = {\n                ...prev\n            };\n            // Si no existe el chat, lo creamos\n            if (!newState[chatId]) {\n                newState[chatId] = {};\n            }\n            // Si data es null, eliminamos el archivo\n            if (data === null) {\n                if (newState[chatId][fileId]) {\n                    const { [fileId]: _, ...restFiles } = newState[chatId];\n                    newState[chatId] = restFiles;\n                    console.log(`Eliminado archivo ${fileId} de chat ${chatId}`);\n                }\n            } else {\n                // Actualizamos o agregamos el archivo\n                newState[chatId][fileId] = data;\n                console.log(`Actualizado archivo ${fileId} en chat ${chatId} con progreso ${data.progress}%`);\n            }\n            return newState;\n        });\n    }, []);\n    const cancelFileUpload = (file)=>{\n        if (!file.tempId || !activeChat) return;\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        updateUploadingFiles(chatId, file.tempId, null);\n    };\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep the ref in sync with the state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        currentActiveChatRef.current = activeChat;\n    }, [\n        activeChat\n    ]);\n    const API_URL = \"http://localhost:3001\" || 0;\n    // Initialize socket connection when authenticated\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated || !user) {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n            return;\n        }\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n        socketRef.current = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(API_URL, {\n            auth: {\n                token\n            },\n            withCredentials: true,\n            // Aumentar el tiempo de espera para permitir envo de archivos grandes\n            timeout: 60000 // aumentar el tiempo de espera a 60 segundos\n        });\n        // Socket event listeners\n        socketRef.current.on(\"connect\", ()=>{\n            console.log(\"Socket connected\");\n            setSocketConnected(true);\n        });\n        socketRef.current.on(\"new_message\", (message)=>{\n            const activeChat = currentActiveChatRef.current;\n            // Identificar la clave de chat para seguimiento de notificaciones\n            let chatKey = \"\";\n            if (message.room) {\n                chatKey = `room-${message.room}`;\n            } else {\n                chatKey = message.sender._id === user.id ? `private-${message.recipient}` : `private-${message.sender._id}`;\n            }\n            console.log(\"Mensaje recibido:\", message, \"Chat activo:\", activeChat);\n            // Solo agregar el mensaje si es relevante para el chat activo\n            if (activeChat?.type === \"private\" && (message.sender._id === activeChat.id && message.recipient === user.id || message.sender._id === user.id && message.recipient === activeChat.id) || activeChat?.type === \"room\" && message.room === activeChat.id) {\n                console.log(\"Agregando mensaje al chat activo:\", message);\n                setMessages((prev)=>[\n                        ...prev,\n                        message\n                    ]);\n            } else if (message.sender._id !== user.id && chatKey) {\n                console.log(\"New message notification:\", chatKey, message);\n                setUnreadMessages((prev)=>({\n                        ...prev,\n                        [chatKey]: (prev[chatKey] || 0) + 1\n                    }));\n            }\n        });\n        socketRef.current.on(\"user_status_change\", ({ userId, isOnline })=>{\n            setOnlineUsers((prev)=>({\n                    ...prev,\n                    [userId]: isOnline\n                }));\n        });\n        socketRef.current.on(\"typing_indicator\", (data)=>{\n            const activeChat = currentActiveChatRef.current;\n            if (activeChat?.type === \"private\" && data.senderId === activeChat.id || activeChat?.type === \"room\" && data.roomId === activeChat.id) {\n                // Almacenar nombre en lugar de solo la bandera booleana\n                setTypingUsers((prev)=>({\n                        ...prev,\n                        [data.userId]: data.isTyping ? data.userName : false\n                    }));\n            }\n        });\n        socketRef.current.on(\"message_read\", ({ messageId })=>{\n            setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                        ...msg,\n                        isRead: true\n                    } : msg));\n        });\n        // Handle new room creations\n        socketRef.current.on(\"new_room\", (room)=>{\n            console.log(\"New room received:\", room);\n            setRooms((prev)=>{\n                // Check if the room already exists\n                const exists = prev.some((r)=>r._id === room._id);\n                if (exists) return prev;\n                return [\n                    ...prev,\n                    room\n                ];\n            });\n        });\n        // Handle room updates (members added/removed)\n        socketRef.current.on(\"room_updated\", (room)=>{\n            console.log(\"Room updated:\", room);\n            if (room.removed) {\n                // If this room was removed for this user, remove it from the list\n                setRooms((prev)=>prev.filter((r)=>r._id !== room._id));\n                // If active chat is this room, clear it\n                const activeChat = currentActiveChatRef.current;\n                if (activeChat?.type === \"room\" && activeChat.id === room._id) {\n                    setActiveChat(null);\n                }\n            } else {\n                // Update the room in the list\n                setRooms((prev)=>prev.map((r)=>r._id === room._id ? room : r));\n            }\n        });\n        // Escuchar eventos de eliminacin de mensajes\n        socketRef.current.on(\"message_deleted\", ({ messageId, deleteForEveryone })=>{\n            console.log(\"Mensaje eliminado recibido:\", messageId, deleteForEveryone);\n            if (deleteForEveryone) {\n                // Si fue eliminado para todos, actualizar la UI\n                setMessages((prev)=>prev.filter((msg)=>msg._id !== messageId));\n            }\n        });\n        socketRef.current.on(\"disconnect\", ()=>{\n            console.log(\"Socket disconnected\");\n            setSocketConnected(false);\n        });\n        return ()=>{\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n        };\n    }, [\n        isAuthenticated,\n        user,\n        API_URL\n    ]);\n    // Load initial data: users and rooms\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated) {\n            setIsLoading(false);\n            return;\n        }\n        const fetchInitialData = async ()=>{\n            try {\n                setIsLoading(true);\n                const [usersResponse, roomsResponse] = await Promise.all([\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/users`),\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/rooms/my`)\n                ]);\n                setUsers(usersResponse.data);\n                setRooms(roomsResponse.data);\n                // Set initial online status\n                const initialOnlineStatus = {};\n                usersResponse.data.forEach((user)=>{\n                    initialOnlineStatus[user._id] = user.isOnline || false;\n                });\n                setOnlineUsers(initialOnlineStatus);\n            } catch (error) {\n                console.error(\"Error fetching initial data:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchInitialData();\n    }, [\n        isAuthenticated,\n        API_URL\n    ]);\n    // Cuando se inicia el socket y se conecta, solicitamos el estado actual de mensajes no ledos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (socketConnected && socketRef.current && user) {\n            // Solicitar mensajes no ledos al servidor\n            socketRef.current.emit(\"get_unread_messages\");\n            // Escuchar la respuesta con el recuento de mensajes no ledos\n            socketRef.current.on(\"unread_messages_count\", (unreadCounts)=>{\n                console.log(\"Received unread counts:\", unreadCounts);\n                setUnreadMessages(unreadCounts);\n            });\n            return ()=>{\n                socketRef.current?.off(\"unread_messages_count\");\n            };\n        }\n    }, [\n        socketConnected,\n        user\n    ]);\n    // Asegurarse de que los mensajes se marquen como ledos cuando se abre un chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeChat && socketRef.current) {\n            // Crear una clave para el chat actual\n            const chatKey = `${activeChat.type}-${activeChat.id}`;\n            // Resetear el contador de mensajes no ledos para este chat\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n            // Notificar al servidor que los mensajes se han ledo\n            socketRef.current.emit(\"mark_messages_read\", {\n                chatId: activeChat.id,\n                chatType: activeChat.type\n            });\n        }\n    }, [\n        activeChat\n    ]);\n    // Funcin para manejar el cambio de chat activo\n    const handleActiveChatChange = (chat)=>{\n        // Limpiar las notificaciones no ledas cuando se activa un chat\n        if (chat) {\n            const chatKey = `${chat.type}-${chat.id}`;\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n        }\n        setActiveChat(chat);\n    };\n    // Efecto para actualizar los mensajes cuando cambia el chat activo\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeChat || !isAuthenticated) return;\n        // Resetear el estado al cambiar de chat\n        setMessages([]);\n        setIsLoadingMessages(true);\n        // Reiniciar estados de mensajes no ledos y archivos en carga\n        if (activeChat) {\n            // Limpiar mensajes no ledos\n            setUnreadMessages((prev)=>{\n                const chatKey = `${activeChat.type}-${activeChat.id}`;\n                if (prev[chatKey]) {\n                    const newState = {\n                        ...prev\n                    };\n                    delete newState[chatKey];\n                    return newState;\n                }\n                return prev;\n            });\n            // Asegurarnos de que la seccin \"Archivos en proceso\" desaparezca al cambiar de chat\n            // incluso cuando ya haba terminado la carga con 100%\n            const chatId = `${activeChat.type}-${activeChat.id}`;\n            if (chatId in uploadingFilesByChat) {\n                const hasCompletedUploads = Object.values(uploadingFilesByChat[chatId]).some((status)=>status.progress === 100);\n                if (hasCompletedUploads) {\n                    setUploadingFilesByChat((prev)=>{\n                        const newState = {\n                            ...prev\n                        };\n                        delete newState[chatId];\n                        return newState;\n                    });\n                }\n            }\n        }\n        // Solicitar mensajes al servidor\n        const fetchMessages = async ()=>{\n            try {\n                let endpoint = \"\";\n                if (activeChat.type === \"private\") {\n                    endpoint = `${API_URL}/chats/direct/${activeChat.id}`;\n                    // Join user room for direct messages\n                    socketRef.current?.emit(\"join_room\", {\n                        userId: activeChat.id\n                    });\n                } else {\n                    endpoint = `${API_URL}/chats/room/${activeChat.id}`;\n                    // Join room\n                    socketRef.current?.emit(\"join_room\", {\n                        roomId: activeChat.id\n                    });\n                }\n                const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n                setMessages(response.data);\n                // Marcar los mensajes como ledos en el servidor\n                if (response.data.length > 0) {\n                    socketRef.current?.emit(\"mark_messages_read\", {\n                        chatType: activeChat.type,\n                        chatId: activeChat.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error fetching messages:\", error);\n            } finally{\n                setIsLoadingMessages(false);\n            }\n        };\n        fetchMessages();\n        return ()=>{\n            // Clean up - leave rooms\n            if (activeChat.type === \"room\") {\n                socketRef.current?.emit(\"leave_room\", {\n                    roomId: activeChat.id\n                });\n            }\n        };\n    }, [\n        activeChat,\n        user,\n        isAuthenticated,\n        API_URL\n    ]);\n    // Efecto para limpiar archivos completados automticamente\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Revisa cada 2 segundos si hay archivos que estn al 100% que deban eliminarse\n        const cleanupInterval = setInterval(()=>{\n            setUploadingFilesByChat((prev)=>{\n                const newState = {\n                    ...prev\n                };\n                let hasChanges = false;\n                // Revisar todos los chats\n                Object.keys(newState).forEach((chatId)=>{\n                    // Revisar todos los archivos en ese chat\n                    Object.keys(newState[chatId]).forEach((fileId)=>{\n                        // Si un archivo est al 100%, eliminarlo\n                        if (newState[chatId][fileId].progress === 100) {\n                            delete newState[chatId][fileId];\n                            hasChanges = true;\n                        }\n                    });\n                    // Si el chat ya no tiene archivos, eliminar el chat\n                    if (Object.keys(newState[chatId]).length === 0) {\n                        delete newState[chatId];\n                        hasChanges = true;\n                    }\n                });\n                return hasChanges ? newState : prev;\n            });\n        }, 2000);\n        return ()=>clearInterval(cleanupInterval);\n    }, []);\n    const sendMessage = async (content, selectedFile)=>{\n        if (!socketRef.current || !activeChat) return;\n        try {\n            // Generar tempIds para los archivos y convertirlos a FileAttachment\n            const attachmentsWithIds = [];\n            if (selectedFile) {\n                const tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n                // Determinar tipo de archivo de forma segura\n                let fileType = \"document\";\n                const fileTypeString = selectedFile.type || \"\"; // Usar string vaco si type es undefined\n                if (fileTypeString.startsWith(\"image/\")) {\n                    fileType = \"image\";\n                } else if (fileTypeString.startsWith(\"video/\")) {\n                    fileType = \"video\";\n                } else if (fileTypeString.startsWith(\"audio/\")) {\n                    fileType = \"audio\";\n                } else {\n                    fileType = \"document\";\n                }\n                // Crear objeto FileAttachment para el archivo\n                const attachment = {\n                    tempId,\n                    filename: selectedFile.name || \"archivo\",\n                    contentType: selectedFile.type || \"application/octet-stream\",\n                    fileType,\n                    size: selectedFile.size || 0\n                };\n                // Iniciar indicador de carga inmediatamente para todos los archivos\n                const chatId = `${activeChat?.type}-${activeChat?.id}`;\n                updateUploadingFiles(chatId, tempId, {\n                    progress: 0,\n                    error: undefined\n                });\n                // Si es un archivo grande, lo procesamos para subida en segundo plano\n                if (selectedFile.size > 5 * 1024 * 1024) {\n                    attachment.isLargeFile = true;\n                    // Leer como base64 para preprocesamiento\n                    const reader = new FileReader();\n                    reader.readAsDataURL(selectedFile);\n                    await new Promise((resolve)=>{\n                        reader.onload = ()=>{\n                            const base64data = reader.result?.toString() || \"\";\n                            // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                            const base64Clean = base64data.split(\",\")[1];\n                            attachment.data = base64Clean;\n                            resolve();\n                        };\n                    });\n                    // Agregar a la lista de adjuntos\n                    attachmentsWithIds.push(attachment);\n                    // Iniciar subida en segundo plano\n                    uploadLargeFileToServer(attachment).then((fileId)=>{\n                        if (fileId) {\n                            // Actualizar el attachment con el fileId\n                            attachment.fileId = fileId;\n                            attachment.isLargeFile = true;\n                            attachment.data = undefined; // Eliminar los datos binarios\n                            // Actualizar progreso a 100%\n                            updateUploadingFiles(chatId, tempId, {\n                                progress: 100,\n                                error: undefined\n                            });\n                        }\n                    }).catch((error)=>{\n                        console.error(\"Error subiendo archivo:\", error);\n                        updateUploadingFiles(chatId, tempId, {\n                            progress: 0,\n                            error: error.message || \"Error al subir el archivo\"\n                        });\n                    });\n                } else {\n                    // Para archivos pequeos (<5MB), leerlos como base64 y enviar con el mensaje\n                    const reader = new FileReader();\n                    reader.readAsDataURL(selectedFile);\n                    await new Promise((resolve)=>{\n                        reader.onload = ()=>{\n                            const base64data = reader.result?.toString() || \"\";\n                            // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                            const base64Clean = base64data.split(\",\")[1];\n                            attachment.data = base64Clean;\n                            resolve();\n                        };\n                    });\n                    // Agregar a la lista de adjuntos\n                    attachmentsWithIds.push(attachment);\n                    // Marcar como completado tambin para archivos pequeos\n                    updateUploadingFiles(chatId, tempId, {\n                        progress: 100,\n                        error: undefined\n                    });\n                }\n            }\n            // Preparar datos del mensaje\n            const messageData = {\n                content,\n                attachments: attachmentsWithIds,\n                ...activeChat.type === \"private\" ? {\n                    recipientId: activeChat.id\n                } : {\n                    roomId: activeChat.id\n                }\n            };\n            console.log(\"Enviando mensaje:\", messageData);\n            // Enviar el mensaje a travs del socket\n            socketRef.current.emit(\"send_message\", messageData, (response)=>{\n                console.log(\"Respuesta al enviar mensaje:\", response);\n                if (!response.success) {\n                    console.error(\"Error al enviar mensaje:\", response.error);\n                }\n            });\n            // Limpiar formulario despus de enviar\n            if (fileInputRef.current) {\n                fileInputRef.current.value = \"\";\n            }\n            setSelectedFile(null);\n        } catch (error) {\n            console.error(\"Error al procesar mensaje:\", error);\n        }\n    };\n    const createRoom = async (name, description = \"\", isPrivate = false, members = [])=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms`, {\n                name,\n                description,\n                isPrivate,\n                members\n            });\n            // No need to manually add to rooms array, the socket event will handle it\n            return data;\n        } catch (error) {\n            console.error(\"Error creating room:\", error);\n            throw error;\n        }\n    };\n    const updateRoom = async (roomId, updateData)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].put(`${API_URL}/rooms/${roomId}`, updateData);\n            // Update the room in the local state to immediately reflect changes\n            setRooms((prevRooms)=>prevRooms.map((room)=>room._id === roomId ? {\n                        ...room,\n                        ...data\n                    } : room));\n            return data;\n        } catch (error) {\n            console.error(\"Error updating room:\", error);\n            throw error;\n        }\n    };\n    const joinRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin adding others)\n            // Otherwise use current user's ID (for self-joining)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error joining room:\", error);\n            throw error;\n        }\n    };\n    const leaveRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin removing others)\n            // Otherwise use current user's ID (for self-leaving)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error leaving room:\", error);\n            throw error;\n        }\n    };\n    const setTyping = (isTyping)=>{\n        if (!activeChat || !socketRef.current) return;\n        const typingData = {\n            isTyping,\n            ...activeChat.type === \"private\" ? {\n                recipientId: activeChat.id\n            } : {\n                roomId: activeChat.id\n            }\n        };\n        socketRef.current.emit(\"typing\", typingData);\n    };\n    const clearChatHistory = async (recipientId)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/direct/${recipientId}`);\n            return {\n                success: true,\n                message: \"Chat history cleared successfully\"\n            };\n        } catch (error) {\n            console.error(\"Error clearing chat history:\", error);\n            return {\n                success: false,\n                message: \"Failed to clear chat history\"\n            };\n        }\n    };\n    // Implementacin de retryFileUpload\n    const retryFileUpload = (file)=>{\n        if (!file.tempId) return;\n        // Reset progress\n        const chatId = `${activeChat?.type}-${activeChat?.id}`;\n        updateUploadingFiles(chatId, file.tempId, {\n            progress: 0,\n            error: undefined\n        });\n        // Prepare for re-upload\n        if (file.data) {\n            // Es un archivo ya convertido a base64\n            uploadLargeFileToServer(file);\n        } else if (file.fileId) {\n            // Remover el error pero mantener el progreso como completado\n            // ya que el archivo ya est subido\n            updateUploadingFiles(chatId, file.tempId, {\n                progress: 100,\n                error: undefined\n            });\n        }\n    };\n    // Funcin auxiliar para subir un archivo grande directamente al servidor\n    const uploadLargeFileToServer = async (attachment)=>{\n        if (!attachment.tempId) {\n            attachment.tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        }\n        try {\n            // Convertir datos base64 a Blob para subir\n            const base64Data = attachment.data || \"\";\n            const byteCharacters = atob(base64Data);\n            const byteArrays = [];\n            for(let offset = 0; offset < byteCharacters.length; offset += 512){\n                const slice = byteCharacters.slice(offset, offset + 512);\n                const byteNumbers = new Array(slice.length);\n                for(let i = 0; i < slice.length; i++){\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n                const byteArray = new Uint8Array(byteNumbers);\n                byteArrays.push(byteArray);\n            }\n            const blob = new Blob(byteArrays, {\n                type: attachment.contentType\n            });\n            const file = new File([\n                blob\n            ], attachment.filename, {\n                type: attachment.contentType\n            });\n            // Crear FormData para la subida\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            // Iniciar la carga y actualizar el estado\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: undefined\n            });\n            // Realizar la subida con seguimiento de progreso\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/file-storage/upload`, formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                },\n                onUploadProgress: (progressEvent)=>{\n                    const percentCompleted = progressEvent.total ? Math.round(progressEvent.loaded * 100 / progressEvent.total) : 0;\n                    console.log(`Progreso de subida para ${attachment.tempId}: ${percentCompleted}%`);\n                    updateUploadingFiles(chatId, attachment.tempId, {\n                        progress: percentCompleted,\n                        error: undefined\n                    });\n                    // Si el archivo ha terminado de cargarse (100%), lo eliminamos de la lista despus de un segundo\n                    if (percentCompleted === 100) {\n                        console.log(`Subida completada para ${attachment.tempId}, eliminando en 1 segundo`);\n                        // Esperar un segundo para que el usuario vea que se complet y luego eliminar\n                        setTimeout(()=>{\n                            updateUploadingFiles(chatId, attachment.tempId, null);\n                        }, 1000);\n                    }\n                }\n            });\n            if (response.data && response.data.fileId) {\n                return response.data.fileId;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error al subir archivo:\", error);\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: error.message || \"Error al subir el archivo\"\n            });\n            return null;\n        }\n    };\n    // Esta funcin se encarga de marcar un mensaje como ledo\n    const handleMarkAsRead = (messageId)=>{\n        if (!socketRef.current) return;\n        socketRef.current.emit(\"mark_message_read\", {\n            messageId\n        });\n        // Actualizar el estado de mensajes localmente\n        setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                    ...msg,\n                    isRead: true\n                } : msg));\n    };\n    // Esta funcin carga ms mensajes para la paginacin\n    const fetchMoreMessages = async (page)=>{\n        if (!activeChat || !user || !isAuthenticated) return;\n        try {\n            let endpoint = \"\";\n            if (activeChat.type === \"private\") {\n                endpoint = `${API_URL}/chats/direct/${activeChat.id}?page=${page}`;\n            } else {\n                endpoint = `${API_URL}/chats/room/${activeChat.id}?page=${page}`;\n            }\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n            // Aadir los mensajes anteriores al inicio del array de mensajes\n            setMessages((prev)=>[\n                    ...response.data,\n                    ...prev\n                ]);\n            return response.data.length;\n        } catch (error) {\n            console.error(\"Error al cargar m\\xe1s mensajes:\", error);\n            return 0;\n        }\n    };\n    const deleteMessage = async (messageId, deleteForEveryone)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/message/${messageId}`, {\n                params: {\n                    deleteForEveryone\n                }\n            });\n            if (response.data.success) {\n                // Eliminar el mensaje del estado local\n                setMessages((prev)=>prev.filter((msg)=>msg._id !== messageId));\n                return true;\n            }\n            return false;\n        } catch (error) {\n            console.error(\"Error al eliminar mensaje:\", error);\n            return false;\n        }\n    };\n    const forwardMessage = async (messageId, targetType, targetId)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/chats/forward/${messageId}`, {\n                targetType,\n                targetId\n            }, {\n                headers: {\n                    Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n                }\n            });\n            if (response.data.success) {\n                // Si el mensaje se reenvi exitosamente, actualizar los mensajes si corresponde\n                const forwardedMessage = response.data.forwardedMessage;\n                // Si estamos viendo la conversacin/sala a la que se reenvi el mensaje, agregar el mensaje\n                if (targetType === \"private\" && activeChat?.type === \"private\" && activeChat.id === targetId || targetType === \"room\" && activeChat?.type === \"room\" && activeChat.id === targetId) {\n                    setMessages((prev)=>[\n                            ...prev,\n                            forwardedMessage\n                        ]);\n                }\n                console.log(\"Mensaje reenviado\");\n            }\n        } catch (error) {\n            console.error(\"Error al reenviar mensaje:\", error);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatContext.Provider, {\n        value: {\n            activeChat,\n            messages,\n            rooms,\n            onlineUsers,\n            users,\n            typingUsers,\n            isLoading,\n            isLoadingMessages,\n            unreadMessages,\n            uploadingFiles,\n            setActiveChat: handleActiveChatChange,\n            sendMessage,\n            markAsRead: handleMarkAsRead,\n            startTyping: ()=>setTyping(true),\n            stopTyping: ()=>setTyping(false),\n            loadMoreMessages: fetchMoreMessages,\n            retryFileUpload,\n            cancelFileUpload,\n            deleteMessage,\n            forwardMessage\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/ChatContext.tsx\",\n        lineNumber: 917,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXRDb250ZXh0LnRzeD8wYjU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaW8sIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuL0F1dGhDb250ZXh0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBfaWQ/OiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgYXZhdGFyOiBzdHJpbmc7XG4gIGlzT25saW5lPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGVudW0gRmlsZVR5cGUge1xuICBJTUFHRSA9ICdpbWFnZScsXG4gIFZJREVPID0gJ3ZpZGVvJyxcbiAgRE9DVU1FTlQgPSAnZG9jdW1lbnQnLFxuICBBVURJTyA9ICdhdWRpbydcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlQXR0YWNobWVudCB7XG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gIGZpbGVUeXBlOiBGaWxlVHlwZTtcbiAgZGF0YT86IHN0cmluZzsgLy8gQmFzZTY0IGVuY29kZWQgZGF0YSBwYXJhIGFyY2hpdm9zIHBlcXVlw7Fvc1xuICBzaXplPzogbnVtYmVyO1xuICBmaWxlSWQ/OiBzdHJpbmc7IC8vIElEIHBhcmEgYXJjaGl2b3MgZ3JhbmRlcyBhbG1hY2VuYWRvcyBwb3Igc2VwYXJhZG9cbiAgaXNMYXJnZUZpbGU/OiBib29sZWFuOyAvLyBJbmRpY2Egc2kgZWwgYXJjaGl2byBlc3TDoSBhbG1hY2VuYWRvIHBvciBzZXBhcmFkb1xuICBpc0NodW5rPzogYm9vbGVhbjtcbiAgb3JpZ2luYWxGaWxlbmFtZT86IHN0cmluZztcbiAgY2h1bmtJbmRleD86IG51bWJlcjtcbiAgdG90YWxDaHVua3M/OiBudW1iZXI7XG4gIHRlbXBJZD86IHN0cmluZzsgLy8gSUQgdGVtcG9yYWwgcGFyYSBzZWd1aW1pZW50byBkZSBjYXJnYVxufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIF9pZDogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nO1xuICBhdHRhY2htZW50cz86IEZpbGVBdHRhY2htZW50W107XG4gIHNlbmRlcjogVXNlcjtcbiAgcmVjaXBpZW50Pzogc3RyaW5nO1xuICByb29tPzogc3RyaW5nO1xuICBpc1JlYWQ6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUm9vbSB7XG4gIF9pZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBpbWFnZT86IHN0cmluZztcbiAgY3JlYXRvcjogVXNlcjtcbiAgbWVtYmVyczogVXNlcltdO1xuICBpc1ByaXZhdGU6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICByZW1vdmVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENoYXRDb250ZXh0VHlwZSB7XG4gIGFjdGl2ZUNoYXQ6IHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsO1xuICBtZXNzYWdlczogTWVzc2FnZVtdO1xuICByb29tczogUm9vbVtdO1xuICBvbmxpbmVVc2VyczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj47XG4gIHVzZXJzOiBVc2VyW107XG4gIHR5cGluZ1VzZXJzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPjtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBpc0xvYWRpbmdNZXNzYWdlczogYm9vbGVhbjtcbiAgdW5yZWFkTWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHVwbG9hZGluZ0ZpbGVzOiBSZWNvcmQ8c3RyaW5nLCB7IHByb2dyZXNzOiBudW1iZXIsIGVycm9yPzogc3RyaW5nIH0+O1xuICBzZXRBY3RpdmVDaGF0OiAoY2hhdDogeyB0eXBlOiAncHJpdmF0ZScgfCAncm9vbScsIGlkOiBzdHJpbmcgfSB8IG51bGwpID0+IHZvaWQ7XG4gIHNlbmRNZXNzYWdlOiAoY29udGVudDogc3RyaW5nLCBzZWxlY3RlZEZpbGU6IEZpbGUgfCBudWxsKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBtYXJrQXNSZWFkOiAobWVzc2FnZUlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHN0YXJ0VHlwaW5nOiAoKSA9PiB2b2lkO1xuICBzdG9wVHlwaW5nOiAoKSA9PiB2b2lkO1xuICBsb2FkTW9yZU1lc3NhZ2VzOiAocGFnZTogbnVtYmVyKSA9PiBQcm9taXNlPG51bWJlcj47XG4gIHJldHJ5RmlsZVVwbG9hZDogKGZpbGU6IEZpbGVBdHRhY2htZW50KSA9PiB2b2lkO1xuICBjYW5jZWxGaWxlVXBsb2FkOiAoZmlsZTogRmlsZUF0dGFjaG1lbnQpID0+IHZvaWQ7XG4gIGRlbGV0ZU1lc3NhZ2U6IChtZXNzYWdlSWQ6IHN0cmluZywgZGVsZXRlRm9yRXZlcnlvbmU6IGJvb2xlYW4pID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGZvcndhcmRNZXNzYWdlOiAobWVzc2FnZUlkOiBzdHJpbmcsIHRhcmdldFR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgdGFyZ2V0SWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuY29uc3QgQ2hhdENvbnRleHQgPSBjcmVhdGVDb250ZXh0PENoYXRDb250ZXh0VHlwZT4oe1xuICBhY3RpdmVDaGF0OiBudWxsLFxuICBtZXNzYWdlczogW10sXG4gIHJvb21zOiBbXSxcbiAgb25saW5lVXNlcnM6IHt9LFxuICB1c2VyczogW10sXG4gIHR5cGluZ1VzZXJzOiB7fSxcbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBpc0xvYWRpbmdNZXNzYWdlczogZmFsc2UsXG4gIHVucmVhZE1lc3NhZ2VzOiB7fSxcbiAgdXBsb2FkaW5nRmlsZXM6IHt9LFxuICBzZXRBY3RpdmVDaGF0OiAoKSA9PiB7fSxcbiAgc2VuZE1lc3NhZ2U6IGFzeW5jICgpID0+IHt9LFxuICBtYXJrQXNSZWFkOiAoKSA9PiB7fSxcbiAgc3RhcnRUeXBpbmc6ICgpID0+IHt9LFxuICBzdG9wVHlwaW5nOiAoKSA9PiB7fSxcbiAgbG9hZE1vcmVNZXNzYWdlczogYXN5bmMgKCkgPT4gMCxcbiAgcmV0cnlGaWxlVXBsb2FkOiAoKSA9PiB7fSxcbiAgY2FuY2VsRmlsZVVwbG9hZDogKCkgPT4ge30sXG4gIGRlbGV0ZU1lc3NhZ2U6IGFzeW5jICgpID0+IGZhbHNlLFxuICBmb3J3YXJkTWVzc2FnZTogYXN5bmMgKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUNoYXQgPSAoKSA9PiB1c2VDb250ZXh0KENoYXRDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IENoYXRQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCB7IHVzZXIsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCBbYWN0aXZlQ2hhdCwgc2V0QWN0aXZlQ2hhdF0gPSB1c2VTdGF0ZTx7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtyb29tcywgc2V0Um9vbXNdID0gdXNlU3RhdGU8Um9vbVtdPihbXSk7XG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGU8VXNlcltdPihbXSk7XG4gIGNvbnN0IFtvbmxpbmVVc2Vycywgc2V0T25saW5lVXNlcnNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgYm9vbGVhbj4+KHt9KTtcbiAgY29uc3QgW3R5cGluZ1VzZXJzLCBzZXRUeXBpbmdVc2Vyc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0xvYWRpbmdNZXNzYWdlcywgc2V0SXNMb2FkaW5nTWVzc2FnZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc29ja2V0Q29ubmVjdGVkLCBzZXRTb2NrZXRDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdW5yZWFkTWVzc2FnZXMsIHNldFVucmVhZE1lc3NhZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KHt9KTtcbiAgY29uc3QgW3VwbG9hZGluZ0ZpbGVzQnlDaGF0LCBzZXRVcGxvYWRpbmdGaWxlc0J5Q2hhdF0gPSB1c2VTdGF0ZTx7XG4gICAgW2NoYXRJZDogc3RyaW5nXToge1xuICAgICAgW2ZpbGVJZDogc3RyaW5nXToge1xuICAgICAgICBwcm9ncmVzczogbnVtYmVyO1xuICAgICAgICBlcnJvcj86IHN0cmluZztcbiAgICAgIH1cbiAgICB9XG4gIH0+KHt9KTtcbiAgY29uc3QgW3NlbGVjdGVkRmlsZSwgc2V0U2VsZWN0ZWRGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IHVwbG9hZGluZ0ZpbGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0KSByZXR1cm4ge307XG4gICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICByZXR1cm4gdXBsb2FkaW5nRmlsZXNCeUNoYXRbY2hhdElkXSB8fCB7fTtcbiAgfSwgW2FjdGl2ZUNoYXQsIHVwbG9hZGluZ0ZpbGVzQnlDaGF0XSk7XG5cbiAgY29uc3QgdXBkYXRlVXBsb2FkaW5nRmlsZXMgPSB1c2VDYWxsYmFjaygoXG4gICAgY2hhdElkOiBzdHJpbmcsXG4gICAgZmlsZUlkOiBzdHJpbmcsXG4gICAgZGF0YTogeyBwcm9ncmVzczogbnVtYmVyOyBlcnJvcj86IHN0cmluZyB9IHwgbnVsbFxuICApID0+IHtcbiAgICBjb25zb2xlLmxvZyhgQWN0dWFsaXphbmRvIGVzdGFkbyBkZSBhcmNoaXZvICR7ZmlsZUlkfSBlbiBjaGF0ICR7Y2hhdElkfTpgLCBkYXRhKTtcbiAgICBcbiAgICBzZXRVcGxvYWRpbmdGaWxlc0J5Q2hhdChwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0geyAuLi5wcmV2IH07XG4gICAgICBcbiAgICAgIC8vIFNpIG5vIGV4aXN0ZSBlbCBjaGF0LCBsbyBjcmVhbW9zXG4gICAgICBpZiAoIW5ld1N0YXRlW2NoYXRJZF0pIHtcbiAgICAgICAgbmV3U3RhdGVbY2hhdElkXSA9IHt9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaSBkYXRhIGVzIG51bGwsIGVsaW1pbmFtb3MgZWwgYXJjaGl2b1xuICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgaWYgKG5ld1N0YXRlW2NoYXRJZF1bZmlsZUlkXSkge1xuICAgICAgICAgIGNvbnN0IHsgW2ZpbGVJZF06IF8sIC4uLnJlc3RGaWxlcyB9ID0gbmV3U3RhdGVbY2hhdElkXTtcbiAgICAgICAgICBuZXdTdGF0ZVtjaGF0SWRdID0gcmVzdEZpbGVzO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBFbGltaW5hZG8gYXJjaGl2byAke2ZpbGVJZH0gZGUgY2hhdCAke2NoYXRJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWN0dWFsaXphbW9zIG8gYWdyZWdhbW9zIGVsIGFyY2hpdm9cbiAgICAgICAgbmV3U3RhdGVbY2hhdElkXVtmaWxlSWRdID0gZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coYEFjdHVhbGl6YWRvIGFyY2hpdm8gJHtmaWxlSWR9IGVuIGNoYXQgJHtjaGF0SWR9IGNvbiBwcm9ncmVzbyAke2RhdGEucHJvZ3Jlc3N9JWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjYW5jZWxGaWxlVXBsb2FkID0gKGZpbGU6IEZpbGVBdHRhY2htZW50KSA9PiB7XG4gICAgaWYgKCFmaWxlLnRlbXBJZCB8fCAhYWN0aXZlQ2hhdCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQudHlwZX0tJHthY3RpdmVDaGF0LmlkfWA7XG4gICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCBmaWxlLnRlbXBJZCwgbnVsbCk7XG4gIH07XG5cbiAgY29uc3Qgc29ja2V0UmVmID0gdXNlUmVmPFNvY2tldCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjdXJyZW50QWN0aXZlQ2hhdFJlZiA9IHVzZVJlZihhY3RpdmVDaGF0KTtcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuICBcbiAgLy8gS2VlcCB0aGUgcmVmIGluIHN5bmMgd2l0aCB0aGUgc3RhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50ID0gYWN0aXZlQ2hhdDtcbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIGNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuICBcbiAgLy8gSW5pdGlhbGl6ZSBzb2NrZXQgY29ubmVjdGlvbiB3aGVuIGF1dGhlbnRpY2F0ZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCB8fCAhdXNlcikge1xuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgc2V0U29ja2V0Q29ubmVjdGVkKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgICBcbiAgICBpZiAoIXRva2VuKSByZXR1cm47XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQgPSBpbyhBUElfVVJMLCB7XG4gICAgICBhdXRoOiB7IHRva2VuIH0sXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAvLyBBdW1lbnRhciBlbCB0aWVtcG8gZGUgZXNwZXJhIHBhcmEgcGVybWl0aXIgZW52w61vIGRlIGFyY2hpdm9zIGdyYW5kZXNcbiAgICAgIHRpbWVvdXQ6IDYwMDAwIC8vIGF1bWVudGFyIGVsIHRpZW1wbyBkZSBlc3BlcmEgYSA2MCBzZWd1bmRvc1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFNvY2tldCBldmVudCBsaXN0ZW5lcnNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICBzZXRTb2NrZXRDb25uZWN0ZWQodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ25ld19tZXNzYWdlJywgKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNoYXQgPSBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50O1xuICAgICAgXG4gICAgICAvLyBJZGVudGlmaWNhciBsYSBjbGF2ZSBkZSBjaGF0IHBhcmEgc2VndWltaWVudG8gZGUgbm90aWZpY2FjaW9uZXNcbiAgICAgIGxldCBjaGF0S2V5ID0gJyc7XG4gICAgICBpZiAobWVzc2FnZS5yb29tKSB7XG4gICAgICAgIGNoYXRLZXkgPSBgcm9vbS0ke21lc3NhZ2Uucm9vbX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhdEtleSA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gdXNlci5pZCA/IGBwcml2YXRlLSR7bWVzc2FnZS5yZWNpcGllbnR9YCA6IGBwcml2YXRlLSR7bWVzc2FnZS5zZW5kZXIuX2lkfWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNZW5zYWplIHJlY2liaWRvOicsIG1lc3NhZ2UsICdDaGF0IGFjdGl2bzonLCBhY3RpdmVDaGF0KTtcbiAgICAgIFxuICAgICAgLy8gU29sbyBhZ3JlZ2FyIGVsIG1lbnNhamUgc2kgZXMgcmVsZXZhbnRlIHBhcmEgZWwgY2hhdCBhY3Rpdm9cbiAgICAgIGlmIChcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJyAmJiBcbiAgICAgICAgICAoKG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gYWN0aXZlQ2hhdC5pZCAmJiBtZXNzYWdlLnJlY2lwaWVudCA9PT0gdXNlci5pZCkgfHwgXG4gICAgICAgICAgIChtZXNzYWdlLnNlbmRlci5faWQgPT09IHVzZXIuaWQgJiYgbWVzc2FnZS5yZWNpcGllbnQgPT09IGFjdGl2ZUNoYXQuaWQpKSkgfHxcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdyb29tJyAmJiBtZXNzYWdlLnJvb20gPT09IGFjdGl2ZUNoYXQuaWQpXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FncmVnYW5kbyBtZW5zYWplIGFsIGNoYXQgYWN0aXZvOicsIG1lc3NhZ2UpO1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBtZXNzYWdlXSk7XG4gICAgICB9IFxuICAgICAgLy8gU2kgZWwgbWVuc2FqZSBubyBlcyBwYXJhIGVsIGNoYXQgYWN0aXZvIHkgbm8gZnVlIGVudmlhZG8gcG9yIGVsIHVzdWFyaW8gYWN0dWFsLCBpbmNyZW1lbnRhciBjb250YWRvclxuICAgICAgZWxzZSBpZiAobWVzc2FnZS5zZW5kZXIuX2lkICE9PSB1c2VyLmlkICYmIGNoYXRLZXkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyBtZXNzYWdlIG5vdGlmaWNhdGlvbjonLCBjaGF0S2V5LCBtZXNzYWdlKTtcbiAgICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgW2NoYXRLZXldOiAocHJldltjaGF0S2V5XSB8fCAwKSArIDFcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd1c2VyX3N0YXR1c19jaGFuZ2UnLCAoeyB1c2VySWQsIGlzT25saW5lIH0pID0+IHtcbiAgICAgIHNldE9ubGluZVVzZXJzKHByZXYgPT4gKHsgLi4ucHJldiwgW3VzZXJJZF06IGlzT25saW5lIH0pKTtcbiAgICB9KTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbigndHlwaW5nX2luZGljYXRvcicsIChkYXRhOiB7IHVzZXJJZDogc3RyaW5nLCB1c2VyTmFtZTogc3RyaW5nLCBpc1R5cGluZzogYm9vbGVhbiwgcm9vbUlkPzogc3RyaW5nLCBzZW5kZXJJZD86IHN0cmluZyB9KSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVDaGF0ID0gY3VycmVudEFjdGl2ZUNoYXRSZWYuY3VycmVudDtcbiAgICAgIGlmIChcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJyAmJiBkYXRhLnNlbmRlcklkID09PSBhY3RpdmVDaGF0LmlkKSB8fFxuICAgICAgICAoYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nICYmIGRhdGEucm9vbUlkID09PSBhY3RpdmVDaGF0LmlkKVxuICAgICAgKSB7XG4gICAgICAgIC8vIEFsbWFjZW5hciBub21icmUgZW4gbHVnYXIgZGUgc29sbyBsYSBiYW5kZXJhIGJvb2xlYW5hXG4gICAgICAgIHNldFR5cGluZ1VzZXJzKHByZXYgPT4gKHsgXG4gICAgICAgICAgLi4ucHJldiwgXG4gICAgICAgICAgW2RhdGEudXNlcklkXTogZGF0YS5pc1R5cGluZyA/IGRhdGEudXNlck5hbWUgOiBmYWxzZSBcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdtZXNzYWdlX3JlYWQnLCAoeyBtZXNzYWdlSWQgfSkgPT4ge1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBcbiAgICAgICAgcHJldi5tYXAobXNnID0+IFxuICAgICAgICAgIG1zZy5faWQgPT09IG1lc3NhZ2VJZCA/IHsgLi4ubXNnLCBpc1JlYWQ6IHRydWUgfSA6IG1zZ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSBuZXcgcm9vbSBjcmVhdGlvbnNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbmV3X3Jvb20nLCAocm9vbTogUm9vbSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ05ldyByb29tIHJlY2VpdmVkOicsIHJvb20pO1xuICAgICAgc2V0Um9vbXMocHJldiA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByb29tIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShyID0+IHIuX2lkID09PSByb29tLl9pZCk7XG4gICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xuICAgICAgICByZXR1cm4gWy4uLnByZXYsIHJvb21dO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHJvb20gdXBkYXRlcyAobWVtYmVycyBhZGRlZC9yZW1vdmVkKVxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdyb29tX3VwZGF0ZWQnLCAocm9vbTogUm9vbSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1Jvb20gdXBkYXRlZDonLCByb29tKTtcbiAgICAgIGlmIChyb29tLnJlbW92ZWQpIHtcbiAgICAgICAgLy8gSWYgdGhpcyByb29tIHdhcyByZW1vdmVkIGZvciB0aGlzIHVzZXIsIHJlbW92ZSBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgIHNldFJvb21zKHByZXYgPT4gcHJldi5maWx0ZXIociA9PiByLl9pZCAhPT0gcm9vbS5faWQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGFjdGl2ZSBjaGF0IGlzIHRoaXMgcm9vbSwgY2xlYXIgaXRcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhdCA9IGN1cnJlbnRBY3RpdmVDaGF0UmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChhY3RpdmVDaGF0Py50eXBlID09PSAncm9vbScgJiYgYWN0aXZlQ2hhdC5pZCA9PT0gcm9vbS5faWQpIHtcbiAgICAgICAgICBzZXRBY3RpdmVDaGF0KG51bGwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHJvb20gaW4gdGhlIGxpc3RcbiAgICAgICAgc2V0Um9vbXMocHJldiA9PiBwcmV2Lm1hcChyID0+IHIuX2lkID09PSByb29tLl9pZCA/IHJvb20gOiByKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRXNjdWNoYXIgZXZlbnRvcyBkZSBlbGltaW5hY2nDs24gZGUgbWVuc2FqZXNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbWVzc2FnZV9kZWxldGVkJywgKHsgbWVzc2FnZUlkLCBkZWxldGVGb3JFdmVyeW9uZSB9KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTWVuc2FqZSBlbGltaW5hZG8gcmVjaWJpZG86JywgbWVzc2FnZUlkLCBkZWxldGVGb3JFdmVyeW9uZSk7XG4gICAgICBpZiAoZGVsZXRlRm9yRXZlcnlvbmUpIHtcbiAgICAgICAgLy8gU2kgZnVlIGVsaW1pbmFkbyBwYXJhIHRvZG9zLCBhY3R1YWxpemFyIGxhIFVJXG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5maWx0ZXIobXNnID0+IG1zZy5faWQgIT09IG1lc3NhZ2VJZCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1NvY2tldCBkaXNjb25uZWN0ZWQnKTtcbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfTtcbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlciwgQVBJX1VSTF0pO1xuICBcbiAgLy8gTG9hZCBpbml0aWFsIGRhdGE6IHVzZXJzIGFuZCByb29tc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmZXRjaEluaXRpYWxEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgW3VzZXJzUmVzcG9uc2UsIHJvb21zUmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS91c2Vyc2ApLFxuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS9yb29tcy9teWApXG4gICAgICAgIF0pO1xuICAgICAgICBcbiAgICAgICAgc2V0VXNlcnModXNlcnNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgc2V0Um9vbXMocm9vbXNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBpbml0aWFsIG9ubGluZSBzdGF0dXNcbiAgICAgICAgY29uc3QgaW5pdGlhbE9ubGluZVN0YXR1czogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbiAgICAgICAgdXNlcnNSZXNwb25zZS5kYXRhLmZvckVhY2goKHVzZXI6IFVzZXIpID0+IHtcbiAgICAgICAgICBpbml0aWFsT25saW5lU3RhdHVzW3VzZXIuX2lkIV0gPSB1c2VyLmlzT25saW5lIHx8IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0T25saW5lVXNlcnMoaW5pdGlhbE9ubGluZVN0YXR1cyk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW5pdGlhbCBkYXRhOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaEluaXRpYWxEYXRhKCk7XG4gIH0sIFtpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEN1YW5kbyBzZSBpbmljaWEgZWwgc29ja2V0IHkgc2UgY29uZWN0YSwgc29saWNpdGFtb3MgZWwgZXN0YWRvIGFjdHVhbCBkZSBtZW5zYWplcyBubyBsZcOtZG9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNvY2tldENvbm5lY3RlZCAmJiBzb2NrZXRSZWYuY3VycmVudCAmJiB1c2VyKSB7XG4gICAgICAvLyBTb2xpY2l0YXIgbWVuc2FqZXMgbm8gbGXDrWRvcyBhbCBzZXJ2aWRvclxuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnZ2V0X3VucmVhZF9tZXNzYWdlcycpO1xuICAgICAgXG4gICAgICAvLyBFc2N1Y2hhciBsYSByZXNwdWVzdGEgY29uIGVsIHJlY3VlbnRvIGRlIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd1bnJlYWRfbWVzc2FnZXNfY291bnQnLCAodW5yZWFkQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCB1bnJlYWQgY291bnRzOicsIHVucmVhZENvdW50cyk7XG4gICAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHVucmVhZENvdW50cyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQ/Lm9mZigndW5yZWFkX21lc3NhZ2VzX2NvdW50Jyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3NvY2tldENvbm5lY3RlZCwgdXNlcl0pO1xuXG4gIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxvcyBtZW5zYWplcyBzZSBtYXJxdWVuIGNvbW8gbGXDrWRvcyBjdWFuZG8gc2UgYWJyZSB1biBjaGF0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZUNoYXQgJiYgc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIC8vIENyZWFyIHVuYSBjbGF2ZSBwYXJhIGVsIGNoYXQgYWN0dWFsXG4gICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIFxuICAgICAgLy8gUmVzZXRlYXIgZWwgY29udGFkb3IgZGUgbWVuc2FqZXMgbm8gbGXDrWRvcyBwYXJhIGVzdGUgY2hhdFxuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gTm90aWZpY2FyIGFsIHNlcnZpZG9yIHF1ZSBsb3MgbWVuc2FqZXMgc2UgaGFuIGxlw61kb1xuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICBjaGF0SWQ6IGFjdGl2ZUNoYXQuaWQsXG4gICAgICAgIGNoYXRUeXBlOiBhY3RpdmVDaGF0LnR5cGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIC8vIEZ1bmNpw7NuIHBhcmEgbWFuZWphciBlbCBjYW1iaW8gZGUgY2hhdCBhY3Rpdm9cbiAgY29uc3QgaGFuZGxlQWN0aXZlQ2hhdENoYW5nZSA9IChjaGF0OiB7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xuICAgIC8vIExpbXBpYXIgbGFzIG5vdGlmaWNhY2lvbmVzIG5vIGxlw61kYXMgY3VhbmRvIHNlIGFjdGl2YSB1biBjaGF0XG4gICAgaWYgKGNoYXQpIHtcbiAgICAgIGNvbnN0IGNoYXRLZXkgPSBgJHtjaGF0LnR5cGV9LSR7Y2hhdC5pZH1gO1xuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgXG4gICAgc2V0QWN0aXZlQ2hhdChjaGF0KTtcbiAgfTtcblxuICAvLyBFZmVjdG8gcGFyYSBhY3R1YWxpemFyIGxvcyBtZW5zYWplcyBjdWFuZG8gY2FtYmlhIGVsIGNoYXQgYWN0aXZvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0IHx8ICFpc0F1dGhlbnRpY2F0ZWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBSZXNldGVhciBlbCBlc3RhZG8gYWwgY2FtYmlhciBkZSBjaGF0XG4gICAgc2V0TWVzc2FnZXMoW10pO1xuICAgIHNldElzTG9hZGluZ01lc3NhZ2VzKHRydWUpO1xuICAgIFxuICAgIC8vIFJlaW5pY2lhciBlc3RhZG9zIGRlIG1lbnNhamVzIG5vIGxlw61kb3MgeSBhcmNoaXZvcyBlbiBjYXJnYVxuICAgIGlmIChhY3RpdmVDaGF0KSB7XG4gICAgICAvLyBMaW1waWFyIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgICAgaWYgKHByZXZbY2hhdEtleV0pIHtcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4ucHJldiB9O1xuICAgICAgICAgIGRlbGV0ZSBuZXdTdGF0ZVtjaGF0S2V5XTtcbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQXNlZ3VyYXJub3MgZGUgcXVlIGxhIHNlY2Npw7NuIFwiQXJjaGl2b3MgZW4gcHJvY2Vzb1wiIGRlc2FwYXJlemNhIGFsIGNhbWJpYXIgZGUgY2hhdFxuICAgICAgLy8gaW5jbHVzbyBjdWFuZG8geWEgaGFiw61hIHRlcm1pbmFkbyBsYSBjYXJnYSBjb24gMTAwJVxuICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIGlmIChjaGF0SWQgaW4gdXBsb2FkaW5nRmlsZXNCeUNoYXQpIHtcbiAgICAgICAgY29uc3QgaGFzQ29tcGxldGVkVXBsb2FkcyA9IE9iamVjdC52YWx1ZXModXBsb2FkaW5nRmlsZXNCeUNoYXRbY2hhdElkXSlcbiAgICAgICAgICAuc29tZShzdGF0dXMgPT4gc3RhdHVzLnByb2dyZXNzID09PSAxMDApO1xuICAgICAgICAgIFxuICAgICAgICBpZiAoaGFzQ29tcGxldGVkVXBsb2Fkcykge1xuICAgICAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7Li4ucHJldn07XG4gICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXTtcbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvbGljaXRhciBtZW5zYWplcyBhbCBzZXJ2aWRvclxuICAgIGNvbnN0IGZldGNoTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJykge1xuICAgICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gdXNlciByb29tIGZvciBkaXJlY3QgbWVzc2FnZXNcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnam9pbl9yb29tJywgeyB1c2VySWQ6IGFjdGl2ZUNoYXQuaWQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5kcG9pbnQgPSBgJHtBUElfVVJMfS9jaGF0cy9yb29tLyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gcm9vbVxuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5lbWl0KCdqb2luX3Jvb20nLCB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZW5kcG9pbnQpO1xuICAgICAgICBzZXRNZXNzYWdlcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmNhciBsb3MgbWVuc2FqZXMgY29tbyBsZcOtZG9zIGVuIGVsIHNlcnZpZG9yXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICAgICAgY2hhdFR5cGU6IGFjdGl2ZUNoYXQudHlwZSxcbiAgICAgICAgICAgIGNoYXRJZDogYWN0aXZlQ2hhdC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlczonLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmdNZXNzYWdlcyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaE1lc3NhZ2VzKCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIENsZWFuIHVwIC0gbGVhdmUgcm9vbXNcbiAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdyb29tJykge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbGVhdmVfcm9vbScsIHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFthY3RpdmVDaGF0LCB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEVmZWN0byBwYXJhIGxpbXBpYXIgYXJjaGl2b3MgY29tcGxldGFkb3MgYXV0b23DoXRpY2FtZW50ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFJldmlzYSBjYWRhIDIgc2VndW5kb3Mgc2kgaGF5IGFyY2hpdm9zIHF1ZSBlc3TDoW4gYWwgMTAwJSBxdWUgZGViYW4gZWxpbWluYXJzZVxuICAgIGNvbnN0IGNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsuLi5wcmV2fTtcbiAgICAgICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJldmlzYXIgdG9kb3MgbG9zIGNoYXRzXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1N0YXRlKS5mb3JFYWNoKGNoYXRJZCA9PiB7XG4gICAgICAgICAgLy8gUmV2aXNhciB0b2RvcyBsb3MgYXJjaGl2b3MgZW4gZXNlIGNoYXRcbiAgICAgICAgICBPYmplY3Qua2V5cyhuZXdTdGF0ZVtjaGF0SWRdKS5mb3JFYWNoKGZpbGVJZCA9PiB7XG4gICAgICAgICAgICAvLyBTaSB1biBhcmNoaXZvIGVzdMOhIGFsIDEwMCUsIGVsaW1pbmFybG9cbiAgICAgICAgICAgIGlmIChuZXdTdGF0ZVtjaGF0SWRdW2ZpbGVJZF0ucHJvZ3Jlc3MgPT09IDEwMCkge1xuICAgICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXVtmaWxlSWRdO1xuICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaSBlbCBjaGF0IHlhIG5vIHRpZW5lIGFyY2hpdm9zLCBlbGltaW5hciBlbCBjaGF0XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ld1N0YXRlW2NoYXRJZF0pLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIG5ld1N0YXRlW2NoYXRJZF07XG4gICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZXMgPyBuZXdTdGF0ZSA6IHByZXY7XG4gICAgICB9KTtcbiAgICB9LCAyMDAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjbGVhbnVwSW50ZXJ2YWwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAoY29udGVudDogc3RyaW5nLCBzZWxlY3RlZEZpbGU6IEZpbGUgfCBudWxsKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudCB8fCAhYWN0aXZlQ2hhdCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZW5lcmFyIHRlbXBJZHMgcGFyYSBsb3MgYXJjaGl2b3MgeSBjb252ZXJ0aXJsb3MgYSBGaWxlQXR0YWNobWVudFxuICAgICAgY29uc3QgYXR0YWNobWVudHNXaXRoSWRzOiBGaWxlQXR0YWNobWVudFtdID0gW107XG4gICAgICBcbiAgICAgIGlmIChzZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgY29uc3QgdGVtcElkID0gYHRlbXAtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5hciB0aXBvIGRlIGFyY2hpdm8gZGUgZm9ybWEgc2VndXJhXG4gICAgICAgIGxldCBmaWxlVHlwZSA9IEZpbGVUeXBlLkRPQ1VNRU5UO1xuICAgICAgICBjb25zdCBmaWxlVHlwZVN0cmluZyA9IHNlbGVjdGVkRmlsZS50eXBlIHx8ICcnOyAvLyBVc2FyIHN0cmluZyB2YWPDrW8gc2kgdHlwZSBlcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKGZpbGVUeXBlU3RyaW5nLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICAgICAgZmlsZVR5cGUgPSBGaWxlVHlwZS5JTUFHRTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlVHlwZVN0cmluZy5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xuICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuVklERU87XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGVTdHJpbmcuc3RhcnRzV2l0aCgnYXVkaW8vJykpIHtcbiAgICAgICAgICBmaWxlVHlwZSA9IEZpbGVUeXBlLkFVRElPO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuRE9DVU1FTlQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIG9iamV0byBGaWxlQXR0YWNobWVudCBwYXJhIGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgYXR0YWNobWVudDogRmlsZUF0dGFjaG1lbnQgPSB7XG4gICAgICAgICAgdGVtcElkLFxuICAgICAgICAgIGZpbGVuYW1lOiBzZWxlY3RlZEZpbGUubmFtZSB8fCAnYXJjaGl2bycsXG4gICAgICAgICAgY29udGVudFR5cGU6IHNlbGVjdGVkRmlsZS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgICAgICAgIGZpbGVUeXBlLFxuICAgICAgICAgIHNpemU6IHNlbGVjdGVkRmlsZS5zaXplIHx8IDBcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYXIgaW5kaWNhZG9yIGRlIGNhcmdhIGlubWVkaWF0YW1lbnRlIHBhcmEgdG9kb3MgbG9zIGFyY2hpdm9zXG4gICAgICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQ/LnR5cGV9LSR7YWN0aXZlQ2hhdD8uaWR9YDtcbiAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgdGVtcElkLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgZXMgdW4gYXJjaGl2byBncmFuZGUsIGxvIHByb2Nlc2Ftb3MgcGFyYSBzdWJpZGEgZW4gc2VndW5kbyBwbGFub1xuICAgICAgICBpZiAoc2VsZWN0ZWRGaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHsgLy8gTcOhcyBkZSA1TUJcbiAgICAgICAgICBhdHRhY2htZW50LmlzTGFyZ2VGaWxlID0gdHJ1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBMZWVyIGNvbW8gYmFzZTY0IHBhcmEgcHJlcHJvY2VzYW1pZW50b1xuICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ZGF0YSA9IHJlYWRlci5yZXN1bHQ/LnRvU3RyaW5nKCkgfHwgJyc7XG4gICAgICAgICAgICAgIC8vIFF1aXRhciBlbCBwcmVmaWpvIChlai4gXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiKVxuICAgICAgICAgICAgICBjb25zdCBiYXNlNjRDbGVhbiA9IGJhc2U2NGRhdGEuc3BsaXQoJywnKVsxXTtcbiAgICAgICAgICAgICAgYXR0YWNobWVudC5kYXRhID0gYmFzZTY0Q2xlYW47XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWdyZWdhciBhIGxhIGxpc3RhIGRlIGFkanVudG9zXG4gICAgICAgICAgYXR0YWNobWVudHNXaXRoSWRzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSW5pY2lhciBzdWJpZGEgZW4gc2VndW5kbyBwbGFub1xuICAgICAgICAgIHVwbG9hZExhcmdlRmlsZVRvU2VydmVyKGF0dGFjaG1lbnQpLnRoZW4oZmlsZUlkID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlSWQpIHtcbiAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBhdHRhY2htZW50IGNvbiBlbCBmaWxlSWRcbiAgICAgICAgICAgICAgYXR0YWNobWVudC5maWxlSWQgPSBmaWxlSWQ7XG4gICAgICAgICAgICAgIGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgPSB0cnVlO1xuICAgICAgICAgICAgICBhdHRhY2htZW50LmRhdGEgPSB1bmRlZmluZWQ7IC8vIEVsaW1pbmFyIGxvcyBkYXRvcyBiaW5hcmlvc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBwcm9ncmVzbyBhIDEwMCVcbiAgICAgICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCB0ZW1wSWQsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWJpZW5kbyBhcmNoaXZvOicsIGVycm9yKTtcbiAgICAgICAgICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCwgdGVtcElkLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRXJyb3IgYWwgc3ViaXIgZWwgYXJjaGl2bycgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUGFyYSBhcmNoaXZvcyBwZXF1ZcOxb3MgKDw1TUIpLCBsZWVybG9zIGNvbW8gYmFzZTY0IHkgZW52aWFyIGNvbiBlbCBtZW5zYWplXG4gICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChzZWxlY3RlZEZpbGUpO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gcmVhZGVyLnJlc3VsdD8udG9TdHJpbmcoKSB8fCAnJztcbiAgICAgICAgICAgICAgLy8gUXVpdGFyIGVsIHByZWZpam8gKGVqLiBcImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsXCIpXG4gICAgICAgICAgICAgIGNvbnN0IGJhc2U2NENsZWFuID0gYmFzZTY0ZGF0YS5zcGxpdCgnLCcpWzFdO1xuICAgICAgICAgICAgICBhdHRhY2htZW50LmRhdGEgPSBiYXNlNjRDbGVhbjtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ3JlZ2FyIGEgbGEgbGlzdGEgZGUgYWRqdW50b3NcbiAgICAgICAgICBhdHRhY2htZW50c1dpdGhJZHMucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYXJjYXIgY29tbyBjb21wbGV0YWRvIHRhbWJpw6luIHBhcmEgYXJjaGl2b3MgcGVxdWXDsW9zXG4gICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCB0ZW1wSWQsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcmVwYXJhciBkYXRvcyBkZWwgbWVuc2FqZVxuICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBhdHRhY2htZW50c1dpdGhJZHMsXG4gICAgICAgIC4uLihhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJyA/IHsgcmVjaXBpZW50SWQ6IGFjdGl2ZUNoYXQuaWQgfSA6IHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0VudmlhbmRvIG1lbnNhamU6JywgbWVzc2FnZURhdGEpO1xuICAgICAgXG4gICAgICAvLyBFbnZpYXIgZWwgbWVuc2FqZSBhIHRyYXbDqXMgZGVsIHNvY2tldFxuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnc2VuZF9tZXNzYWdlJywgbWVzc2FnZURhdGEsIChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXNwdWVzdGEgYWwgZW52aWFyIG1lbnNhamU6JywgcmVzcG9uc2UpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbnZpYXIgbWVuc2FqZTonLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBMaW1waWFyIGZvcm11bGFyaW8gZGVzcHXDqXMgZGUgZW52aWFyXG4gICAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIHNldFNlbGVjdGVkRmlsZShudWxsKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBwcm9jZXNhciBtZW5zYWplOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBjcmVhdGVSb29tID0gYXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb24gPSAnJywgaXNQcml2YXRlID0gZmFsc2UsIG1lbWJlcnM6IHN0cmluZ1tdID0gW10pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L3Jvb21zYCwge1xuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgaXNQcml2YXRlLFxuICAgICAgICBtZW1iZXJzLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE5vIG5lZWQgdG8gbWFudWFsbHkgYWRkIHRvIHJvb21zIGFycmF5LCB0aGUgc29ja2V0IGV2ZW50IHdpbGwgaGFuZGxlIGl0XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCB1cGRhdGVSb29tID0gYXN5bmMgKHJvb21JZDogc3RyaW5nLCB1cGRhdGVEYXRhOiB7IG5hbWU/OiBzdHJpbmc7IGRlc2NyaXB0aW9uPzogc3RyaW5nOyBpbWFnZT86IHN0cmluZzsgaXNQcml2YXRlPzogYm9vbGVhbiB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucHV0KGAke0FQSV9VUkx9L3Jvb21zLyR7cm9vbUlkfWAsIHVwZGF0ZURhdGEpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHJvb20gaW4gdGhlIGxvY2FsIHN0YXRlIHRvIGltbWVkaWF0ZWx5IHJlZmxlY3QgY2hhbmdlc1xuICAgICAgc2V0Um9vbXMocHJldlJvb21zID0+IFxuICAgICAgICBwcmV2Um9vbXMubWFwKHJvb20gPT4gXG4gICAgICAgICAgcm9vbS5faWQgPT09IHJvb21JZCA/IHsgLi4ucm9vbSwgLi4uZGF0YSB9IDogcm9vbVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBqb2luUm9vbSA9IGFzeW5jIChyb29tSWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VyICYmICF1c2VySWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gSWYgdXNlcklkIGlzIHByb3ZpZGVkLCB1c2UgaXQgKGZvciBhZG1pbiBhZGRpbmcgb3RoZXJzKVxuICAgICAgLy8gT3RoZXJ3aXNlIHVzZSBjdXJyZW50IHVzZXIncyBJRCAoZm9yIHNlbGYtam9pbmluZylcbiAgICAgIGNvbnN0IHRhcmdldFVzZXJJZCA9IHVzZXJJZCB8fCB1c2VyIS5pZDtcbiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vcm9vbXMvJHtyb29tSWR9L21lbWJlcnMvJHt0YXJnZXRVc2VySWR9YCk7XG4gICAgICAvLyBSb29tIHVwZGF0ZSB3aWxsIGJlIGhhbmRsZWQgYnkgc29ja2V0IGV2ZW50XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBsZWF2ZVJvb20gPSBhc3luYyAocm9vbUlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykgPT4ge1xuICAgIGlmICghdXNlciAmJiAhdXNlcklkKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHVzZXJJZCBpcyBwcm92aWRlZCwgdXNlIGl0IChmb3IgYWRtaW4gcmVtb3Zpbmcgb3RoZXJzKVxuICAgICAgLy8gT3RoZXJ3aXNlIHVzZSBjdXJyZW50IHVzZXIncyBJRCAoZm9yIHNlbGYtbGVhdmluZylcbiAgICAgIGNvbnN0IHRhcmdldFVzZXJJZCA9IHVzZXJJZCB8fCB1c2VyIS5pZDtcbiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtBUElfVVJMfS9yb29tcy8ke3Jvb21JZH0vbWVtYmVycy8ke3RhcmdldFVzZXJJZH1gKTtcbiAgICAgIC8vIFJvb20gdXBkYXRlIHdpbGwgYmUgaGFuZGxlZCBieSBzb2NrZXQgZXZlbnRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGVhdmluZyByb29tOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IHNldFR5cGluZyA9IChpc1R5cGluZzogYm9vbGVhbikgPT4ge1xuICAgIGlmICghYWN0aXZlQ2hhdCB8fCAhc29ja2V0UmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0eXBpbmdEYXRhID0ge1xuICAgICAgaXNUeXBpbmcsXG4gICAgICAuLi4oYWN0aXZlQ2hhdC50eXBlID09PSAncHJpdmF0ZScgPyB7IHJlY2lwaWVudElkOiBhY3RpdmVDaGF0LmlkIH0gOiB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KSxcbiAgICB9O1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ3R5cGluZycsIHR5cGluZ0RhdGEpO1xuICB9O1xuICBcbiAgY29uc3QgY2xlYXJDaGF0SGlzdG9yeSA9IGFzeW5jIChyZWNpcGllbnRJZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKGAke0FQSV9VUkx9L2NoYXRzL2RpcmVjdC8ke3JlY2lwaWVudElkfWApO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NoYXQgaGlzdG9yeSBjbGVhcmVkIHN1Y2Nlc3NmdWxseScgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYXJpbmcgY2hhdCBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGNsZWFyIGNoYXQgaGlzdG9yeScgfTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBJbXBsZW1lbnRhY2nDs24gZGUgcmV0cnlGaWxlVXBsb2FkXG4gIGNvbnN0IHJldHJ5RmlsZVVwbG9hZCA9IChmaWxlOiBGaWxlQXR0YWNobWVudCkgPT4ge1xuICAgIGlmICghZmlsZS50ZW1wSWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBSZXNldCBwcm9ncmVzc1xuICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQ/LnR5cGV9LSR7YWN0aXZlQ2hhdD8uaWR9YDtcbiAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBmaWxlLnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IDAsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgXG4gICAgLy8gUHJlcGFyZSBmb3IgcmUtdXBsb2FkXG4gICAgaWYgKGZpbGUuZGF0YSkge1xuICAgICAgLy8gRXMgdW4gYXJjaGl2byB5YSBjb252ZXJ0aWRvIGEgYmFzZTY0XG4gICAgICB1cGxvYWRMYXJnZUZpbGVUb1NlcnZlcihmaWxlKTtcbiAgICB9IGVsc2UgaWYgKGZpbGUuZmlsZUlkKSB7XG4gICAgICAvLyBSZW1vdmVyIGVsIGVycm9yIHBlcm8gbWFudGVuZXIgZWwgcHJvZ3Jlc28gY29tbyBjb21wbGV0YWRvXG4gICAgICAvLyB5YSBxdWUgZWwgYXJjaGl2byB5YSBlc3TDoSBzdWJpZG9cbiAgICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCEsIGZpbGUudGVtcElkISwgeyBwcm9ncmVzczogMTAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEZ1bmNpw7NuIGF1eGlsaWFyIHBhcmEgc3ViaXIgdW4gYXJjaGl2byBncmFuZGUgZGlyZWN0YW1lbnRlIGFsIHNlcnZpZG9yXG4gIGNvbnN0IHVwbG9hZExhcmdlRmlsZVRvU2VydmVyID0gYXN5bmMgKGF0dGFjaG1lbnQ6IEZpbGVBdHRhY2htZW50KTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiA9PiB7XG4gICAgaWYgKCFhdHRhY2htZW50LnRlbXBJZCkge1xuICAgICAgYXR0YWNobWVudC50ZW1wSWQgPSBgdGVtcC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWA7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0aXIgZGF0b3MgYmFzZTY0IGEgQmxvYiBwYXJhIHN1YmlyXG4gICAgICBjb25zdCBiYXNlNjREYXRhID0gYXR0YWNobWVudC5kYXRhIHx8ICcnO1xuICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NERhdGEpO1xuICAgICAgY29uc3QgYnl0ZUFycmF5cyA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IG9mZnNldCArPSA1MTIpIHtcbiAgICAgICAgY29uc3Qgc2xpY2UgPSBieXRlQ2hhcmFjdGVycy5zbGljZShvZmZzZXQsIG9mZnNldCArIDUxMik7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KHNsaWNlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IHNsaWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xuICAgICAgICBieXRlQXJyYXlzLnB1c2goYnl0ZUFycmF5KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKGJ5dGVBcnJheXMsIHsgdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSB9KTtcbiAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIGF0dGFjaG1lbnQuZmlsZW5hbWUsIHsgdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgRm9ybURhdGEgcGFyYSBsYSBzdWJpZGFcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgIFxuICAgICAgLy8gSW5pY2lhciBsYSBjYXJnYSB5IGFjdHVhbGl6YXIgZWwgZXN0YWRvXG4gICAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0Py50eXBlfS0ke2FjdGl2ZUNoYXQ/LmlkfWA7XG4gICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IDAsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlYWxpemFyIGxhIHN1YmlkYSBjb24gc2VndWltaWVudG8gZGUgcHJvZ3Jlc29cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgJHtBUElfVVJMfS9maWxlLXN0b3JhZ2UvdXBsb2FkYCwgZm9ybURhdGEsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGxvYWRQcm9ncmVzczogKHByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCBwZXJjZW50Q29tcGxldGVkID0gcHJvZ3Jlc3NFdmVudC50b3RhbCBcbiAgICAgICAgICAgID8gTWF0aC5yb3VuZCgocHJvZ3Jlc3NFdmVudC5sb2FkZWQgKiAxMDApIC8gcHJvZ3Jlc3NFdmVudC50b3RhbClcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm9ncmVzbyBkZSBzdWJpZGEgcGFyYSAke2F0dGFjaG1lbnQudGVtcElkfTogJHtwZXJjZW50Q29tcGxldGVkfSVgKTtcbiAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IHBlcmNlbnRDb21wbGV0ZWQsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBoYSB0ZXJtaW5hZG8gZGUgY2FyZ2Fyc2UgKDEwMCUpLCBsbyBlbGltaW5hbW9zIGRlIGxhIGxpc3RhIGRlc3B1w6lzIGRlIHVuIHNlZ3VuZG9cbiAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlZCA9PT0gMTAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgU3ViaWRhIGNvbXBsZXRhZGEgcGFyYSAke2F0dGFjaG1lbnQudGVtcElkfSwgZWxpbWluYW5kbyBlbiAxIHNlZ3VuZG9gKTtcbiAgICAgICAgICAgIC8vIEVzcGVyYXIgdW4gc2VndW5kbyBwYXJhIHF1ZSBlbCB1c3VhcmlvIHZlYSBxdWUgc2UgY29tcGxldMOzIHkgbHVlZ28gZWxpbWluYXJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIG51bGwpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5maWxlSWQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZmlsZUlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgc3ViaXIgYXJjaGl2bzonLCBlcnJvcik7XG4gICAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0Py50eXBlfS0ke2FjdGl2ZUNoYXQ/LmlkfWA7XG4gICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgXG4gICAgICAgIHByb2dyZXNzOiAwLCBcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGFsIHN1YmlyIGVsIGFyY2hpdm8nXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEVzdGEgZnVuY2nDs24gc2UgZW5jYXJnYSBkZSBtYXJjYXIgdW4gbWVuc2FqZSBjb21vIGxlw61kb1xuICBjb25zdCBoYW5kbGVNYXJrQXNSZWFkID0gKG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ21hcmtfbWVzc2FnZV9yZWFkJywgeyBtZXNzYWdlSWQgfSk7XG4gICAgXG4gICAgLy8gQWN0dWFsaXphciBlbCBlc3RhZG8gZGUgbWVuc2FqZXMgbG9jYWxtZW50ZVxuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gXG4gICAgICBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgIG1zZy5faWQgPT09IG1lc3NhZ2VJZCA/IHsgLi4ubXNnLCBpc1JlYWQ6IHRydWUgfSA6IG1zZ1xuICAgICAgKVxuICAgICk7XG4gIH07XG4gIFxuICAvLyBFc3RhIGZ1bmNpw7NuIGNhcmdhIG3DoXMgbWVuc2FqZXMgcGFyYSBsYSBwYWdpbmFjacOzblxuICBjb25zdCBmZXRjaE1vcmVNZXNzYWdlcyA9IGFzeW5jIChwYWdlOiBudW1iZXIpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNoYXQgfHwgIXVzZXIgfHwgIWlzQXV0aGVudGljYXRlZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnKSB7XG4gICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH0/cGFnZT0ke3BhZ2V9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvcm9vbS8ke2FjdGl2ZUNoYXQuaWR9P3BhZ2U9JHtwYWdlfWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGVuZHBvaW50KTtcbiAgICAgIFxuICAgICAgLy8gQcOxYWRpciBsb3MgbWVuc2FqZXMgYW50ZXJpb3JlcyBhbCBpbmljaW8gZGVsIGFycmF5IGRlIG1lbnNhamVzXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5yZXNwb25zZS5kYXRhLCAuLi5wcmV2XSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmxlbmd0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY2FyZ2FyIG3DoXMgbWVuc2FqZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgZGVsZXRlTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlSWQ6IHN0cmluZywgZGVsZXRlRm9yRXZlcnlvbmU6IGJvb2xlYW4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYCR7QVBJX1VSTH0vY2hhdHMvbWVzc2FnZS8ke21lc3NhZ2VJZH1gLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGRlbGV0ZUZvckV2ZXJ5b25lLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gRWxpbWluYXIgZWwgbWVuc2FqZSBkZWwgZXN0YWRvIGxvY2FsXG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5maWx0ZXIobXNnID0+IG1zZy5faWQgIT09IG1lc3NhZ2VJZCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgbWVuc2FqZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGZvcndhcmRNZXNzYWdlID0gYXN5bmMgKG1lc3NhZ2VJZDogc3RyaW5nLCB0YXJnZXRUeXBlOiAncHJpdmF0ZScgfCAncm9vbScsIHRhcmdldElkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgJHtBUElfVVJMfS9jaGF0cy9mb3J3YXJkLyR7bWVzc2FnZUlkfWAsXG4gICAgICAgIHtcbiAgICAgICAgICB0YXJnZXRUeXBlLFxuICAgICAgICAgIHRhcmdldElkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKX1gIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAvLyBTaSBlbCBtZW5zYWplIHNlIHJlZW52acOzIGV4aXRvc2FtZW50ZSwgYWN0dWFsaXphciBsb3MgbWVuc2FqZXMgc2kgY29ycmVzcG9uZGVcbiAgICAgICAgY29uc3QgZm9yd2FyZGVkTWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEuZm9yd2FyZGVkTWVzc2FnZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGVzdGFtb3MgdmllbmRvIGxhIGNvbnZlcnNhY2nDs24vc2FsYSBhIGxhIHF1ZSBzZSByZWVudmnDsyBlbCBtZW5zYWplLCBhZ3JlZ2FyIGVsIG1lbnNhamVcbiAgICAgICAgaWYgKFxuICAgICAgICAgICh0YXJnZXRUeXBlID09PSAncHJpdmF0ZScgJiYgYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3ByaXZhdGUnICYmIGFjdGl2ZUNoYXQuaWQgPT09IHRhcmdldElkKSB8fFxuICAgICAgICAgICh0YXJnZXRUeXBlID09PSAncm9vbScgJiYgYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nICYmIGFjdGl2ZUNoYXQuaWQgPT09IHRhcmdldElkKVxuICAgICAgICApIHtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBmb3J3YXJkZWRNZXNzYWdlXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdNZW5zYWplIHJlZW52aWFkbycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCByZWVudmlhciBtZW5zYWplOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcbiAgICAgIGFjdGl2ZUNoYXQsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHJvb21zLFxuICAgICAgb25saW5lVXNlcnMsXG4gICAgICB1c2VycyxcbiAgICAgIHR5cGluZ1VzZXJzLFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgaXNMb2FkaW5nTWVzc2FnZXMsXG4gICAgICB1bnJlYWRNZXNzYWdlcyxcbiAgICAgIHVwbG9hZGluZ0ZpbGVzLFxuICAgICAgc2V0QWN0aXZlQ2hhdDogaGFuZGxlQWN0aXZlQ2hhdENoYW5nZSxcbiAgICAgIHNlbmRNZXNzYWdlLFxuICAgICAgbWFya0FzUmVhZDogaGFuZGxlTWFya0FzUmVhZCxcbiAgICAgIHN0YXJ0VHlwaW5nOiAoKSA9PiBzZXRUeXBpbmcodHJ1ZSksXG4gICAgICBzdG9wVHlwaW5nOiAoKSA9PiBzZXRUeXBpbmcoZmFsc2UpLFxuICAgICAgbG9hZE1vcmVNZXNzYWdlczogZmV0Y2hNb3JlTWVzc2FnZXMsXG4gICAgICByZXRyeUZpbGVVcGxvYWQsXG4gICAgICBjYW5jZWxGaWxlVXBsb2FkLFxuICAgICAgZGVsZXRlTWVzc2FnZSxcbiAgICAgIGZvcndhcmRNZXNzYWdlXG4gICAgfX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9DaGF0Q29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwiaW8iLCJheGlvcyIsInVzZUF1dGgiLCJGaWxlVHlwZSIsIkNoYXRDb250ZXh0IiwiYWN0aXZlQ2hhdCIsIm1lc3NhZ2VzIiwicm9vbXMiLCJvbmxpbmVVc2VycyIsInVzZXJzIiwidHlwaW5nVXNlcnMiLCJpc0xvYWRpbmciLCJpc0xvYWRpbmdNZXNzYWdlcyIsInVucmVhZE1lc3NhZ2VzIiwidXBsb2FkaW5nRmlsZXMiLCJzZXRBY3RpdmVDaGF0Iiwic2VuZE1lc3NhZ2UiLCJtYXJrQXNSZWFkIiwic3RhcnRUeXBpbmciLCJzdG9wVHlwaW5nIiwibG9hZE1vcmVNZXNzYWdlcyIsInJldHJ5RmlsZVVwbG9hZCIsImNhbmNlbEZpbGVVcGxvYWQiLCJkZWxldGVNZXNzYWdlIiwiZm9yd2FyZE1lc3NhZ2UiLCJ1c2VDaGF0IiwiQ2hhdFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwic2V0TWVzc2FnZXMiLCJzZXRSb29tcyIsInNldFVzZXJzIiwic2V0T25saW5lVXNlcnMiLCJzZXRUeXBpbmdVc2VycyIsInNldElzTG9hZGluZyIsInNldElzTG9hZGluZ01lc3NhZ2VzIiwic29ja2V0Q29ubmVjdGVkIiwic2V0U29ja2V0Q29ubmVjdGVkIiwic2V0VW5yZWFkTWVzc2FnZXMiLCJ1cGxvYWRpbmdGaWxlc0J5Q2hhdCIsInNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0Iiwic2VsZWN0ZWRGaWxlIiwic2V0U2VsZWN0ZWRGaWxlIiwiY2hhdElkIiwidHlwZSIsImlkIiwidXBkYXRlVXBsb2FkaW5nRmlsZXMiLCJmaWxlSWQiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInByZXYiLCJuZXdTdGF0ZSIsIl8iLCJyZXN0RmlsZXMiLCJwcm9ncmVzcyIsImZpbGUiLCJ0ZW1wSWQiLCJzb2NrZXRSZWYiLCJjdXJyZW50QWN0aXZlQ2hhdFJlZiIsImZpbGVJbnB1dFJlZiIsImN1cnJlbnQiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJkaXNjb25uZWN0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXV0aCIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJvbiIsIm1lc3NhZ2UiLCJjaGF0S2V5Iiwicm9vbSIsInNlbmRlciIsIl9pZCIsInJlY2lwaWVudCIsInVzZXJJZCIsImlzT25saW5lIiwic2VuZGVySWQiLCJyb29tSWQiLCJpc1R5cGluZyIsInVzZXJOYW1lIiwibWVzc2FnZUlkIiwibWFwIiwibXNnIiwiaXNSZWFkIiwiZXhpc3RzIiwic29tZSIsInIiLCJyZW1vdmVkIiwiZmlsdGVyIiwiZGVsZXRlRm9yRXZlcnlvbmUiLCJmZXRjaEluaXRpYWxEYXRhIiwidXNlcnNSZXNwb25zZSIsInJvb21zUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZ2V0IiwiaW5pdGlhbE9ubGluZVN0YXR1cyIsImZvckVhY2giLCJlcnJvciIsImVtaXQiLCJ1bnJlYWRDb3VudHMiLCJvZmYiLCJjaGF0VHlwZSIsImhhbmRsZUFjdGl2ZUNoYXRDaGFuZ2UiLCJjaGF0IiwiaGFzQ29tcGxldGVkVXBsb2FkcyIsIk9iamVjdCIsInZhbHVlcyIsInN0YXR1cyIsImZldGNoTWVzc2FnZXMiLCJlbmRwb2ludCIsInJlc3BvbnNlIiwibGVuZ3RoIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJoYXNDaGFuZ2VzIiwia2V5cyIsImNsZWFySW50ZXJ2YWwiLCJjb250ZW50IiwiYXR0YWNobWVudHNXaXRoSWRzIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImZpbGVUeXBlIiwiZmlsZVR5cGVTdHJpbmciLCJzdGFydHNXaXRoIiwiYXR0YWNobWVudCIsImZpbGVuYW1lIiwibmFtZSIsImNvbnRlbnRUeXBlIiwic2l6ZSIsInVuZGVmaW5lZCIsImlzTGFyZ2VGaWxlIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJyZXNvbHZlIiwib25sb2FkIiwiYmFzZTY0ZGF0YSIsInJlc3VsdCIsImJhc2U2NENsZWFuIiwic3BsaXQiLCJwdXNoIiwidXBsb2FkTGFyZ2VGaWxlVG9TZXJ2ZXIiLCJ0aGVuIiwiY2F0Y2giLCJtZXNzYWdlRGF0YSIsImF0dGFjaG1lbnRzIiwicmVjaXBpZW50SWQiLCJzdWNjZXNzIiwidmFsdWUiLCJjcmVhdGVSb29tIiwiZGVzY3JpcHRpb24iLCJpc1ByaXZhdGUiLCJtZW1iZXJzIiwicG9zdCIsInVwZGF0ZVJvb20iLCJ1cGRhdGVEYXRhIiwicHV0IiwicHJldlJvb21zIiwiam9pblJvb20iLCJ0YXJnZXRVc2VySWQiLCJsZWF2ZVJvb20iLCJkZWxldGUiLCJzZXRUeXBpbmciLCJ0eXBpbmdEYXRhIiwiY2xlYXJDaGF0SGlzdG9yeSIsImJhc2U2NERhdGEiLCJieXRlQ2hhcmFjdGVycyIsImF0b2IiLCJieXRlQXJyYXlzIiwib2Zmc2V0Iiwic2xpY2UiLCJieXRlTnVtYmVycyIsIkFycmF5IiwiaSIsImNoYXJDb2RlQXQiLCJieXRlQXJyYXkiLCJVaW50OEFycmF5IiwiYmxvYiIsIkJsb2IiLCJGaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImhlYWRlcnMiLCJvblVwbG9hZFByb2dyZXNzIiwicHJvZ3Jlc3NFdmVudCIsInBlcmNlbnRDb21wbGV0ZWQiLCJ0b3RhbCIsInJvdW5kIiwibG9hZGVkIiwic2V0VGltZW91dCIsImhhbmRsZU1hcmtBc1JlYWQiLCJmZXRjaE1vcmVNZXNzYWdlcyIsInBhZ2UiLCJwYXJhbXMiLCJ0YXJnZXRUeXBlIiwidGFyZ2V0SWQiLCJBdXRob3JpemF0aW9uIiwiZm9yd2FyZGVkTWVzc2FnZSIsIlByb3ZpZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/contexts/ChatContext.tsx\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_auth_react__WEBPACK_IMPORTED_MODULE_2__.SessionProvider, {\n        session: pageProps.session,\n        refetchInterval: 0,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.ChatProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                lineNumber: 14,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n            lineNumber: 13,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2FwcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUVtQjtBQUNLO0FBQ0E7QUFFdkQsU0FBU0csTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBWTtJQUMvQyxxQkFDRSw4REFBQ0wsNERBQWVBO1FBQ2RNLFNBQVNELFVBQVVDLE9BQU87UUFDMUJDLGlCQUFpQjtrQkFFakIsNEVBQUNOLCtEQUFZQTtzQkFDWCw0RUFBQ0MsK0RBQVlBOzBCQUNYLDRFQUFDRTtvQkFBVyxHQUFHQyxTQUFTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbEM7QUFFQSxpRUFBZUYsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9fYXBwLnRzeD9mOWQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyBTZXNzaW9uUHJvdmlkZXIgfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgQ2hhdFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQ2hhdENvbnRleHQnO1xuXG5mdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IEFwcFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Qcm92aWRlciBcbiAgICAgIHNlc3Npb249e3BhZ2VQcm9wcy5zZXNzaW9ufVxuICAgICAgcmVmZXRjaEludGVydmFsPXswfSAvLyBEaXNhYmxlIGF1dG9tYXRpYyByZWZldGNoaW5nXG4gICAgPlxuICAgICAgPEF1dGhQcm92aWRlcj5cbiAgICAgICAgPENoYXRQcm92aWRlcj5cbiAgICAgICAgICA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG4gICAgICAgIDwvQ2hhdFByb3ZpZGVyPlxuICAgICAgPC9BdXRoUHJvdmlkZXI+XG4gICAgPC9TZXNzaW9uUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwO1xuIl0sIm5hbWVzIjpbIlNlc3Npb25Qcm92aWRlciIsIkF1dGhQcm92aWRlciIsIkNoYXRQcm92aWRlciIsIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIiwic2Vzc2lvbiIsInJlZmV0Y2hJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/pages/_document.tsx":
/*!*********************************!*\
  !*** ./src/pages/_document.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Document)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"../../node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Document() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n        lang: \"en\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 7,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Real-time chat application\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 8,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 6,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 11,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                        lineNumber: 12,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n                lineNumber: 10,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_document.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFFOUMsU0FBU0k7SUFDdEIscUJBQ0UsOERBQUNKLCtDQUFJQTtRQUFDSyxNQUFLOzswQkFDVCw4REFBQ0osK0NBQUlBOztrQ0FDSCw4REFBQ0s7d0JBQUtDLEtBQUk7d0JBQU9DLE1BQUs7Ozs7OztrQ0FDdEIsOERBQUNDO3dCQUFLQyxNQUFLO3dCQUFjQyxTQUFROzs7Ozs7Ozs7Ozs7MEJBRW5DLDhEQUFDQzs7a0NBQ0MsOERBQUNWLCtDQUFJQTs7Ozs7a0NBQ0wsOERBQUNDLHFEQUFVQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeD8xODhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0bWwsIEhlYWQsIE1haW4sIE5leHRTY3JpcHQgfSBmcm9tICduZXh0L2RvY3VtZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRG9jdW1lbnQoKSB7XG4gIHJldHVybiAoXG4gICAgPEh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPGxpbmsgcmVsPVwiaWNvblwiIGhyZWY9XCIvZmF2aWNvbi5pY29cIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiUmVhbC10aW1lIGNoYXQgYXBwbGljYXRpb25cIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgPGJvZHk+XG4gICAgICAgIDxNYWluIC8+XG4gICAgICAgIDxOZXh0U2NyaXB0IC8+XG4gICAgICA8L2JvZHk+XG4gICAgPC9IdG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkh0bWwiLCJIZWFkIiwiTWFpbiIsIk5leHRTY3JpcHQiLCJEb2N1bWVudCIsImxhbmciLCJsaW5rIiwicmVsIiwiaHJlZiIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/_document.tsx\n");

/***/ }),

/***/ "./src/pages/chat/index.tsx":
/*!**********************************!*\
  !*** ./src/pages/chat/index.tsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/chat/ChatSidebar */ \"./src/components/chat/ChatSidebar.tsx\");\n/* harmony import */ var _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/chat/ChatHeader */ \"./src/components/chat/ChatHeader.tsx\");\n/* harmony import */ var _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/chat/MessageList */ \"./src/components/chat/MessageList.tsx\");\n/* harmony import */ var _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/chat/MessageInput */ \"./src/components/chat/MessageInput.tsx\");\n/* harmony import */ var _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/chat/CreateRoomModal */ \"./src/components/chat/CreateRoomModal.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__, _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__, _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__, _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__, _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__, _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__, _components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__, _components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__, _components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__, _components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__, _components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nfunction ChatPage() {\n    const { user, isAuthenticated, isLoading: authLoading } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const { activeChat, isLoading: chatLoading } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.useChat)();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [isCreateRoomModalOpen, setIsCreateRoomModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!authLoading && !isAuthenticated) {\n            router.push(\"/login\");\n        }\n    }, [\n        isAuthenticated,\n        authLoading,\n        router\n    ]);\n    if (authLoading || !user) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen items-center justify-center bg-gray-100\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500 mx-auto\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 28,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-4 text-gray-600\",\n                        children: \"Loading...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 29,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 27,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n            lineNumber: 26,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex h-screen bg-gray-100\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_ChatSidebar__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                onCreateRoom: ()=>setIsCreateRoomModalOpen(true)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 38,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col flex-1 h-full overflow-hidden\",\n                children: activeChat ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_ChatHeader__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 46,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 overflow-hidden bg-white shadow-md\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_MessageList__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 48,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-4 bg-white border-t\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_MessageInput__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 53,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                            lineNumber: 52,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-center justify-center bg-white\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center p-8 max-w-md\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-2xl font-bold text-gray-800 mb-2\",\n                                children: \"Welcome to the Chat App!\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 59,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-gray-600 mb-6\",\n                                children: \"Select a conversation from the sidebar or start a new chat to begin messaging.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 60,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setIsCreateRoomModalOpen(true),\n                                className: \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5 mr-2\",\n                                        viewBox: \"0 0 20 20\",\n                                        fill: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            fillRule: \"evenodd\",\n                                            d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\",\n                                            clipRule: \"evenodd\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                            lineNumber: 68,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                        lineNumber: 67,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Create New Room\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                                lineNumber: 63,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                        lineNumber: 58,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                    lineNumber: 57,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 43,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_CreateRoomModal__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                isOpen: isCreateRoomModalOpen,\n                onClose: ()=>setIsCreateRoomModalOpen(false)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n                lineNumber: 78,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/chat/index.tsx\",\n        lineNumber: 36,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvY2hhdC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtDO0FBQ007QUFDUztBQUNBO0FBQ087QUFDRjtBQUNFO0FBQ0U7QUFDTTtBQUMvQjtBQUVsQixTQUFTVTtJQUN0QixNQUFNLEVBQUVDLElBQUksRUFBRUMsZUFBZSxFQUFFQyxXQUFXQyxXQUFXLEVBQUUsR0FBR1osOERBQU9BO0lBQ2pFLE1BQU0sRUFBRWEsVUFBVSxFQUFFRixXQUFXRyxXQUFXLEVBQUUsR0FBR2IsOERBQU9BO0lBQ3RELE1BQU1jLFNBQVNoQixzREFBU0E7SUFDeEIsTUFBTSxDQUFDaUIsdUJBQXVCQyx5QkFBeUIsR0FBR1YsK0NBQVFBLENBQUM7SUFFbkVULGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDYyxlQUFlLENBQUNGLGlCQUFpQjtZQUNwQ0ssT0FBT0csSUFBSSxDQUFDO1FBQ2Q7SUFDRixHQUFHO1FBQUNSO1FBQWlCRTtRQUFhRztLQUFPO0lBRXpDLElBQUlILGVBQWUsQ0FBQ0gsTUFBTTtRQUN4QixxQkFDRSw4REFBQ1U7WUFBSUMsV0FBVTtzQkFDYiw0RUFBQ0Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDRDt3QkFBSUMsV0FBVTs7Ozs7O2tDQUNmLDhEQUFDQzt3QkFBRUQsV0FBVTtrQ0FBcUI7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSTFDO0lBRUEscUJBQ0UsOERBQUNEO1FBQUlDLFdBQVU7OzBCQUViLDhEQUFDbEIsb0VBQVdBO2dCQUNWb0IsY0FBYyxJQUFNTCx5QkFBeUI7Ozs7OzswQkFJL0MsOERBQUNFO2dCQUFJQyxXQUFVOzBCQUNaUCwyQkFDQzs7c0NBQ0UsOERBQUNWLG1FQUFVQTs7Ozs7c0NBRVgsOERBQUNnQjs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ2hCLG9FQUFXQTs7Ozs7Ozs7OztzQ0FHZCw4REFBQ2U7NEJBQUlDLFdBQVU7c0NBQ2IsNEVBQUNmLHFFQUFZQTs7Ozs7Ozs7Ozs7aURBSWpCLDhEQUFDYztvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNiLDhEQUFDRztnQ0FBR0gsV0FBVTswQ0FBd0M7Ozs7OzswQ0FDdEQsOERBQUNDO2dDQUFFRCxXQUFVOzBDQUFxQjs7Ozs7OzBDQUdsQyw4REFBQ0k7Z0NBQ0NDLFNBQVMsSUFBTVIseUJBQXlCO2dDQUN4Q0csV0FBVTs7a0RBRVYsOERBQUNNO3dDQUFJQyxPQUFNO3dDQUE2QlAsV0FBVTt3Q0FBZVEsU0FBUTt3Q0FBWUMsTUFBSztrREFDeEYsNEVBQUNDOzRDQUFLQyxVQUFTOzRDQUFVQyxHQUFFOzRDQUE2R0MsVUFBUzs7Ozs7Ozs7Ozs7b0NBQzdJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFTaEIsOERBQUMzQix3RUFBZUE7Z0JBQ2Q0QixRQUFRbEI7Z0JBQ1JtQixTQUFTLElBQU1sQix5QkFBeUI7Ozs7Ozs7Ozs7OztBQUloRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9jaGF0L2luZGV4LnRzeD9mZDRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcbmltcG9ydCB7IHVzZUNoYXQgfSBmcm9tICdAL2NvbnRleHRzL0NoYXRDb250ZXh0JztcbmltcG9ydCBDaGF0U2lkZWJhciBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9DaGF0U2lkZWJhcic7XG5pbXBvcnQgQ2hhdEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9DaGF0SGVhZGVyJztcbmltcG9ydCBNZXNzYWdlTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvY2hhdC9NZXNzYWdlTGlzdCc7XG5pbXBvcnQgTWVzc2FnZUlucHV0IGZyb20gJ0AvY29tcG9uZW50cy9jaGF0L01lc3NhZ2VJbnB1dCc7XG5pbXBvcnQgQ3JlYXRlUm9vbU1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9jaGF0L0NyZWF0ZVJvb21Nb2RhbCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHsgdXNlciwgaXNBdXRoZW50aWNhdGVkLCBpc0xvYWRpbmc6IGF1dGhMb2FkaW5nIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IHsgYWN0aXZlQ2hhdCwgaXNMb2FkaW5nOiBjaGF0TG9hZGluZyB9ID0gdXNlQ2hhdCgpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzQ3JlYXRlUm9vbU1vZGFsT3Blbiwgc2V0SXNDcmVhdGVSb29tTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXV0aExvYWRpbmcgJiYgIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpO1xuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgYXV0aExvYWRpbmcsIHJvdXRlcl0pO1xuXG4gIGlmIChhdXRoTG9hZGluZyB8fCAhdXNlcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1zY3JlZW4gaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktMTAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItcHJpbWFyeS01MDAgbXgtYXV0b1wiPjwvZGl2PlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1ncmF5LTYwMFwiPkxvYWRpbmcuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtc2NyZWVuIGJnLWdyYXktMTAwXCI+XG4gICAgICB7LyogU2lkZWJhciAqL31cbiAgICAgIDxDaGF0U2lkZWJhciBcbiAgICAgICAgb25DcmVhdGVSb29tPXsoKSA9PiBzZXRJc0NyZWF0ZVJvb21Nb2RhbE9wZW4odHJ1ZSl9IFxuICAgICAgLz5cblxuICAgICAgey8qIE1haW4gY2hhdCBhcmVhICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtMSBoLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgIHthY3RpdmVDaGF0ID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8Q2hhdEhlYWRlciAvPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYmctd2hpdGUgc2hhZG93LW1kXCI+XG4gICAgICAgICAgICAgIDxNZXNzYWdlTGlzdCAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJnLXdoaXRlIGJvcmRlci10XCI+XG4gICAgICAgICAgICAgIDxNZXNzYWdlSW5wdXQgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHAtOCBtYXgtdy1tZFwiPlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItMlwiPldlbGNvbWUgdG8gdGhlIENoYXQgQXBwITwvaDM+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgbWItNlwiPlxuICAgICAgICAgICAgICAgIFNlbGVjdCBhIGNvbnZlcnNhdGlvbiBmcm9tIHRoZSBzaWRlYmFyIG9yIHN0YXJ0IGEgbmV3IGNoYXQgdG8gYmVnaW4gbWVzc2FnaW5nLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc0NyZWF0ZVJvb21Nb2RhbE9wZW4odHJ1ZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCB0ZXh0LXdoaXRlIGJnLXByaW1hcnktNjAwIGhvdmVyOmJnLXByaW1hcnktNzAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNSB3LTUgbXItMlwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTEwIDE4YTggOCAwIDEwMC0xNiA4IDggMCAwMDAgMTZ6bTEtMTFhMSAxIDAgMTAtMiAwdjJIN2ExIDEgMCAxMDAgMmgydjJhMSAxIDAgMTAyIDB2LTJoMmExIDEgMCAxMDAtMmgtMlY3elwiIGNsaXBSdWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgQ3JlYXRlIE5ldyBSb29tXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIENyZWF0ZSBSb29tIE1vZGFsICovfVxuICAgICAgPENyZWF0ZVJvb21Nb2RhbCBcbiAgICAgICAgaXNPcGVuPXtpc0NyZWF0ZVJvb21Nb2RhbE9wZW59XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHNldElzQ3JlYXRlUm9vbU1vZGFsT3BlbihmYWxzZSl9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJvdXRlciIsInVzZUF1dGgiLCJ1c2VDaGF0IiwiQ2hhdFNpZGViYXIiLCJDaGF0SGVhZGVyIiwiTWVzc2FnZUxpc3QiLCJNZXNzYWdlSW5wdXQiLCJDcmVhdGVSb29tTW9kYWwiLCJ1c2VTdGF0ZSIsIkNoYXRQYWdlIiwidXNlciIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsImF1dGhMb2FkaW5nIiwiYWN0aXZlQ2hhdCIsImNoYXRMb2FkaW5nIiwicm91dGVyIiwiaXNDcmVhdGVSb29tTW9kYWxPcGVuIiwic2V0SXNDcmVhdGVSb29tTW9kYWxPcGVuIiwicHVzaCIsImRpdiIsImNsYXNzTmFtZSIsInAiLCJvbkNyZWF0ZVJvb20iLCJoMyIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJmaWxsIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwiaXNPcGVuIiwib25DbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/chat/index.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "date-fns/format":
/*!**********************************!*\
  !*** external "date-fns/format" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("date-fns/format");

/***/ }),

/***/ "date-fns/formatDistance":
/*!******************************************!*\
  !*** external "date-fns/formatDistance" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = require("date-fns/formatDistance");

/***/ }),

/***/ "date-fns/locale":
/*!**********************************!*\
  !*** external "date-fns/locale" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("date-fns/locale");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("axios");;

/***/ }),

/***/ "react-hook-form":
/*!**********************************!*\
  !*** external "react-hook-form" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-hook-form");;

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("../../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fchat%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();