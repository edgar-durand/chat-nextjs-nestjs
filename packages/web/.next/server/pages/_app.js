/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_app";
exports.ids = ["pages/_app"];
exports.modules = {

/***/ "./src/contexts/AuthContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/AuthContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"../../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_2__]);\naxios__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    login: async ()=>{},\n    loginWithGoogle: async ()=>{},\n    register: async ()=>{},\n    logout: async ()=>{},\n    updateProfile: async ()=>{}\n});\nconst useAuth = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\nconst AuthProvider = ({ children })=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const { data: session, status } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.useSession)();\n    const API_URL = \"http://localhost:3001\" || 0;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check if user is authenticated in NextAuth session\n        if (status === \"authenticated\" && session?.user) {\n            setUser({\n                id: session.user.id || \"\",\n                name: session.user.name || \"\",\n                email: session.user.email || \"\",\n                avatar: session.user.image || \"\"\n            });\n            // Set authorization header for API requests\n            if (session.accessToken) {\n                // Guardar el token en localStorage para que ChatContext pueda utilizarlo\n                localStorage.setItem(\"token\", session.accessToken);\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${session.accessToken}`;\n            }\n            setIsLoading(false);\n            return;\n        } else if (status === \"unauthenticated\") {\n            // Clear user state if not authenticated with NextAuth\n            setUser(null);\n            setIsLoading(false);\n            return;\n        }\n        // Only check localStorage if NextAuth session status is not determined yet\n        if (status === \"loading\") {\n            return;\n        }\n        // Fallback to legacy token authentication\n        const checkAuthStatus = async ()=>{\n            const token = localStorage.getItem(\"token\");\n            if (!token) {\n                setIsLoading(false);\n                return;\n            }\n            try {\n                axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n                const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`${API_URL}/auth/me`);\n                setUser({\n                    id: data._id,\n                    name: data.name,\n                    email: data.email,\n                    avatar: data.avatar || \"\"\n                });\n            } catch (error) {\n                localStorage.removeItem(\"token\");\n                delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        checkAuthStatus();\n    }, [\n        API_URL,\n        session,\n        status\n    ]);\n    const login = async (email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/login`, {\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error logging in\";\n            throw new Error(message);\n        }\n    };\n    const loginWithGoogle = async ()=>{\n        try {\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signIn)(\"google\", {\n                callbackUrl: \"/\"\n            });\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw new Error(\"Error logging in with Google\");\n        }\n    };\n    const register = async (name, email, password)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/register`, {\n                name,\n                email,\n                password\n            });\n            localStorage.setItem(\"token\", data.accessToken);\n            axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"] = `Bearer ${data.accessToken}`;\n            setUser({\n                id: data.user.id,\n                name: data.user.name,\n                email: data.user.email,\n                avatar: data.user.avatar || \"\"\n            });\n            router.push(\"/\");\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error registering\";\n            throw new Error(message);\n        }\n    };\n    const logout = async ()=>{\n        if (status === \"authenticated\") {\n            // For NextAuth logout\n            await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_4__.signOut)({\n                callbackUrl: \"/login\"\n            });\n        } else {\n            // For legacy logout\n            if (user) {\n                try {\n                    await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`${API_URL}/auth/logout`);\n                } catch (error) {\n                    console.error(\"Error logging out:\", error);\n                }\n            }\n            localStorage.removeItem(\"token\");\n            delete axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defaults.headers.common[\"Authorization\"];\n            setUser(null);\n            router.push(\"/login\");\n        }\n    };\n    const updateProfile = async (data)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].patch(`${API_URL}/users/profile`, data);\n            if (response.data) {\n                setUser((prevUser)=>{\n                    if (!prevUser) return null;\n                    return {\n                        ...prevUser,\n                        name: data.name || prevUser.name,\n                        avatar: data.avatar || prevUser.avatar\n                    };\n                });\n            }\n        } catch (error) {\n            const message = error.response?.data?.message || \"Error updating profile\";\n            throw new Error(message);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: {\n            user,\n            isAuthenticated: !!user,\n            isLoading,\n            login,\n            loginWithGoogle,\n            register,\n            logout,\n            updateProfile\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/AuthContext.tsx\",\n        lineNumber: 214,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RTtBQUNwRDtBQUNjO0FBQ3NCO0FBMkI5RCxNQUFNVSw0QkFBY1Qsb0RBQWFBLENBQWtCO0lBQ2pEVSxNQUFNO0lBQ05DLGlCQUFpQjtJQUNqQkMsV0FBVztJQUNYQyxPQUFPLFdBQWE7SUFDcEJDLGlCQUFpQixXQUFhO0lBQzlCQyxVQUFVLFdBQWE7SUFDdkJDLFFBQVEsV0FBYTtJQUNyQkMsZUFBZSxXQUFhO0FBQzlCO0FBRU8sTUFBTUMsVUFBVSxJQUFNakIsaURBQVVBLENBQUNRLGFBQWE7QUFFOUMsTUFBTVUsZUFBd0QsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDaEYsTUFBTSxDQUFDVixNQUFNVyxRQUFRLEdBQUduQiwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNVLFdBQVdVLGFBQWEsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU1xQixTQUFTbEIsc0RBQVNBO0lBQ3hCLE1BQU0sRUFBRW1CLE1BQU1DLE9BQU8sRUFBRUMsTUFBTSxFQUFFLEdBQUdwQiwyREFBVUE7SUFFNUMsTUFBTXFCLFVBQVVDLHVCQUErQixJQUFJO0lBRW5EekIsZ0RBQVNBLENBQUM7UUFDUixxREFBcUQ7UUFDckQsSUFBSXVCLFdBQVcsbUJBQW1CRCxTQUFTZixNQUFNO1lBQy9DVyxRQUFRO2dCQUNOVSxJQUFJTixRQUFRZixJQUFJLENBQUNxQixFQUFFLElBQUk7Z0JBQ3ZCQyxNQUFNUCxRQUFRZixJQUFJLENBQUNzQixJQUFJLElBQUk7Z0JBQzNCQyxPQUFPUixRQUFRZixJQUFJLENBQUN1QixLQUFLLElBQUk7Z0JBQzdCQyxRQUFRVCxRQUFRZixJQUFJLENBQUN5QixLQUFLLElBQUk7WUFDaEM7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSVYsUUFBUVcsV0FBVyxFQUFFO2dCQUN2Qix5RUFBeUU7Z0JBQ3pFQyxhQUFhQyxPQUFPLENBQUMsU0FBU2IsUUFBUVcsV0FBVztnQkFDakRoQyxzREFBYyxDQUFDb0MsT0FBTyxDQUFDQyxNQUFNLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxPQUFPLEVBQUVoQixRQUFRVyxXQUFXLENBQUMsQ0FBQztZQUNsRjtZQUVBZCxhQUFhO1lBQ2I7UUFDRixPQUFPLElBQUlJLFdBQVcsbUJBQW1CO1lBQ3ZDLHNEQUFzRDtZQUN0REwsUUFBUTtZQUNSQyxhQUFhO1lBQ2I7UUFDRjtRQUVBLDJFQUEyRTtRQUMzRSxJQUFJSSxXQUFXLFdBQVc7WUFDeEI7UUFDRjtRQUVBLDBDQUEwQztRQUMxQyxNQUFNZ0Isa0JBQWtCO1lBQ3RCLE1BQU1DLFFBQVFOLGFBQWFPLE9BQU8sQ0FBQztZQUVuQyxJQUFJLENBQUNELE9BQU87Z0JBQ1ZyQixhQUFhO2dCQUNiO1lBQ0Y7WUFFQSxJQUFJO2dCQUNGbEIsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQixHQUFHLENBQUMsT0FBTyxFQUFFRSxNQUFNLENBQUM7Z0JBQ2xFLE1BQU0sRUFBRW5CLElBQUksRUFBRSxHQUFHLE1BQU1wQixpREFBUyxDQUFDLENBQUMsRUFBRXVCLFFBQVEsUUFBUSxDQUFDO2dCQUVyRE4sUUFBUTtvQkFDTlUsSUFBSVAsS0FBS3NCLEdBQUc7b0JBQ1pkLE1BQU1SLEtBQUtRLElBQUk7b0JBQ2ZDLE9BQU9ULEtBQUtTLEtBQUs7b0JBQ2pCQyxRQUFRVixLQUFLVSxNQUFNLElBQUk7Z0JBQ3pCO1lBQ0YsRUFBRSxPQUFPYSxPQUFZO2dCQUNuQlYsYUFBYVcsVUFBVSxDQUFDO2dCQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUN2RCxTQUFVO2dCQUNSbkIsYUFBYTtZQUNmO1FBQ0Y7UUFFQW9CO0lBQ0YsR0FBRztRQUFDZjtRQUFTRjtRQUFTQztLQUFPO0lBRTdCLE1BQU1iLFFBQVEsT0FBT29CLE9BQWVnQjtRQUNsQyxJQUFJO1lBQ0YsTUFBTSxFQUFFekIsSUFBSSxFQUFFLEdBQUcsTUFBTXBCLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxXQUFXLENBQUMsRUFBRTtnQkFDekRNO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdEMsa0JBQWtCO1FBQ3RCLElBQUk7WUFDRixNQUFNUCx1REFBTUEsQ0FBQyxVQUFVO2dCQUFFZ0QsYUFBYTtZQUFJO1FBQzVDLEVBQUUsT0FBT1IsT0FBWTtZQUNuQlMsUUFBUVQsS0FBSyxDQUFDLHVCQUF1QkE7WUFDckMsTUFBTSxJQUFJTyxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNdkMsV0FBVyxPQUFPaUIsTUFBY0MsT0FBZWdCO1FBQ25ELElBQUk7WUFDRixNQUFNLEVBQUV6QixJQUFJLEVBQUUsR0FBRyxNQUFNcEIsa0RBQVUsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFO2dCQUM1REs7Z0JBQ0FDO2dCQUNBZ0I7WUFDRjtZQUVBWixhQUFhQyxPQUFPLENBQUMsU0FBU2QsS0FBS1ksV0FBVztZQUM5Q2hDLHNEQUFjLENBQUNvQyxPQUFPLENBQUNDLE1BQU0sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRWpCLEtBQUtZLFdBQVcsQ0FBQyxDQUFDO1lBRTdFZixRQUFRO2dCQUNOVSxJQUFJUCxLQUFLZCxJQUFJLENBQUNxQixFQUFFO2dCQUNoQkMsTUFBTVIsS0FBS2QsSUFBSSxDQUFDc0IsSUFBSTtnQkFDcEJDLE9BQU9ULEtBQUtkLElBQUksQ0FBQ3VCLEtBQUs7Z0JBQ3RCQyxRQUFRVixLQUFLZCxJQUFJLENBQUN3QixNQUFNLElBQUk7WUFDOUI7WUFFQVgsT0FBTzRCLElBQUksQ0FBQztRQUNkLEVBQUUsT0FBT0osT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxNQUFNcEMsU0FBUztRQUNiLElBQUlVLFdBQVcsaUJBQWlCO1lBQzlCLHNCQUFzQjtZQUN0QixNQUFNbEIsd0RBQU9BLENBQUM7Z0JBQUUrQyxhQUFhO1lBQVM7UUFDeEMsT0FBTztZQUNMLG9CQUFvQjtZQUNwQixJQUFJN0MsTUFBTTtnQkFDUixJQUFJO29CQUNGLE1BQU1OLGtEQUFVLENBQUMsQ0FBQyxFQUFFdUIsUUFBUSxZQUFZLENBQUM7Z0JBQzNDLEVBQUUsT0FBT29CLE9BQU87b0JBQ2RTLFFBQVFULEtBQUssQ0FBQyxzQkFBc0JBO2dCQUN0QztZQUNGO1lBRUFWLGFBQWFXLFVBQVUsQ0FBQztZQUN4QixPQUFPNUMsc0RBQWMsQ0FBQ29DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDLGdCQUFnQjtZQUNyRHBCLFFBQVE7WUFDUkUsT0FBTzRCLElBQUksQ0FBQztRQUNkO0lBQ0Y7SUFFQSxNQUFNbEMsZ0JBQWdCLE9BQU9PO1FBQzNCLElBQUk7WUFDRixNQUFNNkIsV0FBVyxNQUFNakQsbURBQVcsQ0FBQyxDQUFDLEVBQUV1QixRQUFRLGNBQWMsQ0FBQyxFQUFFSDtZQUUvRCxJQUFJNkIsU0FBUzdCLElBQUksRUFBRTtnQkFDakJILFFBQVFxQyxDQUFBQTtvQkFDTixJQUFJLENBQUNBLFVBQVUsT0FBTztvQkFFdEIsT0FBTzt3QkFDTCxHQUFHQSxRQUFRO3dCQUNYMUIsTUFBTVIsS0FBS1EsSUFBSSxJQUFJMEIsU0FBUzFCLElBQUk7d0JBQ2hDRSxRQUFRVixLQUFLVSxNQUFNLElBQUl3QixTQUFTeEIsTUFBTTtvQkFDeEM7Z0JBQ0Y7WUFDRjtRQUNGLEVBQUUsT0FBT2EsT0FBWTtZQUNuQixNQUFNSyxVQUFVTCxNQUFNTSxRQUFRLEVBQUU3QixNQUFNNEIsV0FBVztZQUNqRCxNQUFNLElBQUlFLE1BQU1GO1FBQ2xCO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQzNDLFlBQVlrRCxRQUFRO1FBQ25CQyxPQUFPO1lBQ0xsRDtZQUNBQyxpQkFBaUIsQ0FBQyxDQUFDRDtZQUNuQkU7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtrQkFFQ0c7Ozs7OztBQUdQLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvY29udGV4dHMvQXV0aENvbnRleHQudHN4PzFmYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgdXNlU2Vzc2lvbiwgc2lnbkluLCBzaWduT3V0IH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcblxuaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlUHJvZmlsZURhdGEge1xuICBuYW1lPzogc3RyaW5nO1xuICBhdmF0YXI/OiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZD86IHN0cmluZztcbiAgbmV3UGFzc3dvcmQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBBdXRoQ29udGV4dFR5cGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGxvZ2luOiAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9naW5XaXRoR29vZ2xlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWdpc3RlcjogKG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9nb3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVQcm9maWxlOiAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGU+KHtcbiAgdXNlcjogbnVsbCxcbiAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiB0cnVlLFxuICBsb2dpbjogYXN5bmMgKCkgPT4ge30sXG4gIGxvZ2luV2l0aEdvb2dsZTogYXN5bmMgKCkgPT4ge30sXG4gIHJlZ2lzdGVyOiBhc3luYyAoKSA9PiB7fSxcbiAgbG9nb3V0OiBhc3luYyAoKSA9PiB7fSxcbiAgdXBkYXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge30sXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IEF1dGhQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiwgc3RhdHVzIH0gPSB1c2VTZXNzaW9uKCk7XG5cbiAgY29uc3QgQVBJX1VSTCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgaW4gTmV4dEF1dGggc2Vzc2lvblxuICAgIGlmIChzdGF0dXMgPT09ICdhdXRoZW50aWNhdGVkJyAmJiBzZXNzaW9uPy51c2VyKSB7XG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IHNlc3Npb24udXNlci5pZCB8fCAnJyxcbiAgICAgICAgbmFtZTogc2Vzc2lvbi51c2VyLm5hbWUgfHwgJycsXG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfHwgJycsXG4gICAgICAgIGF2YXRhcjogc2Vzc2lvbi51c2VyLmltYWdlIHx8ICcnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNldCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3IgQVBJIHJlcXVlc3RzXG4gICAgICBpZiAoc2Vzc2lvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAvLyBHdWFyZGFyIGVsIHRva2VuIGVuIGxvY2FsU3RvcmFnZSBwYXJhIHF1ZSBDaGF0Q29udGV4dCBwdWVkYSB1dGlsaXphcmxvXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHNlc3Npb24uYWNjZXNzVG9rZW4pO1xuICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Nlc3Npb24uYWNjZXNzVG9rZW59YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3VuYXV0aGVudGljYXRlZCcpIHtcbiAgICAgIC8vIENsZWFyIHVzZXIgc3RhdGUgaWYgbm90IGF1dGhlbnRpY2F0ZWQgd2l0aCBOZXh0QXV0aFxuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgY2hlY2sgbG9jYWxTdG9yYWdlIGlmIE5leHRBdXRoIHNlc3Npb24gc3RhdHVzIGlzIG5vdCBkZXRlcm1pbmVkIHlldFxuICAgIGlmIChzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBsZWdhY3kgdG9rZW4gYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBjaGVja0F1dGhTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICAgICAgXG4gICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtBUElfVVJMfS9hdXRoL21lYCk7XG4gICAgICAgIFxuICAgICAgICBzZXRVc2VyKHtcbiAgICAgICAgICBpZDogZGF0YS5faWQsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIgfHwgJycsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgICAgICAgZGVsZXRlIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ107XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja0F1dGhTdGF0dXMoKTtcbiAgfSwgW0FQSV9VUkwsIHNlc3Npb24sIHN0YXR1c10pO1xuXG4gIGNvbnN0IGxvZ2luID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9naW5gLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgbG9nZ2luZyBpbic7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvZ2luV2l0aEdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2lnbkluKCdnb29nbGUnLCB7IGNhbGxiYWNrVXJsOiAnLycgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIGxvZ2luIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgbG9nZ2luZyBpbiB3aXRoIEdvb2dsZScpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWdpc3RlciA9IGFzeW5jIChuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvcmVnaXN0ZXJgLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pO1xuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7ZGF0YS5hY2Nlc3NUb2tlbn1gO1xuXG4gICAgICBzZXRVc2VyKHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgbmFtZTogZGF0YS51c2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIGF2YXRhcjogZGF0YS51c2VyLmF2YXRhciB8fCAnJyxcbiAgICAgIH0pO1xuXG4gICAgICByb3V0ZXIucHVzaCgnLycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCAnRXJyb3IgcmVnaXN0ZXJpbmcnO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBsb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2F1dGhlbnRpY2F0ZWQnKSB7XG4gICAgICAvLyBGb3IgTmV4dEF1dGggbG9nb3V0XG4gICAgICBhd2FpdCBzaWduT3V0KHsgY2FsbGJhY2tVcmw6ICcvbG9naW4nIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgbGVnYWN5IGxvZ291dFxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L2F1dGgvbG9nb3V0YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9nZ2luZyBvdXQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XG4gICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTtcbiAgICAgIHNldFVzZXIobnVsbCk7XG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAoZGF0YTogVXBkYXRlUHJvZmlsZURhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wYXRjaChgJHtBUElfVVJMfS91c2Vycy9wcm9maWxlYCwgZGF0YSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldFVzZXIocHJldlVzZXIgPT4ge1xuICAgICAgICAgIGlmICghcHJldlVzZXIpIHJldHVybiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wcmV2VXNlcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSB8fCBwcmV2VXNlci5uYW1lLFxuICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhciB8fCBwcmV2VXNlci5hdmF0YXIsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8ICdFcnJvciB1cGRhdGluZyBwcm9maWxlJztcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIHVzZXIsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogISF1c2VyLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIGxvZ2luLFxuICAgICAgICBsb2dpbldpdGhHb29nbGUsXG4gICAgICAgIHJlZ2lzdGVyLFxuICAgICAgICBsb2dvdXQsXG4gICAgICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJheGlvcyIsInVzZVJvdXRlciIsInVzZVNlc3Npb24iLCJzaWduSW4iLCJzaWduT3V0IiwiQXV0aENvbnRleHQiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNMb2FkaW5nIiwibG9naW4iLCJsb2dpbldpdGhHb29nbGUiLCJyZWdpc3RlciIsImxvZ291dCIsInVwZGF0ZVByb2ZpbGUiLCJ1c2VBdXRoIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzZXRVc2VyIiwic2V0SXNMb2FkaW5nIiwicm91dGVyIiwiZGF0YSIsInNlc3Npb24iLCJzdGF0dXMiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImF2YXRhciIsImltYWdlIiwiYWNjZXNzVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiY2hlY2tBdXRoU3RhdHVzIiwidG9rZW4iLCJnZXRJdGVtIiwiZ2V0IiwiX2lkIiwiZXJyb3IiLCJyZW1vdmVJdGVtIiwicGFzc3dvcmQiLCJwb3N0IiwicHVzaCIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsIkVycm9yIiwiY2FsbGJhY2tVcmwiLCJjb25zb2xlIiwicGF0Y2giLCJwcmV2VXNlciIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/contexts/AuthContext.tsx\n");

/***/ }),

/***/ "./src/contexts/ChatContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/ChatContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatProvider: () => (/* binding */ ChatProvider),\n/* harmony export */   FileType: () => (/* binding */ FileType),\n/* harmony export */   useChat: () => (/* binding */ useChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthContext */ \"./src/contexts/AuthContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__]);\n([socket_io_client__WEBPACK_IMPORTED_MODULE_2__, axios__WEBPACK_IMPORTED_MODULE_3__, _AuthContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nvar FileType;\n(function(FileType) {\n    FileType[\"IMAGE\"] = \"image\";\n    FileType[\"VIDEO\"] = \"video\";\n    FileType[\"DOCUMENT\"] = \"document\";\n    FileType[\"AUDIO\"] = \"audio\";\n})(FileType || (FileType = {}));\nconst ChatContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    activeChat: null,\n    messages: [],\n    rooms: [],\n    onlineUsers: {},\n    users: [],\n    typingUsers: {},\n    isLoading: true,\n    isLoadingMessages: false,\n    unreadMessages: {},\n    uploadingFiles: {},\n    setActiveChat: ()=>{},\n    sendMessage: async ()=>{},\n    markAsRead: ()=>{},\n    startTyping: ()=>{},\n    stopTyping: ()=>{},\n    loadMoreMessages: async ()=>0,\n    retryFileUpload: ()=>{},\n    cancelFileUpload: ()=>{},\n    deleteMessage: async ()=>false\n});\nconst useChat = ()=>(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatContext);\nconst ChatProvider = ({ children })=>{\n    const { user, isAuthenticated } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [activeChat, setActiveChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rooms, setRooms] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [users, setUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [onlineUsers, setOnlineUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [typingUsers, setTypingUsers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isLoadingMessages, setIsLoadingMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socketConnected, setSocketConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadMessages, setUnreadMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploadingFilesByChat, setUploadingFilesByChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [selectedFile, setSelectedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const uploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!activeChat) return {};\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        return uploadingFilesByChat[chatId] || {};\n    }, [\n        activeChat,\n        uploadingFilesByChat\n    ]);\n    const updateUploadingFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((chatId, fileId, data)=>{\n        console.log(`Actualizando estado de archivo ${fileId} en chat ${chatId}:`, data);\n        setUploadingFilesByChat((prev)=>{\n            const newState = {\n                ...prev\n            };\n            // Si no existe el chat, lo creamos\n            if (!newState[chatId]) {\n                newState[chatId] = {};\n            }\n            // Si data es null, eliminamos el archivo\n            if (data === null) {\n                if (newState[chatId][fileId]) {\n                    const { [fileId]: _, ...restFiles } = newState[chatId];\n                    newState[chatId] = restFiles;\n                    console.log(`Eliminado archivo ${fileId} de chat ${chatId}`);\n                }\n            } else {\n                // Actualizamos o agregamos el archivo\n                newState[chatId][fileId] = data;\n                console.log(`Actualizado archivo ${fileId} en chat ${chatId} con progreso ${data.progress}%`);\n            }\n            return newState;\n        });\n    }, []);\n    const cancelFileUpload = (file)=>{\n        if (!file.tempId || !activeChat) return;\n        const chatId = `${activeChat.type}-${activeChat.id}`;\n        updateUploadingFiles(chatId, file.tempId, null);\n    };\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentActiveChatRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(activeChat);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Keep the ref in sync with the state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        currentActiveChatRef.current = activeChat;\n    }, [\n        activeChat\n    ]);\n    const API_URL = \"http://localhost:3001\" || 0;\n    // Initialize socket connection when authenticated\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated || !user) {\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n            return;\n        }\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n        socketRef.current = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(API_URL, {\n            auth: {\n                token\n            },\n            withCredentials: true,\n            // Aumentar el tiempo de espera para permitir envío de archivos grandes\n            timeout: 60000 // aumentar el tiempo de espera a 60 segundos\n        });\n        // Socket event listeners\n        socketRef.current.on(\"connect\", ()=>{\n            console.log(\"Socket connected\");\n            setSocketConnected(true);\n        });\n        socketRef.current.on(\"new_message\", (message)=>{\n            const activeChat = currentActiveChatRef.current;\n            // Identificar la clave de chat para seguimiento de notificaciones\n            let chatKey = \"\";\n            if (message.room) {\n                chatKey = `room-${message.room}`;\n            } else {\n                chatKey = message.sender._id === user.id ? `private-${message.recipient}` : `private-${message.sender._id}`;\n            }\n            console.log(\"Mensaje recibido:\", message, \"Chat activo:\", activeChat);\n            // Solo agregar el mensaje si es relevante para el chat activo\n            if (activeChat?.type === \"private\" && (message.sender._id === activeChat.id && message.recipient === user.id || message.sender._id === user.id && message.recipient === activeChat.id) || activeChat?.type === \"room\" && message.room === activeChat.id) {\n                console.log(\"Agregando mensaje al chat activo:\", message);\n                setMessages((prev)=>[\n                        ...prev,\n                        message\n                    ]);\n            } else if (message.sender._id !== user.id && chatKey) {\n                console.log(\"New message notification:\", chatKey, message);\n                setUnreadMessages((prev)=>({\n                        ...prev,\n                        [chatKey]: (prev[chatKey] || 0) + 1\n                    }));\n            }\n        });\n        socketRef.current.on(\"user_status_change\", ({ userId, isOnline })=>{\n            setOnlineUsers((prev)=>({\n                    ...prev,\n                    [userId]: isOnline\n                }));\n        });\n        socketRef.current.on(\"typing_indicator\", (data)=>{\n            const activeChat = currentActiveChatRef.current;\n            if (activeChat?.type === \"private\" && data.senderId === activeChat.id || activeChat?.type === \"room\" && data.roomId === activeChat.id) {\n                // Almacenar nombre en lugar de solo la bandera booleana\n                setTypingUsers((prev)=>({\n                        ...prev,\n                        [data.userId]: data.isTyping ? data.userName : false\n                    }));\n            }\n        });\n        socketRef.current.on(\"message_read\", ({ messageId })=>{\n            setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                        ...msg,\n                        isRead: true\n                    } : msg));\n        });\n        // Handle new room creations\n        socketRef.current.on(\"new_room\", (room)=>{\n            console.log(\"New room received:\", room);\n            setRooms((prev)=>{\n                // Check if the room already exists\n                const exists = prev.some((r)=>r._id === room._id);\n                if (exists) return prev;\n                return [\n                    ...prev,\n                    room\n                ];\n            });\n        });\n        // Handle room updates (members added/removed)\n        socketRef.current.on(\"room_updated\", (room)=>{\n            console.log(\"Room updated:\", room);\n            if (room.removed) {\n                // If this room was removed for this user, remove it from the list\n                setRooms((prev)=>prev.filter((r)=>r._id !== room._id));\n                // If active chat is this room, clear it\n                const activeChat = currentActiveChatRef.current;\n                if (activeChat?.type === \"room\" && activeChat.id === room._id) {\n                    setActiveChat(null);\n                }\n            } else {\n                // Update the room in the list\n                setRooms((prev)=>prev.map((r)=>r._id === room._id ? room : r));\n            }\n        });\n        // Escuchar eventos de eliminación de mensajes\n        socketRef.current.on(\"message_deleted\", ({ messageId, deleteForEveryone })=>{\n            console.log(\"Mensaje eliminado recibido:\", messageId, deleteForEveryone);\n            if (deleteForEveryone) {\n                // Si fue eliminado para todos, actualizar la UI\n                setMessages((prev)=>prev.filter((msg)=>msg._id !== messageId));\n            }\n        });\n        socketRef.current.on(\"disconnect\", ()=>{\n            console.log(\"Socket disconnected\");\n            setSocketConnected(false);\n        });\n        return ()=>{\n            if (socketRef.current) {\n                socketRef.current.disconnect();\n                socketRef.current = null;\n            }\n            setSocketConnected(false);\n        };\n    }, [\n        isAuthenticated,\n        user,\n        API_URL\n    ]);\n    // Load initial data: users and rooms\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isAuthenticated) {\n            setIsLoading(false);\n            return;\n        }\n        const fetchInitialData = async ()=>{\n            try {\n                setIsLoading(true);\n                const [usersResponse, roomsResponse] = await Promise.all([\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/users`),\n                    axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(`${API_URL}/rooms/my`)\n                ]);\n                setUsers(usersResponse.data);\n                setRooms(roomsResponse.data);\n                // Set initial online status\n                const initialOnlineStatus = {};\n                usersResponse.data.forEach((user)=>{\n                    initialOnlineStatus[user._id] = user.isOnline || false;\n                });\n                setOnlineUsers(initialOnlineStatus);\n            } catch (error) {\n                console.error(\"Error fetching initial data:\", error);\n            } finally{\n                setIsLoading(false);\n            }\n        };\n        fetchInitialData();\n    }, [\n        isAuthenticated,\n        API_URL\n    ]);\n    // Cuando se inicia el socket y se conecta, solicitamos el estado actual de mensajes no leídos\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (socketConnected && socketRef.current && user) {\n            // Solicitar mensajes no leídos al servidor\n            socketRef.current.emit(\"get_unread_messages\");\n            // Escuchar la respuesta con el recuento de mensajes no leídos\n            socketRef.current.on(\"unread_messages_count\", (unreadCounts)=>{\n                console.log(\"Received unread counts:\", unreadCounts);\n                setUnreadMessages(unreadCounts);\n            });\n            return ()=>{\n                socketRef.current?.off(\"unread_messages_count\");\n            };\n        }\n    }, [\n        socketConnected,\n        user\n    ]);\n    // Asegurarse de que los mensajes se marquen como leídos cuando se abre un chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeChat && socketRef.current) {\n            // Crear una clave para el chat actual\n            const chatKey = `${activeChat.type}-${activeChat.id}`;\n            // Resetear el contador de mensajes no leídos para este chat\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n            // Notificar al servidor que los mensajes se han leído\n            socketRef.current.emit(\"mark_messages_read\", {\n                chatId: activeChat.id,\n                chatType: activeChat.type\n            });\n        }\n    }, [\n        activeChat\n    ]);\n    // Función para manejar el cambio de chat activo\n    const handleActiveChatChange = (chat)=>{\n        // Limpiar las notificaciones no leídas cuando se activa un chat\n        if (chat) {\n            const chatKey = `${chat.type}-${chat.id}`;\n            setUnreadMessages((prev)=>({\n                    ...prev,\n                    [chatKey]: 0\n                }));\n        }\n        setActiveChat(chat);\n    };\n    // Efecto para actualizar los mensajes cuando cambia el chat activo\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeChat || !isAuthenticated) return;\n        // Resetear el estado al cambiar de chat\n        setMessages([]);\n        setIsLoadingMessages(true);\n        // Reiniciar estados de mensajes no leídos y archivos en carga\n        if (activeChat) {\n            // Limpiar mensajes no leídos\n            setUnreadMessages((prev)=>{\n                const chatKey = `${activeChat.type}-${activeChat.id}`;\n                if (prev[chatKey]) {\n                    const newState = {\n                        ...prev\n                    };\n                    delete newState[chatKey];\n                    return newState;\n                }\n                return prev;\n            });\n            // Asegurarnos de que la sección \"Archivos en proceso\" desaparezca al cambiar de chat\n            // incluso cuando ya había terminado la carga con 100%\n            const chatId = `${activeChat.type}-${activeChat.id}`;\n            if (chatId in uploadingFilesByChat) {\n                const hasCompletedUploads = Object.values(uploadingFilesByChat[chatId]).some((status)=>status.progress === 100);\n                if (hasCompletedUploads) {\n                    setUploadingFilesByChat((prev)=>{\n                        const newState = {\n                            ...prev\n                        };\n                        delete newState[chatId];\n                        return newState;\n                    });\n                }\n            }\n        }\n        // Solicitar mensajes al servidor\n        const fetchMessages = async ()=>{\n            try {\n                let endpoint = \"\";\n                if (activeChat.type === \"private\") {\n                    endpoint = `${API_URL}/chats/direct/${activeChat.id}`;\n                    // Join user room for direct messages\n                    socketRef.current?.emit(\"join_room\", {\n                        userId: activeChat.id\n                    });\n                } else {\n                    endpoint = `${API_URL}/chats/room/${activeChat.id}`;\n                    // Join room\n                    socketRef.current?.emit(\"join_room\", {\n                        roomId: activeChat.id\n                    });\n                }\n                const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n                setMessages(response.data);\n                // Marcar los mensajes como leídos en el servidor\n                if (response.data.length > 0) {\n                    socketRef.current?.emit(\"mark_messages_read\", {\n                        chatType: activeChat.type,\n                        chatId: activeChat.id\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error fetching messages:\", error);\n            } finally{\n                setIsLoadingMessages(false);\n            }\n        };\n        fetchMessages();\n        return ()=>{\n            // Clean up - leave rooms\n            if (activeChat.type === \"room\") {\n                socketRef.current?.emit(\"leave_room\", {\n                    roomId: activeChat.id\n                });\n            }\n        };\n    }, [\n        activeChat,\n        user,\n        isAuthenticated,\n        API_URL\n    ]);\n    // Efecto para limpiar archivos completados automáticamente\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Revisa cada 2 segundos si hay archivos que están al 100% que deban eliminarse\n        const cleanupInterval = setInterval(()=>{\n            setUploadingFilesByChat((prev)=>{\n                const newState = {\n                    ...prev\n                };\n                let hasChanges = false;\n                // Revisar todos los chats\n                Object.keys(newState).forEach((chatId)=>{\n                    // Revisar todos los archivos en ese chat\n                    Object.keys(newState[chatId]).forEach((fileId)=>{\n                        // Si un archivo está al 100%, eliminarlo\n                        if (newState[chatId][fileId].progress === 100) {\n                            delete newState[chatId][fileId];\n                            hasChanges = true;\n                        }\n                    });\n                    // Si el chat ya no tiene archivos, eliminar el chat\n                    if (Object.keys(newState[chatId]).length === 0) {\n                        delete newState[chatId];\n                        hasChanges = true;\n                    }\n                });\n                return hasChanges ? newState : prev;\n            });\n        }, 2000);\n        return ()=>clearInterval(cleanupInterval);\n    }, []);\n    const sendMessage = async (content, selectedFile)=>{\n        if (!socketRef.current || !activeChat) return;\n        try {\n            // Generar tempIds para los archivos y convertirlos a FileAttachment\n            const attachmentsWithIds = [];\n            if (selectedFile) {\n                const tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n                // Determinar tipo de archivo de forma segura\n                let fileType = \"document\";\n                const fileTypeString = selectedFile.type || \"\"; // Usar string vacío si type es undefined\n                if (fileTypeString.startsWith(\"image/\")) {\n                    fileType = \"image\";\n                } else if (fileTypeString.startsWith(\"video/\")) {\n                    fileType = \"video\";\n                } else if (fileTypeString.startsWith(\"audio/\")) {\n                    fileType = \"audio\";\n                } else {\n                    fileType = \"document\";\n                }\n                // Crear objeto FileAttachment para el archivo\n                const attachment = {\n                    tempId,\n                    filename: selectedFile.name || \"archivo\",\n                    contentType: selectedFile.type || \"application/octet-stream\",\n                    fileType,\n                    size: selectedFile.size || 0\n                };\n                // Iniciar indicador de carga inmediatamente para todos los archivos\n                const chatId = `${activeChat?.type}-${activeChat?.id}`;\n                updateUploadingFiles(chatId, tempId, {\n                    progress: 0,\n                    error: undefined\n                });\n                // Si es un archivo grande, lo procesamos para subida en segundo plano\n                if (selectedFile.size > 5 * 1024 * 1024) {\n                    attachment.isLargeFile = true;\n                    // Leer como base64 para preprocesamiento\n                    const reader = new FileReader();\n                    reader.readAsDataURL(selectedFile);\n                    await new Promise((resolve)=>{\n                        reader.onload = ()=>{\n                            const base64data = reader.result?.toString() || \"\";\n                            // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                            const base64Clean = base64data.split(\",\")[1];\n                            attachment.data = base64Clean;\n                            resolve();\n                        };\n                    });\n                    // Agregar a la lista de adjuntos\n                    attachmentsWithIds.push(attachment);\n                    // Iniciar subida en segundo plano\n                    uploadLargeFileToServer(attachment).then((fileId)=>{\n                        if (fileId) {\n                            // Actualizar el attachment con el fileId\n                            attachment.fileId = fileId;\n                            attachment.isLargeFile = true;\n                            attachment.data = undefined; // Eliminar los datos binarios\n                            // Actualizar progreso a 100%\n                            updateUploadingFiles(chatId, tempId, {\n                                progress: 100,\n                                error: undefined\n                            });\n                        }\n                    }).catch((error)=>{\n                        console.error(\"Error subiendo archivo:\", error);\n                        updateUploadingFiles(chatId, tempId, {\n                            progress: 0,\n                            error: error.message || \"Error al subir el archivo\"\n                        });\n                    });\n                } else {\n                    // Para archivos pequeños (<5MB), leerlos como base64 y enviar con el mensaje\n                    const reader = new FileReader();\n                    reader.readAsDataURL(selectedFile);\n                    await new Promise((resolve)=>{\n                        reader.onload = ()=>{\n                            const base64data = reader.result?.toString() || \"\";\n                            // Quitar el prefijo (ej. \"data:image/jpeg;base64,\")\n                            const base64Clean = base64data.split(\",\")[1];\n                            attachment.data = base64Clean;\n                            resolve();\n                        };\n                    });\n                    // Agregar a la lista de adjuntos\n                    attachmentsWithIds.push(attachment);\n                    // Marcar como completado también para archivos pequeños\n                    updateUploadingFiles(chatId, tempId, {\n                        progress: 100,\n                        error: undefined\n                    });\n                }\n            }\n            // Preparar datos del mensaje\n            const messageData = {\n                content,\n                attachments: attachmentsWithIds,\n                ...activeChat.type === \"private\" ? {\n                    recipientId: activeChat.id\n                } : {\n                    roomId: activeChat.id\n                }\n            };\n            console.log(\"Enviando mensaje:\", messageData);\n            // Enviar el mensaje a través del socket\n            socketRef.current.emit(\"send_message\", messageData, (response)=>{\n                console.log(\"Respuesta al enviar mensaje:\", response);\n                if (!response.success) {\n                    console.error(\"Error al enviar mensaje:\", response.error);\n                }\n            });\n            // Limpiar formulario después de enviar\n            if (fileInputRef.current) {\n                fileInputRef.current.value = \"\";\n            }\n            setSelectedFile(null);\n        } catch (error) {\n            console.error(\"Error al procesar mensaje:\", error);\n        }\n    };\n    const createRoom = async (name, description = \"\", isPrivate = false, members = [])=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms`, {\n                name,\n                description,\n                isPrivate,\n                members\n            });\n            // No need to manually add to rooms array, the socket event will handle it\n            return data;\n        } catch (error) {\n            console.error(\"Error creating room:\", error);\n            throw error;\n        }\n    };\n    const updateRoom = async (roomId, updateData)=>{\n        try {\n            const { data } = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].put(`${API_URL}/rooms/${roomId}`, updateData);\n            // Update the room in the local state to immediately reflect changes\n            setRooms((prevRooms)=>prevRooms.map((room)=>room._id === roomId ? {\n                        ...room,\n                        ...data\n                    } : room));\n            return data;\n        } catch (error) {\n            console.error(\"Error updating room:\", error);\n            throw error;\n        }\n    };\n    const joinRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin adding others)\n            // Otherwise use current user's ID (for self-joining)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error joining room:\", error);\n            throw error;\n        }\n    };\n    const leaveRoom = async (roomId, userId)=>{\n        if (!user && !userId) return;\n        try {\n            // If userId is provided, use it (for admin removing others)\n            // Otherwise use current user's ID (for self-leaving)\n            const targetUserId = userId || user.id;\n            await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/rooms/${roomId}/members/${targetUserId}`);\n        // Room update will be handled by socket event\n        } catch (error) {\n            console.error(\"Error leaving room:\", error);\n            throw error;\n        }\n    };\n    const setTyping = (isTyping)=>{\n        if (!activeChat || !socketRef.current) return;\n        const typingData = {\n            isTyping,\n            ...activeChat.type === \"private\" ? {\n                recipientId: activeChat.id\n            } : {\n                roomId: activeChat.id\n            }\n        };\n        socketRef.current.emit(\"typing\", typingData);\n    };\n    const clearChatHistory = async (recipientId)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/direct/${recipientId}`);\n            return {\n                success: true,\n                message: \"Chat history cleared successfully\"\n            };\n        } catch (error) {\n            console.error(\"Error clearing chat history:\", error);\n            return {\n                success: false,\n                message: \"Failed to clear chat history\"\n            };\n        }\n    };\n    // Implementación de retryFileUpload\n    const retryFileUpload = (file)=>{\n        if (!file.tempId) return;\n        // Reset progress\n        const chatId = `${activeChat?.type}-${activeChat?.id}`;\n        updateUploadingFiles(chatId, file.tempId, {\n            progress: 0,\n            error: undefined\n        });\n        // Prepare for re-upload\n        if (file.data) {\n            // Es un archivo ya convertido a base64\n            uploadLargeFileToServer(file);\n        } else if (file.fileId) {\n            // Remover el error pero mantener el progreso como completado\n            // ya que el archivo ya está subido\n            updateUploadingFiles(chatId, file.tempId, {\n                progress: 100,\n                error: undefined\n            });\n        }\n    };\n    // Función auxiliar para subir un archivo grande directamente al servidor\n    const uploadLargeFileToServer = async (attachment)=>{\n        if (!attachment.tempId) {\n            attachment.tempId = `temp-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n        }\n        try {\n            // Convertir datos base64 a Blob para subir\n            const base64Data = attachment.data || \"\";\n            const byteCharacters = atob(base64Data);\n            const byteArrays = [];\n            for(let offset = 0; offset < byteCharacters.length; offset += 512){\n                const slice = byteCharacters.slice(offset, offset + 512);\n                const byteNumbers = new Array(slice.length);\n                for(let i = 0; i < slice.length; i++){\n                    byteNumbers[i] = slice.charCodeAt(i);\n                }\n                const byteArray = new Uint8Array(byteNumbers);\n                byteArrays.push(byteArray);\n            }\n            const blob = new Blob(byteArrays, {\n                type: attachment.contentType\n            });\n            const file = new File([\n                blob\n            ], attachment.filename, {\n                type: attachment.contentType\n            });\n            // Crear FormData para la subida\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            // Iniciar la carga y actualizar el estado\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: undefined\n            });\n            // Realizar la subida con seguimiento de progreso\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].post(`${API_URL}/file-storage/upload`, formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                },\n                onUploadProgress: (progressEvent)=>{\n                    const percentCompleted = progressEvent.total ? Math.round(progressEvent.loaded * 100 / progressEvent.total) : 0;\n                    console.log(`Progreso de subida para ${attachment.tempId}: ${percentCompleted}%`);\n                    updateUploadingFiles(chatId, attachment.tempId, {\n                        progress: percentCompleted,\n                        error: undefined\n                    });\n                    // Si el archivo ha terminado de cargarse (100%), lo eliminamos de la lista después de un segundo\n                    if (percentCompleted === 100) {\n                        console.log(`Subida completada para ${attachment.tempId}, eliminando en 1 segundo`);\n                        // Esperar un segundo para que el usuario vea que se completó y luego eliminar\n                        setTimeout(()=>{\n                            updateUploadingFiles(chatId, attachment.tempId, null);\n                        }, 1000);\n                    }\n                }\n            });\n            if (response.data && response.data.fileId) {\n                return response.data.fileId;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error al subir archivo:\", error);\n            const chatId = `${activeChat?.type}-${activeChat?.id}`;\n            updateUploadingFiles(chatId, attachment.tempId, {\n                progress: 0,\n                error: error.message || \"Error al subir el archivo\"\n            });\n            return null;\n        }\n    };\n    // Esta función se encarga de marcar un mensaje como leído\n    const handleMarkAsRead = (messageId)=>{\n        if (!socketRef.current) return;\n        socketRef.current.emit(\"mark_message_read\", {\n            messageId\n        });\n        // Actualizar el estado de mensajes localmente\n        setMessages((prev)=>prev.map((msg)=>msg._id === messageId ? {\n                    ...msg,\n                    isRead: true\n                } : msg));\n    };\n    // Esta función carga más mensajes para la paginación\n    const fetchMoreMessages = async (page)=>{\n        if (!activeChat || !user || !isAuthenticated) return;\n        try {\n            let endpoint = \"\";\n            if (activeChat.type === \"private\") {\n                endpoint = `${API_URL}/chats/direct/${activeChat.id}?page=${page}`;\n            } else {\n                endpoint = `${API_URL}/chats/room/${activeChat.id}?page=${page}`;\n            }\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get(endpoint);\n            // Añadir los mensajes anteriores al inicio del array de mensajes\n            setMessages((prev)=>[\n                    ...response.data,\n                    ...prev\n                ]);\n            return response.data.length;\n        } catch (error) {\n            console.error(\"Error al cargar m\\xe1s mensajes:\", error);\n            return 0;\n        }\n    };\n    const deleteMessage = async (messageId, deleteForEveryone)=>{\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_3__[\"default\"][\"delete\"](`${API_URL}/chats/message/${messageId}`, {\n                params: {\n                    deleteForEveryone\n                }\n            });\n            if (response.data.success) {\n                // Eliminar el mensaje del estado local\n                setMessages((prev)=>prev.filter((msg)=>msg._id !== messageId));\n                return true;\n            }\n            return false;\n        } catch (error) {\n            console.error(\"Error al eliminar mensaje:\", error);\n            return false;\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatContext.Provider, {\n        value: {\n            activeChat,\n            messages,\n            rooms,\n            onlineUsers,\n            users,\n            typingUsers,\n            isLoading,\n            isLoadingMessages,\n            unreadMessages,\n            uploadingFiles,\n            setActiveChat: handleActiveChatChange,\n            sendMessage,\n            markAsRead: handleMarkAsRead,\n            startTyping: ()=>setTyping(true),\n            stopTyping: ()=>setTyping(false),\n            loadMoreMessages: fetchMoreMessages,\n            retryFileUpload,\n            cancelFileUpload,\n            deleteMessage\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/contexts/ChatContext.tsx\",\n        lineNumber: 883,\n        columnNumber: 5\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUMsZUFBZThGO1lBQ2Y3RjtZQUNBQyxZQUFZeUw7WUFDWnhMLGFBQWEsSUFBTTJKLFVBQVU7WUFDN0IxSixZQUFZLElBQU0wSixVQUFVO1lBQzVCekosa0JBQWtCdUw7WUFDbEJ0TDtZQUNBQztZQUNBQztRQUNGO2tCQUNHRzs7Ozs7O0FBR1AsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9jb250ZXh0cy9DaGF0Q29udGV4dC50c3g/MGI1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VNZW1vLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGlvLCBTb2NrZXQgfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi9BdXRoQ29udGV4dCc7XG5cbmludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgX2lkPzogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGF2YXRhcjogc3RyaW5nO1xuICBpc09ubGluZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBlbnVtIEZpbGVUeXBlIHtcbiAgSU1BR0UgPSAnaW1hZ2UnLFxuICBWSURFTyA9ICd2aWRlbycsXG4gIERPQ1VNRU5UID0gJ2RvY3VtZW50JyxcbiAgQVVESU8gPSAnYXVkaW8nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUF0dGFjaG1lbnQge1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICBmaWxlVHlwZTogRmlsZVR5cGU7XG4gIGRhdGE/OiBzdHJpbmc7IC8vIEJhc2U2NCBlbmNvZGVkIGRhdGEgcGFyYSBhcmNoaXZvcyBwZXF1ZcOxb3NcbiAgc2l6ZT86IG51bWJlcjtcbiAgZmlsZUlkPzogc3RyaW5nOyAvLyBJRCBwYXJhIGFyY2hpdm9zIGdyYW5kZXMgYWxtYWNlbmFkb3MgcG9yIHNlcGFyYWRvXG4gIGlzTGFyZ2VGaWxlPzogYm9vbGVhbjsgLy8gSW5kaWNhIHNpIGVsIGFyY2hpdm8gZXN0w6EgYWxtYWNlbmFkbyBwb3Igc2VwYXJhZG9cbiAgaXNDaHVuaz86IGJvb2xlYW47XG4gIG9yaWdpbmFsRmlsZW5hbWU/OiBzdHJpbmc7XG4gIGNodW5rSW5kZXg/OiBudW1iZXI7XG4gIHRvdGFsQ2h1bmtzPzogbnVtYmVyO1xuICB0ZW1wSWQ/OiBzdHJpbmc7IC8vIElEIHRlbXBvcmFsIHBhcmEgc2VndWltaWVudG8gZGUgY2FyZ2Fcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICBfaWQ6IHN0cmluZztcbiAgY29udGVudD86IHN0cmluZztcbiAgYXR0YWNobWVudHM/OiBGaWxlQXR0YWNobWVudFtdO1xuICBzZW5kZXI6IFVzZXI7XG4gIHJlY2lwaWVudD86IHN0cmluZztcbiAgcm9vbT86IHN0cmluZztcbiAgaXNSZWFkOiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJvb20ge1xuICBfaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIGNyZWF0b3I6IFVzZXI7XG4gIG1lbWJlcnM6IFVzZXJbXTtcbiAgaXNQcml2YXRlOiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgcmVtb3ZlZD86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBDaGF0Q29udGV4dFR5cGUge1xuICBhY3RpdmVDaGF0OiB7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbDtcbiAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcbiAgcm9vbXM6IFJvb21bXTtcbiAgb25saW5lVXNlcnM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+O1xuICB1c2VyczogVXNlcltdO1xuICB0eXBpbmdVc2VyczogUmVjb3JkPHN0cmluZywgYm9vbGVhbiB8IHN0cmluZz47XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgaXNMb2FkaW5nTWVzc2FnZXM6IGJvb2xlYW47XG4gIHVucmVhZE1lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICB1cGxvYWRpbmdGaWxlczogUmVjb3JkPHN0cmluZywgeyBwcm9ncmVzczogbnVtYmVyLCBlcnJvcj86IHN0cmluZyB9PjtcbiAgc2V0QWN0aXZlQ2hhdDogKGNoYXQ6IHsgdHlwZTogJ3ByaXZhdGUnIHwgJ3Jvb20nLCBpZDogc3RyaW5nIH0gfCBudWxsKSA9PiB2b2lkO1xuICBzZW5kTWVzc2FnZTogKGNvbnRlbnQ6IHN0cmluZywgc2VsZWN0ZWRGaWxlOiBGaWxlIHwgbnVsbCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbWFya0FzUmVhZDogKG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzdGFydFR5cGluZzogKCkgPT4gdm9pZDtcbiAgc3RvcFR5cGluZzogKCkgPT4gdm9pZDtcbiAgbG9hZE1vcmVNZXNzYWdlczogKHBhZ2U6IG51bWJlcikgPT4gUHJvbWlzZTxudW1iZXI+O1xuICByZXRyeUZpbGVVcGxvYWQ6IChmaWxlOiBGaWxlQXR0YWNobWVudCkgPT4gdm9pZDtcbiAgY2FuY2VsRmlsZVVwbG9hZDogKGZpbGU6IEZpbGVBdHRhY2htZW50KSA9PiB2b2lkO1xuICBkZWxldGVNZXNzYWdlOiAobWVzc2FnZUlkOiBzdHJpbmcsIGRlbGV0ZUZvckV2ZXJ5b25lOiBib29sZWFuKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xufVxuXG5jb25zdCBDaGF0Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8Q2hhdENvbnRleHRUeXBlPih7XG4gIGFjdGl2ZUNoYXQ6IG51bGwsXG4gIG1lc3NhZ2VzOiBbXSxcbiAgcm9vbXM6IFtdLFxuICBvbmxpbmVVc2Vyczoge30sXG4gIHVzZXJzOiBbXSxcbiAgdHlwaW5nVXNlcnM6IHt9LFxuICBpc0xvYWRpbmc6IHRydWUsXG4gIGlzTG9hZGluZ01lc3NhZ2VzOiBmYWxzZSxcbiAgdW5yZWFkTWVzc2FnZXM6IHt9LFxuICB1cGxvYWRpbmdGaWxlczoge30sXG4gIHNldEFjdGl2ZUNoYXQ6ICgpID0+IHt9LFxuICBzZW5kTWVzc2FnZTogYXN5bmMgKCkgPT4ge30sXG4gIG1hcmtBc1JlYWQ6ICgpID0+IHt9LFxuICBzdGFydFR5cGluZzogKCkgPT4ge30sXG4gIHN0b3BUeXBpbmc6ICgpID0+IHt9LFxuICBsb2FkTW9yZU1lc3NhZ2VzOiBhc3luYyAoKSA9PiAwLFxuICByZXRyeUZpbGVVcGxvYWQ6ICgpID0+IHt9LFxuICBjYW5jZWxGaWxlVXBsb2FkOiAoKSA9PiB7fSxcbiAgZGVsZXRlTWVzc2FnZTogYXN5bmMgKCkgPT4gZmFsc2UsXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZUNoYXQgPSAoKSA9PiB1c2VDb250ZXh0KENoYXRDb250ZXh0KTtcblxuZXhwb3J0IGNvbnN0IENoYXRQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCB7IHVzZXIsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCBbYWN0aXZlQ2hhdCwgc2V0QWN0aXZlQ2hhdF0gPSB1c2VTdGF0ZTx7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtyb29tcywgc2V0Um9vbXNdID0gdXNlU3RhdGU8Um9vbVtdPihbXSk7XG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGU8VXNlcltdPihbXSk7XG4gIGNvbnN0IFtvbmxpbmVVc2Vycywgc2V0T25saW5lVXNlcnNdID0gdXNlU3RhdGU8UmVjb3JkPHN0cmluZywgYm9vbGVhbj4+KHt9KTtcbiAgY29uc3QgW3R5cGluZ1VzZXJzLCBzZXRUeXBpbmdVc2Vyc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBib29sZWFuIHwgc3RyaW5nPj4oe30pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0xvYWRpbmdNZXNzYWdlcywgc2V0SXNMb2FkaW5nTWVzc2FnZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc29ja2V0Q29ubmVjdGVkLCBzZXRTb2NrZXRDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdW5yZWFkTWVzc2FnZXMsIHNldFVucmVhZE1lc3NhZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KHt9KTtcbiAgY29uc3QgW3VwbG9hZGluZ0ZpbGVzQnlDaGF0LCBzZXRVcGxvYWRpbmdGaWxlc0J5Q2hhdF0gPSB1c2VTdGF0ZTx7XG4gICAgW2NoYXRJZDogc3RyaW5nXToge1xuICAgICAgW2ZpbGVJZDogc3RyaW5nXToge1xuICAgICAgICBwcm9ncmVzczogbnVtYmVyO1xuICAgICAgICBlcnJvcj86IHN0cmluZztcbiAgICAgIH1cbiAgICB9XG4gIH0+KHt9KTtcbiAgY29uc3QgW3NlbGVjdGVkRmlsZSwgc2V0U2VsZWN0ZWRGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IHVwbG9hZGluZ0ZpbGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0KSByZXR1cm4ge307XG4gICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICByZXR1cm4gdXBsb2FkaW5nRmlsZXNCeUNoYXRbY2hhdElkXSB8fCB7fTtcbiAgfSwgW2FjdGl2ZUNoYXQsIHVwbG9hZGluZ0ZpbGVzQnlDaGF0XSk7XG5cbiAgY29uc3QgdXBkYXRlVXBsb2FkaW5nRmlsZXMgPSB1c2VDYWxsYmFjaygoXG4gICAgY2hhdElkOiBzdHJpbmcsXG4gICAgZmlsZUlkOiBzdHJpbmcsXG4gICAgZGF0YTogeyBwcm9ncmVzczogbnVtYmVyOyBlcnJvcj86IHN0cmluZyB9IHwgbnVsbFxuICApID0+IHtcbiAgICBjb25zb2xlLmxvZyhgQWN0dWFsaXphbmRvIGVzdGFkbyBkZSBhcmNoaXZvICR7ZmlsZUlkfSBlbiBjaGF0ICR7Y2hhdElkfTpgLCBkYXRhKTtcbiAgICBcbiAgICBzZXRVcGxvYWRpbmdGaWxlc0J5Q2hhdChwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0geyAuLi5wcmV2IH07XG4gICAgICBcbiAgICAgIC8vIFNpIG5vIGV4aXN0ZSBlbCBjaGF0LCBsbyBjcmVhbW9zXG4gICAgICBpZiAoIW5ld1N0YXRlW2NoYXRJZF0pIHtcbiAgICAgICAgbmV3U3RhdGVbY2hhdElkXSA9IHt9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaSBkYXRhIGVzIG51bGwsIGVsaW1pbmFtb3MgZWwgYXJjaGl2b1xuICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgaWYgKG5ld1N0YXRlW2NoYXRJZF1bZmlsZUlkXSkge1xuICAgICAgICAgIGNvbnN0IHsgW2ZpbGVJZF06IF8sIC4uLnJlc3RGaWxlcyB9ID0gbmV3U3RhdGVbY2hhdElkXTtcbiAgICAgICAgICBuZXdTdGF0ZVtjaGF0SWRdID0gcmVzdEZpbGVzO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBFbGltaW5hZG8gYXJjaGl2byAke2ZpbGVJZH0gZGUgY2hhdCAke2NoYXRJZH1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWN0dWFsaXphbW9zIG8gYWdyZWdhbW9zIGVsIGFyY2hpdm9cbiAgICAgICAgbmV3U3RhdGVbY2hhdElkXVtmaWxlSWRdID0gZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coYEFjdHVhbGl6YWRvIGFyY2hpdm8gJHtmaWxlSWR9IGVuIGNoYXQgJHtjaGF0SWR9IGNvbiBwcm9ncmVzbyAke2RhdGEucHJvZ3Jlc3N9JWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjYW5jZWxGaWxlVXBsb2FkID0gKGZpbGU6IEZpbGVBdHRhY2htZW50KSA9PiB7XG4gICAgaWYgKCFmaWxlLnRlbXBJZCB8fCAhYWN0aXZlQ2hhdCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQudHlwZX0tJHthY3RpdmVDaGF0LmlkfWA7XG4gICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCBmaWxlLnRlbXBJZCwgbnVsbCk7XG4gIH07XG5cbiAgY29uc3Qgc29ja2V0UmVmID0gdXNlUmVmPFNvY2tldCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjdXJyZW50QWN0aXZlQ2hhdFJlZiA9IHVzZVJlZihhY3RpdmVDaGF0KTtcbiAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuICBcbiAgLy8gS2VlcCB0aGUgcmVmIGluIHN5bmMgd2l0aCB0aGUgc3RhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50ID0gYWN0aXZlQ2hhdDtcbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIGNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuICBcbiAgLy8gSW5pdGlhbGl6ZSBzb2NrZXQgY29ubmVjdGlvbiB3aGVuIGF1dGhlbnRpY2F0ZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCB8fCAhdXNlcikge1xuICAgICAgaWYgKHNvY2tldFJlZi5jdXJyZW50KSB7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgc2V0U29ja2V0Q29ubmVjdGVkKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcbiAgICBcbiAgICBpZiAoIXRva2VuKSByZXR1cm47XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQgPSBpbyhBUElfVVJMLCB7XG4gICAgICBhdXRoOiB7IHRva2VuIH0sXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsXG4gICAgICAvLyBBdW1lbnRhciBlbCB0aWVtcG8gZGUgZXNwZXJhIHBhcmEgcGVybWl0aXIgZW52w61vIGRlIGFyY2hpdm9zIGdyYW5kZXNcbiAgICAgIHRpbWVvdXQ6IDYwMDAwIC8vIGF1bWVudGFyIGVsIHRpZW1wbyBkZSBlc3BlcmEgYSA2MCBzZWd1bmRvc1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFNvY2tldCBldmVudCBsaXN0ZW5lcnNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICBzZXRTb2NrZXRDb25uZWN0ZWQodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgc29ja2V0UmVmLmN1cnJlbnQub24oJ25ld19tZXNzYWdlJywgKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUNoYXQgPSBjdXJyZW50QWN0aXZlQ2hhdFJlZi5jdXJyZW50O1xuICAgICAgXG4gICAgICAvLyBJZGVudGlmaWNhciBsYSBjbGF2ZSBkZSBjaGF0IHBhcmEgc2VndWltaWVudG8gZGUgbm90aWZpY2FjaW9uZXNcbiAgICAgIGxldCBjaGF0S2V5ID0gJyc7XG4gICAgICBpZiAobWVzc2FnZS5yb29tKSB7XG4gICAgICAgIGNoYXRLZXkgPSBgcm9vbS0ke21lc3NhZ2Uucm9vbX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhdEtleSA9IG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gdXNlci5pZCA/IGBwcml2YXRlLSR7bWVzc2FnZS5yZWNpcGllbnR9YCA6IGBwcml2YXRlLSR7bWVzc2FnZS5zZW5kZXIuX2lkfWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdNZW5zYWplIHJlY2liaWRvOicsIG1lc3NhZ2UsICdDaGF0IGFjdGl2bzonLCBhY3RpdmVDaGF0KTtcbiAgICAgIFxuICAgICAgLy8gU29sbyBhZ3JlZ2FyIGVsIG1lbnNhamUgc2kgZXMgcmVsZXZhbnRlIHBhcmEgZWwgY2hhdCBhY3Rpdm9cbiAgICAgIGlmIChcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJyAmJiBcbiAgICAgICAgICAoKG1lc3NhZ2Uuc2VuZGVyLl9pZCA9PT0gYWN0aXZlQ2hhdC5pZCAmJiBtZXNzYWdlLnJlY2lwaWVudCA9PT0gdXNlci5pZCkgfHwgXG4gICAgICAgICAgIChtZXNzYWdlLnNlbmRlci5faWQgPT09IHVzZXIuaWQgJiYgbWVzc2FnZS5yZWNpcGllbnQgPT09IGFjdGl2ZUNoYXQuaWQpKSkgfHxcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdyb29tJyAmJiBtZXNzYWdlLnJvb20gPT09IGFjdGl2ZUNoYXQuaWQpXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FncmVnYW5kbyBtZW5zYWplIGFsIGNoYXQgYWN0aXZvOicsIG1lc3NhZ2UpO1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBtZXNzYWdlXSk7XG4gICAgICB9IFxuICAgICAgLy8gU2kgZWwgbWVuc2FqZSBubyBlcyBwYXJhIGVsIGNoYXQgYWN0aXZvIHkgbm8gZnVlIGVudmlhZG8gcG9yIGVsIHVzdWFyaW8gYWN0dWFsLCBpbmNyZW1lbnRhciBjb250YWRvclxuICAgICAgZWxzZSBpZiAobWVzc2FnZS5zZW5kZXIuX2lkICE9PSB1c2VyLmlkICYmIGNoYXRLZXkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyBtZXNzYWdlIG5vdGlmaWNhdGlvbjonLCBjaGF0S2V5LCBtZXNzYWdlKTtcbiAgICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgW2NoYXRLZXldOiAocHJldltjaGF0S2V5XSB8fCAwKSArIDFcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd1c2VyX3N0YXR1c19jaGFuZ2UnLCAoeyB1c2VySWQsIGlzT25saW5lIH0pID0+IHtcbiAgICAgIHNldE9ubGluZVVzZXJzKHByZXYgPT4gKHsgLi4ucHJldiwgW3VzZXJJZF06IGlzT25saW5lIH0pKTtcbiAgICB9KTtcbiAgICBcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbigndHlwaW5nX2luZGljYXRvcicsIChkYXRhOiB7IHVzZXJJZDogc3RyaW5nLCB1c2VyTmFtZTogc3RyaW5nLCBpc1R5cGluZzogYm9vbGVhbiwgcm9vbUlkPzogc3RyaW5nLCBzZW5kZXJJZD86IHN0cmluZyB9KSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVDaGF0ID0gY3VycmVudEFjdGl2ZUNoYXRSZWYuY3VycmVudDtcbiAgICAgIGlmIChcbiAgICAgICAgKGFjdGl2ZUNoYXQ/LnR5cGUgPT09ICdwcml2YXRlJyAmJiBkYXRhLnNlbmRlcklkID09PSBhY3RpdmVDaGF0LmlkKSB8fFxuICAgICAgICAoYWN0aXZlQ2hhdD8udHlwZSA9PT0gJ3Jvb20nICYmIGRhdGEucm9vbUlkID09PSBhY3RpdmVDaGF0LmlkKVxuICAgICAgKSB7XG4gICAgICAgIC8vIEFsbWFjZW5hciBub21icmUgZW4gbHVnYXIgZGUgc29sbyBsYSBiYW5kZXJhIGJvb2xlYW5hXG4gICAgICAgIHNldFR5cGluZ1VzZXJzKHByZXYgPT4gKHsgXG4gICAgICAgICAgLi4ucHJldiwgXG4gICAgICAgICAgW2RhdGEudXNlcklkXTogZGF0YS5pc1R5cGluZyA/IGRhdGEudXNlck5hbWUgOiBmYWxzZSBcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdtZXNzYWdlX3JlYWQnLCAoeyBtZXNzYWdlSWQgfSkgPT4ge1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBcbiAgICAgICAgcHJldi5tYXAobXNnID0+IFxuICAgICAgICAgIG1zZy5faWQgPT09IG1lc3NhZ2VJZCA/IHsgLi4ubXNnLCBpc1JlYWQ6IHRydWUgfSA6IG1zZ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSBuZXcgcm9vbSBjcmVhdGlvbnNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbmV3X3Jvb20nLCAocm9vbTogUm9vbSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ05ldyByb29tIHJlY2VpdmVkOicsIHJvb20pO1xuICAgICAgc2V0Um9vbXMocHJldiA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByb29tIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShyID0+IHIuX2lkID09PSByb29tLl9pZCk7XG4gICAgICAgIGlmIChleGlzdHMpIHJldHVybiBwcmV2O1xuICAgICAgICByZXR1cm4gWy4uLnByZXYsIHJvb21dO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHJvb20gdXBkYXRlcyAobWVtYmVycyBhZGRlZC9yZW1vdmVkKVxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdyb29tX3VwZGF0ZWQnLCAocm9vbTogUm9vbSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1Jvb20gdXBkYXRlZDonLCByb29tKTtcbiAgICAgIGlmIChyb29tLnJlbW92ZWQpIHtcbiAgICAgICAgLy8gSWYgdGhpcyByb29tIHdhcyByZW1vdmVkIGZvciB0aGlzIHVzZXIsIHJlbW92ZSBpdCBmcm9tIHRoZSBsaXN0XG4gICAgICAgIHNldFJvb21zKHByZXYgPT4gcHJldi5maWx0ZXIociA9PiByLl9pZCAhPT0gcm9vbS5faWQpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGFjdGl2ZSBjaGF0IGlzIHRoaXMgcm9vbSwgY2xlYXIgaXRcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhdCA9IGN1cnJlbnRBY3RpdmVDaGF0UmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChhY3RpdmVDaGF0Py50eXBlID09PSAncm9vbScgJiYgYWN0aXZlQ2hhdC5pZCA9PT0gcm9vbS5faWQpIHtcbiAgICAgICAgICBzZXRBY3RpdmVDaGF0KG51bGwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHJvb20gaW4gdGhlIGxpc3RcbiAgICAgICAgc2V0Um9vbXMocHJldiA9PiBwcmV2Lm1hcChyID0+IHIuX2lkID09PSByb29tLl9pZCA/IHJvb20gOiByKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRXNjdWNoYXIgZXZlbnRvcyBkZSBlbGltaW5hY2nDs24gZGUgbWVuc2FqZXNcbiAgICBzb2NrZXRSZWYuY3VycmVudC5vbignbWVzc2FnZV9kZWxldGVkJywgKHsgbWVzc2FnZUlkLCBkZWxldGVGb3JFdmVyeW9uZSB9KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTWVuc2FqZSBlbGltaW5hZG8gcmVjaWJpZG86JywgbWVzc2FnZUlkLCBkZWxldGVGb3JFdmVyeW9uZSk7XG4gICAgICBpZiAoZGVsZXRlRm9yRXZlcnlvbmUpIHtcbiAgICAgICAgLy8gU2kgZnVlIGVsaW1pbmFkbyBwYXJhIHRvZG9zLCBhY3R1YWxpemFyIGxhIFVJXG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5maWx0ZXIobXNnID0+IG1zZy5faWQgIT09IG1lc3NhZ2VJZCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1NvY2tldCBkaXNjb25uZWN0ZWQnKTtcbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzb2NrZXRSZWYuY3VycmVudCkge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHNvY2tldFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHNldFNvY2tldENvbm5lY3RlZChmYWxzZSk7XG4gICAgfTtcbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlciwgQVBJX1VSTF0pO1xuICBcbiAgLy8gTG9hZCBpbml0aWFsIGRhdGE6IHVzZXJzIGFuZCByb29tc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmZXRjaEluaXRpYWxEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgW3VzZXJzUmVzcG9uc2UsIHJvb21zUmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS91c2Vyc2ApLFxuICAgICAgICAgIGF4aW9zLmdldChgJHtBUElfVVJMfS9yb29tcy9teWApXG4gICAgICAgIF0pO1xuICAgICAgICBcbiAgICAgICAgc2V0VXNlcnModXNlcnNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgc2V0Um9vbXMocm9vbXNSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBpbml0aWFsIG9ubGluZSBzdGF0dXNcbiAgICAgICAgY29uc3QgaW5pdGlhbE9ubGluZVN0YXR1czogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fTtcbiAgICAgICAgdXNlcnNSZXNwb25zZS5kYXRhLmZvckVhY2goKHVzZXI6IFVzZXIpID0+IHtcbiAgICAgICAgICBpbml0aWFsT25saW5lU3RhdHVzW3VzZXIuX2lkIV0gPSB1c2VyLmlzT25saW5lIHx8IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0T25saW5lVXNlcnMoaW5pdGlhbE9ubGluZVN0YXR1cyk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW5pdGlhbCBkYXRhOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaEluaXRpYWxEYXRhKCk7XG4gIH0sIFtpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEN1YW5kbyBzZSBpbmljaWEgZWwgc29ja2V0IHkgc2UgY29uZWN0YSwgc29saWNpdGFtb3MgZWwgZXN0YWRvIGFjdHVhbCBkZSBtZW5zYWplcyBubyBsZcOtZG9zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNvY2tldENvbm5lY3RlZCAmJiBzb2NrZXRSZWYuY3VycmVudCAmJiB1c2VyKSB7XG4gICAgICAvLyBTb2xpY2l0YXIgbWVuc2FqZXMgbm8gbGXDrWRvcyBhbCBzZXJ2aWRvclxuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnZ2V0X3VucmVhZF9tZXNzYWdlcycpO1xuICAgICAgXG4gICAgICAvLyBFc2N1Y2hhciBsYSByZXNwdWVzdGEgY29uIGVsIHJlY3VlbnRvIGRlIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNvY2tldFJlZi5jdXJyZW50Lm9uKCd1bnJlYWRfbWVzc2FnZXNfY291bnQnLCAodW5yZWFkQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCB1bnJlYWQgY291bnRzOicsIHVucmVhZENvdW50cyk7XG4gICAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHVucmVhZENvdW50cyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgc29ja2V0UmVmLmN1cnJlbnQ/Lm9mZigndW5yZWFkX21lc3NhZ2VzX2NvdW50Jyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3NvY2tldENvbm5lY3RlZCwgdXNlcl0pO1xuXG4gIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxvcyBtZW5zYWplcyBzZSBtYXJxdWVuIGNvbW8gbGXDrWRvcyBjdWFuZG8gc2UgYWJyZSB1biBjaGF0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZUNoYXQgJiYgc29ja2V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIC8vIENyZWFyIHVuYSBjbGF2ZSBwYXJhIGVsIGNoYXQgYWN0dWFsXG4gICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIFxuICAgICAgLy8gUmVzZXRlYXIgZWwgY29udGFkb3IgZGUgbWVuc2FqZXMgbm8gbGXDrWRvcyBwYXJhIGVzdGUgY2hhdFxuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgICAgLy8gTm90aWZpY2FyIGFsIHNlcnZpZG9yIHF1ZSBsb3MgbWVuc2FqZXMgc2UgaGFuIGxlw61kb1xuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICBjaGF0SWQ6IGFjdGl2ZUNoYXQuaWQsXG4gICAgICAgIGNoYXRUeXBlOiBhY3RpdmVDaGF0LnR5cGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2FjdGl2ZUNoYXRdKTtcbiAgXG4gIC8vIEZ1bmNpw7NuIHBhcmEgbWFuZWphciBlbCBjYW1iaW8gZGUgY2hhdCBhY3Rpdm9cbiAgY29uc3QgaGFuZGxlQWN0aXZlQ2hhdENoYW5nZSA9IChjaGF0OiB7IHR5cGU6ICdwcml2YXRlJyB8ICdyb29tJywgaWQ6IHN0cmluZyB9IHwgbnVsbCkgPT4ge1xuICAgIC8vIExpbXBpYXIgbGFzIG5vdGlmaWNhY2lvbmVzIG5vIGxlw61kYXMgY3VhbmRvIHNlIGFjdGl2YSB1biBjaGF0XG4gICAgaWYgKGNoYXQpIHtcbiAgICAgIGNvbnN0IGNoYXRLZXkgPSBgJHtjaGF0LnR5cGV9LSR7Y2hhdC5pZH1gO1xuICAgICAgc2V0VW5yZWFkTWVzc2FnZXMocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBbY2hhdEtleV06IDBcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgXG4gICAgc2V0QWN0aXZlQ2hhdChjaGF0KTtcbiAgfTtcblxuICAvLyBFZmVjdG8gcGFyYSBhY3R1YWxpemFyIGxvcyBtZW5zYWplcyBjdWFuZG8gY2FtYmlhIGVsIGNoYXQgYWN0aXZvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVDaGF0IHx8ICFpc0F1dGhlbnRpY2F0ZWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBSZXNldGVhciBlbCBlc3RhZG8gYWwgY2FtYmlhciBkZSBjaGF0XG4gICAgc2V0TWVzc2FnZXMoW10pO1xuICAgIHNldElzTG9hZGluZ01lc3NhZ2VzKHRydWUpO1xuICAgIFxuICAgIC8vIFJlaW5pY2lhciBlc3RhZG9zIGRlIG1lbnNhamVzIG5vIGxlw61kb3MgeSBhcmNoaXZvcyBlbiBjYXJnYVxuICAgIGlmIChhY3RpdmVDaGF0KSB7XG4gICAgICAvLyBMaW1waWFyIG1lbnNhamVzIG5vIGxlw61kb3NcbiAgICAgIHNldFVucmVhZE1lc3NhZ2VzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBjaGF0S2V5ID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgICAgaWYgKHByZXZbY2hhdEtleV0pIHtcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsgLi4ucHJldiB9O1xuICAgICAgICAgIGRlbGV0ZSBuZXdTdGF0ZVtjaGF0S2V5XTtcbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQXNlZ3VyYXJub3MgZGUgcXVlIGxhIHNlY2Npw7NuIFwiQXJjaGl2b3MgZW4gcHJvY2Vzb1wiIGRlc2FwYXJlemNhIGFsIGNhbWJpYXIgZGUgY2hhdFxuICAgICAgLy8gaW5jbHVzbyBjdWFuZG8geWEgaGFiw61hIHRlcm1pbmFkbyBsYSBjYXJnYSBjb24gMTAwJVxuICAgICAgY29uc3QgY2hhdElkID0gYCR7YWN0aXZlQ2hhdC50eXBlfS0ke2FjdGl2ZUNoYXQuaWR9YDtcbiAgICAgIGlmIChjaGF0SWQgaW4gdXBsb2FkaW5nRmlsZXNCeUNoYXQpIHtcbiAgICAgICAgY29uc3QgaGFzQ29tcGxldGVkVXBsb2FkcyA9IE9iamVjdC52YWx1ZXModXBsb2FkaW5nRmlsZXNCeUNoYXRbY2hhdElkXSlcbiAgICAgICAgICAuc29tZShzdGF0dXMgPT4gc3RhdHVzLnByb2dyZXNzID09PSAxMDApO1xuICAgICAgICAgIFxuICAgICAgICBpZiAoaGFzQ29tcGxldGVkVXBsb2Fkcykge1xuICAgICAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7Li4ucHJldn07XG4gICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXTtcbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvbGljaXRhciBtZW5zYWplcyBhbCBzZXJ2aWRvclxuICAgIGNvbnN0IGZldGNoTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJykge1xuICAgICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gdXNlciByb29tIGZvciBkaXJlY3QgbWVzc2FnZXNcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnam9pbl9yb29tJywgeyB1c2VySWQ6IGFjdGl2ZUNoYXQuaWQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5kcG9pbnQgPSBgJHtBUElfVVJMfS9jaGF0cy9yb29tLyR7YWN0aXZlQ2hhdC5pZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEpvaW4gcm9vbVxuICAgICAgICAgIHNvY2tldFJlZi5jdXJyZW50Py5lbWl0KCdqb2luX3Jvb20nLCB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZW5kcG9pbnQpO1xuICAgICAgICBzZXRNZXNzYWdlcyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmNhciBsb3MgbWVuc2FqZXMgY29tbyBsZcOtZG9zIGVuIGVsIHNlcnZpZG9yXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbWFya19tZXNzYWdlc19yZWFkJywge1xuICAgICAgICAgICAgY2hhdFR5cGU6IGFjdGl2ZUNoYXQudHlwZSxcbiAgICAgICAgICAgIGNoYXRJZDogYWN0aXZlQ2hhdC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlczonLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRJc0xvYWRpbmdNZXNzYWdlcyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBmZXRjaE1lc3NhZ2VzKCk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIENsZWFuIHVwIC0gbGVhdmUgcm9vbXNcbiAgICAgIGlmIChhY3RpdmVDaGF0LnR5cGUgPT09ICdyb29tJykge1xuICAgICAgICBzb2NrZXRSZWYuY3VycmVudD8uZW1pdCgnbGVhdmVfcm9vbScsIHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFthY3RpdmVDaGF0LCB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIEFQSV9VUkxdKTtcbiAgXG4gIC8vIEVmZWN0byBwYXJhIGxpbXBpYXIgYXJjaGl2b3MgY29tcGxldGFkb3MgYXV0b23DoXRpY2FtZW50ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFJldmlzYSBjYWRhIDIgc2VndW5kb3Mgc2kgaGF5IGFyY2hpdm9zIHF1ZSBlc3TDoW4gYWwgMTAwJSBxdWUgZGViYW4gZWxpbWluYXJzZVxuICAgIGNvbnN0IGNsZWFudXBJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0KHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHsuLi5wcmV2fTtcbiAgICAgICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJldmlzYXIgdG9kb3MgbG9zIGNoYXRzXG4gICAgICAgIE9iamVjdC5rZXlzKG5ld1N0YXRlKS5mb3JFYWNoKGNoYXRJZCA9PiB7XG4gICAgICAgICAgLy8gUmV2aXNhciB0b2RvcyBsb3MgYXJjaGl2b3MgZW4gZXNlIGNoYXRcbiAgICAgICAgICBPYmplY3Qua2V5cyhuZXdTdGF0ZVtjaGF0SWRdKS5mb3JFYWNoKGZpbGVJZCA9PiB7XG4gICAgICAgICAgICAvLyBTaSB1biBhcmNoaXZvIGVzdMOhIGFsIDEwMCUsIGVsaW1pbmFybG9cbiAgICAgICAgICAgIGlmIChuZXdTdGF0ZVtjaGF0SWRdW2ZpbGVJZF0ucHJvZ3Jlc3MgPT09IDEwMCkge1xuICAgICAgICAgICAgICBkZWxldGUgbmV3U3RhdGVbY2hhdElkXVtmaWxlSWRdO1xuICAgICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaSBlbCBjaGF0IHlhIG5vIHRpZW5lIGFyY2hpdm9zLCBlbGltaW5hciBlbCBjaGF0XG4gICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5ld1N0YXRlW2NoYXRJZF0pLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIG5ld1N0YXRlW2NoYXRJZF07XG4gICAgICAgICAgICBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZXMgPyBuZXdTdGF0ZSA6IHByZXY7XG4gICAgICB9KTtcbiAgICB9LCAyMDAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjbGVhbnVwSW50ZXJ2YWwpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAoY29udGVudDogc3RyaW5nLCBzZWxlY3RlZEZpbGU6IEZpbGUgfCBudWxsKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudCB8fCAhYWN0aXZlQ2hhdCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZW5lcmFyIHRlbXBJZHMgcGFyYSBsb3MgYXJjaGl2b3MgeSBjb252ZXJ0aXJsb3MgYSBGaWxlQXR0YWNobWVudFxuICAgICAgY29uc3QgYXR0YWNobWVudHNXaXRoSWRzOiBGaWxlQXR0YWNobWVudFtdID0gW107XG4gICAgICBcbiAgICAgIGlmIChzZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgY29uc3QgdGVtcElkID0gYHRlbXAtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZXJtaW5hciB0aXBvIGRlIGFyY2hpdm8gZGUgZm9ybWEgc2VndXJhXG4gICAgICAgIGxldCBmaWxlVHlwZSA9IEZpbGVUeXBlLkRPQ1VNRU5UO1xuICAgICAgICBjb25zdCBmaWxlVHlwZVN0cmluZyA9IHNlbGVjdGVkRmlsZS50eXBlIHx8ICcnOyAvLyBVc2FyIHN0cmluZyB2YWPDrW8gc2kgdHlwZSBlcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKGZpbGVUeXBlU3RyaW5nLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICAgICAgZmlsZVR5cGUgPSBGaWxlVHlwZS5JTUFHRTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlVHlwZVN0cmluZy5zdGFydHNXaXRoKCd2aWRlby8nKSkge1xuICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuVklERU87XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZVR5cGVTdHJpbmcuc3RhcnRzV2l0aCgnYXVkaW8vJykpIHtcbiAgICAgICAgICBmaWxlVHlwZSA9IEZpbGVUeXBlLkFVRElPO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpbGVUeXBlID0gRmlsZVR5cGUuRE9DVU1FTlQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIG9iamV0byBGaWxlQXR0YWNobWVudCBwYXJhIGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgYXR0YWNobWVudDogRmlsZUF0dGFjaG1lbnQgPSB7XG4gICAgICAgICAgdGVtcElkLFxuICAgICAgICAgIGZpbGVuYW1lOiBzZWxlY3RlZEZpbGUubmFtZSB8fCAnYXJjaGl2bycsXG4gICAgICAgICAgY29udGVudFR5cGU6IHNlbGVjdGVkRmlsZS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgICAgICAgIGZpbGVUeXBlLFxuICAgICAgICAgIHNpemU6IHNlbGVjdGVkRmlsZS5zaXplIHx8IDBcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYXIgaW5kaWNhZG9yIGRlIGNhcmdhIGlubWVkaWF0YW1lbnRlIHBhcmEgdG9kb3MgbG9zIGFyY2hpdm9zXG4gICAgICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQ/LnR5cGV9LSR7YWN0aXZlQ2hhdD8uaWR9YDtcbiAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkISwgdGVtcElkLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgZXMgdW4gYXJjaGl2byBncmFuZGUsIGxvIHByb2Nlc2Ftb3MgcGFyYSBzdWJpZGEgZW4gc2VndW5kbyBwbGFub1xuICAgICAgICBpZiAoc2VsZWN0ZWRGaWxlLnNpemUgPiA1ICogMTAyNCAqIDEwMjQpIHsgLy8gTcOhcyBkZSA1TUJcbiAgICAgICAgICBhdHRhY2htZW50LmlzTGFyZ2VGaWxlID0gdHJ1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBMZWVyIGNvbW8gYmFzZTY0IHBhcmEgcHJlcHJvY2VzYW1pZW50b1xuICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ZGF0YSA9IHJlYWRlci5yZXN1bHQ/LnRvU3RyaW5nKCkgfHwgJyc7XG4gICAgICAgICAgICAgIC8vIFF1aXRhciBlbCBwcmVmaWpvIChlai4gXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiKVxuICAgICAgICAgICAgICBjb25zdCBiYXNlNjRDbGVhbiA9IGJhc2U2NGRhdGEuc3BsaXQoJywnKVsxXTtcbiAgICAgICAgICAgICAgYXR0YWNobWVudC5kYXRhID0gYmFzZTY0Q2xlYW47XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWdyZWdhciBhIGxhIGxpc3RhIGRlIGFkanVudG9zXG4gICAgICAgICAgYXR0YWNobWVudHNXaXRoSWRzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSW5pY2lhciBzdWJpZGEgZW4gc2VndW5kbyBwbGFub1xuICAgICAgICAgIHVwbG9hZExhcmdlRmlsZVRvU2VydmVyKGF0dGFjaG1lbnQpLnRoZW4oZmlsZUlkID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlSWQpIHtcbiAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBhdHRhY2htZW50IGNvbiBlbCBmaWxlSWRcbiAgICAgICAgICAgICAgYXR0YWNobWVudC5maWxlSWQgPSBmaWxlSWQ7XG4gICAgICAgICAgICAgIGF0dGFjaG1lbnQuaXNMYXJnZUZpbGUgPSB0cnVlO1xuICAgICAgICAgICAgICBhdHRhY2htZW50LmRhdGEgPSB1bmRlZmluZWQ7IC8vIEVsaW1pbmFyIGxvcyBkYXRvcyBiaW5hcmlvc1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBwcm9ncmVzbyBhIDEwMCVcbiAgICAgICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCB0ZW1wSWQsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdWJpZW5kbyBhcmNoaXZvOicsIGVycm9yKTtcbiAgICAgICAgICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCwgdGVtcElkLCB7IHByb2dyZXNzOiAwLCBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRXJyb3IgYWwgc3ViaXIgZWwgYXJjaGl2bycgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUGFyYSBhcmNoaXZvcyBwZXF1ZcOxb3MgKDw1TUIpLCBsZWVybG9zIGNvbW8gYmFzZTY0IHkgZW52aWFyIGNvbiBlbCBtZW5zYWplXG4gICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChzZWxlY3RlZEZpbGUpO1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gcmVhZGVyLnJlc3VsdD8udG9TdHJpbmcoKSB8fCAnJztcbiAgICAgICAgICAgICAgLy8gUXVpdGFyIGVsIHByZWZpam8gKGVqLiBcImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsXCIpXG4gICAgICAgICAgICAgIGNvbnN0IGJhc2U2NENsZWFuID0gYmFzZTY0ZGF0YS5zcGxpdCgnLCcpWzFdO1xuICAgICAgICAgICAgICBhdHRhY2htZW50LmRhdGEgPSBiYXNlNjRDbGVhbjtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ3JlZ2FyIGEgbGEgbGlzdGEgZGUgYWRqdW50b3NcbiAgICAgICAgICBhdHRhY2htZW50c1dpdGhJZHMucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYXJjYXIgY29tbyBjb21wbGV0YWRvIHRhbWJpw6luIHBhcmEgYXJjaGl2b3MgcGVxdWXDsW9zXG4gICAgICAgICAgdXBkYXRlVXBsb2FkaW5nRmlsZXMoY2hhdElkLCB0ZW1wSWQsIHsgcHJvZ3Jlc3M6IDEwMCwgZXJyb3I6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcmVwYXJhciBkYXRvcyBkZWwgbWVuc2FqZVxuICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGF0dGFjaG1lbnRzOiBhdHRhY2htZW50c1dpdGhJZHMsXG4gICAgICAgIC4uLihhY3RpdmVDaGF0LnR5cGUgPT09ICdwcml2YXRlJyA/IHsgcmVjaXBpZW50SWQ6IGFjdGl2ZUNoYXQuaWQgfSA6IHsgcm9vbUlkOiBhY3RpdmVDaGF0LmlkIH0pLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0VudmlhbmRvIG1lbnNhamU6JywgbWVzc2FnZURhdGEpO1xuICAgICAgXG4gICAgICAvLyBFbnZpYXIgZWwgbWVuc2FqZSBhIHRyYXbDqXMgZGVsIHNvY2tldFxuICAgICAgc29ja2V0UmVmLmN1cnJlbnQuZW1pdCgnc2VuZF9tZXNzYWdlJywgbWVzc2FnZURhdGEsIChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZXNwdWVzdGEgYWwgZW52aWFyIG1lbnNhamU6JywgcmVzcG9uc2UpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlbnZpYXIgbWVuc2FqZTonLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBMaW1waWFyIGZvcm11bGFyaW8gZGVzcHXDqXMgZGUgZW52aWFyXG4gICAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIHNldFNlbGVjdGVkRmlsZShudWxsKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBwcm9jZXNhciBtZW5zYWplOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBjcmVhdGVSb29tID0gYXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb24gPSAnJywgaXNQcml2YXRlID0gZmFsc2UsIG1lbWJlcnM6IHN0cmluZ1tdID0gW10pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KGAke0FQSV9VUkx9L3Jvb21zYCwge1xuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgaXNQcml2YXRlLFxuICAgICAgICBtZW1iZXJzLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE5vIG5lZWQgdG8gbWFudWFsbHkgYWRkIHRvIHJvb21zIGFycmF5LCB0aGUgc29ja2V0IGV2ZW50IHdpbGwgaGFuZGxlIGl0XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCB1cGRhdGVSb29tID0gYXN5bmMgKHJvb21JZDogc3RyaW5nLCB1cGRhdGVEYXRhOiB7IG5hbWU/OiBzdHJpbmc7IGRlc2NyaXB0aW9uPzogc3RyaW5nOyBpbWFnZT86IHN0cmluZzsgaXNQcml2YXRlPzogYm9vbGVhbiB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucHV0KGAke0FQSV9VUkx9L3Jvb21zLyR7cm9vbUlkfWAsIHVwZGF0ZURhdGEpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHJvb20gaW4gdGhlIGxvY2FsIHN0YXRlIHRvIGltbWVkaWF0ZWx5IHJlZmxlY3QgY2hhbmdlc1xuICAgICAgc2V0Um9vbXMocHJldlJvb21zID0+IFxuICAgICAgICBwcmV2Um9vbXMubWFwKHJvb20gPT4gXG4gICAgICAgICAgcm9vbS5faWQgPT09IHJvb21JZCA/IHsgLi4ucm9vbSwgLi4uZGF0YSB9IDogcm9vbVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBqb2luUm9vbSA9IGFzeW5jIChyb29tSWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VyICYmICF1c2VySWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gSWYgdXNlcklkIGlzIHByb3ZpZGVkLCB1c2UgaXQgKGZvciBhZG1pbiBhZGRpbmcgb3RoZXJzKVxuICAgICAgLy8gT3RoZXJ3aXNlIHVzZSBjdXJyZW50IHVzZXIncyBJRCAoZm9yIHNlbGYtam9pbmluZylcbiAgICAgIGNvbnN0IHRhcmdldFVzZXJJZCA9IHVzZXJJZCB8fCB1c2VyIS5pZDtcbiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoYCR7QVBJX1VSTH0vcm9vbXMvJHtyb29tSWR9L21lbWJlcnMvJHt0YXJnZXRVc2VySWR9YCk7XG4gICAgICAvLyBSb29tIHVwZGF0ZSB3aWxsIGJlIGhhbmRsZWQgYnkgc29ja2V0IGV2ZW50XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBsZWF2ZVJvb20gPSBhc3luYyAocm9vbUlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZykgPT4ge1xuICAgIGlmICghdXNlciAmJiAhdXNlcklkKSByZXR1cm47XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHVzZXJJZCBpcyBwcm92aWRlZCwgdXNlIGl0IChmb3IgYWRtaW4gcmVtb3Zpbmcgb3RoZXJzKVxuICAgICAgLy8gT3RoZXJ3aXNlIHVzZSBjdXJyZW50IHVzZXIncyBJRCAoZm9yIHNlbGYtbGVhdmluZylcbiAgICAgIGNvbnN0IHRhcmdldFVzZXJJZCA9IHVzZXJJZCB8fCB1c2VyIS5pZDtcbiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtBUElfVVJMfS9yb29tcy8ke3Jvb21JZH0vbWVtYmVycy8ke3RhcmdldFVzZXJJZH1gKTtcbiAgICAgIC8vIFJvb20gdXBkYXRlIHdpbGwgYmUgaGFuZGxlZCBieSBzb2NrZXQgZXZlbnRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGVhdmluZyByb29tOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgXG4gIGNvbnN0IHNldFR5cGluZyA9IChpc1R5cGluZzogYm9vbGVhbikgPT4ge1xuICAgIGlmICghYWN0aXZlQ2hhdCB8fCAhc29ja2V0UmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0eXBpbmdEYXRhID0ge1xuICAgICAgaXNUeXBpbmcsXG4gICAgICAuLi4oYWN0aXZlQ2hhdC50eXBlID09PSAncHJpdmF0ZScgPyB7IHJlY2lwaWVudElkOiBhY3RpdmVDaGF0LmlkIH0gOiB7IHJvb21JZDogYWN0aXZlQ2hhdC5pZCB9KSxcbiAgICB9O1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ3R5cGluZycsIHR5cGluZ0RhdGEpO1xuICB9O1xuICBcbiAgY29uc3QgY2xlYXJDaGF0SGlzdG9yeSA9IGFzeW5jIChyZWNpcGllbnRJZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKGAke0FQSV9VUkx9L2NoYXRzL2RpcmVjdC8ke3JlY2lwaWVudElkfWApO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0NoYXQgaGlzdG9yeSBjbGVhcmVkIHN1Y2Nlc3NmdWxseScgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYXJpbmcgY2hhdCBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGNsZWFyIGNoYXQgaGlzdG9yeScgfTtcbiAgICB9XG4gIH07XG4gIFxuICAvLyBJbXBsZW1lbnRhY2nDs24gZGUgcmV0cnlGaWxlVXBsb2FkXG4gIGNvbnN0IHJldHJ5RmlsZVVwbG9hZCA9IChmaWxlOiBGaWxlQXR0YWNobWVudCkgPT4ge1xuICAgIGlmICghZmlsZS50ZW1wSWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBSZXNldCBwcm9ncmVzc1xuICAgIGNvbnN0IGNoYXRJZCA9IGAke2FjdGl2ZUNoYXQ/LnR5cGV9LSR7YWN0aXZlQ2hhdD8uaWR9YDtcbiAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBmaWxlLnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IDAsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgXG4gICAgLy8gUHJlcGFyZSBmb3IgcmUtdXBsb2FkXG4gICAgaWYgKGZpbGUuZGF0YSkge1xuICAgICAgLy8gRXMgdW4gYXJjaGl2byB5YSBjb252ZXJ0aWRvIGEgYmFzZTY0XG4gICAgICB1cGxvYWRMYXJnZUZpbGVUb1NlcnZlcihmaWxlKTtcbiAgICB9IGVsc2UgaWYgKGZpbGUuZmlsZUlkKSB7XG4gICAgICAvLyBSZW1vdmVyIGVsIGVycm9yIHBlcm8gbWFudGVuZXIgZWwgcHJvZ3Jlc28gY29tbyBjb21wbGV0YWRvXG4gICAgICAvLyB5YSBxdWUgZWwgYXJjaGl2byB5YSBlc3TDoSBzdWJpZG9cbiAgICAgIHVwZGF0ZVVwbG9hZGluZ0ZpbGVzKGNoYXRJZCEsIGZpbGUudGVtcElkISwgeyBwcm9ncmVzczogMTAwLCBlcnJvcjogdW5kZWZpbmVkIH0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEZ1bmNpw7NuIGF1eGlsaWFyIHBhcmEgc3ViaXIgdW4gYXJjaGl2byBncmFuZGUgZGlyZWN0YW1lbnRlIGFsIHNlcnZpZG9yXG4gIGNvbnN0IHVwbG9hZExhcmdlRmlsZVRvU2VydmVyID0gYXN5bmMgKGF0dGFjaG1lbnQ6IEZpbGVBdHRhY2htZW50KTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiA9PiB7XG4gICAgaWYgKCFhdHRhY2htZW50LnRlbXBJZCkge1xuICAgICAgYXR0YWNobWVudC50ZW1wSWQgPSBgdGVtcC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWA7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0aXIgZGF0b3MgYmFzZTY0IGEgQmxvYiBwYXJhIHN1YmlyXG4gICAgICBjb25zdCBiYXNlNjREYXRhID0gYXR0YWNobWVudC5kYXRhIHx8ICcnO1xuICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGJhc2U2NERhdGEpO1xuICAgICAgY29uc3QgYnl0ZUFycmF5cyA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IG9mZnNldCArPSA1MTIpIHtcbiAgICAgICAgY29uc3Qgc2xpY2UgPSBieXRlQ2hhcmFjdGVycy5zbGljZShvZmZzZXQsIG9mZnNldCArIDUxMik7XG4gICAgICAgIGNvbnN0IGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KHNsaWNlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IHNsaWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xuICAgICAgICBieXRlQXJyYXlzLnB1c2goYnl0ZUFycmF5KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKGJ5dGVBcnJheXMsIHsgdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSB9KTtcbiAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIGF0dGFjaG1lbnQuZmlsZW5hbWUsIHsgdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgRm9ybURhdGEgcGFyYSBsYSBzdWJpZGFcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgIFxuICAgICAgLy8gSW5pY2lhciBsYSBjYXJnYSB5IGFjdHVhbGl6YXIgZWwgZXN0YWRvXG4gICAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0Py50eXBlfS0ke2FjdGl2ZUNoYXQ/LmlkfWA7XG4gICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IDAsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlYWxpemFyIGxhIHN1YmlkYSBjb24gc2VndWltaWVudG8gZGUgcHJvZ3Jlc29cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgJHtBUElfVVJMfS9maWxlLXN0b3JhZ2UvdXBsb2FkYCwgZm9ybURhdGEsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGxvYWRQcm9ncmVzczogKHByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCBwZXJjZW50Q29tcGxldGVkID0gcHJvZ3Jlc3NFdmVudC50b3RhbCBcbiAgICAgICAgICAgID8gTWF0aC5yb3VuZCgocHJvZ3Jlc3NFdmVudC5sb2FkZWQgKiAxMDApIC8gcHJvZ3Jlc3NFdmVudC50b3RhbClcbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm9ncmVzbyBkZSBzdWJpZGEgcGFyYSAke2F0dGFjaG1lbnQudGVtcElkfTogJHtwZXJjZW50Q29tcGxldGVkfSVgKTtcbiAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgcHJvZ3Jlc3M6IHBlcmNlbnRDb21wbGV0ZWQsIGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBoYSB0ZXJtaW5hZG8gZGUgY2FyZ2Fyc2UgKDEwMCUpLCBsbyBlbGltaW5hbW9zIGRlIGxhIGxpc3RhIGRlc3B1w6lzIGRlIHVuIHNlZ3VuZG9cbiAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlZCA9PT0gMTAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgU3ViaWRhIGNvbXBsZXRhZGEgcGFyYSAke2F0dGFjaG1lbnQudGVtcElkfSwgZWxpbWluYW5kbyBlbiAxIHNlZ3VuZG9gKTtcbiAgICAgICAgICAgIC8vIEVzcGVyYXIgdW4gc2VndW5kbyBwYXJhIHF1ZSBlbCB1c3VhcmlvIHZlYSBxdWUgc2UgY29tcGxldMOzIHkgbHVlZ28gZWxpbWluYXJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIG51bGwpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5maWxlSWQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZmlsZUlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgc3ViaXIgYXJjaGl2bzonLCBlcnJvcik7XG4gICAgICBjb25zdCBjaGF0SWQgPSBgJHthY3RpdmVDaGF0Py50eXBlfS0ke2FjdGl2ZUNoYXQ/LmlkfWA7XG4gICAgICB1cGRhdGVVcGxvYWRpbmdGaWxlcyhjaGF0SWQhLCBhdHRhY2htZW50LnRlbXBJZCEsIHsgXG4gICAgICAgIHByb2dyZXNzOiAwLCBcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGFsIHN1YmlyIGVsIGFyY2hpdm8nXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIEVzdGEgZnVuY2nDs24gc2UgZW5jYXJnYSBkZSBtYXJjYXIgdW4gbWVuc2FqZSBjb21vIGxlw61kb1xuICBjb25zdCBoYW5kbGVNYXJrQXNSZWFkID0gKG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzb2NrZXRSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIFxuICAgIHNvY2tldFJlZi5jdXJyZW50LmVtaXQoJ21hcmtfbWVzc2FnZV9yZWFkJywgeyBtZXNzYWdlSWQgfSk7XG4gICAgXG4gICAgLy8gQWN0dWFsaXphciBlbCBlc3RhZG8gZGUgbWVuc2FqZXMgbG9jYWxtZW50ZVxuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gXG4gICAgICBwcmV2Lm1hcChtc2cgPT4gXG4gICAgICAgIG1zZy5faWQgPT09IG1lc3NhZ2VJZCA/IHsgLi4ubXNnLCBpc1JlYWQ6IHRydWUgfSA6IG1zZ1xuICAgICAgKVxuICAgICk7XG4gIH07XG4gIFxuICAvLyBFc3RhIGZ1bmNpw7NuIGNhcmdhIG3DoXMgbWVuc2FqZXMgcGFyYSBsYSBwYWdpbmFjacOzblxuICBjb25zdCBmZXRjaE1vcmVNZXNzYWdlcyA9IGFzeW5jIChwYWdlOiBudW1iZXIpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUNoYXQgfHwgIXVzZXIgfHwgIWlzQXV0aGVudGljYXRlZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgZW5kcG9pbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGFjdGl2ZUNoYXQudHlwZSA9PT0gJ3ByaXZhdGUnKSB7XG4gICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvZGlyZWN0LyR7YWN0aXZlQ2hhdC5pZH0/cGFnZT0ke3BhZ2V9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuZHBvaW50ID0gYCR7QVBJX1VSTH0vY2hhdHMvcm9vbS8ke2FjdGl2ZUNoYXQuaWR9P3BhZ2U9JHtwYWdlfWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGVuZHBvaW50KTtcbiAgICAgIFxuICAgICAgLy8gQcOxYWRpciBsb3MgbWVuc2FqZXMgYW50ZXJpb3JlcyBhbCBpbmljaW8gZGVsIGFycmF5IGRlIG1lbnNhamVzXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5yZXNwb25zZS5kYXRhLCAuLi5wcmV2XSk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmxlbmd0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY2FyZ2FyIG3DoXMgbWVuc2FqZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgZGVsZXRlTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlSWQ6IHN0cmluZywgZGVsZXRlRm9yRXZlcnlvbmU6IGJvb2xlYW4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoYCR7QVBJX1VSTH0vY2hhdHMvbWVzc2FnZS8ke21lc3NhZ2VJZH1gLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGRlbGV0ZUZvckV2ZXJ5b25lLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gRWxpbWluYXIgZWwgbWVuc2FqZSBkZWwgZXN0YWRvIGxvY2FsXG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5maWx0ZXIobXNnID0+IG1zZy5faWQgIT09IG1lc3NhZ2VJZCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZWxpbWluYXIgbWVuc2FqZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICBcbiAgcmV0dXJuIChcbiAgICA8Q2hhdENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tcbiAgICAgIGFjdGl2ZUNoYXQsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHJvb21zLFxuICAgICAgb25saW5lVXNlcnMsXG4gICAgICB1c2VycyxcbiAgICAgIHR5cGluZ1VzZXJzLFxuICAgICAgaXNMb2FkaW5nLFxuICAgICAgaXNMb2FkaW5nTWVzc2FnZXMsXG4gICAgICB1bnJlYWRNZXNzYWdlcyxcbiAgICAgIHVwbG9hZGluZ0ZpbGVzLFxuICAgICAgc2V0QWN0aXZlQ2hhdDogaGFuZGxlQWN0aXZlQ2hhdENoYW5nZSxcbiAgICAgIHNlbmRNZXNzYWdlLFxuICAgICAgbWFya0FzUmVhZDogaGFuZGxlTWFya0FzUmVhZCxcbiAgICAgIHN0YXJ0VHlwaW5nOiAoKSA9PiBzZXRUeXBpbmcodHJ1ZSksXG4gICAgICBzdG9wVHlwaW5nOiAoKSA9PiBzZXRUeXBpbmcoZmFsc2UpLFxuICAgICAgbG9hZE1vcmVNZXNzYWdlczogZmV0Y2hNb3JlTWVzc2FnZXMsXG4gICAgICByZXRyeUZpbGVVcGxvYWQsXG4gICAgICBjYW5jZWxGaWxlVXBsb2FkLFxuICAgICAgZGVsZXRlTWVzc2FnZSxcbiAgICB9fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0NoYXRDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJpbyIsImF4aW9zIiwidXNlQXV0aCIsIkZpbGVUeXBlIiwiQ2hhdENvbnRleHQiLCJhY3RpdmVDaGF0IiwibWVzc2FnZXMiLCJyb29tcyIsIm9ubGluZVVzZXJzIiwidXNlcnMiLCJ0eXBpbmdVc2VycyIsImlzTG9hZGluZyIsImlzTG9hZGluZ01lc3NhZ2VzIiwidW5yZWFkTWVzc2FnZXMiLCJ1cGxvYWRpbmdGaWxlcyIsInNldEFjdGl2ZUNoYXQiLCJzZW5kTWVzc2FnZSIsIm1hcmtBc1JlYWQiLCJzdGFydFR5cGluZyIsInN0b3BUeXBpbmciLCJsb2FkTW9yZU1lc3NhZ2VzIiwicmV0cnlGaWxlVXBsb2FkIiwiY2FuY2VsRmlsZVVwbG9hZCIsImRlbGV0ZU1lc3NhZ2UiLCJ1c2VDaGF0IiwiQ2hhdFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwic2V0TWVzc2FnZXMiLCJzZXRSb29tcyIsInNldFVzZXJzIiwic2V0T25saW5lVXNlcnMiLCJzZXRUeXBpbmdVc2VycyIsInNldElzTG9hZGluZyIsInNldElzTG9hZGluZ01lc3NhZ2VzIiwic29ja2V0Q29ubmVjdGVkIiwic2V0U29ja2V0Q29ubmVjdGVkIiwic2V0VW5yZWFkTWVzc2FnZXMiLCJ1cGxvYWRpbmdGaWxlc0J5Q2hhdCIsInNldFVwbG9hZGluZ0ZpbGVzQnlDaGF0Iiwic2VsZWN0ZWRGaWxlIiwic2V0U2VsZWN0ZWRGaWxlIiwiY2hhdElkIiwidHlwZSIsImlkIiwidXBkYXRlVXBsb2FkaW5nRmlsZXMiLCJmaWxlSWQiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInByZXYiLCJuZXdTdGF0ZSIsIl8iLCJyZXN0RmlsZXMiLCJwcm9ncmVzcyIsImZpbGUiLCJ0ZW1wSWQiLCJzb2NrZXRSZWYiLCJjdXJyZW50QWN0aXZlQ2hhdFJlZiIsImZpbGVJbnB1dFJlZiIsImN1cnJlbnQiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJkaXNjb25uZWN0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXV0aCIsIndpdGhDcmVkZW50aWFscyIsInRpbWVvdXQiLCJvbiIsIm1lc3NhZ2UiLCJjaGF0S2V5Iiwicm9vbSIsInNlbmRlciIsIl9pZCIsInJlY2lwaWVudCIsInVzZXJJZCIsImlzT25saW5lIiwic2VuZGVySWQiLCJyb29tSWQiLCJpc1R5cGluZyIsInVzZXJOYW1lIiwibWVzc2FnZUlkIiwibWFwIiwibXNnIiwiaXNSZWFkIiwiZXhpc3RzIiwic29tZSIsInIiLCJyZW1vdmVkIiwiZmlsdGVyIiwiZGVsZXRlRm9yRXZlcnlvbmUiLCJmZXRjaEluaXRpYWxEYXRhIiwidXNlcnNSZXNwb25zZSIsInJvb21zUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZ2V0IiwiaW5pdGlhbE9ubGluZVN0YXR1cyIsImZvckVhY2giLCJlcnJvciIsImVtaXQiLCJ1bnJlYWRDb3VudHMiLCJvZmYiLCJjaGF0VHlwZSIsImhhbmRsZUFjdGl2ZUNoYXRDaGFuZ2UiLCJjaGF0IiwiaGFzQ29tcGxldGVkVXBsb2FkcyIsIk9iamVjdCIsInZhbHVlcyIsInN0YXR1cyIsImZldGNoTWVzc2FnZXMiLCJlbmRwb2ludCIsInJlc3BvbnNlIiwibGVuZ3RoIiwiY2xlYW51cEludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJoYXNDaGFuZ2VzIiwia2V5cyIsImNsZWFySW50ZXJ2YWwiLCJjb250ZW50IiwiYXR0YWNobWVudHNXaXRoSWRzIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImZpbGVUeXBlIiwiZmlsZVR5cGVTdHJpbmciLCJzdGFydHNXaXRoIiwiYXR0YWNobWVudCIsImZpbGVuYW1lIiwibmFtZSIsImNvbnRlbnRUeXBlIiwic2l6ZSIsInVuZGVmaW5lZCIsImlzTGFyZ2VGaWxlIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJyZXNvbHZlIiwib25sb2FkIiwiYmFzZTY0ZGF0YSIsInJlc3VsdCIsImJhc2U2NENsZWFuIiwic3BsaXQiLCJwdXNoIiwidXBsb2FkTGFyZ2VGaWxlVG9TZXJ2ZXIiLCJ0aGVuIiwiY2F0Y2giLCJtZXNzYWdlRGF0YSIsImF0dGFjaG1lbnRzIiwicmVjaXBpZW50SWQiLCJzdWNjZXNzIiwidmFsdWUiLCJjcmVhdGVSb29tIiwiZGVzY3JpcHRpb24iLCJpc1ByaXZhdGUiLCJtZW1iZXJzIiwicG9zdCIsInVwZGF0ZVJvb20iLCJ1cGRhdGVEYXRhIiwicHV0IiwicHJldlJvb21zIiwiam9pblJvb20iLCJ0YXJnZXRVc2VySWQiLCJsZWF2ZVJvb20iLCJkZWxldGUiLCJzZXRUeXBpbmciLCJ0eXBpbmdEYXRhIiwiY2xlYXJDaGF0SGlzdG9yeSIsImJhc2U2NERhdGEiLCJieXRlQ2hhcmFjdGVycyIsImF0b2IiLCJieXRlQXJyYXlzIiwib2Zmc2V0Iiwic2xpY2UiLCJieXRlTnVtYmVycyIsIkFycmF5IiwiaSIsImNoYXJDb2RlQXQiLCJieXRlQXJyYXkiLCJVaW50OEFycmF5IiwiYmxvYiIsIkJsb2IiLCJGaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsImhlYWRlcnMiLCJvblVwbG9hZFByb2dyZXNzIiwicHJvZ3Jlc3NFdmVudCIsInBlcmNlbnRDb21wbGV0ZWQiLCJ0b3RhbCIsInJvdW5kIiwibG9hZGVkIiwic2V0VGltZW91dCIsImhhbmRsZU1hcmtBc1JlYWQiLCJmZXRjaE1vcmVNZXNzYWdlcyIsInBhZ2UiLCJwYXJhbXMiLCJQcm92aWRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/contexts/ChatContext.tsx\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contexts/AuthContext */ \"./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contexts/ChatContext */ \"./src/contexts/ChatContext.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__]);\n([_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__, _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_auth_react__WEBPACK_IMPORTED_MODULE_2__.SessionProvider, {\n        session: pageProps.session,\n        refetchInterval: 0,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_4__.ChatProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                    ...pageProps\n                }, void 0, false, {\n                    fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n                lineNumber: 14,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n            lineNumber: 13,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/edgardurand/Documents/REPOS/chat/packages/web/src/pages/_app.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2FwcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErQjtBQUVtQjtBQUNLO0FBQ0E7QUFFdkQsU0FBU0csTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBWTtJQUMvQyxxQkFDRSw4REFBQ0wsNERBQWVBO1FBQ2RNLFNBQVNELFVBQVVDLE9BQU87UUFDMUJDLGlCQUFpQjtrQkFFakIsNEVBQUNOLCtEQUFZQTtzQkFDWCw0RUFBQ0MsK0RBQVlBOzBCQUNYLDRFQUFDRTtvQkFBVyxHQUFHQyxTQUFTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbEM7QUFFQSxpRUFBZUYsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9wYWdlcy9fYXBwLnRzeD9mOWQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJztcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyBTZXNzaW9uUHJvdmlkZXIgfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IHsgQXV0aFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgQ2hhdFByb3ZpZGVyIH0gZnJvbSAnLi4vY29udGV4dHMvQ2hhdENvbnRleHQnO1xuXG5mdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IEFwcFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPFNlc3Npb25Qcm92aWRlciBcbiAgICAgIHNlc3Npb249e3BhZ2VQcm9wcy5zZXNzaW9ufVxuICAgICAgcmVmZXRjaEludGVydmFsPXswfSAvLyBEaXNhYmxlIGF1dG9tYXRpYyByZWZldGNoaW5nXG4gICAgPlxuICAgICAgPEF1dGhQcm92aWRlcj5cbiAgICAgICAgPENoYXRQcm92aWRlcj5cbiAgICAgICAgICA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG4gICAgICAgIDwvQ2hhdFByb3ZpZGVyPlxuICAgICAgPC9BdXRoUHJvdmlkZXI+XG4gICAgPC9TZXNzaW9uUHJvdmlkZXI+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE15QXBwO1xuIl0sIm5hbWVzIjpbIlNlc3Npb25Qcm92aWRlciIsIkF1dGhQcm92aWRlciIsIkNoYXRQcm92aWRlciIsIk15QXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIiwic2Vzc2lvbiIsInJlZmV0Y2hJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("axios");;

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./src/pages/_app.tsx")));
module.exports = __webpack_exports__;

})();